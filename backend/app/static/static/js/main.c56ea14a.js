/*! For license information please see main.c56ea14a.js.LICENSE.txt */
(()=>{var e={191:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var i=Symbol.for("react.consumer"),g=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),C=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function A(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case a:case l:case c:case d:case C:return e;default:switch(e=e&&e.$$typeof){case g:case s:case u:case I:case i:return e;default:return t}}case o:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===a||e===l||e===c||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===u||e.$$typeof===I||e.$$typeof===g||e.$$typeof===i||e.$$typeof===s||e.$$typeof===p||void 0!==e.getModuleId)}},219:(e,t,n)=>{"use strict";var o=n(3763),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function g(e){return o.isMemo(e)?a:i[e.$$typeof]||r}i[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[o.Memo]=a;var s=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,I=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,C=Object.prototype;e.exports=function e(t,n,o){if("string"!==typeof n){if(C){var r=u(n);r&&r!==C&&e(t,r,o)}var a=c(n);d&&(a=a.concat(d(n)));for(var i=g(t),p=g(n),A=0;A<a.length;++A){var m=a[A];if(!l[m]&&(!o||!o[m])&&(!p||!p[m])&&(!i||!i[m])){var h=I(n,m);try{s(t,m,h)}catch(b){}}}}return t}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(2284);function r(e){var t=function(e,t){if("object"!=(0,o.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,o.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,o.A)(t)?t:t+""}},1153:(e,t,n)=>{"use strict";var o=n(5043),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var o,l={},s=null,c=null;for(o in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,o)&&!g.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:r,type:e,key:s,ref:c,props:l,_owner:i.current}}t.Fragment=l,t.jsx=s,t.jsxs=s},1497:(e,t,n)=>{"use strict";var o=n(3218);function r(){}function l(){}l.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,l,a){if(a!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:r};return n.PropTypes=n,n}},2284:(e,t,n)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}n.d(t,{A:()=>o})},2330:(e,t,n)=>{"use strict";var o=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},l=o.useState,a=o.useEffect,i=o.useLayoutEffect,g=o.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(o){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=l({inst:{value:n,getSnapshot:t}}),r=o[0].inst,c=o[1];return i((function(){r.value=n,r.getSnapshot=t,s(r)&&c({inst:r})}),[e,n,t]),a((function(){return s(r)&&c({inst:r}),e((function(){s(r)&&c({inst:r})}))}),[e]),g(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:c},2730:(e,t,n)=>{"use strict";var o=n(5043),r=n(8853);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,i={};function g(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(i[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},C={};function p(e,t,n,o,r,l,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){A[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];A[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){A[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){A[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){A[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){A[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){A[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){A[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){A[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function h(e){return e[1].toUpperCase()}function b(e,t,n,o){var r=A.hasOwnProperty(t)?A[t]:null;(null!==r?0!==r.type:o||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,o){if(null===t||"undefined"===typeof t||function(e,t,n,o){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,o))return!0;if(o)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,o)&&(n=null),o||null===r?function(e){return!!d.call(C,e)||!d.call(u,e)&&(I.test(e)?C[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,o=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,h);A[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,h);A[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,h);A[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){A[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),A.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){A[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var f=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),v=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),w=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var J=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=J&&e[J]||e["@@iterator"])?e:null}var H,F=Object.assign;function Y(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var K=!1;function M(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var o=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){o=s}e.call(t.prototype)}else{try{throw Error()}catch(s){o=s}e()}}catch(s){if(s&&o&&"string"===typeof s.stack){for(var r=s.stack.split("\n"),l=o.stack.split("\n"),a=r.length-1,i=l.length-1;1<=a&&0<=i&&r[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(r[a]!==l[i]){if(1!==a||1!==i)do{if(a--,0>--i||r[a]!==l[i]){var g="\n"+r[a].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=a&&0<=i);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Y(e):""}function L(e){switch(e.tag){case 5:return Y(e.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function E(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case Z:return"Fragment";case v:return"Portal";case S:return"Profiler";case G:return"StrictMode";case W:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case w:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case V:return null!==(t=e.displayName||null)?t:E(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return E(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(t);case 8:return t===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function D(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function T(e){e._valueTracker||(e._valueTracker=function(e){var t=D(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){o=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function P(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=D(e)?e.checked?"true":"false":e.value),(e=o)!==n&&(t.setValue(e),!0)}function U(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function O(e,t){var n=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function _(e,t){q(e,t);var n=j(t.value),o=t.type;if(null!=n)"number"===o?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&U(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(o&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(l(92));if(te(n)){if(1<n.length)throw Error(l(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function le(e,t){var n=j(t.value),o=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=o&&(e.defaultValue=""+o)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,o){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function Ie(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ue.hasOwnProperty(e)&&ue[e]?(""+t).trim():t+"px"}function Ae(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var o=0===n.indexOf("--"),r=pe(n,t[n],o);"float"===n&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}Object.keys(ue).forEach((function(e){Ce.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ue[t]=ue[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function he(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ve=null,Ze=null,Ge=null;function Se(e){if(e=fr(e)){if("function"!==typeof ve)throw Error(l(280));var t=e.stateNode;t&&(t=vr(t),ve(e.stateNode,e.type,t))}}function Be(e){Ze?Ge?Ge.push(e):Ge=[e]:Ze=e}function we(){if(Ze){var e=Ze,t=Ge;if(Ge=Ze=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Re(e,t){return e(t)}function We(){}var ke=!1;function Ve(e,t,n){if(ke)return e(t,n);ke=!0;try{return Re(e,t,n)}finally{ke=!1,(null!==Ze||null!==Ge)&&(We(),we())}}function Xe(e,t){var n=e.stateNode;if(null===n)return null;var o=vr(n);if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(l(231,t,typeof n));return n}var xe=!1;if(c)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch(ce){xe=!1}function Ne(e,t,n,o,r,l,a,i,g){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(c){this.onError(c)}}var He=!1,Fe=null,Ye=!1,Ke=null,Me={onError:function(e){He=!0,Fe=e}};function Le(e,t,n,o,r,l,a,i,g){He=!1,Fe=null,Ne.apply(Me,arguments)}function Ee(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(Ee(e)!==e)throw Error(l(188))}function De(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ee(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(o=r.return)){n=o;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return je(r),e;if(a===o)return je(r),t;a=a.sibling}throw Error(l(188))}if(n.return!==o.return)n=r,o=a;else{for(var i=!1,g=r.child;g;){if(g===n){i=!0,n=r,o=a;break}if(g===o){i=!0,o=r,n=a;break}g=g.sibling}if(!i){for(g=a.child;g;){if(g===n){i=!0,n=a,o=r;break}if(g===o){i=!0,o=a,n=r;break}g=g.sibling}if(!i)throw Error(l(189))}}if(n.alternate!==o)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(e))?Te(e):null}function Te(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Te(e);if(null!==t)return t;e=e.sibling}return null}var Pe=r.unstable_scheduleCallback,Ue=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,Oe=r.unstable_requestPaint,qe=r.unstable_now,_e=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,ot=r.unstable_IdlePriority,rt=null,lt=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/gt|0)|0},it=Math.log,gt=Math.LN2;var st=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function It(e,t){var n=e.pendingLanes;if(0===n)return 0;var o=0,r=e.suspendedLanes,l=e.pingedLanes,a=268435455&n;if(0!==a){var i=a&~r;0!==i?o=dt(i):0!==(l&=a)&&(o=dt(l))}else 0!==(a=n&~r)?o=dt(a):0!==l&&(o=dt(l));if(0===o)return 0;if(0!==t&&t!==o&&0===(t&r)&&((r=o&-o)>=(l=t&-t)||16===r&&0!==(4194240&l)))return t;if(0!==(4&o)&&(o|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)r=1<<(n=31-at(t)),o|=e[n],t&=~r;return o}function ut(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=st;return 0===(4194240&(st<<=1))&&(st=64),e}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function ht(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-at(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var bt=0;function ft(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var yt,vt,Zt,Gt,St,Bt=!1,wt=[],Rt=null,Wt=null,kt=null,Vt=new Map,Xt=new Map,xt=[],Jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Vt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xt.delete(t.pointerId)}}function Ht(e,t,n,o,r,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:l,targetContainers:[r]},null!==t&&(null!==(t=fr(t))&&vt(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=br(e.target);if(null!==t){var n=Ee(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){Zt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=fr(n))&&vt(t),e.blockedOn=n,!1;var o=new(n=e.nativeEvent).constructor(n.type,n);fe=o,n.target.dispatchEvent(o),fe=null,t.shift()}return!0}function Kt(e,t,n){Yt(e)&&n.delete(t)}function Mt(){Bt=!1,null!==Rt&&Yt(Rt)&&(Rt=null),null!==Wt&&Yt(Wt)&&(Wt=null),null!==kt&&Yt(kt)&&(kt=null),Vt.forEach(Kt),Xt.forEach(Kt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,Bt||(Bt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Mt)))}function Et(e){function t(t){return Lt(t,e)}if(0<wt.length){Lt(wt[0],e);for(var n=1;n<wt.length;n++){var o=wt[n];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==Rt&&Lt(Rt,e),null!==Wt&&Lt(Wt,e),null!==kt&&Lt(kt,e),Vt.forEach(t),Xt.forEach(t),n=0;n<xt.length;n++)(o=xt[n]).blockedOn===e&&(o.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)Ft(n),null===n.blockedOn&&xt.shift()}var zt=f.ReactCurrentBatchConfig,jt=!0;function Dt(e,t,n,o){var r=bt,l=zt.transition;zt.transition=null;try{bt=1,Pt(e,t,n,o)}finally{bt=r,zt.transition=l}}function Tt(e,t,n,o){var r=bt,l=zt.transition;zt.transition=null;try{bt=4,Pt(e,t,n,o)}finally{bt=r,zt.transition=l}}function Pt(e,t,n,o){if(jt){var r=Qt(e,t,n,o);if(null===r)Do(e,t,o,Ut,n),Nt(e,o);else if(function(e,t,n,o,r){switch(t){case"focusin":return Rt=Ht(Rt,e,t,n,o,r),!0;case"dragenter":return Wt=Ht(Wt,e,t,n,o,r),!0;case"mouseover":return kt=Ht(kt,e,t,n,o,r),!0;case"pointerover":var l=r.pointerId;return Vt.set(l,Ht(Vt.get(l)||null,e,t,n,o,r)),!0;case"gotpointercapture":return l=r.pointerId,Xt.set(l,Ht(Xt.get(l)||null,e,t,n,o,r)),!0}return!1}(r,e,t,n,o))o.stopPropagation();else if(Nt(e,o),4&t&&-1<Jt.indexOf(e)){for(;null!==r;){var l=fr(r);if(null!==l&&yt(l),null===(l=Qt(e,t,n,o))&&Do(e,t,o,Ut,n),l===r)break;r=l}null!==r&&o.stopPropagation()}else Do(e,t,o,null,n)}}var Ut=null;function Qt(e,t,n,o){if(Ut=null,null!==(e=br(e=ye(o))))if(null===(t=Ee(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ut=e,null}function Ot(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_e()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var qt=null,_t=null,$t=null;function en(){if($t)return $t;var e,t,n=_t,o=n.length,r="value"in qt?qt.value:qt.textContent,l=r.length;for(e=0;e<o&&n[e]===r[e];e++);var a=o-e;for(t=1;t<=a&&n[o-t]===r[l-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function on(){return!1}function rn(e){function t(t,n,o,r,l){for(var a in this._reactName=t,this._targetInst=o,this.type=n,this.nativeEvent=r,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:on,this.isPropagationStopped=on,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var ln,an,gn,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(sn),dn=F({},sn,{view:0,detail:0}),In=rn(dn),un=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&"mousemove"===e.type?(ln=e.screenX-gn.screenX,an=e.screenY-gn.screenY):an=ln=0,gn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:an}}),Cn=rn(un),pn=rn(F({},un,{dataTransfer:0})),An=rn(F({},dn,{relatedTarget:0})),mn=rn(F({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=F({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(hn),fn=rn(F({},sn,{data:0})),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Zn[e])&&!!t[e]}function Sn(){return Gn}var Bn=F({},dn,{key:function(e){if(e.key){var t=yn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),wn=rn(Bn),Rn=rn(F({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=rn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),kn=rn(F({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=F({},un,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xn=rn(Vn),xn=[9,13,27,32],Jn=c&&"CompositionEvent"in window,Nn=null;c&&"documentMode"in document&&(Nn=document.documentMode);var Hn=c&&"TextEvent"in window&&!Nn,Fn=c&&(!Jn||Nn&&8<Nn&&11>=Nn),Yn=String.fromCharCode(32),Kn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var En=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Dn(e,t,n,o){Be(o),0<(t=Po(t,"onChange")).length&&(n=new cn("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Tn=null,Pn=null;function Un(e){Ko(e,0)}function Qn(e){if(P(yr(e)))return e}function On(e,t){if("change"===e)return t}var qn=!1;if(c){var _n;if(c){var $n="oninput"in document;if(!$n){var eo=document.createElement("div");eo.setAttribute("oninput","return;"),$n="function"===typeof eo.oninput}_n=$n}else _n=!1;qn=_n&&(!document.documentMode||9<document.documentMode)}function to(){Tn&&(Tn.detachEvent("onpropertychange",no),Pn=Tn=null)}function no(e){if("value"===e.propertyName&&Qn(Pn)){var t=[];Dn(t,Pn,e,ye(e)),Ve(Un,t)}}function oo(e,t,n){"focusin"===e?(to(),Pn=n,(Tn=t).attachEvent("onpropertychange",no)):"focusout"===e&&to()}function ro(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Pn)}function lo(e,t){if("click"===e)return Qn(t)}function ao(e,t){if("input"===e||"change"===e)return Qn(t)}var io="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function go(e,t){if(io(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!d.call(t,r)||!io(e[r],t[r]))return!1}return!0}function so(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function co(e,t){var n,o=so(e);for(e=0;o;){if(3===o.nodeType){if(n=e+o.textContent.length,e<=t&&n>=t)return{node:o,offset:t-e};e=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=so(o)}}function Io(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Io(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function uo(){for(var e=window,t=U();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(o){n=!1}if(!n)break;t=U((e=t.contentWindow).document)}return t}function Co(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function po(e){var t=uo(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Io(n.ownerDocument.documentElement,n)){if(null!==o&&Co(n))if(t=o.start,void 0===(e=o.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,l=Math.min(o.start,r);o=void 0===o.end?l:Math.min(o.end,r),!e.extend&&l>o&&(r=o,o=l,l=r),r=co(n,l);var a=co(n,o);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),l>o?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ao=c&&"documentMode"in document&&11>=document.documentMode,mo=null,ho=null,bo=null,fo=!1;function yo(e,t,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fo||null==mo||mo!==U(o)||("selectionStart"in(o=mo)&&Co(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},bo&&go(bo,o)||(bo=o,0<(o=Po(ho,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=mo)))}function vo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zo={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},Go={},So={};function Bo(e){if(Go[e])return Go[e];if(!Zo[e])return e;var t,n=Zo[e];for(t in n)if(n.hasOwnProperty(t)&&t in So)return Go[e]=n[t];return e}c&&(So=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);var wo=Bo("animationend"),Ro=Bo("animationiteration"),Wo=Bo("animationstart"),ko=Bo("transitionend"),Vo=new Map,Xo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(e,t){Vo.set(e,t),g(t,[e])}for(var Jo=0;Jo<Xo.length;Jo++){var No=Xo[Jo];xo(No.toLowerCase(),"on"+(No[0].toUpperCase()+No.slice(1)))}xo(wo,"onAnimationEnd"),xo(Ro,"onAnimationIteration"),xo(Wo,"onAnimationStart"),xo("dblclick","onDoubleClick"),xo("focusin","onFocus"),xo("focusout","onBlur"),xo(ko,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Yo(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,o,r,a,i,g,s){if(Le.apply(this,arguments),He){if(!He)throw Error(l(198));var c=Fe;He=!1,Fe=null,Ye||(Ye=!0,Ke=c)}}(o,t,void 0,e),e.currentTarget=null}function Ko(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var l=void 0;if(t)for(var a=o.length-1;0<=a;a--){var i=o[a],g=i.instance,s=i.currentTarget;if(i=i.listener,g!==l&&r.isPropagationStopped())break e;Yo(r,i,s),l=g}else for(a=0;a<o.length;a++){if(g=(i=o[a]).instance,s=i.currentTarget,i=i.listener,g!==l&&r.isPropagationStopped())break e;Yo(r,i,s),l=g}}}if(Ye)throw e=Ke,Ye=!1,Ke=null,e}function Mo(e,t){var n=t[Ar];void 0===n&&(n=t[Ar]=new Set);var o=e+"__bubble";n.has(o)||(jo(t,e,2,!1),n.add(o))}function Lo(e,t,n){var o=0;t&&(o|=4),jo(n,e,o,t)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function zo(e){if(!e[Eo]){e[Eo]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fo.has(t)||Lo(t,!1,e),Lo(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Eo]||(t[Eo]=!0,Lo("selectionchange",!1,t))}}function jo(e,t,n,o){switch(Ot(t)){case 1:var r=Dt;break;case 4:r=Tt;break;default:r=Pt}n=r.bind(null,t,n,e),r=void 0,!xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),o?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Do(e,t,n,o,r){var l=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var a=o.tag;if(3===a||4===a){var i=o.stateNode.containerInfo;if(i===r||8===i.nodeType&&i.parentNode===r)break;if(4===a)for(a=o.return;null!==a;){var g=a.tag;if((3===g||4===g)&&((g=a.stateNode.containerInfo)===r||8===g.nodeType&&g.parentNode===r))return;a=a.return}for(;null!==i;){if(null===(a=br(i)))return;if(5===(g=a.tag)||6===g){o=l=a;continue e}i=i.parentNode}}o=o.return}Ve((function(){var o=l,r=ye(n),a=[];e:{var i=Vo.get(e);if(void 0!==i){var g=cn,s=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":g=wn;break;case"focusin":s="focus",g=An;break;case"focusout":s="blur",g=An;break;case"beforeblur":case"afterblur":g=An;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Wn;break;case wo:case Ro:case Wo:g=mn;break;case ko:g=kn;break;case"scroll":g=In;break;case"wheel":g=Xn;break;case"copy":case"cut":case"paste":g=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Rn}var c=0!==(4&t),d=!c&&"scroll"===e,I=c?null!==i?i+"Capture":null:i;c=[];for(var u,C=o;null!==C;){var p=(u=C).stateNode;if(5===u.tag&&null!==p&&(u=p,null!==I&&(null!=(p=Xe(C,I))&&c.push(To(C,p,u)))),d)break;C=C.return}0<c.length&&(i=new g(i,s,null,n,r),a.push({event:i,listeners:c}))}}if(0===(7&t)){if(g="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===fe||!(s=n.relatedTarget||n.fromElement)||!br(s)&&!s[pr])&&(g||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,g?(g=o,null!==(s=(s=n.relatedTarget||n.toElement)?br(s):null)&&(s!==(d=Ee(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(g=null,s=o),g!==s)){if(c=Cn,p="onMouseLeave",I="onMouseEnter",C="mouse","pointerout"!==e&&"pointerover"!==e||(c=Rn,p="onPointerLeave",I="onPointerEnter",C="pointer"),d=null==g?i:yr(g),u=null==s?i:yr(s),(i=new c(p,C+"leave",g,n,r)).target=d,i.relatedTarget=u,p=null,br(r)===o&&((c=new c(I,C+"enter",s,n,r)).target=u,c.relatedTarget=d,p=c),d=p,g&&s)e:{for(I=s,C=0,u=c=g;u;u=Uo(u))C++;for(u=0,p=I;p;p=Uo(p))u++;for(;0<C-u;)c=Uo(c),C--;for(;0<u-C;)I=Uo(I),u--;for(;C--;){if(c===I||null!==I&&c===I.alternate)break e;c=Uo(c),I=Uo(I)}c=null}else c=null;null!==g&&Qo(a,i,g,c,!1),null!==s&&null!==d&&Qo(a,d,s,c,!0)}if("select"===(g=(i=o?yr(o):window).nodeName&&i.nodeName.toLowerCase())||"input"===g&&"file"===i.type)var A=On;else if(jn(i))if(qn)A=ao;else{A=ro;var m=oo}else(g=i.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(A=lo);switch(A&&(A=A(e,o))?Dn(a,A,n,r):(m&&m(e,i,o),"focusout"===e&&(m=i._wrapperState)&&m.controlled&&"number"===i.type&&ee(i,"number",i.value)),m=o?yr(o):window,e){case"focusin":(jn(m)||"true"===m.contentEditable)&&(mo=m,ho=o,bo=null);break;case"focusout":bo=ho=mo=null;break;case"mousedown":fo=!0;break;case"contextmenu":case"mouseup":case"dragend":fo=!1,yo(a,n,r);break;case"selectionchange":if(Ao)break;case"keydown":case"keyup":yo(a,n,r)}var h;if(Jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else En?Mn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(En||"onCompositionStart"!==b?"onCompositionEnd"===b&&En&&(h=en()):(_t="value"in(qt=r)?qt.value:qt.textContent,En=!0)),0<(m=Po(o,b)).length&&(b=new fn(b,e,null,n,r),a.push({event:b,listeners:m}),h?b.data=h:null!==(h=Ln(n))&&(b.data=h))),(h=Hn?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(Kn=!0,Yn);case"textInput":return(e=t.data)===Yn&&Kn?null:e;default:return null}}(e,n):function(e,t){if(En)return"compositionend"===e||!Jn&&Mn(e,t)?(e=en(),$t=_t=qt=null,En=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(o=Po(o,"onBeforeInput")).length&&(r=new fn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:o}),r.data=h))}Ko(a,t)}))}function To(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Po(e,t){for(var n=t+"Capture",o=[];null!==e;){var r=e,l=r.stateNode;5===r.tag&&null!==l&&(r=l,null!=(l=Xe(e,n))&&o.unshift(To(e,l,r)),null!=(l=Xe(e,t))&&o.push(To(e,l,r))),e=e.return}return o}function Uo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qo(e,t,n,o,r){for(var l=t._reactName,a=[];null!==n&&n!==o;){var i=n,g=i.alternate,s=i.stateNode;if(null!==g&&g===o)break;5===i.tag&&null!==s&&(i=s,r?null!=(g=Xe(n,l))&&a.unshift(To(n,g,i)):r||null!=(g=Xe(n,l))&&a.push(To(n,g,i))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Oo=/\r\n?/g,qo=/\u0000|\uFFFD/g;function _o(e){return("string"===typeof e?e:""+e).replace(Oo,"\n").replace(qo,"")}function $o(e,t,n){if(t=_o(t),_o(e)!==t&&n)throw Error(l(425))}function er(){}var tr=null,nr=null;function or(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rr="function"===typeof setTimeout?setTimeout:void 0,lr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(gr)}:rr;function gr(e){setTimeout((function(){throw e}))}function sr(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===o)return e.removeChild(r),void Et(t);o--}else"$"!==n&&"$?"!==n&&"$!"!==n||o++;n=r}while(n);Et(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),ur="__reactFiber$"+Ir,Cr="__reactProps$"+Ir,pr="__reactContainer$"+Ir,Ar="__reactEvents$"+Ir,mr="__reactListeners$"+Ir,hr="__reactHandles$"+Ir;function br(e){var t=e[ur];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[ur]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[ur])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function fr(e){return!(e=e[ur]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function vr(e){return e[Cr]||null}var Zr=[],Gr=-1;function Sr(e){return{current:e}}function Br(e){0>Gr||(e.current=Zr[Gr],Zr[Gr]=null,Gr--)}function wr(e,t){Gr++,Zr[Gr]=e.current,e.current=t}var Rr={},Wr=Sr(Rr),kr=Sr(!1),Vr=Rr;function Xr(e,t){var n=e.type.contextTypes;if(!n)return Rr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r,l={};for(r in n)l[r]=t[r];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function xr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Jr(){Br(kr),Br(Wr)}function Nr(e,t,n){if(Wr.current!==Rr)throw Error(l(168));wr(Wr,t),wr(kr,n)}function Hr(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,"function"!==typeof o.getChildContext)return n;for(var r in o=o.getChildContext())if(!(r in t))throw Error(l(108,z(e)||"Unknown",r));return F({},n,o)}function Fr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,Vr=Wr.current,wr(Wr,e),wr(kr,kr.current),!0}function Yr(e,t,n){var o=e.stateNode;if(!o)throw Error(l(169));n?(e=Hr(e,t,Vr),o.__reactInternalMemoizedMergedChildContext=e,Br(kr),Br(Wr),wr(Wr,e)):Br(kr),wr(kr,n)}var Kr=null,Mr=!1,Lr=!1;function Er(e){null===Kr?Kr=[e]:Kr.push(e)}function zr(){if(!Lr&&null!==Kr){Lr=!0;var e=0,t=bt;try{var n=Kr;for(bt=1;e<n.length;e++){var o=n[e];do{o=o(!0)}while(null!==o)}Kr=null,Mr=!1}catch(r){throw null!==Kr&&(Kr=Kr.slice(e+1)),Pe($e,zr),r}finally{bt=t,Lr=!1}}return null}var jr=[],Dr=0,Tr=null,Pr=0,Ur=[],Qr=0,Or=null,qr=1,_r="";function $r(e,t){jr[Dr++]=Pr,jr[Dr++]=Tr,Tr=e,Pr=t}function el(e,t,n){Ur[Qr++]=qr,Ur[Qr++]=_r,Ur[Qr++]=Or,Or=e;var o=qr;e=_r;var r=32-at(o)-1;o&=~(1<<r),n+=1;var l=32-at(t)+r;if(30<l){var a=r-r%5;l=(o&(1<<a)-1).toString(32),o>>=a,r-=a,qr=1<<32-at(t)+r|n<<r|o,_r=l+e}else qr=1<<l|n<<r|o,_r=e}function tl(e){null!==e.return&&($r(e,1),el(e,1,0))}function nl(e){for(;e===Tr;)Tr=jr[--Dr],jr[Dr]=null,Pr=jr[--Dr],jr[Dr]=null;for(;e===Or;)Or=Ur[--Qr],Ur[Qr]=null,_r=Ur[--Qr],Ur[Qr]=null,qr=Ur[--Qr],Ur[Qr]=null}var ol=null,rl=null,ll=!1,al=null;function il(e,t){var n=Vs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function gl(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ol=e,rl=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ol=e,rl=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Or?{id:qr,overflow:_r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Vs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ol=e,rl=null,!0);default:return!1}}function sl(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cl(e){if(ll){var t=rl;if(t){var n=t;if(!gl(e,t)){if(sl(e))throw Error(l(418));t=cr(n.nextSibling);var o=ol;t&&gl(e,t)?il(o,n):(e.flags=-4097&e.flags|2,ll=!1,ol=e)}}else{if(sl(e))throw Error(l(418));e.flags=-4097&e.flags|2,ll=!1,ol=e}}}function dl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ol=e}function Il(e){if(e!==ol)return!1;if(!ll)return dl(e),ll=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!or(e.type,e.memoizedProps)),t&&(t=rl)){if(sl(e))throw ul(),Error(l(418));for(;t;)il(e,t),t=cr(t.nextSibling)}if(dl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rl=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rl=null}}else rl=ol?cr(e.stateNode.nextSibling):null;return!0}function ul(){for(var e=rl;e;)e=cr(e.nextSibling)}function Cl(){rl=ol=null,ll=!1}function pl(e){null===al?al=[e]:al.push(e)}var Al=f.ReactCurrentBatchConfig;function ml(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(l(309));var o=n.stateNode}if(!o)throw Error(l(147,e));var r=o,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function hl(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bl(e){return(0,e._init)(e._payload)}function fl(e){function t(t,n){if(e){var o=t.deletions;null===o?(t.deletions=[n],t.flags|=16):o.push(n)}}function n(n,o){if(!e)return null;for(;null!==o;)t(n,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=xs(e,t)).index=0,e.sibling=null,e}function a(t,n,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<n?(t.flags|=2,n):o:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function g(e,t,n,o){return null===t||6!==t.tag?((t=Fs(n,e.mode,o)).return=e,t):((t=r(t,n)).return=e,t)}function s(e,t,n,o){var l=n.type;return l===Z?d(e,t,n.props.children,o,n.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===X&&bl(l)===t.type)?((o=r(t,n.props)).ref=ml(e,t,n),o.return=e,o):((o=Js(n.type,n.key,n.props,null,e.mode,o)).ref=ml(e,t,n),o.return=e,o)}function c(e,t,n,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ys(n,e.mode,o)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,o,l){return null===t||7!==t.tag?((t=Ns(n,e.mode,o,l)).return=e,t):((t=r(t,n)).return=e,t)}function I(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(n=Js(t.type,t.key,t.props,null,e.mode,n)).ref=ml(e,null,t),n.return=e,n;case v:return(t=Ys(t,e.mode,n)).return=e,t;case X:return I(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Ns(t,e.mode,n,null)).return=e,t;hl(e,t)}return null}function u(e,t,n,o){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:g(e,t,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===r?s(e,t,n,o):null;case v:return n.key===r?c(e,t,n,o):null;case X:return u(e,t,(r=n._init)(n._payload),o)}if(te(n)||N(n))return null!==r?null:d(e,t,n,o,null);hl(e,n)}return null}function C(e,t,n,o,r){if("string"===typeof o&&""!==o||"number"===typeof o)return g(t,e=e.get(n)||null,""+o,r);if("object"===typeof o&&null!==o){switch(o.$$typeof){case y:return s(t,e=e.get(null===o.key?n:o.key)||null,o,r);case v:return c(t,e=e.get(null===o.key?n:o.key)||null,o,r);case X:return C(e,t,n,(0,o._init)(o._payload),r)}if(te(o)||N(o))return d(t,e=e.get(n)||null,o,r,null);hl(t,o)}return null}function p(r,l,i,g){for(var s=null,c=null,d=l,p=l=0,A=null;null!==d&&p<i.length;p++){d.index>p?(A=d,d=null):A=d.sibling;var m=u(r,d,i[p],g);if(null===m){null===d&&(d=A);break}e&&d&&null===m.alternate&&t(r,d),l=a(m,l,p),null===c?s=m:c.sibling=m,c=m,d=A}if(p===i.length)return n(r,d),ll&&$r(r,p),s;if(null===d){for(;p<i.length;p++)null!==(d=I(r,i[p],g))&&(l=a(d,l,p),null===c?s=d:c.sibling=d,c=d);return ll&&$r(r,p),s}for(d=o(r,d);p<i.length;p++)null!==(A=C(d,r,p,i[p],g))&&(e&&null!==A.alternate&&d.delete(null===A.key?p:A.key),l=a(A,l,p),null===c?s=A:c.sibling=A,c=A);return e&&d.forEach((function(e){return t(r,e)})),ll&&$r(r,p),s}function A(r,i,g,s){var c=N(g);if("function"!==typeof c)throw Error(l(150));if(null==(g=c.call(g)))throw Error(l(151));for(var d=c=null,p=i,A=i=0,m=null,h=g.next();null!==p&&!h.done;A++,h=g.next()){p.index>A?(m=p,p=null):m=p.sibling;var b=u(r,p,h.value,s);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(r,p),i=a(b,i,A),null===d?c=b:d.sibling=b,d=b,p=m}if(h.done)return n(r,p),ll&&$r(r,A),c;if(null===p){for(;!h.done;A++,h=g.next())null!==(h=I(r,h.value,s))&&(i=a(h,i,A),null===d?c=h:d.sibling=h,d=h);return ll&&$r(r,A),c}for(p=o(r,p);!h.done;A++,h=g.next())null!==(h=C(p,r,A,h.value,s))&&(e&&null!==h.alternate&&p.delete(null===h.key?A:h.key),i=a(h,i,A),null===d?c=h:d.sibling=h,d=h);return e&&p.forEach((function(e){return t(r,e)})),ll&&$r(r,A),c}return function e(o,l,a,g){if("object"===typeof a&&null!==a&&a.type===Z&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case y:e:{for(var s=a.key,c=l;null!==c;){if(c.key===s){if((s=a.type)===Z){if(7===c.tag){n(o,c.sibling),(l=r(c,a.props.children)).return=o,o=l;break e}}else if(c.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===X&&bl(s)===c.type){n(o,c.sibling),(l=r(c,a.props)).ref=ml(o,c,a),l.return=o,o=l;break e}n(o,c);break}t(o,c),c=c.sibling}a.type===Z?((l=Ns(a.props.children,o.mode,g,a.key)).return=o,o=l):((g=Js(a.type,a.key,a.props,null,o.mode,g)).ref=ml(o,l,a),g.return=o,o=g)}return i(o);case v:e:{for(c=a.key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===a.containerInfo&&l.stateNode.implementation===a.implementation){n(o,l.sibling),(l=r(l,a.children||[])).return=o,o=l;break e}n(o,l);break}t(o,l),l=l.sibling}(l=Ys(a,o.mode,g)).return=o,o=l}return i(o);case X:return e(o,l,(c=a._init)(a._payload),g)}if(te(a))return p(o,l,a,g);if(N(a))return A(o,l,a,g);hl(o,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==l&&6===l.tag?(n(o,l.sibling),(l=r(l,a)).return=o,o=l):(n(o,l),(l=Fs(a,o.mode,g)).return=o,o=l),i(o)):n(o,l)}}var yl=fl(!0),vl=fl(!1),Zl=Sr(null),Gl=null,Sl=null,Bl=null;function wl(){Bl=Sl=Gl=null}function Rl(e){var t=Zl.current;Br(Zl),e._currentValue=t}function Wl(e,t,n){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function kl(e,t){Gl=e,Bl=Sl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bi=!0),e.firstContext=null)}function Vl(e){var t=e._currentValue;if(Bl!==e)if(e={context:e,memoizedValue:t,next:null},null===Sl){if(null===Gl)throw Error(l(308));Sl=e,Gl.dependencies={lanes:0,firstContext:e}}else Sl=Sl.next=e;return t}var Xl=null;function xl(e){null===Xl?Xl=[e]:Xl.push(e)}function Jl(e,t,n,o){var r=t.interleaved;return null===r?(n.next=n,xl(t)):(n.next=r.next,r.next=n),t.interleaved=n,Nl(e,o)}function Nl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Hl=!1;function Fl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ml(e,t,n){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&Rg)){var r=o.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),o.pending=t,Nl(e,n)}return null===(r=o.interleaved)?(t.next=t,xl(o)):(t.next=r.next,r.next=t),o.interleaved=t,Nl(e,n)}function Ll(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,ht(e,n)}}function El(e,t){var n=e.updateQueue,o=e.alternate;if(null!==o&&n===(o=o.updateQueue)){var r=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===l?r=l=a:l=l.next=a,n=n.next}while(null!==n);null===l?r=l=t:l=l.next=t}else r=l=t;return n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:o.shared,effects:o.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zl(e,t,n,o){var r=e.updateQueue;Hl=!1;var l=r.firstBaseUpdate,a=r.lastBaseUpdate,i=r.shared.pending;if(null!==i){r.shared.pending=null;var g=i,s=g.next;g.next=null,null===a?l=s:a.next=s,a=g;var c=e.alternate;null!==c&&((i=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===i?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=g))}if(null!==l){var d=r.baseState;for(a=0,c=s=g=null,i=l;;){var I=i.lane,u=i.eventTime;if((o&I)===I){null!==c&&(c=c.next={eventTime:u,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var C=e,p=i;switch(I=t,u=n,p.tag){case 1:if("function"===typeof(C=p.payload)){d=C.call(u,d,I);break e}d=C;break e;case 3:C.flags=-65537&C.flags|128;case 0:if(null===(I="function"===typeof(C=p.payload)?C.call(u,d,I):C)||void 0===I)break e;d=F({},d,I);break e;case 2:Hl=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(I=r.effects)?r.effects=[i]:I.push(i))}else u={eventTime:u,lane:I,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(s=c=u,g=d):c=c.next=u,a|=I;if(null===(i=i.next)){if(null===(i=r.shared.pending))break;i=(I=i).next,I.next=null,r.lastBaseUpdate=I,r.shared.pending=null}}if(null===c&&(g=d),r.baseState=g,r.firstBaseUpdate=s,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===l&&(r.shared.lanes=0);Hg|=a,e.lanes=a,e.memoizedState=d}}function jl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(null!==r){if(o.callback=null,o=n,"function"!==typeof r)throw Error(l(191,r));r.call(o)}}}var Dl={},Tl=Sr(Dl),Pl=Sr(Dl),Ul=Sr(Dl);function Ql(e){if(e===Dl)throw Error(l(174));return e}function Ol(e,t){switch(wr(Ul,t),wr(Pl,e),wr(Tl,Dl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ge(null,"");break;default:t=ge(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Br(Tl),wr(Tl,t)}function ql(){Br(Tl),Br(Pl),Br(Ul)}function _l(e){Ql(Ul.current);var t=Ql(Tl.current),n=ge(t,e.type);t!==n&&(wr(Pl,e),wr(Tl,n))}function $l(e){Pl.current===e&&(Br(Tl),Br(Pl))}var ea=Sr(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function oa(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ra=f.ReactCurrentDispatcher,la=f.ReactCurrentBatchConfig,aa=0,ia=null,ga=null,sa=null,ca=!1,da=!1,Ia=0,ua=0;function Ca(){throw Error(l(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!io(e[n],t[n]))return!1;return!0}function Aa(e,t,n,o,r,a){if(aa=a,ia=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:ei,e=n(o,r),da){a=0;do{if(da=!1,Ia=0,25<=a)throw Error(l(301));a+=1,sa=ga=null,t.updateQueue=null,ra.current=ti,e=n(o,r)}while(da)}if(ra.current=_a,t=null!==ga&&null!==ga.next,aa=0,sa=ga=ia=null,ca=!1,t)throw Error(l(300));return e}function ma(){var e=0!==Ia;return Ia=0,e}function ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sa?ia.memoizedState=sa=e:sa=sa.next=e,sa}function ba(){if(null===ga){var e=ia.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===sa?ia.memoizedState:sa.next;if(null!==t)sa=t,ga=e;else{if(null===e)throw Error(l(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===sa?ia.memoizedState=sa=e:sa=sa.next=e}return sa}function fa(e,t){return"function"===typeof t?t(e):t}function ya(e){var t=ba(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var o=ga,r=o.baseQueue,a=n.pending;if(null!==a){if(null!==r){var i=r.next;r.next=a.next,a.next=i}o.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,o=o.baseState;var g=i=null,s=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var I={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(g=s=I,i=o):s=s.next=I,ia.lanes|=d,Hg|=d}c=c.next}while(null!==c&&c!==a);null===s?i=o:s.next=g,io(o,t.memoizedState)||(bi=!0),t.memoizedState=o,t.baseState=i,t.baseQueue=s,n.lastRenderedState=o}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,ia.lanes|=a,Hg|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function va(e){var t=ba(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var i=r=r.next;do{a=e(a,i.action),i=i.next}while(i!==r);io(a,t.memoizedState)||(bi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,o]}function Za(){}function Ga(e,t){var n=ia,o=ba(),r=t(),a=!io(o.memoizedState,r);if(a&&(o.memoizedState=r,bi=!0),o=o.queue,Ha(wa.bind(null,n,o,e),[e]),o.getSnapshot!==t||a||null!==sa&&1&sa.memoizedState.tag){if(n.flags|=2048,Va(9,Ba.bind(null,n,o,r,t),void 0,null),null===Wg)throw Error(l(349));0!==(30&aa)||Sa(n,t,r)}return r}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ba(e,t,n,o){t.value=n,t.getSnapshot=o,Ra(t)&&Wa(e)}function wa(e,t,n){return n((function(){Ra(t)&&Wa(e)}))}function Ra(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!io(e,n)}catch(o){return!0}}function Wa(e){var t=Nl(e,1);null!==t&&ns(t,e,1,-1)}function ka(e){var t=ha();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ua.bind(null,ia,e),[t.memoizedState,e]}function Va(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function Xa(){return ba().memoizedState}function xa(e,t,n,o){var r=ha();ia.flags|=e,r.memoizedState=Va(1|t,n,void 0,void 0===o?null:o)}function Ja(e,t,n,o){var r=ba();o=void 0===o?null:o;var l=void 0;if(null!==ga){var a=ga.memoizedState;if(l=a.destroy,null!==o&&pa(o,a.deps))return void(r.memoizedState=Va(t,n,l,o))}ia.flags|=e,r.memoizedState=Va(1|t,n,l,o)}function Na(e,t){return xa(8390656,8,e,t)}function Ha(e,t){return Ja(2048,8,e,t)}function Fa(e,t){return Ja(4,2,e,t)}function Ya(e,t){return Ja(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ma(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ja(4,4,Ka.bind(null,t,e),n)}function La(){}function Ea(e,t){var n=ba();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&pa(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=ba();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&pa(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function ja(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=n):(io(n,t)||(n=pt(),ia.lanes|=n,Hg|=n,e.baseState=!0),t)}function Da(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var o=la.transition;la.transition={};try{e(!1),t()}finally{bt=n,la.transition=o}}function Ta(){return ba().memoizedState}function Pa(e,t,n){var o=ts(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Oa(t,n);else if(null!==(n=Jl(e,t,n,o))){ns(n,e,o,es()),qa(n,t,o)}}function Ua(e,t,n){var o=ts(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Oa(t,r);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var a=t.lastRenderedState,i=l(a,n);if(r.hasEagerState=!0,r.eagerState=i,io(i,a)){var g=t.interleaved;return null===g?(r.next=r,xl(t)):(r.next=g.next,g.next=r),void(t.interleaved=r)}}catch(s){}null!==(n=Jl(e,t,r,o))&&(ns(n,e,o,r=es()),qa(n,t,o))}}function Qa(e){var t=e.alternate;return e===ia||null!==t&&t===ia}function Oa(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(0!==(4194240&n)){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,ht(e,n)}}var _a={readContext:Vl,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useInsertionEffect:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useSyncExternalStore:Ca,useId:Ca,unstable_isNewReconciler:!1},$a={readContext:Vl,useCallback:function(e,t){return ha().memoizedState=[e,void 0===t?null:t],e},useContext:Vl,useEffect:Na,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xa(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xa(4194308,4,e,t)},useInsertionEffect:function(e,t){return xa(4,2,e,t)},useMemo:function(e,t){var n=ha();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=ha();return t=void 0!==n?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Pa.bind(null,ia,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},ha().memoizedState=e},useState:ka,useDebugValue:La,useDeferredValue:function(e){return ha().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Da.bind(null,e[1]),ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=ia,r=ha();if(ll){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===Wg)throw Error(l(349));0!==(30&aa)||Sa(o,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Na(wa.bind(null,o,a,e),[e]),o.flags|=2048,Va(9,Ba.bind(null,o,a,n,t),void 0,null),n},useId:function(){var e=ha(),t=Wg.identifierPrefix;if(ll){var n=_r;t=":"+t+"R"+(n=(qr&~(1<<32-at(qr)-1)).toString(32)+n),0<(n=Ia++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ua++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Vl,useCallback:Ea,useContext:Vl,useEffect:Ha,useImperativeHandle:Ma,useInsertionEffect:Fa,useLayoutEffect:Ya,useMemo:za,useReducer:ya,useRef:Xa,useState:function(){return ya(fa)},useDebugValue:La,useDeferredValue:function(e){return ja(ba(),ga.memoizedState,e)},useTransition:function(){return[ya(fa)[0],ba().memoizedState]},useMutableSource:Za,useSyncExternalStore:Ga,useId:Ta,unstable_isNewReconciler:!1},ti={readContext:Vl,useCallback:Ea,useContext:Vl,useEffect:Ha,useImperativeHandle:Ma,useInsertionEffect:Fa,useLayoutEffect:Ya,useMemo:za,useReducer:va,useRef:Xa,useState:function(){return va(fa)},useDebugValue:La,useDeferredValue:function(e){var t=ba();return null===ga?t.memoizedState=e:ja(t,ga.memoizedState,e)},useTransition:function(){return[va(fa)[0],ba().memoizedState]},useMutableSource:Za,useSyncExternalStore:Ga,useId:Ta,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function oi(e,t,n,o){n=null===(n=n(o,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ri={isMounted:function(e){return!!(e=e._reactInternals)&&Ee(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=es(),r=ts(e),l=Kl(o,r);l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=Ml(e,l,r))&&(ns(t,e,r,o),Ll(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=es(),r=ts(e),l=Kl(o,r);l.tag=1,l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=Ml(e,l,r))&&(ns(t,e,r,o),Ll(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=es(),o=ts(e),r=Kl(n,o);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ml(e,r,o))&&(ns(t,e,o,n),Ll(t,e,o))}};function li(e,t,n,o,r,l,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,l,a):!t.prototype||!t.prototype.isPureReactComponent||(!go(n,o)||!go(r,l))}function ai(e,t,n){var o=!1,r=Rr,l=t.contextType;return"object"===typeof l&&null!==l?l=Vl(l):(r=xr(t)?Vr:Wr.current,l=(o=null!==(o=t.contextTypes)&&void 0!==o)?Xr(e,r):Rr),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ri,e.stateNode=t,t._reactInternals=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=l),t}function ii(e,t,n,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&ri.enqueueReplaceState(t,t.state,null)}function gi(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Fl(e);var l=t.contextType;"object"===typeof l&&null!==l?r.context=Vl(l):(l=xr(t)?Vr:Wr.current,r.context=Xr(e,l)),r.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(oi(e,t,l,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ri.enqueueReplaceState(r,r.state,null),zl(e,n,r,o),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function si(e,t){try{var n="",o=t;do{n+=L(o),o=o.return}while(o);var r=n}catch(l){r="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:r,digest:null}}function ci(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Ii="function"===typeof WeakMap?WeakMap:Map;function ui(e,t,n){(n=Kl(-1,n)).tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){jg||(jg=!0,Dg=o),di(0,t)},n}function Ci(e,t,n){(n=Kl(-1,n)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){di(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(n.callback=function(){di(0,t),"function"!==typeof o&&(null===Tg?Tg=new Set([this]):Tg.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pi(e,t,n){var o=e.pingCache;if(null===o){o=e.pingCache=new Ii;var r=new Set;o.set(t,r)}else void 0===(r=o.get(t))&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=Ss.bind(null,e,t,n),t.then(e,e))}function Ai(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mi(e,t,n,o,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Kl(-1,1)).tag=2,Ml(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var hi=f.ReactCurrentOwner,bi=!1;function fi(e,t,n,o){t.child=null===e?vl(t,null,n,o):yl(t,e.child,n,o)}function yi(e,t,n,o,r){n=n.render;var l=t.ref;return kl(t,r),o=Aa(e,t,n,o,l,r),n=ma(),null===e||bi?(ll&&n&&tl(t),t.flags|=1,fi(e,t,o,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ji(e,t,r))}function vi(e,t,n,o,r){if(null===e){var l=n.type;return"function"!==typeof l||Xs(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Js(n.type,null,o,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Zi(e,t,l,o,r))}if(l=e.child,0===(e.lanes&r)){var a=l.memoizedProps;if((n=null!==(n=n.compare)?n:go)(a,o)&&e.ref===t.ref)return ji(e,t,r)}return t.flags|=1,(e=xs(l,o)).ref=t.ref,e.return=t,t.child=e}function Zi(e,t,n,o,r){if(null!==e){var l=e.memoizedProps;if(go(l,o)&&e.ref===t.ref){if(bi=!1,t.pendingProps=o=l,0===(e.lanes&r))return t.lanes=e.lanes,ji(e,t,r);0!==(131072&e.flags)&&(bi=!0)}}return Bi(e,t,n,o,r)}function Gi(e,t,n){var o=t.pendingProps,r=o.children,l=null!==e?e.memoizedState:null;if("hidden"===o.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(xg,Xg),Xg|=n;else{if(0===(1073741824&n))return e=null!==l?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wr(xg,Xg),Xg|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==l?l.baseLanes:n,wr(xg,Xg),Xg|=o}else null!==l?(o=l.baseLanes|n,t.memoizedState=null):o=n,wr(xg,Xg),Xg|=o;return fi(e,t,r,n),t.child}function Si(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bi(e,t,n,o,r){var l=xr(n)?Vr:Wr.current;return l=Xr(t,l),kl(t,r),n=Aa(e,t,n,o,l,r),o=ma(),null===e||bi?(ll&&o&&tl(t),t.flags|=1,fi(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ji(e,t,r))}function wi(e,t,n,o,r){if(xr(n)){var l=!0;Fr(t)}else l=!1;if(kl(t,r),null===t.stateNode)zi(e,t),ai(t,n,o),gi(t,n,o,r),o=!0;else if(null===e){var a=t.stateNode,i=t.memoizedProps;a.props=i;var g=a.context,s=n.contextType;"object"===typeof s&&null!==s?s=Vl(s):s=Xr(t,s=xr(n)?Vr:Wr.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i!==o||g!==s)&&ii(t,a,o,s),Hl=!1;var I=t.memoizedState;a.state=I,zl(t,o,a,r),g=t.memoizedState,i!==o||I!==g||kr.current||Hl?("function"===typeof c&&(oi(t,n,c,o),g=t.memoizedState),(i=Hl||li(t,n,i,o,I,g,s))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=g),a.props=o,a.state=g,a.context=s,o=i):("function"===typeof a.componentDidMount&&(t.flags|=4194308),o=!1)}else{a=t.stateNode,Yl(e,t),i=t.memoizedProps,s=t.type===t.elementType?i:ni(t.type,i),a.props=s,d=t.pendingProps,I=a.context,"object"===typeof(g=n.contextType)&&null!==g?g=Vl(g):g=Xr(t,g=xr(n)?Vr:Wr.current);var u=n.getDerivedStateFromProps;(c="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i!==d||I!==g)&&ii(t,a,o,g),Hl=!1,I=t.memoizedState,a.state=I,zl(t,o,a,r);var C=t.memoizedState;i!==d||I!==C||kr.current||Hl?("function"===typeof u&&(oi(t,n,u,o),C=t.memoizedState),(s=Hl||li(t,n,s,o,I,C,g)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(o,C,g),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(o,C,g)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=C),a.props=o,a.state=C,a.context=g,o=s):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),o=!1)}return Ri(e,t,n,o,l,r)}function Ri(e,t,n,o,r,l){Si(e,t);var a=0!==(128&t.flags);if(!o&&!a)return r&&Yr(t,n,!1),ji(e,t,l);o=t.stateNode,hi.current=t;var i=a&&"function"!==typeof n.getDerivedStateFromError?null:o.render();return t.flags|=1,null!==e&&a?(t.child=yl(t,e.child,null,l),t.child=yl(t,null,i,l)):fi(e,t,i,l),t.memoizedState=o.state,r&&Yr(t,n,!0),t.child}function Wi(e){var t=e.stateNode;t.pendingContext?Nr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nr(0,t.context,!1),Ol(e,t.containerInfo)}function ki(e,t,n,o,r){return Cl(),pl(r),t.flags|=256,fi(e,t,n,o),t.child}var Vi,Xi,xi,Ji,Ni={dehydrated:null,treeContext:null,retryLane:0};function Hi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fi(e,t,n){var o,r=t.pendingProps,a=ea.current,i=!1,g=0!==(128&t.flags);if((o=g)||(o=(null===e||null!==e.memoizedState)&&0!==(2&a)),o?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),wr(ea,1&a),null===e)return cl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(g=r.children,e=r.fallback,i?(r=t.mode,i=t.child,g={mode:"hidden",children:g},0===(1&r)&&null!==i?(i.childLanes=0,i.pendingProps=g):i=Hs(g,r,0,null),e=Ns(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Hi(n),t.memoizedState=Ni,e):Yi(t,g));if(null!==(a=e.memoizedState)&&null!==(o=a.dehydrated))return function(e,t,n,o,r,a,i){if(n)return 256&t.flags?(t.flags&=-257,Ki(e,t,i,o=ci(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=o.fallback,r=t.mode,o=Hs({mode:"visible",children:o.children},r,0,null),(a=Ns(a,r,i,null)).flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,0!==(1&t.mode)&&yl(t,e.child,null,i),t.child.memoizedState=Hi(i),t.memoizedState=Ni,a);if(0===(1&t.mode))return Ki(e,t,i,null);if("$!"===r.data){if(o=r.nextSibling&&r.nextSibling.dataset)var g=o.dgst;return o=g,Ki(e,t,i,o=ci(a=Error(l(419)),o,void 0))}if(g=0!==(i&e.childLanes),bi||g){if(null!==(o=Wg)){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(o.suspendedLanes|i))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Nl(e,r),ns(o,e,r,-1))}return ps(),Ki(e,t,i,o=ci(Error(l(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=ws.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,rl=cr(r.nextSibling),ol=t,ll=!0,al=null,null!==e&&(Ur[Qr++]=qr,Ur[Qr++]=_r,Ur[Qr++]=Or,qr=e.id,_r=e.overflow,Or=t),t=Yi(t,o.children),t.flags|=4096,t)}(e,t,g,r,o,a,n);if(i){i=r.fallback,g=t.mode,o=(a=e.child).sibling;var s={mode:"hidden",children:r.children};return 0===(1&g)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=s,t.deletions=null):(r=xs(a,s)).subtreeFlags=14680064&a.subtreeFlags,null!==o?i=xs(o,i):(i=Ns(i,g,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,g=null===(g=e.child.memoizedState)?Hi(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},i.memoizedState=g,i.childLanes=e.childLanes&~n,t.memoizedState=Ni,r}return e=(i=e.child).sibling,r=xs(i,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yi(e,t){return(t=Hs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,n,o){return null!==o&&pl(o),yl(t,e.child,null,n),(e=Yi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mi(e,t,n){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),Wl(e.return,t,n)}function Li(e,t,n,o,r){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=o,l.tail=n,l.tailMode=r)}function Ei(e,t,n){var o=t.pendingProps,r=o.revealOrder,l=o.tail;if(fi(e,t,o.children,n),0!==(2&(o=ea.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mi(e,n,t);else if(19===e.tag)Mi(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(wr(ea,o),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Li(t,!1,r,n,l);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Li(t,!0,n,null,l);break;case"together":Li(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ji(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hg|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=xs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Di(e,t){if(!ll)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ti(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=14680064&r.subtreeFlags,o|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Pi(e,t,n){var o=t.pendingProps;switch(nl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(t),null;case 1:case 17:return xr(t.type)&&Jr(),Ti(t),null;case 3:return o=t.stateNode,ql(),Br(kr),Br(Wr),oa(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(Il(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==al&&(as(al),al=null))),Xi(e,t),Ti(t),null;case 5:$l(t);var r=Ql(Ul.current);if(n=t.type,null!==e&&null!=t.stateNode)xi(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(l(166));return Ti(t),null}if(e=Ql(Tl.current),Il(t)){o=t.stateNode,n=t.type;var a=t.memoizedProps;switch(o[ur]=t,o[Cr]=a,e=0!==(1&t.mode),n){case"dialog":Mo("cancel",o),Mo("close",o);break;case"iframe":case"object":case"embed":Mo("load",o);break;case"video":case"audio":for(r=0;r<Ho.length;r++)Mo(Ho[r],o);break;case"source":Mo("error",o);break;case"img":case"image":case"link":Mo("error",o),Mo("load",o);break;case"details":Mo("toggle",o);break;case"input":O(o,a),Mo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},Mo("invalid",o);break;case"textarea":re(o,a),Mo("invalid",o)}for(var g in he(n,a),r=null,a)if(a.hasOwnProperty(g)){var s=a[g];"children"===g?"string"===typeof s?o.textContent!==s&&(!0!==a.suppressHydrationWarning&&$o(o.textContent,s,e),r=["children",s]):"number"===typeof s&&o.textContent!==""+s&&(!0!==a.suppressHydrationWarning&&$o(o.textContent,s,e),r=["children",""+s]):i.hasOwnProperty(g)&&null!=s&&"onScroll"===g&&Mo("scroll",o)}switch(n){case"input":T(o),$(o,a,!0);break;case"textarea":T(o),ae(o);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(o.onclick=er)}o=r,t.updateQueue=o,null!==o&&(t.flags|=4)}else{g=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=g.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=g.createElement(n,{is:o.is}):(e=g.createElement(n),"select"===n&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,n),e[ur]=t,e[Cr]=o,Vi(e,t,!1,!1),t.stateNode=e;e:{switch(g=be(n,o),n){case"dialog":Mo("cancel",e),Mo("close",e),r=o;break;case"iframe":case"object":case"embed":Mo("load",e),r=o;break;case"video":case"audio":for(r=0;r<Ho.length;r++)Mo(Ho[r],e);r=o;break;case"source":Mo("error",e),r=o;break;case"img":case"image":case"link":Mo("error",e),Mo("load",e),r=o;break;case"details":Mo("toggle",e),r=o;break;case"input":O(e,o),r=Q(e,o),Mo("invalid",e);break;case"option":default:r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=F({},o,{value:void 0}),Mo("invalid",e);break;case"textarea":re(e,o),r=oe(e,o),Mo("invalid",e)}for(a in he(n,r),s=r)if(s.hasOwnProperty(a)){var c=s[a];"style"===a?Ae(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&Ie(e,c):"number"===typeof c&&Ie(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(i.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Mo("scroll",e):null!=c&&b(e,a,c,g))}switch(n){case"input":T(e),$(e,o,!1);break;case"textarea":T(e),ae(e);break;case"option":null!=o.value&&e.setAttribute("value",""+j(o.value));break;case"select":e.multiple=!!o.multiple,null!=(a=o.value)?ne(e,!!o.multiple,a,!1):null!=o.defaultValue&&ne(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=er)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ti(t),null;case 6:if(e&&null!=t.stateNode)Ji(e,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(l(166));if(n=Ql(Ul.current),Ql(Tl.current),Il(t)){if(o=t.stateNode,n=t.memoizedProps,o[ur]=t,(a=o.nodeValue!==n)&&null!==(e=ol))switch(e.tag){case 3:$o(o.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$o(o.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[ur]=t,t.stateNode=o}return Ti(t),null;case 13:if(Br(ea),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ll&&null!==rl&&0!==(1&t.mode)&&0===(128&t.flags))ul(),Cl(),t.flags|=98560,a=!1;else if(a=Il(t),null!==o&&null!==o.dehydrated){if(null===e){if(!a)throw Error(l(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(l(317));a[ur]=t}else Cl(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ti(t),a=!1}else null!==al&&(as(al),al=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((o=null!==o)!==(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Jg&&(Jg=3):ps())),null!==t.updateQueue&&(t.flags|=4),Ti(t),null);case 4:return ql(),Xi(e,t),null===e&&zo(t.stateNode.containerInfo),Ti(t),null;case 10:return Rl(t.type._context),Ti(t),null;case 19:if(Br(ea),null===(a=t.memoizedState))return Ti(t),null;if(o=0!==(128&t.flags),null===(g=a.rendering))if(o)Di(a,!1);else{if(0!==Jg||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(g=ta(e))){for(t.flags|=128,Di(a,!1),null!==(o=g.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;null!==n;)e=o,(a=n).flags&=14680066,null===(g=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=g.childLanes,a.lanes=g.lanes,a.child=g.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=g.memoizedProps,a.memoizedState=g.memoizedState,a.updateQueue=g.updateQueue,a.type=g.type,e=g.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wr(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&qe()>Eg&&(t.flags|=128,o=!0,Di(a,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=ta(g))){if(t.flags|=128,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Di(a,!0),null===a.tail&&"hidden"===a.tailMode&&!g.alternate&&!ll)return Ti(t),null}else 2*qe()-a.renderingStartTime>Eg&&1073741824!==n&&(t.flags|=128,o=!0,Di(a,!1),t.lanes=4194304);a.isBackwards?(g.sibling=t.child,t.child=g):(null!==(n=a.last)?n.sibling=g:t.child=g,a.last=g)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=qe(),t.sibling=null,n=ea.current,wr(ea,o?1&n|2:1&n),t):(Ti(t),null);case 22:case 23:return ds(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&0!==(1&t.mode)?0!==(1073741824&Xg)&&(Ti(t),6&t.subtreeFlags&&(t.flags|=8192)):Ti(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function Ui(e,t){switch(nl(t),t.tag){case 1:return xr(t.type)&&Jr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ql(),Br(kr),Br(Wr),oa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $l(t),null;case 13:if(Br(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));Cl()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Br(ea),null;case 4:return ql(),null;case 10:return Rl(t.type._context),null;case 22:case 23:return ds(),null;default:return null}}Vi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xi=function(){},xi=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,Ql(Tl.current);var l,a=null;switch(n){case"input":r=Q(e,r),o=Q(e,o),a=[];break;case"select":r=F({},r,{value:void 0}),o=F({},o,{value:void 0}),a=[];break;case"textarea":r=oe(e,r),o=oe(e,o),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof o.onClick&&(e.onclick=er)}for(c in he(n,o),n=null,r)if(!o.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var g=r[c];for(l in g)g.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(i.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in o){var s=o[c];if(g=null!=r?r[c]:void 0,o.hasOwnProperty(c)&&s!==g&&(null!=s||null!=g))if("style"===c)if(g){for(l in g)!g.hasOwnProperty(l)||s&&s.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in s)s.hasOwnProperty(l)&&g[l]!==s[l]&&(n||(n={}),n[l]=s[l])}else n||(a||(a=[]),a.push(c,n)),n=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,g=g?g.__html:void 0,null!=s&&g!==s&&(a=a||[]).push(c,s)):"children"===c?"string"!==typeof s&&"number"!==typeof s||(a=a||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(i.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&Mo("scroll",e),a||g===s||(a=[])):(a=a||[]).push(c,s))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ji=function(e,t,n,o){n!==o&&(t.flags|=4)};var Qi=!1,Oi=!1,qi="function"===typeof WeakSet?WeakSet:Set,_i=null;function $i(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(o){Gs(e,t,o)}else n.current=null}function eg(e,t,n){try{n()}catch(o){Gs(e,t,o)}}var tg=!1;function ng(e,t,n){var o=t.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var r=o=o.next;do{if((r.tag&e)===e){var l=r.destroy;r.destroy=void 0,void 0!==l&&eg(t,n,l)}r=r.next}while(r!==o)}}function og(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function rg(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function lg(e){var t=e.alternate;null!==t&&(e.alternate=null,lg(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ur],delete t[Cr],delete t[Ar],delete t[mr],delete t[hr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ag(e){return 5===e.tag||3===e.tag||4===e.tag}function ig(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gg(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=er));else if(4!==o&&null!==(e=e.child))for(gg(e,t,n),e=e.sibling;null!==e;)gg(e,t,n),e=e.sibling}function sg(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==o&&null!==(e=e.child))for(sg(e,t,n),e=e.sibling;null!==e;)sg(e,t,n),e=e.sibling}var cg=null,dg=!1;function Ig(e,t,n){for(n=n.child;null!==n;)ug(e,t,n),n=n.sibling}function ug(e,t,n){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(rt,n)}catch(i){}switch(n.tag){case 5:Oi||$i(n,t);case 6:var o=cg,r=dg;cg=null,Ig(e,t,n),dg=r,null!==(cg=o)&&(dg?(e=cg,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cg.removeChild(n.stateNode));break;case 18:null!==cg&&(dg?(e=cg,n=n.stateNode,8===e.nodeType?sr(e.parentNode,n):1===e.nodeType&&sr(e,n),Et(e)):sr(cg,n.stateNode));break;case 4:o=cg,r=dg,cg=n.stateNode.containerInfo,dg=!0,Ig(e,t,n),cg=o,dg=r;break;case 0:case 11:case 14:case 15:if(!Oi&&(null!==(o=n.updateQueue)&&null!==(o=o.lastEffect))){r=o=o.next;do{var l=r,a=l.destroy;l=l.tag,void 0!==a&&(0!==(2&l)||0!==(4&l))&&eg(n,t,a),r=r.next}while(r!==o)}Ig(e,t,n);break;case 1:if(!Oi&&($i(n,t),"function"===typeof(o=n.stateNode).componentWillUnmount))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(i){Gs(n,t,i)}Ig(e,t,n);break;case 21:Ig(e,t,n);break;case 22:1&n.mode?(Oi=(o=Oi)||null!==n.memoizedState,Ig(e,t,n),Oi=o):Ig(e,t,n);break;default:Ig(e,t,n)}}function Cg(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qi),t.forEach((function(t){var o=Rs.bind(null,e,t);n.has(t)||(n.add(t),t.then(o,o))}))}}function pg(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var r=n[o];try{var a=e,i=t,g=i;e:for(;null!==g;){switch(g.tag){case 5:cg=g.stateNode,dg=!1;break e;case 3:case 4:cg=g.stateNode.containerInfo,dg=!0;break e}g=g.return}if(null===cg)throw Error(l(160));ug(a,i,r),cg=null,dg=!1;var s=r.alternate;null!==s&&(s.return=null),r.return=null}catch(c){Gs(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Ag(t,e),t=t.sibling}function Ag(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pg(t,e),mg(e),4&o){try{ng(3,e,e.return),og(3,e)}catch(A){Gs(e,e.return,A)}try{ng(5,e,e.return)}catch(A){Gs(e,e.return,A)}}break;case 1:pg(t,e),mg(e),512&o&&null!==n&&$i(n,n.return);break;case 5:if(pg(t,e),mg(e),512&o&&null!==n&&$i(n,n.return),32&e.flags){var r=e.stateNode;try{Ie(r,"")}catch(A){Gs(e,e.return,A)}}if(4&o&&null!=(r=e.stateNode)){var a=e.memoizedProps,i=null!==n?n.memoizedProps:a,g=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===g&&"radio"===a.type&&null!=a.name&&q(r,a),be(g,i);var c=be(g,a);for(i=0;i<s.length;i+=2){var d=s[i],I=s[i+1];"style"===d?Ae(r,I):"dangerouslySetInnerHTML"===d?de(r,I):"children"===d?Ie(r,I):b(r,d,I,c)}switch(g){case"input":_(r,a);break;case"textarea":le(r,a);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var C=a.value;null!=C?ne(r,!!a.multiple,C,!1):u!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[Cr]=a}catch(A){Gs(e,e.return,A)}}break;case 6:if(pg(t,e),mg(e),4&o){if(null===e.stateNode)throw Error(l(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(A){Gs(e,e.return,A)}}break;case 3:if(pg(t,e),mg(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Et(t.containerInfo)}catch(A){Gs(e,e.return,A)}break;case 4:default:pg(t,e),mg(e);break;case 13:pg(t,e),mg(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Lg=qe())),4&o&&Cg(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Oi=(c=Oi)||d,pg(t,e),Oi=c):pg(t,e),mg(e),8192&o){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(_i=e,d=e.child;null!==d;){for(I=_i=d;null!==_i;){switch(C=(u=_i).child,u.tag){case 0:case 11:case 14:case 15:ng(4,u,u.return);break;case 1:$i(u,u.return);var p=u.stateNode;if("function"===typeof p.componentWillUnmount){o=u,n=u.return;try{t=o,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(A){Gs(o,n,A)}}break;case 5:$i(u,u.return);break;case 22:if(null!==u.memoizedState){yg(I);continue}}null!==C?(C.return=u,_i=C):yg(I)}d=d.sibling}e:for(d=null,I=e;;){if(5===I.tag){if(null===d){d=I;try{r=I.stateNode,c?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(g=I.stateNode,i=void 0!==(s=I.memoizedProps.style)&&null!==s&&s.hasOwnProperty("display")?s.display:null,g.style.display=pe("display",i))}catch(A){Gs(e,e.return,A)}}}else if(6===I.tag){if(null===d)try{I.stateNode.nodeValue=c?"":I.memoizedProps}catch(A){Gs(e,e.return,A)}}else if((22!==I.tag&&23!==I.tag||null===I.memoizedState||I===e)&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;null===I.sibling;){if(null===I.return||I.return===e)break e;d===I&&(d=null),I=I.return}d===I&&(d=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:pg(t,e),mg(e),4&o&&Cg(e);case 21:}}function mg(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ag(n)){var o=n;break e}n=n.return}throw Error(l(160))}switch(o.tag){case 5:var r=o.stateNode;32&o.flags&&(Ie(r,""),o.flags&=-33),sg(e,ig(e),r);break;case 3:case 4:var a=o.stateNode.containerInfo;gg(e,ig(e),a);break;default:throw Error(l(161))}}catch(i){Gs(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function hg(e,t,n){_i=e,bg(e,t,n)}function bg(e,t,n){for(var o=0!==(1&e.mode);null!==_i;){var r=_i,l=r.child;if(22===r.tag&&o){var a=null!==r.memoizedState||Qi;if(!a){var i=r.alternate,g=null!==i&&null!==i.memoizedState||Oi;i=Qi;var s=Oi;if(Qi=a,(Oi=g)&&!s)for(_i=r;null!==_i;)g=(a=_i).child,22===a.tag&&null!==a.memoizedState?vg(r):null!==g?(g.return=a,_i=g):vg(r);for(;null!==l;)_i=l,bg(l,t,n),l=l.sibling;_i=r,Qi=i,Oi=s}fg(e)}else 0!==(8772&r.subtreeFlags)&&null!==l?(l.return=r,_i=l):fg(e)}}function fg(e){for(;null!==_i;){var t=_i;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Oi||og(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!Oi)if(null===n)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ni(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&jl(t,a,o);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}jl(t,i,n)}break;case 5:var g=t.stateNode;if(null===n&&4&t.flags){n=g;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var I=d.dehydrated;null!==I&&Et(I)}}}break;default:throw Error(l(163))}Oi||512&t.flags&&rg(t)}catch(u){Gs(t,t.return,u)}}if(t===e){_i=null;break}if(null!==(n=t.sibling)){n.return=t.return,_i=n;break}_i=t.return}}function yg(e){for(;null!==_i;){var t=_i;if(t===e){_i=null;break}var n=t.sibling;if(null!==n){n.return=t.return,_i=n;break}_i=t.return}}function vg(e){for(;null!==_i;){var t=_i;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{og(4,t)}catch(g){Gs(t,n,g)}break;case 1:var o=t.stateNode;if("function"===typeof o.componentDidMount){var r=t.return;try{o.componentDidMount()}catch(g){Gs(t,r,g)}}var l=t.return;try{rg(t)}catch(g){Gs(t,l,g)}break;case 5:var a=t.return;try{rg(t)}catch(g){Gs(t,a,g)}}}catch(g){Gs(t,t.return,g)}if(t===e){_i=null;break}var i=t.sibling;if(null!==i){i.return=t.return,_i=i;break}_i=t.return}}var Zg,Gg=Math.ceil,Sg=f.ReactCurrentDispatcher,Bg=f.ReactCurrentOwner,wg=f.ReactCurrentBatchConfig,Rg=0,Wg=null,kg=null,Vg=0,Xg=0,xg=Sr(0),Jg=0,Ng=null,Hg=0,Fg=0,Yg=0,Kg=null,Mg=null,Lg=0,Eg=1/0,zg=null,jg=!1,Dg=null,Tg=null,Pg=!1,Ug=null,Qg=0,Og=0,qg=null,_g=-1,$g=0;function es(){return 0!==(6&Rg)?qe():-1!==_g?_g:_g=qe()}function ts(e){return 0===(1&e.mode)?1:0!==(2&Rg)&&0!==Vg?Vg&-Vg:null!==Al.transition?(0===$g&&($g=pt()),$g):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Ot(e.type)}function ns(e,t,n,o){if(50<Og)throw Og=0,qg=null,Error(l(185));mt(e,n,o),0!==(2&Rg)&&e===Wg||(e===Wg&&(0===(2&Rg)&&(Fg|=n),4===Jg&&is(e,Vg)),os(e,o),1===n&&0===Rg&&0===(1&t.mode)&&(Eg=qe()+500,Mr&&zr()))}function os(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-at(l),i=1<<a,g=r[a];-1===g?0!==(i&n)&&0===(i&o)||(r[a]=ut(i,t)):g<=t&&(e.expiredLanes|=i),l&=~i}}(e,t);var o=It(e,e===Wg?Vg:0);if(0===o)null!==n&&Ue(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=n&&Ue(n),1===t)0===e.tag?function(e){Mr=!0,Er(e)}(gs.bind(null,e)):Er(gs.bind(null,e)),ir((function(){0===(6&Rg)&&zr()})),n=null;else{switch(ft(o)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=ot}n=Ws(n,rs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rs(e,t){if(_g=-1,$g=0,0!==(6&Rg))throw Error(l(327));var n=e.callbackNode;if(vs()&&e.callbackNode!==n)return null;var o=It(e,e===Wg?Vg:0);if(0===o)return null;if(0!==(30&o)||0!==(o&e.expiredLanes)||t)t=As(e,o);else{t=o;var r=Rg;Rg|=2;var a=Cs();for(Wg===e&&Vg===t||(zg=null,Eg=qe()+500,Is(e,t));;)try{hs();break}catch(g){us(e,g)}wl(),Sg.current=a,Rg=r,null!==kg?t=0:(Wg=null,Vg=0,t=Jg)}if(0!==t){if(2===t&&(0!==(r=Ct(e))&&(o=r,t=ls(e,r))),1===t)throw n=Ng,Is(e,0),is(e,o),os(e,qe()),n;if(6===t)is(e,o);else{if(r=e.current.alternate,0===(30&o)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var o=0;o<n.length;o++){var r=n[o],l=r.getSnapshot;r=r.value;try{if(!io(l(),r))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=As(e,o))&&(0!==(a=Ct(e))&&(o=a,t=ls(e,a))),1===t))throw n=Ng,Is(e,0),is(e,o),os(e,qe()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(l(345));case 2:case 5:ys(e,Mg,zg);break;case 3:if(is(e,o),(130023424&o)===o&&10<(t=Lg+500-qe())){if(0!==It(e,0))break;if(((r=e.suspendedLanes)&o)!==o){es(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=rr(ys.bind(null,e,Mg,zg),t);break}ys(e,Mg,zg);break;case 4:if(is(e,o),(4194240&o)===o)break;for(t=e.eventTimes,r=-1;0<o;){var i=31-at(o);a=1<<i,(i=t[i])>r&&(r=i),o&=~a}if(o=r,10<(o=(120>(o=qe()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Gg(o/1960))-o)){e.timeoutHandle=rr(ys.bind(null,e,Mg,zg),o);break}ys(e,Mg,zg);break;default:throw Error(l(329))}}}return os(e,qe()),e.callbackNode===n?rs.bind(null,e):null}function ls(e,t){var n=Kg;return e.current.memoizedState.isDehydrated&&(Is(e,t).flags|=256),2!==(e=As(e,t))&&(t=Mg,Mg=n,null!==t&&as(t)),e}function as(e){null===Mg?Mg=e:Mg.push.apply(Mg,e)}function is(e,t){for(t&=~Yg,t&=~Fg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),o=1<<n;e[n]=-1,t&=~o}}function gs(e){if(0!==(6&Rg))throw Error(l(327));vs();var t=It(e,0);if(0===(1&t))return os(e,qe()),null;var n=As(e,t);if(0!==e.tag&&2===n){var o=Ct(e);0!==o&&(t=o,n=ls(e,o))}if(1===n)throw n=Ng,Is(e,0),is(e,t),os(e,qe()),n;if(6===n)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ys(e,Mg,zg),os(e,qe()),null}function ss(e,t){var n=Rg;Rg|=1;try{return e(t)}finally{0===(Rg=n)&&(Eg=qe()+500,Mr&&zr())}}function cs(e){null!==Ug&&0===Ug.tag&&0===(6&Rg)&&vs();var t=Rg;Rg|=1;var n=wg.transition,o=bt;try{if(wg.transition=null,bt=1,e)return e()}finally{bt=o,wg.transition=n,0===(6&(Rg=t))&&zr()}}function ds(){Xg=xg.current,Br(xg)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,lr(n)),null!==kg)for(n=kg.return;null!==n;){var o=n;switch(nl(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Jr();break;case 3:ql(),Br(kr),Br(Wr),oa();break;case 5:$l(o);break;case 4:ql();break;case 13:case 19:Br(ea);break;case 10:Rl(o.type._context);break;case 22:case 23:ds()}n=n.return}if(Wg=e,kg=e=xs(e.current,null),Vg=Xg=t,Jg=0,Ng=null,Yg=Fg=Hg=0,Mg=Kg=null,null!==Xl){for(t=0;t<Xl.length;t++)if(null!==(o=(n=Xl[t]).interleaved)){n.interleaved=null;var r=o.next,l=n.pending;if(null!==l){var a=l.next;l.next=r,o.next=a}n.pending=o}Xl=null}return e}function us(e,t){for(;;){var n=kg;try{if(wl(),ra.current=_a,ca){for(var o=ia.memoizedState;null!==o;){var r=o.queue;null!==r&&(r.pending=null),o=o.next}ca=!1}if(aa=0,sa=ga=ia=null,da=!1,Ia=0,Bg.current=null,null===n||null===n.return){Jg=1,Ng=t,kg=null;break}e:{var a=e,i=n.return,g=n,s=t;if(t=Vg,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s,d=g,I=d.tag;if(0===(1&d.mode)&&(0===I||11===I||15===I)){var u=d.alternate;u?(d.updateQueue=u.updateQueue,d.memoizedState=u.memoizedState,d.lanes=u.lanes):(d.updateQueue=null,d.memoizedState=null)}var C=Ai(i);if(null!==C){C.flags&=-257,mi(C,i,g,0,t),1&C.mode&&pi(a,c,t),s=c;var p=(t=C).updateQueue;if(null===p){var A=new Set;A.add(s),t.updateQueue=A}else p.add(s);break e}if(0===(1&t)){pi(a,c,t),ps();break e}s=Error(l(426))}else if(ll&&1&g.mode){var m=Ai(i);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),mi(m,i,g,0,t),pl(si(s,g));break e}}a=s=si(s,g),4!==Jg&&(Jg=2),null===Kg?Kg=[a]:Kg.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,El(a,ui(0,s,t));break e;case 1:g=s;var h=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof h.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Tg||!Tg.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,El(a,Ci(a,g,t));break e}}a=a.return}while(null!==a)}fs(n)}catch(f){t=f,kg===n&&null!==n&&(kg=n=n.return);continue}break}}function Cs(){var e=Sg.current;return Sg.current=_a,null===e?_a:e}function ps(){0!==Jg&&3!==Jg&&2!==Jg||(Jg=4),null===Wg||0===(268435455&Hg)&&0===(268435455&Fg)||is(Wg,Vg)}function As(e,t){var n=Rg;Rg|=2;var o=Cs();for(Wg===e&&Vg===t||(zg=null,Is(e,t));;)try{ms();break}catch(r){us(e,r)}if(wl(),Rg=n,Sg.current=o,null!==kg)throw Error(l(261));return Wg=null,Vg=0,Jg}function ms(){for(;null!==kg;)bs(kg)}function hs(){for(;null!==kg&&!Qe();)bs(kg)}function bs(e){var t=Zg(e.alternate,e,Xg);e.memoizedProps=e.pendingProps,null===t?fs(e):kg=t,Bg.current=null}function fs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Pi(n,t,Xg)))return void(kg=n)}else{if(null!==(n=Ui(n,t)))return n.flags&=32767,void(kg=n);if(null===e)return Jg=6,void(kg=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kg=t);kg=t=e}while(null!==t);0===Jg&&(Jg=5)}function ys(e,t,n){var o=bt,r=wg.transition;try{wg.transition=null,bt=1,function(e,t,n,o){do{vs()}while(null!==Ug);if(0!==(6&Rg))throw Error(l(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),l=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~l}}(e,a),e===Wg&&(kg=Wg=null,Vg=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Pg||(Pg=!0,Ws(tt,(function(){return vs(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=wg.transition,wg.transition=null;var i=bt;bt=1;var g=Rg;Rg|=4,Bg.current=null,function(e,t){if(tr=jt,Co(e=uo())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var r=o.anchorOffset,a=o.focusNode;o=o.focusOffset;try{n.nodeType,a.nodeType}catch(y){n=null;break e}var i=0,g=-1,s=-1,c=0,d=0,I=e,u=null;t:for(;;){for(var C;I!==n||0!==r&&3!==I.nodeType||(g=i+r),I!==a||0!==o&&3!==I.nodeType||(s=i+o),3===I.nodeType&&(i+=I.nodeValue.length),null!==(C=I.firstChild);)u=I,I=C;for(;;){if(I===e)break t;if(u===n&&++c===r&&(g=i),u===a&&++d===o&&(s=i),null!==(C=I.nextSibling))break;u=(I=u).parentNode}I=C}n=-1===g||-1===s?null:{start:g,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(nr={focusedElem:e,selectionRange:n},jt=!1,_i=t;null!==_i;)if(e=(t=_i).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,_i=e;else for(;null!==_i;){t=_i;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var A=p.memoizedProps,m=p.memoizedState,h=t.stateNode,b=h.getSnapshotBeforeUpdate(t.elementType===t.type?A:ni(t.type,A),m);h.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var f=t.stateNode.containerInfo;1===f.nodeType?f.textContent="":9===f.nodeType&&f.documentElement&&f.removeChild(f.documentElement);break;default:throw Error(l(163))}}catch(y){Gs(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,_i=e;break}_i=t.return}p=tg,tg=!1}(e,n),Ag(n,e),po(nr),jt=!!tr,nr=tr=null,e.current=n,hg(n,e,r),Oe(),Rg=g,bt=i,wg.transition=a}else e.current=n;if(Pg&&(Pg=!1,Ug=e,Qg=r),a=e.pendingLanes,0===a&&(Tg=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),os(e,qe()),null!==t)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(jg)throw jg=!1,e=Dg,Dg=null,e;0!==(1&Qg)&&0!==e.tag&&vs(),a=e.pendingLanes,0!==(1&a)?e===qg?Og++:(Og=0,qg=e):Og=0,zr()}(e,t,n,o)}finally{wg.transition=r,bt=o}return null}function vs(){if(null!==Ug){var e=ft(Qg),t=wg.transition,n=bt;try{if(wg.transition=null,bt=16>e?16:e,null===Ug)var o=!1;else{if(e=Ug,Ug=null,Qg=0,0!==(6&Rg))throw Error(l(331));var r=Rg;for(Rg|=4,_i=e.current;null!==_i;){var a=_i,i=a.child;if(0!==(16&_i.flags)){var g=a.deletions;if(null!==g){for(var s=0;s<g.length;s++){var c=g[s];for(_i=c;null!==_i;){var d=_i;switch(d.tag){case 0:case 11:case 15:ng(8,d,a)}var I=d.child;if(null!==I)I.return=d,_i=I;else for(;null!==_i;){var u=(d=_i).sibling,C=d.return;if(lg(d),d===c){_i=null;break}if(null!==u){u.return=C,_i=u;break}_i=C}}}var p=a.alternate;if(null!==p){var A=p.child;if(null!==A){p.child=null;do{var m=A.sibling;A.sibling=null,A=m}while(null!==A)}}_i=a}}if(0!==(2064&a.subtreeFlags)&&null!==i)i.return=a,_i=i;else e:for(;null!==_i;){if(0!==(2048&(a=_i).flags))switch(a.tag){case 0:case 11:case 15:ng(9,a,a.return)}var h=a.sibling;if(null!==h){h.return=a.return,_i=h;break e}_i=a.return}}var b=e.current;for(_i=b;null!==_i;){var f=(i=_i).child;if(0!==(2064&i.subtreeFlags)&&null!==f)f.return=i,_i=f;else e:for(i=b;null!==_i;){if(0!==(2048&(g=_i).flags))try{switch(g.tag){case 0:case 11:case 15:og(9,g)}}catch(v){Gs(g,g.return,v)}if(g===i){_i=null;break e}var y=g.sibling;if(null!==y){y.return=g.return,_i=y;break e}_i=g.return}}if(Rg=r,zr(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(rt,e)}catch(v){}o=!0}return o}finally{bt=n,wg.transition=t}}return!1}function Zs(e,t,n){e=Ml(e,t=ui(0,t=si(n,t),1),1),t=es(),null!==e&&(mt(e,1,t),os(e,t))}function Gs(e,t,n){if(3===e.tag)Zs(e,e,n);else for(;null!==t;){if(3===t.tag){Zs(t,e,n);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Tg||!Tg.has(o))){t=Ml(t,e=Ci(t,e=si(n,e),1),1),e=es(),null!==t&&(mt(t,1,e),os(t,e));break}}t=t.return}}function Ss(e,t,n){var o=e.pingCache;null!==o&&o.delete(t),t=es(),e.pingedLanes|=e.suspendedLanes&n,Wg===e&&(Vg&n)===n&&(4===Jg||3===Jg&&(130023424&Vg)===Vg&&500>qe()-Lg?Is(e,0):Yg|=n),os(e,t)}function Bs(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=es();null!==(e=Nl(e,t))&&(mt(e,t,n),os(e,n))}function ws(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Bs(e,n)}function Rs(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(l(314))}null!==o&&o.delete(t),Bs(e,n)}function Ws(e,t){return Pe(e,t)}function ks(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(e,t,n,o){return new ks(e,t,n,o)}function Xs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xs(e,t){var n=e.alternate;return null===n?((n=Vs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Js(e,t,n,o,r,a){var i=2;if(o=e,"function"===typeof e)Xs(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case Z:return Ns(n.children,r,a,t);case G:i=8,r|=8;break;case S:return(e=Vs(12,n,t,2|r)).elementType=S,e.lanes=a,e;case W:return(e=Vs(13,n,t,r)).elementType=W,e.lanes=a,e;case k:return(e=Vs(19,n,t,r)).elementType=k,e.lanes=a,e;case x:return Hs(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:i=10;break e;case w:i=9;break e;case R:i=11;break e;case V:i=14;break e;case X:i=16,o=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Vs(i,n,t,r)).elementType=e,t.type=o,t.lanes=a,t}function Ns(e,t,n,o){return(e=Vs(7,e,o,t)).lanes=n,e}function Hs(e,t,n,o){return(e=Vs(22,e,o,t)).elementType=x,e.lanes=n,e.stateNode={isHidden:!1},e}function Fs(e,t,n){return(e=Vs(6,e,null,t)).lanes=n,e}function Ys(e,t,n){return(t=Vs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ks(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ms(e,t,n,o,r,l,a,i,g){return e=new Ks(e,t,n,i,g),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Vs(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fl(l),e}function Ls(e){if(!e)return Rr;e:{if(Ee(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var n=e.type;if(xr(n))return Hr(e,n,t)}return t}function Es(e,t,n,o,r,l,a,i,g){return(e=Ms(n,o,!0,e,0,l,0,i,g)).context=Ls(null),n=e.current,(l=Kl(o=es(),r=ts(n))).callback=void 0!==t&&null!==t?t:null,Ml(n,l,r),e.current.lanes=r,mt(e,r,o),os(e,o),e}function zs(e,t,n,o){var r=t.current,l=es(),a=ts(r);return n=Ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=Kl(l,a)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),null!==(e=Ml(r,t,a))&&(ns(e,r,a,l),Ll(e,r,a)),a}function js(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ds(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ts(e,t){Ds(e,t),(e=e.alternate)&&Ds(e,t)}Zg=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||kr.current)bi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bi=!1,function(e,t,n){switch(t.tag){case 3:Wi(t),Cl();break;case 5:_l(t);break;case 1:xr(t.type)&&Fr(t);break;case 4:Ol(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;wr(Zl,o._currentValue),o._currentValue=r;break;case 13:if(null!==(o=t.memoizedState))return null!==o.dehydrated?(wr(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fi(e,t,n):(wr(ea,1&ea.current),null!==(e=ji(e,t,n))?e.sibling:null);wr(ea,1&ea.current);break;case 19:if(o=0!==(n&t.childLanes),0!==(128&e.flags)){if(o)return Ei(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),wr(ea,ea.current),o)break;return null;case 22:case 23:return t.lanes=0,Gi(e,t,n)}return ji(e,t,n)}(e,t,n);bi=0!==(131072&e.flags)}else bi=!1,ll&&0!==(1048576&t.flags)&&el(t,Pr,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;zi(e,t),e=t.pendingProps;var r=Xr(t,Wr.current);kl(t,n),r=Aa(null,t,o,e,r,n);var a=ma();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xr(o)?(a=!0,Fr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Fl(t),r.updater=ri,t.stateNode=r,r._reactInternals=t,gi(t,o,e,n),t=Ri(null,t,o,!0,a,n)):(t.tag=0,ll&&a&&tl(t),fi(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(zi(e,t),e=t.pendingProps,o=(r=o._init)(o._payload),t.type=o,r=t.tag=function(e){if("function"===typeof e)return Xs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===V)return 14}return 2}(o),e=ni(o,e),r){case 0:t=Bi(null,t,o,e,n);break e;case 1:t=wi(null,t,o,e,n);break e;case 11:t=yi(null,t,o,e,n);break e;case 14:t=vi(null,t,o,ni(o.type,e),n);break e}throw Error(l(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,Bi(e,t,o,r=t.elementType===o?r:ni(o,r),n);case 1:return o=t.type,r=t.pendingProps,wi(e,t,o,r=t.elementType===o?r:ni(o,r),n);case 3:e:{if(Wi(t),null===e)throw Error(l(387));o=t.pendingProps,r=(a=t.memoizedState).element,Yl(e,t),zl(t,o,null,n);var i=t.memoizedState;if(o=i.element,a.isDehydrated){if(a={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ki(e,t,o,n,r=si(Error(l(423)),t));break e}if(o!==r){t=ki(e,t,o,n,r=si(Error(l(424)),t));break e}for(rl=cr(t.stateNode.containerInfo.firstChild),ol=t,ll=!0,al=null,n=vl(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Cl(),o===r){t=ji(e,t,n);break e}fi(e,t,o,n)}t=t.child}return t;case 5:return _l(t),null===e&&cl(t),o=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,i=r.children,or(o,r)?i=null:null!==a&&or(o,a)&&(t.flags|=32),Si(e,t),fi(e,t,i,n),t.child;case 6:return null===e&&cl(t),null;case 13:return Fi(e,t,n);case 4:return Ol(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=yl(t,null,o,n):fi(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,yi(e,t,o,r=t.elementType===o?r:ni(o,r),n);case 7:return fi(e,t,t.pendingProps,n),t.child;case 8:case 12:return fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,a=t.memoizedProps,i=r.value,wr(Zl,o._currentValue),o._currentValue=i,null!==a)if(io(a.value,i)){if(a.children===r.children&&!kr.current){t=ji(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var g=a.dependencies;if(null!==g){i=a.child;for(var s=g.firstContext;null!==s;){if(s.context===o){if(1===a.tag){(s=Kl(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?s.next=s:(s.next=d.next,d.next=s),c.pending=s}}a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Wl(a.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===a.tag)i=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(i=a.return))throw Error(l(341));i.lanes|=n,null!==(g=i.alternate)&&(g.lanes|=n),Wl(i,n,t),i=a.sibling}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===t){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}fi(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,kl(t,n),o=o(r=Vl(r)),t.flags|=1,fi(e,t,o,n),t.child;case 14:return r=ni(o=t.type,t.pendingProps),vi(e,t,o,r=ni(o.type,r),n);case 15:return Zi(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:ni(o,r),zi(e,t),t.tag=1,xr(o)?(e=!0,Fr(t)):e=!1,kl(t,n),ai(t,o,r),gi(t,o,r,n),Ri(null,t,o,!0,e,n);case 19:return Ei(e,t,n);case 22:return Gi(e,t,n)}throw Error(l(156,t.tag))};var Ps="function"===typeof reportError?reportError:function(e){console.error(e)};function Us(e){this._internalRoot=e}function Qs(e){this._internalRoot=e}function Os(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function _s(){}function $s(e,t,n,o,r){var l=n._reactRootContainer;if(l){var a=l;if("function"===typeof r){var i=r;r=function(){var e=js(a);i.call(e)}}zs(t,a,e,r)}else a=function(e,t,n,o,r){if(r){if("function"===typeof o){var l=o;o=function(){var e=js(a);l.call(e)}}var a=Es(t,o,e,0,null,!1,0,"",_s);return e._reactRootContainer=a,e[pr]=a.current,zo(8===e.nodeType?e.parentNode:e),cs(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof o){var i=o;o=function(){var e=js(g);i.call(e)}}var g=Ms(e,0,!1,null,0,!1,0,"",_s);return e._reactRootContainer=g,e[pr]=g.current,zo(8===e.nodeType?e.parentNode:e),cs((function(){zs(t,g,n,o)})),g}(n,t,e,r,o);return js(a)}Qs.prototype.render=Us.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));zs(e,t,null,null)},Qs.prototype.unmount=Us.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cs((function(){zs(null,e,null,null)})),t[pr]=null}},Qs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xt.length&&0!==t&&t<xt[n].priority;n++);xt.splice(n,0,e),0===n&&Ft(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(ht(t,1|n),os(t,qe()),0===(6&Rg)&&(Eg=qe()+500,zr()))}break;case 13:cs((function(){var t=Nl(e,1);if(null!==t){var n=es();ns(t,e,1,n)}})),Ts(e,1)}},vt=function(e){if(13===e.tag){var t=Nl(e,134217728);if(null!==t)ns(t,e,134217728,es());Ts(e,134217728)}},Zt=function(e){if(13===e.tag){var t=ts(e),n=Nl(e,t);if(null!==n)ns(n,e,t,es());Ts(e,t)}},Gt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ve=function(e,t,n){switch(t){case"input":if(_(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=vr(o);if(!r)throw Error(l(90));P(o),_(o,r)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=ss,We=cs;var ec={usingClientEntryPoint:!1,Events:[fr,yr,vr,Be,we,ss]},tc={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=De(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{rt=oc.inject(nc),lt=oc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Os(t))throw Error(l(200));return function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:v,key:null==o?null:""+o,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Os(e))throw Error(l(299));var n=!1,o="",r=Ps;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Ms(e,1,!1,null,0,n,0,o,r),e[pr]=t.current,zo(8===e.nodeType?e.parentNode:e),new Us(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=De(t))?null:e.stateNode},t.flushSync=function(e){return cs(e)},t.hydrate=function(e,t,n){if(!qs(t))throw Error(l(200));return $s(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Os(e))throw Error(l(405));var o=null!=n&&n.hydratedSources||null,r=!1,a="",i=Ps;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Es(t,null,e,1,null!=n?n:null,r,0,a,i),e[pr]=t.current,zo(e),o)for(e=0;e<o.length;e++)r=(r=(n=o[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qs(t)},t.render=function(e,t,n){if(!qs(t))throw Error(l(200));return $s(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qs(e))throw Error(l(40));return!!e._reactRootContainer&&(cs((function(){$s(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=ss,t.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!qs(n))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return $s(e,t,n,!1,o)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),o=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),g=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),u=Symbol.iterator;var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,A={};function m(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||C}function h(){}function b(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||C}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=m.prototype;var f=b.prototype=new h;f.constructor=b,p(f,m.prototype),f.isPureReactComponent=!0;var y=Array.isArray,v=Object.prototype.hasOwnProperty,Z={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,o){var r,l={},a=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)v.call(t,r)&&!G.hasOwnProperty(r)&&(l[r]=t[r]);var g=arguments.length-2;if(1===g)l.children=o;else if(1<g){for(var s=Array(g),c=0;c<g;c++)s[c]=arguments[c+2];l.children=s}if(e&&e.defaultProps)for(r in g=e.defaultProps)void 0===l[r]&&(l[r]=g[r]);return{$$typeof:n,type:e,key:a,ref:i,props:l,_owner:Z.current}}function B(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var w=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function W(e,t,r,l,a){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var g=!1;if(null===e)g=!0;else switch(i){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case n:case o:g=!0}}if(g)return a=a(g=e),e=""===l?"."+R(g,0):l,y(a)?(r="",null!=e&&(r=e.replace(w,"$&/")+"/"),W(a,t,r,"",(function(e){return e}))):null!=a&&(B(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||g&&g.key===a.key?"":(""+a.key).replace(w,"$&/")+"/")+e)),t.push(a)),1;if(g=0,l=""===l?".":l+":",y(e))for(var s=0;s<e.length;s++){var c=l+R(i=e[s],s);g+=W(i,t,r,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=u&&e[u]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),s=0;!(i=e.next()).done;)g+=W(i=i.value,t,r,c=l+R(i,s++),a);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function k(e,t,n){if(null==e)return e;var o=[],r=0;return W(e,o,"","",(function(e){return t.call(n,e,r++)})),o}function V(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var X={current:null},x={transition:null},J={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:x,ReactCurrentOwner:Z};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!B(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=l,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,t.act=N,t.cloneElement=function(e,t,o){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),l=e.key,a=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,i=Z.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(s in t)v.call(t,s)&&!G.hasOwnProperty(s)&&(r[s]=void 0===t[s]&&void 0!==g?g[s]:t[s])}var s=arguments.length-2;if(1===s)r.children=o;else if(1<s){g=Array(s);for(var c=0;c<s;c++)g[c]=arguments[c+2];r.children=g}return{$$typeof:n,type:e.type,key:l,ref:a,props:r,_owner:i}},t.createContext=function(e){return(e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=B,t.lazy=function(e){return{$$typeof:I,_payload:{_status:-1,_result:e},_init:V}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.transition;x.transition={};try{e()}finally{x.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return X.current.useCallback(e,t)},t.useContext=function(e){return X.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return X.current.useDeferredValue(e)},t.useEffect=function(e,t){return X.current.useEffect(e,t)},t.useId=function(){return X.current.useId()},t.useImperativeHandle=function(e,t,n){return X.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return X.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return X.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return X.current.useMemo(e,t)},t.useReducer=function(e,t,n){return X.current.useReducer(e,t,n)},t.useRef=function(e){return X.current.useRef(e)},t.useState=function(e){return X.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return X.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return X.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var o=n(7950);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(816);function r(e,t,n){return(t=(0,o.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,g=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,I=n?Symbol.for("react.forward_ref"):60112,u=n?Symbol.for("react.suspense"):60113,C=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,h=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,f=n?Symbol.for("react.scope"):60119;function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case c:case d:case l:case i:case a:case u:return e;default:switch(e=e&&e.$$typeof){case s:case I:case A:case p:case g:return e;default:return t}}case r:return t}}}function v(e){return y(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=s,t.ContextProvider=g,t.Element=o,t.ForwardRef=I,t.Fragment=l,t.Lazy=A,t.Memo=p,t.Portal=r,t.Profiler=i,t.StrictMode=a,t.Suspense=u,t.isAsyncMode=function(e){return v(e)||y(e)===c},t.isConcurrentMode=v,t.isContextConsumer=function(e){return y(e)===s},t.isContextProvider=function(e){return y(e)===g},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return y(e)===I},t.isFragment=function(e){return y(e)===l},t.isLazy=function(e){return y(e)===A},t.isMemo=function(e){return y(e)===p},t.isPortal=function(e){return y(e)===r},t.isProfiler=function(e){return y(e)===i},t.isStrictMode=function(e){return y(e)===a},t.isSuspense=function(e){return y(e)===u},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===l||e===d||e===i||e===a||e===u||e===C||"object"===typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===p||e.$$typeof===g||e.$$typeof===s||e.$$typeof===I||e.$$typeof===h||e.$$typeof===b||e.$$typeof===f||e.$$typeof===m)},t.typeOf=y},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,r=e[o];if(!(0<l(r,t)))break e;e[o]=t,e[n]=r,n=o}}function o(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,r=e.length,a=r>>>1;o<a;){var i=2*(o+1)-1,g=e[i],s=i+1,c=e[s];if(0>l(g,n))s<r&&0>l(c,g)?(e[o]=c,e[s]=n,o=s):(e[o]=g,e[i]=n,o=i);else{if(!(s<r&&0>l(c,n)))break e;e[o]=c,e[s]=n,o=s}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,g=i.now();t.unstable_now=function(){return i.now()-g}}var s=[],c=[],d=1,I=null,u=3,C=!1,p=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,h="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=o(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(s,t)}t=o(c)}}function y(e){if(A=!1,f(e),!p)if(null!==o(s))p=!0,x(v);else{var t=o(c);null!==t&&J(y,t.startTime-e)}}function v(e,n){p=!1,A&&(A=!1,h(B),B=-1),C=!0;var l=u;try{for(f(n),I=o(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var a=I.callback;if("function"===typeof a){I.callback=null,u=I.priorityLevel;var i=a(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof i?I.callback=i:I===o(s)&&r(s),f(n)}else r(s);I=o(s)}if(null!==I)var g=!0;else{var d=o(c);null!==d&&J(y,d.startTime-n),g=!1}return g}finally{I=null,u=l,C=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var Z,G=!1,S=null,B=-1,w=5,R=-1;function W(){return!(t.unstable_now()-R<w)}function k(){if(null!==S){var e=t.unstable_now();R=e;var n=!0;try{n=S(!0,e)}finally{n?Z():(G=!1,S=null)}}else G=!1}if("function"===typeof b)Z=function(){b(k)};else if("undefined"!==typeof MessageChannel){var V=new MessageChannel,X=V.port2;V.port1.onmessage=k,Z=function(){X.postMessage(null)}}else Z=function(){m(k,0)};function x(e){S=e,G||(G=!0,Z())}function J(e,n){B=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||C||(p=!0,x(v))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return o(s)},t.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var n=u;u=t;try{return e()}finally{u=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=u;u=e;try{return t()}finally{u=n}},t.unstable_scheduleCallback=function(e,r,l){var a=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?a+l:a:l=a,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:l,expirationTime:i=l+i,sortIndex:-1},l>a?(e.sortIndex=l,n(c,e),null===o(s)&&e===o(c)&&(A?(h(B),B=-1):A=!0,J(y,l-a))):(e.sortIndex=i,n(s,e),p||C||(p=!0,x(v))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=u;return function(){var n=u;u=t;try{return e.apply(this,arguments)}finally{u=n}}}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9309:function(e,t,n){e.exports=function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var n=t(e);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(Array.isArray(e))return e}function a(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,l=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(l.push(o.value),!t||l.length!==t);a=!0);}catch(g){i=!0,r=g}finally{try{a||null==n.return||n.return()}finally{if(i)throw r}}return l}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function g(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return l(e)||a(e,t)||g(e,t)||s()}function d(e,t){if(null==e)return{};var n,o,r={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}function I(e,t){if(null==e)return{};var n,o,r=d(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u={exports:{}},C={exports:{}},p={},A="function"===typeof Symbol&&Symbol.for,m=A?Symbol.for("react.element"):60103,h=A?Symbol.for("react.portal"):60106,b=A?Symbol.for("react.fragment"):60107,f=A?Symbol.for("react.strict_mode"):60108,y=A?Symbol.for("react.profiler"):60114,v=A?Symbol.for("react.provider"):60109,Z=A?Symbol.for("react.context"):60110,G=A?Symbol.for("react.async_mode"):60111,S=A?Symbol.for("react.concurrent_mode"):60111,B=A?Symbol.for("react.forward_ref"):60112,w=A?Symbol.for("react.suspense"):60113,R=A?Symbol.for("react.suspense_list"):60120,W=A?Symbol.for("react.memo"):60115,k=A?Symbol.for("react.lazy"):60116,V=A?Symbol.for("react.block"):60121,X=A?Symbol.for("react.fundamental"):60117,x=A?Symbol.for("react.responder"):60118,J=A?Symbol.for("react.scope"):60119;function N(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case m:switch(e=e.type){case G:case S:case b:case y:case f:case w:return e;default:switch(e=e&&e.$$typeof){case Z:case B:case k:case W:case v:return e;default:return t}}case h:return t}}}function H(e){return N(e)===S}p.AsyncMode=G,p.ConcurrentMode=S,p.ContextConsumer=Z,p.ContextProvider=v,p.Element=m,p.ForwardRef=B,p.Fragment=b,p.Lazy=k,p.Memo=W,p.Portal=h,p.Profiler=y,p.StrictMode=f,p.Suspense=w,p.isAsyncMode=function(e){return H(e)||N(e)===G},p.isConcurrentMode=H,p.isContextConsumer=function(e){return N(e)===Z},p.isContextProvider=function(e){return N(e)===v},p.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===m},p.isForwardRef=function(e){return N(e)===B},p.isFragment=function(e){return N(e)===b},p.isLazy=function(e){return N(e)===k},p.isMemo=function(e){return N(e)===W},p.isPortal=function(e){return N(e)===h},p.isProfiler=function(e){return N(e)===y},p.isStrictMode=function(e){return N(e)===f},p.isSuspense=function(e){return N(e)===w},p.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===b||e===S||e===y||e===f||e===w||e===R||"object"===typeof e&&null!==e&&(e.$$typeof===k||e.$$typeof===W||e.$$typeof===v||e.$$typeof===Z||e.$$typeof===B||e.$$typeof===X||e.$$typeof===x||e.$$typeof===J||e.$$typeof===V)},p.typeOf=N,C.exports=p;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function F(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==o.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(l){return!1}}F()&&Object.assign;var Y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function K(e,t,n,o,r){}Function.call.bind(Object.prototype.hasOwnProperty),K.resetWarningCache=function(){},C.exports;var M=Y;function L(){}function E(){}E.resetWarningCache=L;var z=function(){function e(e,t,n,o,r,l){if(l!==M){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:E,resetWarningCache:L};return n.PropTypes=n,n};u.exports=z();var j=u.exports;function D(e,t){var n=atob(e);if(t){for(var o=new Uint8Array(n.length),r=0,l=n.length;r<l;++r)o[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(o.buffer))}return n}function T(e,t,n){var o=void 0===t?null:t,r=D(e,void 0!==n&&n),l=r.indexOf("\n",10)+1,a=r.substring(l)+(o?"//# sourceMappingURL="+o:""),i=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(i)}function P(e,t,n){var o;return function(r){return o=o||T(e,t,n),new Worker(o,r)}}var U=P("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),Q=["constraints","onError","onLoad","onScan","resolution","qrArea"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){return new U},$=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().forEach((function(t){e.removeTrack(t),t.stop()}))):e.stop())},ee=function(e){var t=e.constraints,r=e.onError,l=e.onLoad,a=e.onScan,i=e.resolution,g=e.qrArea,s=I(e,Q),d=n.useRef(null),u=n.useRef(null),C=n.useRef(document.createElement("canvas")),p=n.useRef(null),A=n.useRef(),m=c(n.useState(null),2),h=m[0],b=m[1],f=n.useRef(!1),y=n.useRef();n.useEffect((function(){y.current=_();var e=y.current;return e.onmessage=function(e){a&&a(e.data?q(q({},e.data),{},{canvas:C.current}):null),f.current=!1},function(){e.terminate()}}),[a]);var v=JSON.stringify(g),Z=n.useCallback((function(){var e=JSON.parse(v),t=y.current,n=u.current&&u.current.readyState===u.current.HAVE_ENOUGH_DATA;if(!f.current&&n){f.current=!0;var o,r=u.current.videoWidth,l=u.current.videoHeight,a=r>l?r:l,g=Math.floor(i/a*100)/100;l=Math.floor(g*l),r=Math.floor(g*r),C.current.width=r,C.current.height=l,p.current=C.current.getContext("2d"),p.current.drawImage(u.current,0,0,r,l),o=e&&2===e.length&&e[0]>0&&e[1]>0?p.current.getImageData(Math.floor((r-e[0])/2),Math.floor((l-e[1])/2),e[0],e[1]):p.current.getImageData(0,0,r,l),t.postMessage(o)}A.current=requestAnimationFrame(Z)}),[i,v]),G=JSON.stringify(t);return n.useEffect((function(){var e=JSON.parse(G),t=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(t){d.current=e;try{u.current&&(u.current.srcObject=e,u.current.setAttribute("playsinline",!0))}catch(n){b(window.URL.createObjectURL(e))}l&&l(),A.current=requestAnimationFrame(Z)}else $(e)})).catch((function(e){return t?r(e):null})),function(){cancelAnimationFrame(A.current),t=!1,$(d.current),h&&window.URL.revokeObjectURL(h)}}),[Z,G,r,l,h]),n.createElement("video",o({autoPlay:!0,playsInline:!0,src:h,ref:u},s))};return ee.propTypes={constraints:j.object,onError:j.func.isRequired,onLoad:j.func,onScan:j.func.isRequired,resolution:j.number,qrArea:j.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(n(5043))},9461:(e,t,n)=>{"use strict";e.exports=n(2330)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var l=Object.create(null);n.r(l);var a={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(l,a),l}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,o)=>(n.f[o](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{239:"2ac2f3e8",455:"c9a70db9",977:"1d793db2"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="astro-bsm-oracle-ivanstamas:";n.l=(o,r,l,a)=>{if(e[o])e[o].push(r);else{var i,g;if(void 0!==l)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+l){i=d;break}}i||(g=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+l),i.src=o),e[o]=[r];var I=(t,n)=>{i.onerror=i.onload=null,clearTimeout(u);var r=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},u=setTimeout(I.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=I.bind(null,i.onerror),i.onload=I.bind(null,i.onload),g&&document.head.appendChild(i)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,o)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var l=new Promise(((n,o)=>r=e[t]=[n,o]));o.push(r[2]=l);var a=n.p+n.u(t),i=new Error;n.l(a,(o=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var l=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+l+": "+a+")",i.name="ChunkLoadError",i.type=l,i.request=a,r[1](i)}}),"chunk-"+t,t)}};var t=(t,o)=>{var r,l,a=o[0],i=o[1],g=o[2],s=0;if(a.some((t=>0!==e[t]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(g)g(n)}for(t&&t(o);s<a.length;s++)l=a[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0},o=self.webpackChunkastro_bsm_oracle_ivanstamas=self.webpackChunkastro_bsm_oracle_ivanstamas||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Yt,hasStandardBrowserEnv:()=>Mt,hasStandardBrowserWebWorkerEnv:()=>Lt,navigator:()=>Kt,origin:()=>Et});var t,o=n(5043),r=n.t(o,2),l=n(4391),a=n(7950),i=n.t(a,2);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const s="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function I(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,o){return void 0===n&&(n=null),g({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||o||Math.random().toString(36).substr(2,8)})}function C(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(t+="#"===o.charAt(0)?o:"#"+o),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function A(e,n,o,r){void 0===r&&(r={});let{window:l=document.defaultView,v5Compat:a=!1}=r,i=l.history,d=t.Pop,p=null,A=m();function m(){return(i.state||{idx:null}).idx}function h(){d=t.Pop;let e=m(),n=null==e?null:e-A;A=e,p&&p({action:d,location:f.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:C(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==A&&(A=0,i.replaceState(g({},i.state,{idx:A}),""));let f={get action(){return d},get location(){return e(l,i)},listen(e){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(s,h),p=e,()=>{l.removeEventListener(s,h),p=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let r=u(f.location,e,n);o&&o(r,e),A=m()+1;let g=I(r,A),s=f.createHref(r);try{i.pushState(g,"",s)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;l.location.assign(s)}a&&p&&p({action:d,location:f.location,delta:1})},replace:function(e,n){d=t.Replace;let r=u(f.location,e,n);o&&o(r,e),A=m();let l=I(r,A),g=f.createHref(r);i.replaceState(l,"",g),a&&p&&p({action:d,location:f.location,delta:0})},go:e=>i.go(e)};return f}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function h(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,o){let r=x(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let l=f(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(l);let a=null;for(let i=0;null==a&&i<l.length;++i){let e=X(r);a=k(l[i],e,o)}return a}function f(e,t,n,o){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===o&&(o="");let r=(e,r,l)=>{let a={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(o),'Absolute route path "'+a.relativePath+'" nested under path "'+o+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(o.length));let i=Y([o,a.relativePath]),g=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),f(e.children,t,g,i)),(null!=e.path||e.index)&&t.push({path:i,score:W(i,e.index),routesMeta:g})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let o of y(e.path))r(e,t,o);else r(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...o]=t,r=n.endsWith("?"),l=n.replace(/\?$/,"");if(0===o.length)return r?[l,""]:[l];let a=y(o.join("/")),i=[];return i.push(...a.map((e=>""===e?l:[l,e].join("/")))),r&&i.push(...a),i.map((t=>e.startsWith("/")&&""===t?"/":t))}const v=/^:[\w-]+$/,Z=3,G=2,S=1,B=10,w=-2,R=e=>"*"===e;function W(e,t){let n=e.split("/"),o=n.length;return n.some(R)&&(o+=w),t&&(o+=G),n.filter((e=>!R(e))).reduce(((e,t)=>e+(v.test(t)?Z:""===t?S:B)),o)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:o}=e,r={},l="/",a=[];for(let i=0;i<o.length;++i){let e=o[i],g=i===o.length-1,s="/"===l?t:t.slice(l.length)||"/",c=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:g},s),d=e.route;if(!c&&g&&n&&!o[o.length-1].route.index&&(c=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},s)),!c)return null;Object.assign(r,c.params),a.push({params:r,pathname:Y([l,c.pathname]),pathnameBase:K(Y([l,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(l=Y([l,c.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let o=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(o.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(o.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let l=new RegExp(r,t?void 0:"i");return[l,o]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let l=r[0],a=l.replace(/(.)\/+$/,"$1"),i=r.slice(1);return{params:o.reduce(((e,t,n)=>{let{paramName:o,isOptional:r}=t;if("*"===o){let e=i[n]||"";a=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const g=i[n];return e[o]=r&&!g?void 0:(g||"").replace(/%2F/g,"/"),e}),{}),pathname:l,pathnameBase:a,pattern:e}}function X(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function x(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&"/"!==o?null:e.slice(n)||"/"}function J(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function H(e,t){let n=N(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,o){let r;void 0===o&&(o=!1),"string"===typeof e?r=p(e):(r=g({},e),c(!r.pathname||!r.pathname.includes("?"),J("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),J("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),J("#","search","hash",r)));let l,a=""===e||""===r.pathname,i=a?"/":r.pathname;if(null==i)l=n;else{let e=t.length-1;if(!o&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}l=e>=0?t[e]:"/"}let s=function(e,t){void 0===t&&(t="/");let{pathname:n,search:o="",hash:r=""}="string"===typeof e?p(e):e,l=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:l,search:M(o),hash:L(r)}}(r,l),d=i&&"/"!==i&&i.endsWith("/"),I=(a||"."===i)&&n.endsWith("/");return s.pathname.endsWith("/")||!d&&!I||(s.pathname+="/"),s}const Y=e=>e.join("/").replace(/\/\/+/g,"/"),K=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",L=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function E(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],j=(new Set(z),["get",...z]);new Set(j),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},D.apply(this,arguments)}const T=o.createContext(null);const P=o.createContext(null);const U=o.createContext(null);const Q=o.createContext(null);const O=o.createContext({outlet:null,matches:[],isDataRoute:!1});const q=o.createContext(null);function _(){return null!=o.useContext(Q)}function $(){return _()||c(!1),o.useContext(Q).location}function ee(e){o.useContext(U).static||o.useLayoutEffect(e)}function te(){let{isDataRoute:e}=o.useContext(O);return e?function(){let{router:e}=de(se.UseNavigateStable),t=ue(ce.UseNavigateStable),n=o.useRef(!1);return ee((()=>{n.current=!0})),o.useCallback((function(o,r){void 0===r&&(r={}),n.current&&("number"===typeof o?e.navigate(o):e.navigate(o,D({fromRouteId:t},r)))}),[e,t])}():function(){_()||c(!1);let e=o.useContext(T),{basename:t,future:n,navigator:r}=o.useContext(U),{matches:l}=o.useContext(O),{pathname:a}=$(),i=JSON.stringify(H(l,n.v7_relativeSplatPath)),g=o.useRef(!1);return ee((()=>{g.current=!0})),o.useCallback((function(n,o){if(void 0===o&&(o={}),!g.current)return;if("number"===typeof n)return void r.go(n);let l=F(n,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Y([t,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)}),[t,r,i,a,e])}()}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=o.useContext(U),{matches:l}=o.useContext(O),{pathname:a}=$(),i=JSON.stringify(H(l,r.v7_relativeSplatPath));return o.useMemo((()=>F(e,JSON.parse(i),a,"path"===n)),[e,i,a,n])}function oe(e,n,r,l){_()||c(!1);let{navigator:a,static:i}=o.useContext(U),{matches:g}=o.useContext(O),s=g[g.length-1],d=s?s.params:{},I=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let u,C=$();if(n){var A;let e="string"===typeof n?p(n):n;"/"===I||(null==(A=e.pathname)?void 0:A.startsWith(I))||c(!1),u=e}else u=C;let m=u.pathname||"/",b=m;if("/"!==I){let e=I.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=!i&&r&&r.matches&&r.matches.length>0?r.matches:h(e,{pathname:b});let y=ge(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:Y([I,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?I:Y([I,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),g,r,l);return n&&y?o.createElement(Q.Provider,{value:{location:D({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:t.Pop}},y):y}function re(){let e=function(){var e;let t=o.useContext(q),n=Ie(ce.UseRouteError),r=ue(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=E(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:l},n):null,null)}const le=o.createElement(re,null);class ae extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(O.Provider,{value:this.props.routeContext},o.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:n,children:r}=e,l=o.useContext(T);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(O.Provider,{value:t},r)}function ge(e,t,n,r){var l;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let i=e,g=null==(l=n)?void 0:l.errors;if(null!=g){let e=i.findIndex((e=>e.route.id&&void 0!==(null==g?void 0:g[e.route.id])));e>=0||c(!1),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let o=0;o<i.length;o++){let e=i[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=o),e.route.id){let{loaderData:t,errors:o}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!o||void 0===o[e.route.id]);if(e.route.lazy||r){s=!0,i=d>=0?i.slice(0,d+1):[i[0]];break}}}return i.reduceRight(((e,r,l)=>{let a,c=!1,I=null,u=null;var C;n&&(a=g&&r.route.id?g[r.route.id]:void 0,I=r.route.errorElement||le,s&&(d<0&&0===l?(C="route-fallback",!1||Ce[C]||(Ce[C]=!0),c=!0,u=null):d===l&&(c=!0,u=r.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,l+1)),A=()=>{let t;return t=a?I:c?u:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(ie,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===l)?o.createElement(ae,{location:n.location,revalidation:n.revalidation,component:I,error:a,children:A(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):A()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=o.useContext(T);return t||c(!1),t}function Ie(e){let t=o.useContext(P);return t||c(!1),t}function ue(e){let t=function(){let e=o.useContext(O);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const Ce={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function Ae(e){c(!1)}function me(e){let{basename:n="/",children:r=null,location:l,navigationType:a=t.Pop,navigator:i,static:g=!1,future:s}=e;_()&&c(!1);let d=n.replace(/^\/*/,"/"),I=o.useMemo((()=>({basename:d,navigator:i,static:g,future:D({v7_relativeSplatPath:!1},s)})),[d,s,i,g]);"string"===typeof l&&(l=p(l));let{pathname:u="/",search:C="",hash:A="",state:m=null,key:h="default"}=l,b=o.useMemo((()=>{let e=x(u,d);return null==e?null:{location:{pathname:e,search:C,hash:A,state:m,key:h},navigationType:a}}),[d,u,C,A,m,h,a]);return null==b?null:o.createElement(U.Provider,{value:I},o.createElement(Q.Provider,{children:r,value:b}))}function he(e){let{children:t,location:n}=e;return oe(be(t),n)}new Promise((()=>{}));o.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return o.Children.forEach(e,((e,r)=>{if(!o.isValidElement(e))return;let l=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,be(e.props.children,l));e.type!==Ae&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,l)),n.push(a)})),n}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},fe.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,o,r={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(gE){}new Map;const Ze=r.startTransition;i.flushSync,r.useId;function Ge(e){let{basename:t,children:n,future:r,window:l}=e,a=o.useRef();var i;null==a.current&&(a.current=(void 0===(i={window:l,v5Compat:!0})&&(i={}),A((function(e,t){let{pathname:n,search:o,hash:r}=e.location;return u("",{pathname:n,search:o,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:C(t)}),null,i)));let g=a.current,[s,c]=o.useState({action:g.action,location:g.location}),{v7_startTransition:d}=r||{},I=o.useCallback((e=>{d&&Ze?Ze((()=>c(e))):c(e)}),[c,d]);return o.useLayoutEffect((()=>g.listen(I)),[g,I]),o.useEffect((()=>pe(r)),[r]),o.createElement(me,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:g,future:r})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Be=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we=o.forwardRef((function(e,t){let n,{onClick:r,relative:l,reloadDocument:a,replace:i,state:g,target:s,to:d,preventScrollReset:I,viewTransition:u}=e,p=ye(e,ve),{basename:A}=o.useContext(U),m=!1;if("string"===typeof d&&Be.test(d)&&(n=d,Se))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=x(t.pathname,A);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:m=!0}catch(gE){}let h=function(e,t){let{relative:n}=void 0===t?{}:t;_()||c(!1);let{basename:r,navigator:l}=o.useContext(U),{hash:a,pathname:i,search:g}=ne(e,{relative:n}),s=i;return"/"!==r&&(s="/"===i?r:Y([r,i])),l.createHref({pathname:s,search:g,hash:a})}(d,{relative:l}),b=function(e,t){let{target:n,replace:r,state:l,preventScrollReset:a,relative:i,viewTransition:g}=void 0===t?{}:t,s=te(),c=$(),d=ne(e,{relative:i});return o.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:C(c)===C(d);s(e,{replace:n,state:l,preventScrollReset:a,relative:i,viewTransition:g})}}),[c,s,d,r,l,n,e,a,i,g])}(d,{replace:i,state:g,target:s,preventScrollReset:I,relative:l,viewTransition:u});return o.createElement("a",fe({},p,{href:n||h,onClick:m||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:s}))}));var Re,We;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Re||(Re={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(We||(We={}));var ke=n(4467);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,ke.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){return function(){return e.apply(t,arguments)}}const{toString:Je}=Object.prototype,{getPrototypeOf:Ne}=Object,{iterator:He,toStringTag:Fe}=Symbol,Ye=(e=>t=>{const n=Je.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ke=e=>(e=e.toLowerCase(),t=>Ye(t)===e),Me=e=>t=>typeof t===e,{isArray:Le}=Array,Ee=Me("undefined");const ze=Ke("ArrayBuffer");const je=Me("string"),De=Me("function"),Te=Me("number"),Pe=e=>null!==e&&"object"===typeof e,Ue=e=>{if("object"!==Ye(e))return!1;const t=Ne(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Fe in e)&&!(He in e)},Qe=Ke("Date"),Oe=Ke("File"),qe=Ke("Blob"),_e=Ke("FileList"),$e=Ke("URLSearchParams"),[et,tt,nt,ot]=["ReadableStream","Request","Response","Headers"].map(Ke);function rt(e,t){let n,o,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Le(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let a;for(n=0;n<l;n++)a=o[n],t.call(null,e[a],a,e)}}function lt(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,r=n.length;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const at="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,it=e=>!Ee(e)&&e!==at;const gt=(st="undefined"!==typeof Uint8Array&&Ne(Uint8Array),e=>st&&e instanceof st);var st;const ct=Ke("HTMLFormElement"),dt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),It=Ke("RegExp"),ut=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};rt(n,((n,r)=>{let l;!1!==(l=t(n,r,e))&&(o[r]=l||n)})),Object.defineProperties(e,o)};const Ct=Ke("AsyncFunction"),pt=(At="function"===typeof setImmediate,mt=De(at.postMessage),At?setImmediate:mt?((e,t)=>(at.addEventListener("message",(n=>{let{source:o,data:r}=n;o===at&&r===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),at.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var At,mt;const ht="undefined"!==typeof queueMicrotask?queueMicrotask.bind(at):"undefined"!==typeof process&&process.nextTick||pt,bt={isArray:Le,isArrayBuffer:ze,isBuffer:function(e){return null!==e&&!Ee(e)&&null!==e.constructor&&!Ee(e.constructor)&&De(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||De(e.append)&&("formdata"===(t=Ye(e))||"object"===t&&De(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ze(e.buffer),t},isString:je,isNumber:Te,isBoolean:e=>!0===e||!1===e,isObject:Pe,isPlainObject:Ue,isReadableStream:et,isRequest:tt,isResponse:nt,isHeaders:ot,isUndefined:Ee,isDate:Qe,isFile:Oe,isBlob:qe,isRegExp:It,isFunction:De,isStream:e=>Pe(e)&&De(e.pipe),isURLSearchParams:$e,isTypedArray:gt,isFileList:_e,forEach:rt,merge:function e(){const{caseless:t}=it(this)&&this||{},n={},o=(o,r)=>{const l=t&&lt(n,r)||r;Ue(n[l])&&Ue(o)?n[l]=e(n[l],o):Ue(o)?n[l]=e({},o):Le(o)?n[l]=o.slice():n[l]=o};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&rt(arguments[r],o);return n},extend:function(e,t,n){let{allOwnKeys:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rt(t,((t,o)=>{n&&De(t)?e[o]=xe(t,n):e[o]=t}),{allOwnKeys:o}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let r,l,a;const i={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),l=r.length;l-- >0;)a=r[l],o&&!o(a,e,t)||i[a]||(t[a]=e[a],i[a]=!0);e=!1!==n&&Ne(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ye,kindOfTest:Ke,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(Le(e))return e;let t=e.length;if(!Te(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[He]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:ct,hasOwnProperty:dt,hasOwnProp:dt,reduceDescriptors:ut,freezeMethods:e=>{ut(e,((t,n)=>{if(De(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];De(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return Le(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:lt,global:at,isContextDefined:it,isSpecCompliantForm:function(e){return!!(e&&De(e.append)&&"FormData"===e[Fe]&&e[He])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(Pe(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const r=Le(e)?[]:{};return rt(e,((e,t)=>{const l=n(e,o+1);!Ee(l)&&(r[t]=l)})),t[o]=void 0,r}}return e};return n(e,0)},isAsyncFn:Ct,isThenable:e=>e&&(Pe(e)||De(e))&&De(e.then)&&De(e.catch),setImmediate:pt,asap:ht,isIterable:e=>null!=e&&De(e[He])};function ft(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r,this.status=r.status?r.status:null)}bt.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bt.toJSONObject(this.config),code:this.code,status:this.status}}});const yt=ft.prototype,vt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{vt[e]={value:e}})),Object.defineProperties(ft,vt),Object.defineProperty(yt,"isAxiosError",{value:!0}),ft.from=(e,t,n,o,r,l)=>{const a=Object.create(yt);return bt.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ft.call(a,e.message,t,n,o,r),a.cause=e,a.name=e.name,l&&Object.assign(a,l),a};const Zt=ft;function Gt(e){return bt.isPlainObject(e)||bt.isArray(e)}function St(e){return bt.endsWith(e,"[]")?e.slice(0,-2):e}function Bt(e,t,n){return e?e.concat(t).map((function(e,t){return e=St(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const wt=bt.toFlatObject(bt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Rt=function(e,t,n){if(!bt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=bt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!bt.isUndefined(t[e])}))).metaTokens,r=n.visitor||s,l=n.dots,a=n.indexes,i=(n.Blob||"undefined"!==typeof Blob&&Blob)&&bt.isSpecCompliantForm(t);if(!bt.isFunction(r))throw new TypeError("visitor must be a function");function g(e){if(null===e)return"";if(bt.isDate(e))return e.toISOString();if(!i&&bt.isBlob(e))throw new Zt("Blob is not supported. Use a Buffer instead.");return bt.isArrayBuffer(e)||bt.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function s(e,n,r){let i=e;if(e&&!r&&"object"===typeof e)if(bt.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(bt.isArray(e)&&function(e){return bt.isArray(e)&&!e.some(Gt)}(e)||(bt.isFileList(e)||bt.endsWith(n,"[]"))&&(i=bt.toArray(e)))return n=St(n),i.forEach((function(e,o){!bt.isUndefined(e)&&null!==e&&t.append(!0===a?Bt([n],o,l):null===a?n:n+"[]",g(e))})),!1;return!!Gt(e)||(t.append(Bt(r,n,l),g(e)),!1)}const c=[],d=Object.assign(wt,{defaultVisitor:s,convertValue:g,isVisitable:Gt});if(!bt.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!bt.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+o.join("."));c.push(n),bt.forEach(n,(function(n,l){!0===(!(bt.isUndefined(n)||null===n)&&r.call(t,n,bt.isString(l)?l.trim():l,o,d))&&e(n,o?o.concat(l):[l])})),c.pop()}}(e),t};function Wt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function kt(e,t){this._pairs=[],e&&Rt(e,this,t)}const Vt=kt.prototype;Vt.append=function(e,t){this._pairs.push([e,t])},Vt.toString=function(e){const t=e?function(t){return e.call(this,t,Wt)}:Wt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Xt=kt;function xt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jt(e,t,n){if(!t)return e;const o=n&&n.encode||xt;bt.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let l;if(l=r?r(t,n):bt.isURLSearchParams(t)?t.toString():new Xt(t,n).toString(o),l){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}const Nt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){bt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Ht={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ft={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Xt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Yt="undefined"!==typeof window&&"undefined"!==typeof document,Kt="object"===typeof navigator&&navigator||void 0,Mt=Yt&&(!Kt||["ReactNative","NativeScript","NS"].indexOf(Kt.product)<0),Lt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Et=Yt&&window.location.href||"http://localhost",zt=Xe(Xe({},e),Ft);const jt=function(e){function t(e,n,o,r){let l=e[r++];if("__proto__"===l)return!0;const a=Number.isFinite(+l),i=r>=e.length;if(l=!l&&bt.isArray(o)?o.length:l,i)return bt.hasOwnProp(o,l)?o[l]=[o[l],n]:o[l]=n,!a;o[l]&&bt.isObject(o[l])||(o[l]=[]);return t(e,n,o[l],r)&&bt.isArray(o[l])&&(o[l]=function(e){const t={},n=Object.keys(e);let o;const r=n.length;let l;for(o=0;o<r;o++)l=n[o],t[l]=e[l];return t}(o[l])),!a}if(bt.isFormData(e)&&bt.isFunction(e.entries)){const n={};return bt.forEachEntry(e,((e,o)=>{t(function(e){return bt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null};const Dt={transitional:Ht,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=bt.isObject(e);r&&bt.isHTMLForm(e)&&(e=new FormData(e));if(bt.isFormData(e))return o?JSON.stringify(jt(e)):e;if(bt.isArrayBuffer(e)||bt.isBuffer(e)||bt.isStream(e)||bt.isFile(e)||bt.isBlob(e)||bt.isReadableStream(e))return e;if(bt.isArrayBufferView(e))return e.buffer;if(bt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Rt(e,new zt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return zt.isNode&&bt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((l=bt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Rt(l?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),function(e,t,n){if(bt.isString(e))try{return(t||JSON.parse)(e),bt.trim(e)}catch(gE){if("SyntaxError"!==gE.name)throw gE}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Dt.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(bt.isResponse(e)||bt.isReadableStream(e))return e;if(e&&bt.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(gE){if(n){if("SyntaxError"===gE.name)throw Zt.from(gE,Zt.ERR_BAD_RESPONSE,this,null,this.response);throw gE}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bt.forEach(["delete","get","head","post","put","patch"],(e=>{Dt.headers[e]={}}));const Tt=Dt,Pt=bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ut=Symbol("internals");function Qt(e){return e&&String(e).trim().toLowerCase()}function Ot(e){return!1===e||null==e?e:bt.isArray(e)?e.map(Ot):String(e)}function qt(e,t,n,o,r){return bt.isFunction(o)?o.call(this,t,n):(r&&(t=n),bt.isString(t)?bt.isString(o)?-1!==t.indexOf(o):bt.isRegExp(o)?o.test(t):void 0:void 0)}class _t{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(e,t,n){const r=Qt(t);if(!r)throw new Error("header name must be a non-empty string");const l=bt.findKey(o,r);(!l||void 0===o[l]||!0===n||void 0===n&&!1!==o[l])&&(o[l||t]=Ot(e))}const l=(e,t)=>bt.forEach(e,((e,n)=>r(e,n,t)));if(bt.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(bt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))l((e=>{const t={};let n,o,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),o=e.substring(r+1).trim(),!n||t[n]&&Pt[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t);else if(bt.isObject(e)&&bt.isIterable(e)){let n,o,r={};for(const t of e){if(!bt.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[o=t[0]]=(n=r[o])?bt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}l(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=Qt(e)){const n=bt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(bt.isFunction(t))return t.call(this,e,n);if(bt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Qt(e)){const n=bt.findKey(this,e);return!(!n||void 0===this[n]||t&&!qt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function r(e){if(e=Qt(e)){const r=bt.findKey(n,e);!r||t&&!qt(0,n[r],r,t)||(delete n[r],o=!0)}}return bt.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];e&&!qt(0,this[r],r,e,!0)||(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return bt.forEach(this,((o,r)=>{const l=bt.findKey(n,r);if(l)return t[l]=Ot(o),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();a!==r&&delete t[r],t[a]=Ot(o),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return bt.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&bt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Ut]=this[Ut]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=Qt(e);t[o]||(!function(e,t){const n=bt.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,r){return this[o].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[o]=!0)}return bt.isArray(e)?e.forEach(o):o(e),this}}_t.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),bt.reduceDescriptors(_t.prototype,((e,t)=>{let{value:n}=e,o=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[o]=e}}})),bt.freezeMethods(_t);const $t=_t;function en(e,t){const n=this||Tt,o=t||n,r=$t.from(o.headers);let l=o.data;return bt.forEach(e,(function(e){l=e.call(n,l,r.normalize(),t?t.status:void 0)})),r.normalize(),l}function tn(e){return!(!e||!e.__CANCEL__)}function nn(e,t,n){Zt.call(this,null==e?"canceled":e,Zt.ERR_CANCELED,t,n),this.name="CanceledError"}bt.inherits(nn,Zt,{__CANCEL__:!0});const on=nn;function rn(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new Zt("Request failed with status code "+n.status,[Zt.ERR_BAD_REQUEST,Zt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ln=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r,l=0,a=0;return t=void 0!==t?t:1e3,function(i){const g=Date.now(),s=o[a];r||(r=g),n[l]=i,o[l]=g;let c=a,d=0;for(;c!==l;)d+=n[c++],c%=e;if(l=(l+1)%e,l===a&&(a=(a+1)%e),g-r<t)return;const I=s&&g-s;return I?Math.round(1e3*d/I):void 0}};const an=function(e,t){let n,o,r=0,l=1e3/t;const a=function(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=l,n=null,o&&(clearTimeout(o),o=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-r;for(var i=arguments.length,g=new Array(i),s=0;s<i;s++)g[s]=arguments[s];t>=l?a(g,e):(n=g,o||(o=setTimeout((()=>{o=null,a(n)}),l-t)))},()=>n&&a(n)]},gn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=0;const r=ln(50,250);return an((n=>{const l=n.loaded,a=n.lengthComputable?n.total:void 0,i=l-o,g=r(i);o=l;e({loaded:l,total:a,progress:a?l/a:void 0,bytes:i,rate:g||void 0,estimated:g&&a&&l<=a?(a-l)/g:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},sn=(e,t)=>{const n=null!=e;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},cn=e=>function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return bt.asap((()=>e(...n)))},dn=zt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,In=zt.hasStandardBrowserEnv?{write(e,t,n,o,r,l){const a=[e+"="+encodeURIComponent(t)];bt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),bt.isString(o)&&a.push("path="+o),bt.isString(r)&&a.push("domain="+r),!0===l&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function un(e,t,n){let o=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(o||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Cn=e=>e instanceof $t?Xe({},e):e;function pn(e,t){t=t||{};const n={};function o(e,t,n,o){return bt.isPlainObject(e)&&bt.isPlainObject(t)?bt.merge.call({caseless:o},e,t):bt.isPlainObject(t)?bt.merge({},t):bt.isArray(t)?t.slice():t}function r(e,t,n,r){return bt.isUndefined(t)?bt.isUndefined(e)?void 0:o(void 0,e,0,r):o(e,t,0,r)}function l(e,t){if(!bt.isUndefined(t))return o(void 0,t)}function a(e,t){return bt.isUndefined(t)?bt.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function i(n,r,l){return l in t?o(n,r):l in e?o(void 0,n):void 0}const g={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(e,t,n)=>r(Cn(e),Cn(t),0,!0)};return bt.forEach(Object.keys(Object.assign({},e,t)),(function(o){const l=g[o]||r,a=l(e[o],t[o],o);bt.isUndefined(a)&&l!==i||(n[o]=a)})),n}const An=e=>{const t=pn({},e);let n,{data:o,withXSRFToken:r,xsrfHeaderName:l,xsrfCookieName:a,headers:i,auth:g}=t;if(t.headers=i=$t.from(i),t.url=Jt(un(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&i.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),bt.isFormData(o))if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(n=i.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}if(zt.hasStandardBrowserEnv&&(r&&bt.isFunction(r)&&(r=r(t)),r||!1!==r&&dn(t.url))){const e=l&&a&&In.read(a);e&&i.set(l,e)}return t},mn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const o=An(e);let r=o.data;const l=$t.from(o.headers).normalize();let a,i,g,s,c,{responseType:d,onUploadProgress:I,onDownloadProgress:u}=o;function C(){s&&s(),c&&c(),o.cancelToken&&o.cancelToken.unsubscribe(a),o.signal&&o.signal.removeEventListener("abort",a)}let p=new XMLHttpRequest;function A(){if(!p)return;const o=$t.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());rn((function(e){t(e),C()}),(function(e){n(e),C()}),{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:o,config:e,request:p}),p=null}p.open(o.method.toUpperCase(),o.url,!0),p.timeout=o.timeout,"onloadend"in p?p.onloadend=A:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(A)},p.onabort=function(){p&&(n(new Zt("Request aborted",Zt.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new Zt("Network Error",Zt.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const r=o.transitional||Ht;o.timeoutErrorMessage&&(t=o.timeoutErrorMessage),n(new Zt(t,r.clarifyTimeoutError?Zt.ETIMEDOUT:Zt.ECONNABORTED,e,p)),p=null},void 0===r&&l.setContentType(null),"setRequestHeader"in p&&bt.forEach(l.toJSON(),(function(e,t){p.setRequestHeader(t,e)})),bt.isUndefined(o.withCredentials)||(p.withCredentials=!!o.withCredentials),d&&"json"!==d&&(p.responseType=o.responseType),u&&([g,c]=gn(u,!0),p.addEventListener("progress",g)),I&&p.upload&&([i,s]=gn(I),p.upload.addEventListener("progress",i),p.upload.addEventListener("loadend",s)),(o.cancelToken||o.signal)&&(a=t=>{p&&(n(!t||t.type?new on(null,e,p):t),p.abort(),p=null)},o.cancelToken&&o.cancelToken.subscribe(a),o.signal&&(o.signal.aborted?a():o.signal.addEventListener("abort",a)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(o.url);m&&-1===zt.protocols.indexOf(m)?n(new Zt("Unsupported protocol "+m+":",Zt.ERR_BAD_REQUEST,e)):p.send(r||null)}))},hn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,o=new AbortController;const r=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;o.abort(t instanceof Zt?t:new on(t instanceof Error?t.message:t))}};let l=t&&setTimeout((()=>{l=null,r(new Zt("timeout ".concat(t," of ms exceeded"),Zt.ETIMEDOUT))}),t);const a=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:i}=o;return i.unsubscribe=()=>bt.asap(a),i}};function bn(e,t){this.v=e,this.k=t}function fn(e){return function(){return new yn(e.apply(this,arguments))}}function yn(e){var t,n;function o(t,n){try{var l=e[t](n),a=l.value,i=a instanceof bn;Promise.resolve(i?a.v:a).then((function(n){if(i){var g="return"===t?"return":"next";if(!a.k||n.done)return o(g,n);n=e[g](n).value}r(l.done?"return":"normal",n)}),(function(e){o("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?o(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(l,a){var i={key:e,arg:r,resolve:l,reject:a,next:null};n?n=n.next=i:(t=n=i,o(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function vn(e){return new bn(e,0)}function Zn(e){var t={},n=!1;function o(t,o){return n=!0,o=new Promise((function(n){n(e[t](o))})),{done:!1,value:new bn(o,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):o("return",e)}),t}function Gn(e){var t,n,o,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(o&&null!=(t=e[o]))return new Sn(t.call(e));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}function Sn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Sn=function(e){this.s=e,this.n=e.next},Sn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Sn(e)}yn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},yn.prototype.next=function(e){return this._invoke("next",e)},yn.prototype.throw=function(e){return this._invoke("throw",e)},yn.prototype.return=function(e){return this._invoke("return",e)};const Bn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let o,r=0;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},wn=function(){var e=fn((function*(e,t){var n,o=!1,r=!1;try{for(var l,a=Gn(Rn(e));o=!(l=yield vn(a.next())).done;o=!1){const e=l.value;yield*Zn(Gn(Bn(e,t)))}}catch(jr){r=!0,n=jr}finally{try{o&&null!=a.return&&(yield vn(a.return()))}finally{if(r)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Rn=function(){var e=fn((function*(e){if(e[Symbol.asyncIterator])return void(yield*Zn(Gn(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield vn(t.read());if(e)break;yield n}}finally{yield vn(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Wn=(e,t,n,o)=>{const r=wn(e,t);let l,a=0,i=e=>{l||(l=!0,o&&o(e))};return new ReadableStream({async pull(e){try{const{done:t,value:o}=await r.next();if(t)return i(),void e.close();let l=o.byteLength;if(n){let e=a+=l;n(e)}e.enqueue(new Uint8Array(o))}catch(jr){throw i(jr),jr}},cancel:e=>(i(e),r.return())},{highWaterMark:2})},kn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Vn=kn&&"function"===typeof ReadableStream,Xn=kn&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),xn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return!!e(...n)}catch(gE){return!1}},Jn=Vn&&xn((()=>{let e=!1;const t=new Request(zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Nn=Vn&&xn((()=>bt.isReadableStream(new Response("").body))),Hn={stream:Nn&&(e=>e.body)};var Fn;kn&&(Fn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Hn[e]&&(Hn[e]=bt.isFunction(Fn[e])?t=>t[e]():(t,n)=>{throw new Zt("Response type '".concat(e,"' is not supported"),Zt.ERR_NOT_SUPPORT,n)})})));const Yn=async(e,t)=>{const n=bt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(bt.isBlob(e))return e.size;if(bt.isSpecCompliantForm(e)){const t=new Request(zt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return bt.isArrayBufferView(e)||bt.isArrayBuffer(e)?e.byteLength:(bt.isURLSearchParams(e)&&(e+=""),bt.isString(e)?(await Xn(e)).byteLength:void 0)})(t):n},Kn=kn&&(async e=>{let{url:t,method:n,data:o,signal:r,cancelToken:l,timeout:a,onDownloadProgress:i,onUploadProgress:g,responseType:s,headers:c,withCredentials:d="same-origin",fetchOptions:I}=An(e);s=s?(s+"").toLowerCase():"text";let u,C=hn([r,l&&l.toAbortSignal()],a);const p=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let A;try{if(g&&Jn&&"get"!==n&&"head"!==n&&0!==(A=await Yn(c,o))){let e,n=new Request(t,{method:"POST",body:o,duplex:"half"});if(bt.isFormData(o)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=sn(A,gn(cn(g)));o=Wn(n.body,65536,e,t)}}bt.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;u=new Request(t,Xe(Xe({},I),{},{signal:C,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:o,duplex:"half",credentials:r?d:void 0}));let l=await fetch(u);const a=Nn&&("stream"===s||"response"===s);if(Nn&&(i||a&&p)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=l[t]}));const t=bt.toFiniteNumber(l.headers.get("content-length")),[n,o]=i&&sn(t,gn(cn(i),!0))||[];l=new Response(Wn(l.body,65536,n,(()=>{o&&o(),p&&p()})),e)}s=s||"text";let m=await Hn[bt.findKey(Hn,s)||"text"](l,e);return!a&&p&&p(),await new Promise(((t,n)=>{rn(t,n,{data:m,headers:$t.from(l.headers),status:l.status,statusText:l.statusText,config:e,request:u})}))}catch(jr){if(p&&p(),jr&&"TypeError"===jr.name&&/Load failed|fetch/i.test(jr.message))throw Object.assign(new Zt("Network Error",Zt.ERR_NETWORK,e,u),{cause:jr.cause||jr});throw Zt.from(jr,jr&&jr.code,e,u)}}),Mn={http:null,xhr:mn,fetch:Kn};bt.forEach(Mn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(gE){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ln=e=>"- ".concat(e),En=e=>bt.isFunction(e)||null===e||!1===e,zn=e=>{e=bt.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let l=0;l<t;l++){let t;if(n=e[l],o=n,!En(n)&&(o=Mn[(t=String(n)).toLowerCase()],void 0===o))throw new Zt("Unknown adapter '".concat(t,"'"));if(o)break;r[t||"#"+l]=o}if(!o){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Ln).join("\n"):" "+Ln(e[0]):"as no adapter specified";throw new Zt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function jn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new on(null,e)}function Dn(e){jn(e),e.headers=$t.from(e.headers),e.data=en.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return zn(e.adapter||Tt.adapter)(e).then((function(t){return jn(e),t.data=en.call(e,e.transformResponse,t),t.headers=$t.from(t.headers),t}),(function(t){return tn(t)||(jn(e),t&&t.response&&(t.response.data=en.call(e,e.transformResponse,t.response),t.response.headers=$t.from(t.response.headers))),Promise.reject(t)}))}const Tn="1.9.0",Pn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Pn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Un={};Pn.transitional=function(e,t,n){function o(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,l)=>{if(!1===e)throw new Zt(o(r," has been removed"+(t?" in "+t:"")),Zt.ERR_DEPRECATED);return t&&!Un[r]&&(Un[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,l)}},Pn.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Qn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Zt("options must be an object",Zt.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const l=o[r],a=t[l];if(a){const t=e[l],n=void 0===t||a(t,l,e);if(!0!==n)throw new Zt("option "+l+" must be "+n,Zt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Zt("Unknown option "+l,Zt.ERR_BAD_OPTION)}},validators:Pn},On=Qn.validators;class qn{constructor(e){this.defaults=e||{},this.interceptors={request:new Nt,response:new Nt}}async request(e,t){try{return await this._request(e,t)}catch(jr){if(jr instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{jr.stack?n&&!String(jr.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(jr.stack+="\n"+n):jr.stack=n}catch(gE){}}throw jr}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=pn(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;void 0!==n&&Qn.assertOptions(n,{silentJSONParsing:On.transitional(On.boolean),forcedJSONParsing:On.transitional(On.boolean),clarifyTimeoutError:On.transitional(On.boolean)},!1),null!=o&&(bt.isFunction(o)?t.paramsSerializer={serialize:o}:Qn.assertOptions(o,{encode:On.function,serialize:On.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Qn.assertOptions(t,{baseUrl:On.spelling("baseURL"),withXsrfToken:On.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=r&&bt.merge(r.common,r[t.method]);r&&bt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=$t.concat(l,r);const a=[];let i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const g=[];let s;this.interceptors.response.forEach((function(e){g.push(e.fulfilled,e.rejected)}));let c,d=0;if(!i){const e=[Dn.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,g),c=e.length,s=Promise.resolve(t);d<c;)s=s.then(e[d++],e[d++]);return s}c=a.length;let I=t;for(d=0;d<c;){const e=a[d++],t=a[d++];try{I=e(I)}catch(u){t.call(this,u);break}}try{s=Dn.call(this,I)}catch(u){return Promise.reject(u)}for(d=0,c=g.length;d<c;)s=s.then(g[d++],g[d++]);return s}getUri(e){return Jt(un((e=pn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}bt.forEach(["delete","get","head","options"],(function(e){qn.prototype[e]=function(t,n){return this.request(pn(n||{},{method:e,url:t,data:(n||{}).data}))}})),bt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(pn(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}qn.prototype[e]=t(),qn.prototype[e+"Form"]=t(!0)}));const _n=qn;class $n{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,r){n.reason||(n.reason=new on(e,o,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new $n((function(t){e=t}));return{token:t,cancel:e}}}const eo=$n;const to={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(to).forEach((e=>{let[t,n]=e;to[n]=t}));const no=to;const oo=function e(t){const n=new _n(t),o=xe(_n.prototype.request,n);return bt.extend(o,_n.prototype,n,{allOwnKeys:!0}),bt.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(pn(t,n))},o}(Tt);oo.Axios=_n,oo.CanceledError=on,oo.CancelToken=eo,oo.isCancel=tn,oo.VERSION=Tn,oo.toFormData=Rt,oo.AxiosError=Zt,oo.Cancel=oo.CanceledError,oo.all=function(e){return Promise.all(e)},oo.spread=function(e){return function(t){return e.apply(null,t)}},oo.isAxiosError=function(e){return bt.isObject(e)&&!0===e.isAxiosError},oo.mergeConfig=pn,oo.AxiosHeaders=$t,oo.formToJSON=e=>jt(bt.isHTMLForm(e)?new FormData(e):e),oo.getAdapter=zn,oo.HttpStatusCode=no,oo.default=oo;const ro=oo,lo="/api/v1";var ao=n(579);const io=()=>{const[e,t]=(0,o.useState)(""),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)("Admin"),[i,g]=(0,o.useState)(!1),[s,c]=(0,o.useState)({}),[d,I]=(0,o.useState)(""),u=te(),C=(0,o.useRef)(null),p=e=>{const{name:t,value:n}=e.target;c(Xe(Xe({},s),{},{[t]:n}))},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";C.current&&(C.current.textContent=e,C.current.className="success"===t?"success":"error",C.current.style.display="block",setTimeout((()=>{C.current&&(C.current.style.display="none")}),3e3))};return(0,ao.jsxs)("div",{className:"login-container",children:[(0,ao.jsx)("h2",{children:"Login"}),(0,ao.jsx)("div",{ref:C,style:{display:"none",marginBottom:"16px",padding:"10px",borderRadius:"4px",fontWeight:"bold"}}),d&&(0,ao.jsx)("p",{className:"error",children:d}),(0,ao.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),I(""),i)try{await ro.post("".concat(lo,"/auth/create-profile"),{full_name:s.fullName,email:s.email,phone:s.phone,role:l}),A("Profile created successfully. Please wait for admin approval.","success")}catch(jr){A("Error creating profile. Please try again.","error")}else try{const t=await ro.post("".concat(lo,"/auth/login"),{username:e,password:n,role:l});localStorage.setItem("token",t.data.access_token),u("Admin"===l?"/admin-dashboard":"Sales Manager"===l?"/sales-dashboard":"Production Manager"===l?"/production-dashboard":"/marketing-dashboard")}catch(jr){A("Invalid credentials. Please try again.","error")}},children:[(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{children:"Role:"}),(0,ao.jsxs)("select",{value:l,onChange:e=>{const t=e.target.value;a(t),g(["Sales Manager","Marketing","Production Manager"].includes(t))},required:!0,children:[(0,ao.jsx)("option",{value:"Admin",children:"Admin"}),(0,ao.jsx)("option",{value:"Sales Manager",children:"Sales Manager"}),(0,ao.jsx)("option",{value:"Production Manager",children:"Production Manager"}),(0,ao.jsx)("option",{value:"Marketing",children:"Marketing"})]})]}),i&&(0,ao.jsxs)("div",{className:"profile-creation",children:[(0,ao.jsx)("h3",{children:"Create Profile"}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{children:"Full Name:"}),(0,ao.jsx)("input",{type:"text",name:"fullName",value:s.fullName||"",onChange:p,required:!0})]}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{children:"Email:"}),(0,ao.jsx)("input",{type:"email",name:"email",value:s.email||"",onChange:p,required:!0})]}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{children:"Phone Number:"}),(0,ao.jsx)("input",{type:"text",name:"phone",value:s.phone||"",onChange:p,required:!0})]})]}),!i&&(0,ao.jsxs)(ao.Fragment,{children:[(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{children:"Username:"}),(0,ao.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{children:"Password:"}),(0,ao.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0})]})]}),(0,ao.jsx)("button",{type:"submit",children:i?"Create Profile":"Login"})]})]})},go=()=>{const[e,t]=o.useState(!1),n=(0,o.useRef)(null),r=(0,o.useRef)(null);(0,o.useEffect)((()=>(e?(document.body.classList.add("sidebar-open"),setTimeout((()=>r.current&&r.current.focus()),100)):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open"))),[e]),(0,o.useEffect)((()=>{const n=n=>{e&&"Escape"===n.key&&t(!1)};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)}),[e]),(0,o.useEffect)((()=>{let n=null;const o=e=>{1===e.touches.length&&(n=e.touches[0].clientX)},r=o=>{if(!e||null===n)return;o.touches[0].clientX-n<-60&&(t(!1),n=null)};return document.addEventListener("touchstart",o),document.addEventListener("touchmove",r),()=>{document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",r)}}),[e]);const l=()=>t(!e);return(0,ao.jsxs)(ao.Fragment,{children:[(0,ao.jsx)("button",{className:"sidebar-toggle",onClick:l,"aria-label":e?"Close sidebar":"Open sidebar","aria-expanded":e,"aria-controls":"sidebar-nav",style:{left:e?window.innerWidth<=900?window.innerWidth<=600?"90vw":"70vw":"250px":"20px",transition:"left 0.3s"},children:e?(0,ao.jsx)("span",{children:"\u2190"}):(0,ao.jsx)("span",{children:"\u2630"})}),e&&(0,ao.jsx)("div",{className:"sidebar-backdrop","aria-hidden":!e,tabIndex:-1,onClick:l}),(0,ao.jsxs)("nav",{ref:n,className:"sidebar".concat(e?" open":""),id:"sidebar-nav","aria-hidden":!e,tabIndex:e?0:-1,"aria-label":"Sidebar navigation",children:[(0,ao.jsx)("h2",{children:"Navigation"}),(0,ao.jsxs)("ul",{children:[(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/dashboard",ref:r,tabIndex:e?0:-1,onClick:l,children:"Dashboard"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/registration",tabIndex:e?0:-1,onClick:l,children:"Registration"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/attendance",tabIndex:e?0:-1,onClick:l,children:"Attendance"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/sales-inventory",tabIndex:e?0:-1,onClick:l,children:"Sales Inventory"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/production-inventory",tabIndex:e?0:-1,onClick:l,children:"Production Inventory"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/factory-inventory",tabIndex:e?0:-1,onClick:l,children:"Factory Inventory"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/staff-management",tabIndex:e?0:-1,onClick:l,children:"Staff Management"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/payroll",tabIndex:e?0:-1,onClick:l,children:"Payroll"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/reports-analysis",tabIndex:e?0:-1,onClick:l,children:"Reports & Analysis"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/settings",tabIndex:e?0:-1,onClick:l,children:"Settings"})})]})]})]})};var so,co=Object.defineProperty,Io=Object.getOwnPropertySymbols,uo=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable,po=(e,t,n)=>t in e?co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ao=(e,t)=>{for(var n in t||(t={}))uo.call(t,n)&&po(e,n,t[n]);if(Io)for(var n of Io(t))Co.call(t,n)&&po(e,n,t[n]);return e},mo=(e,t)=>{var n={};for(var o in e)uo.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&Io)for(var o of Io(e))t.indexOf(o)<0&&Co.call(e,o)&&(n[o]=e[o]);return n};(e=>{const t=class t{constructor(e,n,o,l){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(l<-1||l>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let a=[];for(let t=0;t<this.size;t++)a.push(!1);for(let t=0;t<this.size;t++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const i=this.addEccAndInterleave(o);if(this.drawCodewords(i),-1==l){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(l=t,e=n),this.applyMask(t)}}r(0<=l&&l<=7),this.mask=l,this.applyMask(l),this.drawFormatBits(l),this.isFunction=[]}static encodeText(n,o){const r=e.QrSegment.makeSegments(n);return t.encodeSegments(r,o)}static encodeBinary(n,o){const r=e.QrSegment.makeBytes(n);return t.encodeSegments([r],o)}static encodeSegments(e,o){let l,i,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=g&&g<=s&&s<=t.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");for(l=g;;l++){const n=8*t.getNumDataCodewords(l,o),r=a.getTotalBits(e,l);if(r<=n){i=r;break}if(l>=s)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&i<=8*t.getNumDataCodewords(l,n)&&(o=n);let I=[];for(const t of e){n(t.mode.modeBits,4,I),n(t.numChars,t.mode.numCharCountBits(l),I);for(const e of t.getData())I.push(e)}r(I.length==i);const u=8*t.getNumDataCodewords(l,o);r(I.length<=u),n(0,Math.min(4,u-I.length),I),n(0,(8-I.length%8)%8,I),r(I.length%8==0);for(let t=236;I.length<u;t^=253)n(t,8,I);let C=[];for(;8*C.length<I.length;)C.push(0);return I.forEach(((e,t)=>C[t>>>3]|=e<<7-(7&t))),new t(l,o,C,c)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let o=0;o<t;o++)0==n&&0==o||0==n&&o==t-1||n==t-1&&0==o||this.drawAlignmentPattern(e[n],e[o]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let o=0;o<10;o++)n=n<<1^1335*(n>>>9);const l=21522^(t<<10|n);r(l>>>15==0);for(let r=0;r<=5;r++)this.setFunctionModule(8,r,o(l,r));this.setFunctionModule(8,7,o(l,6)),this.setFunctionModule(8,8,o(l,7)),this.setFunctionModule(7,8,o(l,8));for(let r=9;r<15;r++)this.setFunctionModule(14-r,8,o(l,r));for(let r=0;r<8;r++)this.setFunctionModule(this.size-1-r,8,o(l,r));for(let r=8;r<15;r++)this.setFunctionModule(8,this.size-15+r,o(l,r));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;r(t>>>18==0);for(let n=0;n<18;n++){const e=o(t,n),r=this.size-11+n%3,l=Math.floor(n/3);this.setFunctionModule(r,l,e),this.setFunctionModule(l,r,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let o=-4;o<=4;o++){const r=Math.max(Math.abs(o),Math.abs(n)),l=e+o,a=t+n;0<=l&&l<this.size&&0<=a&&a<this.size&&this.setFunctionModule(l,a,2!=r&&4!=r)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let o=-2;o<=2;o++)this.setFunctionModule(e+o,t+n,1!=Math.max(Math.abs(o),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,o=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,o))throw new RangeError("Invalid argument");const l=t.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][n],a=t.ECC_CODEWORDS_PER_BLOCK[o.ordinal][n],i=Math.floor(t.getNumRawDataModules(n)/8),g=l-i%l,s=Math.floor(i/l);let c=[];const d=t.reedSolomonComputeDivisor(a);for(let r=0,u=0;r<l;r++){let n=e.slice(u,u+s-a+(r<g?0:1));u+=n.length;const o=t.reedSolomonComputeRemainder(n,d);r<g&&n.push(0),c.push(n.concat(o))}let I=[];for(let t=0;t<c[0].length;t++)c.forEach(((e,n)=>{(t!=s-a||n>=g)&&I.push(e[t])}));return r(I.length==i),I}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let l=0;l<2;l++){const a=t-l,i=0==(t+1&2)?this.size-1-r:r;!this.isFunction[i][a]&&n<8*e.length&&(this.modules[i][a]=o(e[n>>>3],7-(7&n)),n++)}}r(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let o;switch(e){case 0:o=(n+t)%2==0;break;case 1:o=t%2==0;break;case 2:o=n%3==0;break;case 3:o=(n+t)%3==0;break;case 4:o=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:o=n*t%2+n*t%3==0;break;case 6:o=(n*t%2+n*t%3)%2==0;break;case 7:o=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&o&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let n=!1,o=0,l=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[r][a]==n?(o++,5==o?e+=t.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,l),n||(e+=this.finderPenaltyCountPatterns(l)*t.PENALTY_N3),n=this.modules[r][a],o=1);e+=this.finderPenaltyTerminateAndCount(n,o,l)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let n=!1,o=0,l=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[a][r]==n?(o++,5==o?e+=t.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,l),n||(e+=this.finderPenaltyCountPatterns(l)*t.PENALTY_N3),n=this.modules[a][r],o=1);e+=this.finderPenaltyTerminateAndCount(n,o,l)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let n=0;n<this.size-1;n++){const o=this.modules[r][n];o==this.modules[r][n+1]&&o==this.modules[r+1][n]&&o==this.modules[r+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce(((e,t)=>e+(t?1:0)),n);const o=this.size*this.size,l=Math.ceil(Math.abs(20*n-10*o)/o)-1;return r(0<=l&&l<=9),e+=l*t.PENALTY_N4,r(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let o=this.size-7;n.length<e;o-=t)n.splice(1,0,o);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return r(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let o=1;for(let r=0;r<e;r++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],o),e+1<n.length&&(n[e]^=n[e+1]);o=t.reedSolomonMultiply(o,2)}return n}static reedSolomonComputeRemainder(e,n){let o=n.map((e=>0));for(const r of e){const e=r^o.shift();o.push(0),n.forEach(((n,r)=>o[r]^=t.reedSolomonMultiply(n,e)))}return o}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let o=7;o>=0;o--)n=n<<1^285*(n>>>7),n^=(t>>>o&1)*e;return r(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];r(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let o=t-1;o>=0;o--)n.push(e>>>o&1)}function o(e,t){return 0!=(e>>>t&1)}function r(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const l=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let o=[];for(const e of t)n(e,8,o);return new e(e.Mode.BYTE,t.length,o)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let o=[];for(let e=0;e<t.length;){const r=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+r),10),3*r+1,o),e+=r}return new e(e.Mode.NUMERIC,t.length,o)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let o,r=[];for(o=0;o+2<=t.length;o+=2){let l=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o));l+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o+1)),n(l,11,r)}return o<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o)),6,r),new e(e.Mode.ALPHANUMERIC,t.length,r)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let o=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,o);else if(t<16384)n(2,2,o),n(t,14,o);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,o),n(t,21,o)}return new e(e.Mode.ECI,0,o)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const o of e){const e=o.mode.numCharCountBits(t);if(o.numChars>=1<<e)return 1/0;n+=4+e+o.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=l;e.QrSegment=l})(so||(so={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(so||(so={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(so||(so={}));var ho=so,bo={L:ho.QrCode.Ecc.LOW,M:ho.QrCode.Ecc.MEDIUM,Q:ho.QrCode.Ecc.QUARTILE,H:ho.QrCode.Ecc.HIGH},fo=128,yo="L",vo="#FFFFFF",Zo="#000000",Go=!1,So=1;function Bo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach((function(e,o){let r=null;e.forEach((function(l,a){if(!l&&null!==r)return n.push("M".concat(r+t," ").concat(o+t,"h").concat(a-r,"v1H").concat(r+t,"z")),void(r=null);if(a!==e.length-1)l&&null===r&&(r=a);else{if(!l)return;null===r?n.push("M".concat(a+t,",").concat(o+t," h1v1H").concat(a+t,"z")):n.push("M".concat(r+t,",").concat(o+t," h").concat(a+1-r,"v1H").concat(r+t,"z"))}}))})),n.join("")}function wo(e,t){return e.slice().map(((e,n)=>n<t.y||n>=t.y+t.h?e:e.map(((e,n)=>(n<t.x||n>=t.x+t.w)&&e))))}function Ro(e){let{value:t,level:n,minVersion:r,includeMargin:l,marginSize:a,imageSettings:i,size:g,boostLevel:s}=e,c=o.useMemo((()=>{const e=(Array.isArray(t)?t:[t]).reduce(((e,t)=>(e.push(...ho.QrSegment.makeSegments(t)),e)),[]);return ho.QrCode.encodeSegments(e,bo[n],r,void 0,void 0,s)}),[t,n,r,s]);const{cells:d,margin:I,numCells:u,calculatedImageSettings:C}=o.useMemo((()=>{let e=c.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(l,a),n=e.length+2*t,o=function(e,t,n,o){if(null==o)return null;const r=e.length+2*n,l=Math.floor(.1*t),a=r/t,i=(o.width||l)*a,g=(o.height||l)*a,s=null==o.x?e.length/2-i/2:o.x*a,c=null==o.y?e.length/2-g/2:o.y*a,d=null==o.opacity?1:o.opacity;let I=null;if(o.excavate){let e=Math.floor(s),t=Math.floor(c);I={x:e,y:t,w:Math.ceil(i+s-e),h:Math.ceil(g+c-t)}}return{x:s,y:c,h:g,w:i,excavation:I,opacity:d,crossOrigin:o.crossOrigin}}(e,g,t,i);return{cells:e,margin:t,numCells:n,calculatedImageSettings:o}}),[c,g,i,l,a]);return{qrcode:c,margin:I,cells:d,numCells:u,calculatedImageSettings:C}}var Wo=function(){try{(new Path2D).addPath(new Path2D)}catch(gE){return!1}return!0}(),ko=o.forwardRef((function(e,t){const n=e,{value:r,size:l=fo,level:a=yo,bgColor:i=vo,fgColor:g=Zo,includeMargin:s=Go,minVersion:c=So,boostLevel:d,marginSize:I,imageSettings:u}=n,C=mo(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=C,A=mo(C,["style"]),m=null==u?void 0:u.src,h=o.useRef(null),b=o.useRef(null),f=o.useCallback((e=>{h.current=e,"function"===typeof t?t(e):t&&(t.current=e)}),[t]),[y,v]=o.useState(!1),{margin:Z,cells:G,numCells:S,calculatedImageSettings:B}=Ro({value:r,level:a,minVersion:c,boostLevel:d,includeMargin:s,marginSize:I,imageSettings:u,size:l});o.useEffect((()=>{if(null!=h.current){const e=h.current,t=e.getContext("2d");if(!t)return;let n=G;const o=b.current,r=null!=B&&null!==o&&o.complete&&0!==o.naturalHeight&&0!==o.naturalWidth;r&&null!=B.excavation&&(n=wo(G,B.excavation));const a=window.devicePixelRatio||1;e.height=e.width=l*a;const s=l/S*a;t.scale(s,s),t.fillStyle=i,t.fillRect(0,0,S,S),t.fillStyle=g,Wo?t.fill(new Path2D(Bo(n,Z))):G.forEach((function(e,n){e.forEach((function(e,o){e&&t.fillRect(o+Z,n+Z,1,1)}))})),B&&(t.globalAlpha=B.opacity),r&&t.drawImage(o,B.x+Z,B.y+Z,B.w,B.h)}})),o.useEffect((()=>{v(!1)}),[m]);const w=Ao({height:l,width:l},p);let R=null;return null!=m&&(R=o.createElement("img",{src:m,key:m,style:{display:"none"},onLoad:()=>{v(!0)},ref:b,crossOrigin:null==B?void 0:B.crossOrigin})),o.createElement(o.Fragment,null,o.createElement("canvas",Ao({style:w,height:l,width:l,ref:f,role:"img"},A)),R)}));ko.displayName="QRCodeCanvas";var Vo=o.forwardRef((function(e,t){const n=e,{value:r,size:l=fo,level:a=yo,bgColor:i=vo,fgColor:g=Zo,includeMargin:s=Go,minVersion:c=So,boostLevel:d,title:I,marginSize:u,imageSettings:C}=n,p=mo(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:A,cells:m,numCells:h,calculatedImageSettings:b}=Ro({value:r,level:a,minVersion:c,boostLevel:d,includeMargin:s,marginSize:u,imageSettings:C,size:l});let f=m,y=null;null!=C&&null!=b&&(null!=b.excavation&&(f=wo(m,b.excavation)),y=o.createElement("image",{href:C.src,height:b.h,width:b.w,x:b.x+A,y:b.y+A,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const v=Bo(f,A);return o.createElement("svg",Ao({height:l,width:l,viewBox:"0 0 ".concat(h," ").concat(h),ref:t,role:"img"},p),!!I&&o.createElement("title",null,I),o.createElement("path",{fill:i,d:"M0,0 h".concat(h,"v").concat(h,"H0z"),shapeRendering:"crispEdges"}),o.createElement("path",{fill:g,d:v,shapeRendering:"crispEdges"}),y)}));Vo.displayName="QRCodeSVG";let Xo,xo;const Jo=new WeakMap,No=new WeakMap,Ho=new WeakMap,Fo=new WeakMap,Yo=new WeakMap;let Ko={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return No.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ho.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Eo(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Mo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xo||(xo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(zo(this),n),Eo(Jo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Eo(e.apply(zo(this),n))}:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];const l=e.call(zo(this),t,...o);return Ho.set(l,t.sort?t.sort():[t]),Eo(l)}}function Lo(e){return"function"===typeof e?Mo(e):(e instanceof IDBTransaction&&function(e){if(No.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",l),e.removeEventListener("abort",l)},r=()=>{t(),o()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",r),e.addEventListener("error",l),e.addEventListener("abort",l)}));No.set(e,t)}(e),t=e,(Xo||(Xo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Ko):e);var t}function Eo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",r),e.removeEventListener("error",l)},r=()=>{t(Eo(e.result)),o()},l=()=>{n(e.error),o()};e.addEventListener("success",r),e.addEventListener("error",l)}));return t.then((t=>{t instanceof IDBCursor&&Jo.set(t,e)})).catch((()=>{})),Yo.set(t,e),t}(e);if(Fo.has(e))return Fo.get(e);const t=Lo(e);return t!==e&&(Fo.set(e,t),Yo.set(t,e)),t}const zo=e=>Yo.get(e);const jo=["get","getKey","getAll","getAllKeys","count"],Do=["put","add","delete","clear"],To=new Map;function Po(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(To.get(t))return To.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,r=Do.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!r&&!jo.includes(n))return;const l=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let l=t.store;for(var a=arguments.length,i=new Array(a>1?a-1:0),g=1;g<a;g++)i[g-1]=arguments[g];return o&&(l=l.index(i.shift())),(await Promise.all([l[n](...i),r&&t.done]))[0]};return To.set(t,l),l}Ko=(e=>Xe(Xe({},e),{},{get:(t,n,o)=>Po(t,n)||e.get(t,n,o),has:(t,n)=>!!Po(t,n)||e.has(t,n)}))(Ko);const Uo="formData",Qo=async()=>{try{return function(e,t){let{blocked:n,upgrade:o,blocking:r,terminated:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),i=Eo(a);return o&&a.addEventListener("upgradeneeded",(e=>{o(Eo(a.result),e.oldVersion,e.newVersion,Eo(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),i.then((e=>{l&&e.addEventListener("close",(()=>l())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}("AstroBSM",1,{upgrade(e){if(!e.objectStoreNames.contains(Uo)){const t=e.createObjectStore(Uo,{keyPath:"id",autoIncrement:!0});t.createIndex("name","name",{unique:!1}),t.createIndex("email","email",{unique:!0}),t.createIndex("createdAt","createdAt",{unique:!1})}}})}catch(e){throw console.error("Failed to initialize the database:",e),e}},Oo="https://astrobsm-oracle-backend.onrender.com/api/v1",qo=()=>{var e,t,n,r,l,a,i,g,s,c,d,I,u,C,p,A,m,h,b,f,y,v,Z,G,S,B,w,R,W,k,V,X,x,J,N,H,F,Y,K,M,L,E,z,j,D,T,P,U,Q,O,q;const[_,$]=(0,o.useState)({type:"staff",additionalFields:{}}),[ee,te]=(0,o.useState)(""),[ne,oe]=(0,o.useState)([]),[re,le]=(0,o.useState)(""),[ae,ie]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(Oo,"/suppliers")),t=await e.json();oe(t)}catch(e){console.error("Error fetching suppliers:",e)}})()}),[]);const ge=e=>{const{name:t,value:n}=e.target;$(Xe(Xe({},_),{},{additionalFields:Xe(Xe({},_.additionalFields),{},{[t]:n})}))},se=e=>{const t=new Date(e),n=new Date;let o=n.getFullYear()-t.getFullYear();const r=n.getMonth()-t.getMonth();return(r<0||0===r&&n.getDate()<t.getDate())&&o--,o};return(0,ao.jsxs)("div",{className:"registration-container",children:[(0,ao.jsx)("h1",{children:"Registration"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),ie(!0),te("");try{let e="",n={};const o=_.type,r=_.additionalFields;switch(o){case"staff":e="".concat(Oo,"/registration/staff-profile"),n={name:r.staffName,staff_id:r.staffId||"ASTRO".concat(Math.floor(1e3+9e3*Math.random())),dob:r.dob,gender:r.gender,phone:r.phone,address:r.address,bank:r.bankName,account_number:r.accountNumber,hourly_rate:r.hourlyRate?parseFloat(r.hourlyRate):0,role:r.role||"staff",department:r.department,appointment_type:r.appointmentType};break;case"product":e="".concat(Oo,"/registration/product"),n={name:r.productName,product_id:r.productId||void 0,description:r.productDescription,uom:r.unitOfMeasure,source:r.source||"",unit_price:r.unitPrice?parseFloat(r.unitPrice):0,reorder_point:r.reorderPoint?parseInt(r.reorderPoint):0,opening_stock:r.openingStockQuantity?parseInt(r.openingStockQuantity):0};break;case"raw_material":e="".concat(Oo,"/registration/raw-material"),n={name:r.rawMaterialName,rm_id:r.rawMaterialId||void 0,category:r.category||"",source:r.source||"",uom:r.unitOfMeasure,reorder_point:r.reorderPoint?parseInt(r.reorderPoint):0,unit_cost:r.unitPrice?parseFloat(r.unitPrice):0,opening_stock:r.openingStockQuantity?parseInt(r.openingStockQuantity):0};break;case"customer":e="".concat(Oo,"/registration/customer"),n={name:r.customerName,company:r.company||"",phone:r.phoneNumber,address:r.address||""};break;case"warehouse":e="".concat(Oo,"/registration/warehouse"),n={name:r.warehouseName,wh_id:r.warehouseId||"WH".concat(Math.floor(1e3+9e3*Math.random())),location:r.location,manager_name:r.manager,manager_phone:r.managerPhone,date_created:(new Date).toISOString().split("T")[0]};break;case"supplier":e="".concat(Oo,"/registration/supplier"),n={name:r.supplierName,phone:r.contactPhone,country:r.country||"",state:r.state||""};break;case"distributor":e="".concat(Oo,"/registration/distributor"),n={name:r.distributorName,dist_id:r.distributorId||"DIST".concat(Math.floor(1e3+9e3*Math.random())),phone:r.phoneNumber,coverage:r.region,address:r.address||""};break;case"marketer":e="".concat(Oo,"/registration/marketer"),n={name:r.marketerName,mark_id:r.marketerId||"MARK".concat(Math.floor(1e3+9e3*Math.random())),coverage:r.region||"",phone:r.phoneNumber,email:r.email||""};break;default:return te("Invalid registration type."),void ie(!1)}const l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});let a,i="";try{a=await l.json()}catch(t){a={},i="Invalid server response."}l.ok?(te("Registration successful!"),le(JSON.stringify(n)),await(async e=>{try{const t=(await Qo()).transaction(Uo,"readwrite");await t.store.add(e),await t.done}catch(t){throw console.error("Failed to save form data:",t),t}})(n),$({type:"staff",additionalFields:{}}),ie(!1)):(i||(i="Registration failed. Please try again."),a.detail?"string"===typeof a.detail?i=a.detail:Array.isArray(a.detail)?i=a.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof a.detail&&(i=JSON.stringify(a.detail)):a.message&&(i=a.message),te(i),ie(!1))}catch(n){let e="An error occurred. Please try again.";n&&n.message&&(e="Network or server error: ".concat(n.message)),te(e),ie(!1)}},className:"registration-form",children:[(0,ao.jsxs)("label",{children:["Type:",(0,ao.jsxs)("select",{name:"type",value:_.type||"",onChange:e=>{const{name:t,value:n}=e.target;$(Xe(Xe({},_),{},{[t]:n}))},required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Type"}),(0,ao.jsx)("option",{value:"staff",children:"Staff"}),(0,ao.jsx)("option",{value:"product",children:"Product"}),(0,ao.jsx)("option",{value:"raw_material",children:"Raw Material"}),(0,ao.jsx)("option",{value:"customer",children:"Customer"}),(0,ao.jsx)("option",{value:"warehouse",children:"Warehouse"}),(0,ao.jsx)("option",{value:"supplier",children:"Supplier"}),(0,ao.jsx)("option",{value:"distributor",children:"Distributor"}),(0,ao.jsx)("option",{value:"marketer",children:"Marketer"})]})]}),"staff"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Staff Name:",(0,ao.jsx)("input",{type:"text",name:"staffName",value:(null===(e=_.additionalFields)||void 0===e?void 0:e.staffName)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Staff ID (Auto-generated):",(0,ao.jsx)("input",{type:"text",name:"staffId",value:"ASTRO".concat(Math.floor(1e3+9e3*Math.random())),readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Date of Birth:",(0,ao.jsx)("input",{type:"date",name:"dob",value:(null===(t=_.additionalFields)||void 0===t?void 0:t.dob)||"",onChange:e=>{ge(e),$((t=>Xe(Xe({},t),{},{additionalFields:Xe(Xe({},t.additionalFields),{},{dob:e.target.value,age:se(e.target.value)})})))},required:!0})]}),(0,ao.jsxs)("label",{children:["Age (Auto-calculated):",(0,ao.jsx)("input",{type:"number",name:"age",value:_.additionalFields.age||"",readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Gender:",(0,ao.jsxs)("select",{name:"gender",value:(null===(n=_.additionalFields)||void 0===n?void 0:n.gender)||"",onChange:ge,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Gender"}),(0,ao.jsx)("option",{value:"male",children:"Male"}),(0,ao.jsx)("option",{value:"female",children:"Female"})]})]}),(0,ao.jsxs)("label",{children:["Contact Phone Number:",(0,ao.jsx)("input",{type:"text",name:"phone",value:(null===(r=_.additionalFields)||void 0===r?void 0:r.phone)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Address:",(0,ao.jsx)("input",{type:"text",name:"address",value:(null===(l=_.additionalFields)||void 0===l?void 0:l.address)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Bank Name:",(0,ao.jsx)("input",{type:"text",name:"bankName",value:(null===(a=_.additionalFields)||void 0===a?void 0:a.bankName)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Account Number:",(0,ao.jsx)("input",{type:"text",name:"accountNumber",value:(null===(i=_.additionalFields)||void 0===i?void 0:i.accountNumber)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Hourly Rate:",(0,ao.jsx)("input",{type:"number",name:"hourlyRate",value:(null===(g=_.additionalFields)||void 0===g?void 0:g.hourlyRate)||"",onChange:ge,required:!0,min:"0",step:"0.01"})]}),(0,ao.jsxs)("label",{children:["Department:",(0,ao.jsx)("input",{type:"text",name:"department",value:(null===(s=_.additionalFields)||void 0===s?void 0:s.department)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Appointment Type:",(0,ao.jsx)("input",{type:"text",name:"appointmentType",value:(null===(c=_.additionalFields)||void 0===c?void 0:c.appointmentType)||"",onChange:ge,required:!0})]})]}),"product"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Product Name:",(0,ao.jsx)("input",{type:"text",name:"productName",value:(null===(d=_.additionalFields)||void 0===d?void 0:d.productName)||"",onChange:e=>{ge(e);const t=e.target.value||"";if(t){const e="PRD".concat(t.replace(/\s+/g,"").toUpperCase().slice(0,6)).concat(Math.floor(1e3+9e3*Math.random()));$((t=>Xe(Xe({},t),{},{additionalFields:Xe(Xe({},t.additionalFields),{},{productId:e})})))}else $((e=>Xe(Xe({},e),{},{additionalFields:Xe(Xe({},e.additionalFields),{},{productId:""})})))},required:!0})]}),(0,ao.jsxs)("label",{children:["Product ID:",(0,ao.jsx)("input",{type:"text",name:"productId",value:(null===(I=_.additionalFields)||void 0===I?void 0:I.productId)||"",readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Product Description:",(0,ao.jsx)("textarea",{name:"productDescription",value:(null===(u=_.additionalFields)||void 0===u?void 0:u.productDescription)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Unit of Measure:",(0,ao.jsx)("input",{type:"text",name:"unitOfMeasure",value:(null===(C=_.additionalFields)||void 0===C?void 0:C.unitOfMeasure)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Source:",(0,ao.jsx)("input",{type:"text",name:"source",value:(null===(p=_.additionalFields)||void 0===p?void 0:p.source)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Unit Price:",(0,ao.jsx)("input",{type:"number",name:"unitPrice",value:(null===(A=_.additionalFields)||void 0===A?void 0:A.unitPrice)||"",onChange:ge,required:!0,min:"0",step:"0.01"})]}),(0,ao.jsxs)("label",{children:["Reorder Point:",(0,ao.jsx)("input",{type:"number",name:"reorderPoint",value:(null===(m=_.additionalFields)||void 0===m?void 0:m.reorderPoint)||"",onChange:ge,required:!0,min:"0"})]}),(0,ao.jsxs)("label",{children:["Opening Stock Quantity:",(0,ao.jsx)("input",{type:"number",name:"openingStockQuantity",value:(null===(h=_.additionalFields)||void 0===h?void 0:h.openingStockQuantity)||"",onChange:ge,required:!0,min:"0"})]})]}),"raw_material"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Raw Material Name:",(0,ao.jsx)("input",{type:"text",name:"rawMaterialName",value:(null===(b=_.additionalFields)||void 0===b?void 0:b.rawMaterialName)||"",onChange:e=>{ge(e);const t=e.target.value||"";if(t){const e="RAW".concat(t.replace(/\s+/g,"").toUpperCase().slice(0,6)).concat(Math.floor(1e3+9e3*Math.random()));$((t=>Xe(Xe({},t),{},{additionalFields:Xe(Xe({},t.additionalFields),{},{rawMaterialId:e})})))}else $((e=>Xe(Xe({},e),{},{additionalFields:Xe(Xe({},e.additionalFields),{},{rawMaterialId:""})})))},required:!0})]}),(0,ao.jsxs)("label",{children:["Raw Material ID:",(0,ao.jsx)("input",{type:"text",name:"rawMaterialId",value:(null===(f=_.additionalFields)||void 0===f?void 0:f.rawMaterialId)||"",readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Category:",(0,ao.jsxs)("select",{name:"category",value:(null===(y=_.additionalFields)||void 0===y?void 0:y.category)||"",onChange:ge,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Category"}),(0,ao.jsx)("option",{value:"ACTIVE AGENT",children:"ACTIVE AGENT"}),(0,ao.jsx)("option",{value:"BASE",children:"BASE"}),(0,ao.jsx)("option",{value:"PACKAGING",children:"PACKAGING"}),(0,ao.jsx)("option",{value:"CARRIER",children:"CARRIER"})]})]}),(0,ao.jsxs)("label",{children:["Source:",(0,ao.jsx)("input",{type:"text",name:"source",value:(null===(v=_.additionalFields)||void 0===v?void 0:v.source)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Unit of Measure:",(0,ao.jsx)("input",{type:"text",name:"unitOfMeasure",value:(null===(Z=_.additionalFields)||void 0===Z?void 0:Z.unitOfMeasure)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Unit Cost:",(0,ao.jsx)("input",{type:"number",name:"unitPrice",value:(null===(G=_.additionalFields)||void 0===G?void 0:G.unitPrice)||"",onChange:ge,required:!0,min:"0",step:"0.01"})]}),(0,ao.jsxs)("label",{children:["Reorder Point:",(0,ao.jsx)("input",{type:"number",name:"reorderPoint",value:(null===(S=_.additionalFields)||void 0===S?void 0:S.reorderPoint)||"",onChange:ge,required:!0,min:"0"})]}),(0,ao.jsxs)("label",{children:["Opening Stock Quantity:",(0,ao.jsx)("input",{type:"number",name:"openingStockQuantity",value:(null===(B=_.additionalFields)||void 0===B?void 0:B.openingStockQuantity)||"",onChange:ge,required:!0,min:"0"})]})]}),"customer"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Customer Name:",(0,ao.jsx)("input",{type:"text",name:"customerName",value:(null===(w=_.additionalFields)||void 0===w?void 0:w.customerName)||"",onChange:e=>{ge(e);const t=e.target.value||"";if(t){const e="CUS".concat(t.replace(/\s+/g,"").toUpperCase().slice(0,6)).concat(Math.floor(1e3+9e3*Math.random()));$((t=>Xe(Xe({},t),{},{additionalFields:Xe(Xe({},t.additionalFields),{},{customerId:e})})))}else $((e=>Xe(Xe({},e),{},{additionalFields:Xe(Xe({},e.additionalFields),{},{customerId:""})})))},required:!0})]}),(0,ao.jsxs)("label",{children:["Customer ID:",(0,ao.jsx)("input",{type:"text",name:"customerId",value:(null===(R=_.additionalFields)||void 0===R?void 0:R.customerId)||"",readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Company (Optional):",(0,ao.jsx)("input",{type:"text",name:"company",value:(null===(W=_.additionalFields)||void 0===W?void 0:W.company)||"",onChange:ge})]}),(0,ao.jsxs)("label",{children:["Phone Number:",(0,ao.jsx)("input",{type:"text",name:"phoneNumber",value:(null===(k=_.additionalFields)||void 0===k?void 0:k.phoneNumber)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Address:",(0,ao.jsx)("input",{type:"text",name:"address",value:(null===(V=_.additionalFields)||void 0===V?void 0:V.address)||"",onChange:ge})]})]}),"warehouse"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Warehouse Name:",(0,ao.jsx)("input",{type:"text",name:"warehouseName",value:(null===(X=_.additionalFields)||void 0===X?void 0:X.warehouseName)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Warehouse ID (Auto-generated):",(0,ao.jsx)("input",{type:"text",name:"warehouseId",value:(null===(x=_.additionalFields)||void 0===x?void 0:x.warehouseId)||"WH".concat(Math.floor(1e3+9e3*Math.random())),readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Location:",(0,ao.jsx)("input",{type:"text",name:"location",value:(null===(J=_.additionalFields)||void 0===J?void 0:J.location)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Manager Name:",(0,ao.jsx)("input",{type:"text",name:"manager",value:(null===(N=_.additionalFields)||void 0===N?void 0:N.manager)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Manager Phone Number:",(0,ao.jsx)("input",{type:"text",name:"managerPhone",value:(null===(H=_.additionalFields)||void 0===H?void 0:H.managerPhone)||"",onChange:ge,required:!0})]})]}),"supplier"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Supplier Name:",(0,ao.jsx)("input",{type:"text",name:"supplierName",value:(null===(F=_.additionalFields)||void 0===F?void 0:F.supplierName)||"",onChange:e=>{ge(e);const t=e.target.value||"";if(t){const e="SUP".concat(t.replace(/\s+/g,"").toUpperCase().slice(0,6)).concat(Math.floor(1e3+9e3*Math.random()));$((t=>Xe(Xe({},t),{},{additionalFields:Xe(Xe({},t.additionalFields),{},{supplierId:e})})))}else $((e=>Xe(Xe({},e),{},{additionalFields:Xe(Xe({},e.additionalFields),{},{supplierId:""})})))},required:!0})]}),(0,ao.jsxs)("label",{children:["Supplier ID:",(0,ao.jsx)("input",{type:"text",name:"supplierId",value:(null===(Y=_.additionalFields)||void 0===Y?void 0:Y.supplierId)||"",readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Contact Phone Number:",(0,ao.jsx)("input",{type:"text",name:"contactPhone",value:(null===(K=_.additionalFields)||void 0===K?void 0:K.contactPhone)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Country:",(0,ao.jsx)("input",{type:"text",name:"country",value:(null===(M=_.additionalFields)||void 0===M?void 0:M.country)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["State:",(0,ao.jsx)("input",{type:"text",name:"state",value:(null===(L=_.additionalFields)||void 0===L?void 0:L.state)||"",onChange:ge,required:!0})]})]}),"distributor"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Distributor Name:",(0,ao.jsx)("input",{type:"text",name:"distributorName",value:(null===(E=_.additionalFields)||void 0===E?void 0:E.distributorName)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Distributor ID (Auto-generated):",(0,ao.jsx)("input",{type:"text",name:"distributorId",value:(null===(z=_.additionalFields)||void 0===z?void 0:z.distributorId)||"DIST".concat(Math.floor(1e3+9e3*Math.random())),readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Phone Number:",(0,ao.jsx)("input",{type:"text",name:"phoneNumber",value:(null===(j=_.additionalFields)||void 0===j?void 0:j.phoneNumber)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Coverage (Region):",(0,ao.jsx)("input",{type:"text",name:"region",value:(null===(D=_.additionalFields)||void 0===D?void 0:D.region)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Address:",(0,ao.jsx)("input",{type:"text",name:"address",value:(null===(T=_.additionalFields)||void 0===T?void 0:T.address)||"",onChange:ge})]})]}),"marketer"===_.type&&(0,ao.jsxs)("div",{children:[(0,ao.jsxs)("label",{children:["Marketer Name:",(0,ao.jsx)("input",{type:"text",name:"marketerName",value:(null===(P=_.additionalFields)||void 0===P?void 0:P.marketerName)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Marketer ID (Auto-generated):",(0,ao.jsx)("input",{type:"text",name:"marketerId",value:(null===(U=_.additionalFields)||void 0===U?void 0:U.marketerId)||"MARK".concat(Math.floor(1e3+9e3*Math.random())),readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Coverage (Region):",(0,ao.jsx)("input",{type:"text",name:"region",value:(null===(Q=_.additionalFields)||void 0===Q?void 0:Q.region)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Phone Number:",(0,ao.jsx)("input",{type:"text",name:"phoneNumber",value:(null===(O=_.additionalFields)||void 0===O?void 0:O.phoneNumber)||"",onChange:ge,required:!0})]}),(0,ao.jsxs)("label",{children:["Email Address:",(0,ao.jsx)("input",{type:"email",name:"email",value:(null===(q=_.additionalFields)||void 0===q?void 0:q.email)||"",onChange:ge})]})]}),(0,ao.jsx)("button",{type:"submit",disabled:ae,children:ae?"Registering...":"Register"})]}),ee&&(0,ao.jsx)("div",{className:ee.includes("success")?"success":"error",style:{marginTop:"1rem"},children:ee}),re&&(0,ao.jsxs)("div",{className:"qr-code",children:[(0,ao.jsx)("h3",{children:"QR Code:"}),(0,ao.jsx)(ko,{value:re})]})]})},_o=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/products")),n=await e.json();Array.isArray(n)?t(n):(console.error("API did not return an array:",n),t([]))}catch(e){console.error("Error fetching products:",e),t([])}})(),(async()=>{try{const e=await fetch("".concat(lo,"/inventory/raw-materials")),t=await e.json();Array.isArray(t)?r(t):(console.error("API did not return an array:",t),r([]))}catch(e){console.error("Error fetching raw materials:",e),r([])}})()}),[]),(0,ao.jsxs)("div",{className:"inventory-container",children:[(0,ao.jsx)("h1",{children:"Inventory"}),(0,ao.jsxs)("div",{className:"inventory-section",children:[(0,ao.jsx)("h2",{children:"Products"}),(0,ao.jsx)("ul",{children:e.map((e=>(0,ao.jsxs)("li",{children:[e.name," - ",e.unit_price]},e.id)))})]}),(0,ao.jsxs)("div",{className:"inventory-section",children:[(0,ao.jsx)("h2",{children:"Raw Materials"}),(0,ao.jsx)("ul",{children:n.map((e=>(0,ao.jsxs)("li",{children:[e.name," - ",e.unit_cost]},e.id)))})]})]})},$o=()=>{const[e,t]=(0,o.useState)({employeeId:"",salary:"",bonus:"",deductions:""}),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)(!1),i=te(),g=n=>{const{name:o,value:r}=n.target;t(Xe(Xe({},e),{},{[o]:r}))};return(0,ao.jsxs)("div",{className:"payroll-container",children:[(0,ao.jsx)("h1",{children:"Payroll"}),(0,ao.jsxs)("div",{className:"payroll-buttons",children:[(0,ao.jsx)("button",{onClick:()=>i("/salary-console"),className:"payroll-button",children:"Salary Console"}),(0,ao.jsx)("button",{onClick:()=>i("/salary-report"),className:"payroll-button",children:"Salary Report"})]}),(0,ao.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),a(!0),r("");try{const n=await fetch("".concat(lo,"/payroll"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});let l;try{l=await n.json()}catch(o){l={}}if(n.ok)r("Payroll recorded successfully!"),t({employeeId:"",salary:"",bonus:"",deductions:""});else{let e="Failed to record payroll.";l.detail&&("string"===typeof l.detail?e=l.detail:Array.isArray(l.detail)?e=l.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof l.detail&&(e=JSON.stringify(l.detail))),r(e)}}catch(l){r("An error occurred. Please try again.")}finally{a(!1)}},className:"payroll-form",children:[(0,ao.jsxs)("label",{children:["Employee ID:",(0,ao.jsx)("input",{type:"text",name:"employeeId",value:e.employeeId,onChange:g,required:!0})]}),(0,ao.jsxs)("label",{children:["Salary:",(0,ao.jsx)("input",{type:"number",name:"salary",value:e.salary,onChange:g,required:!0})]}),(0,ao.jsxs)("label",{children:["Bonus:",(0,ao.jsx)("input",{type:"number",name:"bonus",value:e.bonus,onChange:g})]}),(0,ao.jsxs)("label",{children:["Deductions:",(0,ao.jsx)("input",{type:"number",name:"deductions",value:e.deductions,onChange:g})]}),(0,ao.jsx)("button",{type:"submit",disabled:l,children:l?"Submitting...":"Submit"})]}),n&&(0,ao.jsx)("div",{className:n.includes("success")?"success":"error",style:{marginTop:"1rem"},children:n})]})},er=()=>{const[e,t]=(0,o.useState)(""),n=te();return(0,ao.jsxs)("div",{className:"attendance-container",children:[(0,ao.jsx)("h1",{children:"Attendance"}),(0,ao.jsx)("form",{className:"attendance-form"}),e&&(0,ao.jsx)("p",{className:"message",children:e}),(0,ao.jsxs)("div",{className:"attendance-buttons",children:[(0,ao.jsx)("button",{onClick:()=>n("/timed-attendance"),children:"Timed Attendance"}),(0,ao.jsx)("button",{onClick:()=>n("/attendance-record"),children:"Attendance Record"}),(0,ao.jsx)("button",{onClick:()=>n("/attendance-analysis"),children:"Attendance Analysis"})]})]})},tr=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/suppliers")),n=await e.json();Array.isArray(n)?t(n):(console.error("Unexpected response format:",n),t([]))}catch(e){console.error("Error fetching suppliers:",e),t([])}})()}),[]),(0,ao.jsxs)("div",{className:"factory-inventory-container",children:[(0,ao.jsx)("h1",{children:"Factory Inventory"}),(0,ao.jsxs)("div",{className:"inventory-buttons",children:[(0,ao.jsx)(we,{to:"/factory-inventory/device-intake",className:"awesome-button",children:"Device Intake"}),(0,ao.jsx)(we,{to:"/factory-inventory/device-list",className:"awesome-button",children:"Device List"}),(0,ao.jsx)(we,{to:"/factory-inventory/device-maintenance-log",className:"awesome-button",children:"Device Maintenance Log"})]})]})},nr=()=>{const[e,t]=(0,o.useState)(""),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)(""),s=(0,o.useRef)(null),[c,d]=(0,o.useState)(!1),[I,u]=(0,o.useState)({}),[C,p]=(0,o.useState)(!0),A=te(),m={admin:"Admin",sales:"Sales",manager:"Manager",production_manager:"Production_Manager",marketing:"Marketing"},h=e=>{const{name:t,value:n}=e.target;u(Xe(Xe({},I),{},{[t]:n}))},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";s.current&&(s.current.textContent=e,s.current.className="success"===t?"success":"error",s.current.style.display="block",setTimeout((()=>{s.current&&(s.current.style.display="none")}),3e3))};return(0,ao.jsx)("div",{style:{backgroundImage:"url('/pharmacy-dispensary.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",height:"100vh"},className:"login-page",children:(0,ao.jsxs)("div",{className:"login-container",children:[(0,ao.jsx)("h1",{children:"Welcome to AstroBSM-Oracle"}),(0,ao.jsx)("div",{ref:s,style:{display:"none",marginBottom:"16px",padding:"10px",borderRadius:"4px",fontWeight:"bold"}}),c&&(0,ao.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,ao.jsx)("button",{type:"button",className:C?"":"active",onClick:()=>p(!0),children:"I have login credentials"}),(0,ao.jsx)("button",{type:"button",className:C?"":"active",onClick:()=>p(!1),style:{marginLeft:"10px"},children:"I am a new user (Create Profile)"})]}),(0,ao.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),g(""),!c||C)try{const t=await fetch("".concat(lo,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n,role:m[l]||l})});if(t.ok){const e=await t.json();localStorage.setItem("token",e.access_token),"admin"===l?A("/dashboard"):"sales"===l?A("/sales-dashboard"):"manager"===l?A("/manager-dashboard"):"production_manager"===l?A("/production-dashboard"):"marketing"===l&&A("/marketing-dashboard")}else{const e=await t.json();g(e.detail||"Login failed."),b(e.detail||"Login failed.","error")}}catch(jr){g("An error occurred. Please try again later."),b("An error occurred. Please try again later.","error")}else try{if(!(await fetch("".concat(lo,"/auth/create-profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:I.fullName,email:I.email,phone:I.phone,role:m[l]||l})})).ok)throw new Error("Error creating profile. Please try again.");b("Profile created successfully. Please wait for admin approval.","success")}catch(jr){b("Error creating profile. Please try again.","error")}},children:[(!c||C)&&(0,ao.jsxs)(ao.Fragment,{children:[(0,ao.jsx)("input",{type:"text",placeholder:"Username",className:"login-input",value:e,onChange:e=>t(e.target.value)}),(0,ao.jsx)("input",{type:"password",placeholder:"Password",className:"login-input",value:n,onChange:e=>r(e.target.value)})]}),(0,ao.jsxs)("select",{className:"login-select",value:l,onChange:e=>{const t=e.target.value;a(t),d("admin"!==t&&""!==t),p(!0)},children:[(0,ao.jsx)("option",{value:"",children:"Select Role"}),(0,ao.jsx)("option",{value:"admin",children:"Admin"}),(0,ao.jsx)("option",{value:"sales",children:"Sales"}),(0,ao.jsx)("option",{value:"manager",children:"Manager"}),(0,ao.jsx)("option",{value:"production_manager",children:"Production Manager"}),(0,ao.jsx)("option",{value:"marketing",children:"Marketing"})]}),c&&!C&&(0,ao.jsxs)("div",{className:"profile-creation",children:[(0,ao.jsx)("h3",{children:"Create Profile"}),(0,ao.jsx)("input",{type:"text",name:"fullName",placeholder:"Full Name",className:"login-input",value:I.fullName||"",onChange:h,required:!0}),(0,ao.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"login-input",value:I.email||"",onChange:h,required:!0}),(0,ao.jsx)("input",{type:"text",name:"phone",placeholder:"Phone Number",className:"login-input",value:I.phone||"",onChange:h,required:!0})]}),i&&(0,ao.jsx)("p",{className:"error-message",children:i}),(0,ao.jsx)("button",{type:"submit",className:"login-button",children:c&&!C?"Create Profile":"Login"})]})]})})},or=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)({productId:"",quantity:"",intakeDate:"",expiryDate:"",staffId:""}),[i,g]=(0,o.useState)(""),[s,c]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:8000/api/v1/products"),n=await e.json();t(n)}catch(e){console.error("Error fetching products:",e)}})(),(async()=>{try{const e=await fetch("http://localhost:8000/api/v1/staff"),t=await e.json();r(t)}catch(e){console.error("Error fetching staff:",e)}})()}),[]);const d=e=>{const{name:t,value:n}=e.target;a(Xe(Xe({},l),{},{[t]:n}))};return(0,ao.jsxs)("div",{className:"stock-intake-container",children:[(0,ao.jsx)("h1",{children:"Product Stock Intake"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),g("");try{const e=await fetch("http://localhost:8000/api/v1/stock-intake",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});let n;try{n=await e.json()}catch(t){n={}}if(e.ok)g("Stock intake recorded successfully!"),a({productId:"",quantity:"",intakeDate:"",expiryDate:"",staffId:""});else{let e="Failed to record stock intake.";n.detail&&("string"===typeof n.detail?e=n.detail:Array.isArray(n.detail)?e=n.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof n.detail&&(e=JSON.stringify(n.detail))),g(e)}}catch(n){g("An error occurred. Please try again.")}finally{c(!1)}},className:"stock-intake-form",children:[(0,ao.jsxs)("label",{children:["Select Product:",(0,ao.jsxs)("select",{name:"productId",value:l.productId,onChange:d,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"--Select Product--"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Quantity:",(0,ao.jsx)("input",{type:"number",name:"quantity",value:l.quantity,onChange:d,required:!0})]}),(0,ao.jsxs)("label",{children:["Date of Intake:",(0,ao.jsx)("input",{type:"date",name:"intakeDate",value:l.intakeDate,onChange:d,required:!0})]}),(0,ao.jsxs)("label",{children:["Expiry Date:",(0,ao.jsx)("input",{type:"date",name:"expiryDate",value:l.expiryDate,onChange:d,required:!0})]}),(0,ao.jsxs)("label",{children:["Intake Staff:",(0,ao.jsxs)("select",{name:"staffId",value:l.staffId,onChange:d,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"--Select Staff--"}),n.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsx)("button",{type:"submit",disabled:s,children:s?"Submitting...":"Submit"})]}),i&&(0,ao.jsx)("div",{className:i.includes("success")?"success":"error",style:{marginTop:"1rem"},children:i})]})},rr=()=>(0,ao.jsxs)("div",{className:"stock-level-container",children:[(0,ao.jsx)("h1",{children:"Stock Level"}),(0,ao.jsx)("p",{children:"Dynamic table for stock levels will be implemented here."})]}),lr=()=>(0,ao.jsxs)("div",{className:"grant-access-container",children:[(0,ao.jsx)("h1",{children:"Grant Access Privileges"}),(0,ao.jsx)("p",{children:"Form for granting access privileges will be implemented here."})]});var ar=n(9309),ir=n.n(ar);const gr=()=>{const[e,t]=(0,o.useState)("time-in"),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)(!1),[s,c]=(0,o.useState)(""),[d,I]=(0,o.useState)([]);(0,o.useEffect)((()=>{fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/staff/")).then((e=>e.json())).then((e=>I(Array.isArray(e)?e:[]))).catch((e=>{I([]),console.error("Failed to fetch staff:",e)}))}),[]);return(0,ao.jsxs)("div",{className:"timed-attendance-container",children:[(0,ao.jsx)("h1",{children:"Timed Attendance"}),(0,ao.jsxs)("label",{children:["Select Staff:",(0,ao.jsxs)("select",{value:l,onChange:e=>{a(e.target.value)},children:[(0,ao.jsx)("option",{value:"",children:"-- Select Staff --"}),0===d.length&&(0,ao.jsx)("option",{disabled:!0,children:"No staff found"}),d.map((e=>(0,ao.jsxs)("option",{value:e.id,children:[e.name," (",e.staff_id,")"]},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Select Action:",(0,ao.jsxs)("select",{value:e,onChange:e=>t(e.target.value),children:[(0,ao.jsx)("option",{value:"time-in",children:"Time-In"}),(0,ao.jsx)("option",{value:"time-out",children:"Time-Out"})]})]}),(0,ao.jsxs)("div",{className:"attendance-buttons",children:[(0,ao.jsx)("button",{onClick:()=>{g(!0)},children:"Scan QR Code"}),(0,ao.jsx)("button",{onClick:()=>{r("Facial scan completed successfully for ".concat(e,"."))},children:"Facial Scan"})]}),i&&(0,ao.jsx)(ir(),{delay:300,onError:e=>{console.error(e),r("Error scanning QR code.")},onScan:t=>{t&&(c(t),g(!1),r("expected_qr_code"===t?"QR code matched successfully for ".concat(e,"."):"QR code does not match any records."))},style:{width:"100%"}}),n&&(0,ao.jsx)("p",{className:"message",children:n})]})},sr=()=>(0,ao.jsxs)("div",{className:"attendance-record-container",children:[(0,ao.jsx)("h1",{children:"Attendance Record"}),(0,ao.jsx)("p",{children:"Real-time updated attendance records will be displayed here, including hours worked per day for each staff member."})]}),cr=()=>(0,ao.jsxs)("div",{className:"attendance-analysis-container",children:[(0,ao.jsx)("h1",{children:"Attendance Analysis"}),(0,ao.jsxs)("table",{className:"awesome-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Date"}),(0,ao.jsx)("th",{children:"Punctuality"}),(0,ao.jsx)("th",{children:"Days Missed"}),(0,ao.jsx)("th",{children:"Extra Time Worked"})]})}),(0,ao.jsx)("tbody",{})]})]}),dr="https://astrobsm-oracle-backend.onrender.com/api/v1",Ir=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)([]),[i,g]=(0,o.useState)({productId:"",quantity:"",intakeDate:"",expiryDate:"",staffId:"",warehouseId:""}),[s,c]=(0,o.useState)(""),[d,I]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(dr,"/products")),n=await e.json();t(Array.isArray(n)?n:[])}catch(e){t([])}})(),(async()=>{try{const e=await fetch("".concat(dr,"/staff")),t=await e.json();r(Array.isArray(t)?t:[])}catch(e){r([])}})(),(async()=>{try{const e=await fetch("".concat(dr,"/warehouses")),t=await e.json();a(Array.isArray(t)?t:[])}catch(e){a([])}})()}),[]);const u=e=>{const{name:t,value:n}=e.target;g(Xe(Xe({},i),{},{[t]:n}))};return(0,ao.jsxs)("div",{className:"product-stock-intake-container",children:[(0,ao.jsx)("h1",{children:"Product Stock Intake"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),I(!0),c("");try{const e=await fetch("".concat(dr,"/product-stock-intake"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});let n;try{n=await e.json()}catch(t){n={}}if(e.ok)c("string"===typeof n.message?n.message:"Product stock intake recorded successfully!"),g({productId:"",quantity:"",intakeDate:"",expiryDate:"",staffId:"",warehouseId:""}),window.dispatchEvent(new Event("stockLevelUpdated"));else{let e="Failed to record product stock intake.";n.detail&&("string"===typeof n.detail?e=n.detail:Array.isArray(n.detail)?e=n.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof n.detail&&(e=JSON.stringify(n.detail))),c(e)}}catch(n){c("An error occurred. Please try again.")}finally{I(!1)}},className:"product-stock-intake-form",children:[(0,ao.jsxs)("label",{children:["Select Product:",(0,ao.jsxs)("select",{name:"productId",value:i.productId,onChange:u,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"--Select Product--"}),0===e.length&&(0,ao.jsx)("option",{disabled:!0,children:"No products found"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Quantity:",(0,ao.jsx)("input",{type:"number",name:"quantity",value:i.quantity,onChange:u,required:!0})]}),(0,ao.jsxs)("label",{children:["Date of Intake:",(0,ao.jsx)("input",{type:"date",name:"intakeDate",value:i.intakeDate,onChange:u,required:!0})]}),(0,ao.jsxs)("label",{children:["Expiry Date:",(0,ao.jsx)("input",{type:"date",name:"expiryDate",value:i.expiryDate,onChange:u,required:!0})]}),(0,ao.jsxs)("label",{children:["Intake Staff:",(0,ao.jsxs)("select",{name:"staffId",value:i.staffId,onChange:u,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"--Select Staff--"}),n.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Warehouse:",(0,ao.jsxs)("select",{name:"warehouseId",value:i.warehouseId||"",onChange:u,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"--Select Warehouse--"}),0===l.length&&(0,ao.jsx)("option",{disabled:!0,children:"No warehouses found"}),l.map((e=>(0,ao.jsxs)("option",{value:e.id,children:[e.name," (",e.location,")"]},e.id)))]})]}),(0,ao.jsx)("button",{type:"submit",disabled:d,children:d?"Submitting...":"Submit"})]}),s&&(0,ao.jsx)("div",{className:s.includes("success")?"success":"error",style:{marginTop:"1rem"},children:s})]})},ur=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)(null),i=(0,o.useRef)(),g=async()=>{try{const e=await ro.get("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/inventory/stock-level"));t(Array.isArray(e.data)?e.data:[]),a(null)}catch(jr){t([]),a("Could not fetch stock levels.")}finally{r(!1)}};(0,o.useEffect)((()=>{g(),i.current=setInterval(g,1e4);const e=()=>g();return window.addEventListener("stockLevelUpdated",e),()=>{clearInterval(i.current),window.removeEventListener("stockLevelUpdated",e)}}),[]);return n?(0,ao.jsx)("div",{children:"Loading..."}):l?(0,ao.jsx)("div",{className:"error",children:l}):(0,ao.jsxs)("div",{className:"product-stock-level-container",children:[(0,ao.jsx)("h1",{children:"Product Stock Levels"}),(0,ao.jsx)("button",{className:"refresh-btn",onClick:()=>{r(!0),g()},children:"Refresh Now"}),(0,ao.jsxs)("table",{className:"stock-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Product"}),(0,ao.jsx)("th",{children:"Warehouse"}),(0,ao.jsx)("th",{children:"Available Quantity"}),(0,ao.jsx)("th",{children:"Reorder Point"})]})}),(0,ao.jsxs)("tbody",{children:[0===e.length&&(0,ao.jsx)("tr",{children:(0,ao.jsx)("td",{colSpan:"4",children:"No stock levels found"})}),e.map((e=>(0,ao.jsxs)("tr",{className:e.available_quantity<=e.reorder_point?"low-stock":"",children:[(0,ao.jsx)("td",{children:e.productName||e.name}),(0,ao.jsx)("td",{children:e.warehouse_name||e.warehouseName||e.warehouseId||"-"}),(0,ao.jsx)("td",{children:e.available_quantity}),(0,ao.jsx)("td",{children:e.reorder_point})]},e.id+"-"+(e.warehouse_name||e.warehouseId||""))))]})]})]})};var Cr=n(2284),pr=Uint8Array,Ar=Uint16Array,mr=Int32Array,hr=new pr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),br=new pr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fr=new pr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yr=function(e,t){for(var n=new Ar(31),o=0;o<31;++o)n[o]=t+=1<<e[o-1];var r=new mr(n[30]);for(o=1;o<30;++o)for(var l=n[o];l<n[o+1];++l)r[l]=l-n[o]<<5|o;return{b:n,r:r}},vr=yr(hr,2),Zr=vr.b,Gr=vr.r;Zr[28]=258,Gr[258]=28;for(var Sr=yr(br,0),Br=Sr.b,wr=Sr.r,Rr=new Ar(32768),Wr=0;Wr<32768;++Wr){var kr=(43690&Wr)>>1|(21845&Wr)<<1;kr=(61680&(kr=(52428&kr)>>2|(13107&kr)<<2))>>4|(3855&kr)<<4,Rr[Wr]=((65280&kr)>>8|(255&kr)<<8)>>1}var Vr=function(e,t,n){for(var o=e.length,r=0,l=new Ar(t);r<o;++r)e[r]&&++l[e[r]-1];var a,i=new Ar(t);for(r=1;r<t;++r)i[r]=i[r-1]+l[r-1]<<1;if(n){a=new Ar(1<<t);var g=15-t;for(r=0;r<o;++r)if(e[r])for(var s=r<<4|e[r],c=t-e[r],d=i[e[r]-1]++<<c,I=d|(1<<c)-1;d<=I;++d)a[Rr[d]>>g]=s}else for(a=new Ar(o),r=0;r<o;++r)e[r]&&(a[r]=Rr[i[e[r]-1]++]>>15-e[r]);return a},Xr=new pr(288);for(Wr=0;Wr<144;++Wr)Xr[Wr]=8;for(Wr=144;Wr<256;++Wr)Xr[Wr]=9;for(Wr=256;Wr<280;++Wr)Xr[Wr]=7;for(Wr=280;Wr<288;++Wr)Xr[Wr]=8;var xr=new pr(32);for(Wr=0;Wr<32;++Wr)xr[Wr]=5;var Jr=Vr(Xr,9,0),Nr=Vr(Xr,9,1),Hr=Vr(xr,5,0),Fr=Vr(xr,5,1),Yr=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Kr=function(e,t,n){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(7&t)&n},Mr=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Lr=function(e){return(e+7)/8|0},Er=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new pr(e.subarray(t,n))},zr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],jr=function(e,t,n){var o=new Error(t||zr[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,jr),!n)throw o;return o},Dr=function(e,t,n,o){var r=e.length,l=o?o.length:0;if(!r||t.f&&!t.l)return n||new pr(0);var a=!n,i=a||2!=t.i,g=t.i;a&&(n=new pr(3*r));var s=function(e){var t=n.length;if(e>t){var o=new pr(Math.max(2*t,e));o.set(n),n=o}},c=t.f||0,d=t.p||0,I=t.b||0,u=t.l,C=t.d,p=t.m,A=t.n,m=8*r;do{if(!u){c=Kr(e,d,1);var h=Kr(e,d+1,3);if(d+=3,!h){var b=e[(k=Lr(d)+4)-4]|e[k-3]<<8,f=k+b;if(f>r){g&&jr(0);break}i&&s(I+b),n.set(e.subarray(k,f),I),t.b=I+=b,t.p=d=8*f,t.f=c;continue}if(1==h)u=Nr,C=Fr,p=9,A=5;else if(2==h){var y=Kr(e,d,31)+257,v=Kr(e,d+10,15)+4,Z=y+Kr(e,d+5,31)+1;d+=14;for(var G=new pr(Z),S=new pr(19),B=0;B<v;++B)S[fr[B]]=Kr(e,d+3*B,7);d+=3*v;var w=Yr(S),R=(1<<w)-1,W=Vr(S,w,1);for(B=0;B<Z;){var k,V=W[Kr(e,d,R)];if(d+=15&V,(k=V>>4)<16)G[B++]=k;else{var X=0,x=0;for(16==k?(x=3+Kr(e,d,3),d+=2,X=G[B-1]):17==k?(x=3+Kr(e,d,7),d+=3):18==k&&(x=11+Kr(e,d,127),d+=7);x--;)G[B++]=X}}var J=G.subarray(0,y),N=G.subarray(y);p=Yr(J),A=Yr(N),u=Vr(J,p,1),C=Vr(N,A,1)}else jr(1);if(d>m){g&&jr(0);break}}i&&s(I+131072);for(var H=(1<<p)-1,F=(1<<A)-1,Y=d;;Y=d){var K=(X=u[Mr(e,d)&H])>>4;if((d+=15&X)>m){g&&jr(0);break}if(X||jr(2),K<256)n[I++]=K;else{if(256==K){Y=d,u=null;break}var M=K-254;if(K>264){var L=hr[B=K-257];M=Kr(e,d,(1<<L)-1)+Zr[B],d+=L}var E=C[Mr(e,d)&F],z=E>>4;E||jr(3),d+=15&E;N=Br[z];if(z>3){L=br[z];N+=Mr(e,d)&(1<<L)-1,d+=L}if(d>m){g&&jr(0);break}i&&s(I+131072);var j=I+M;if(I<N){var D=l-N,T=Math.min(N,j);for(D+I<0&&jr(3);I<T;++I)n[I]=o[D+I]}for(;I<j;++I)n[I]=n[I-N]}}t.l=u,t.p=Y,t.b=I,t.f=c,u&&(c=1,t.m=p,t.d=C,t.n=A)}while(!c);return I!=n.length&&a?Er(n,0,I):n.subarray(0,I)},Tr=function(e,t,n){n<<=7&t;var o=t/8|0;e[o]|=n,e[o+1]|=n>>8},Pr=function(e,t,n){n<<=7&t;var o=t/8|0;e[o]|=n,e[o+1]|=n>>8,e[o+2]|=n>>16},Ur=function(e,t){for(var n=[],o=0;o<e.length;++o)e[o]&&n.push({s:o,f:e[o]});var r=n.length,l=n.slice();if(!r)return{t:tl,l:0};if(1==r){var a=new pr(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var i=n[0],g=n[1],s=0,c=1,d=2;for(n[0]={s:-1,f:i.f+g.f,l:i,r:g};c!=r-1;)i=n[n[s].f<n[d].f?s++:d++],g=n[s!=c&&n[s].f<n[d].f?s++:d++],n[c++]={s:-1,f:i.f+g.f,l:i,r:g};var I=l[0].s;for(o=1;o<r;++o)l[o].s>I&&(I=l[o].s);var u=new Ar(I+1),C=Qr(n[c-1],u,0);if(C>t){o=0;var p=0,A=C-t,m=1<<A;for(l.sort((function(e,t){return u[t.s]-u[e.s]||e.f-t.f}));o<r;++o){var h=l[o].s;if(!(u[h]>t))break;p+=m-(1<<C-u[h]),u[h]=t}for(p>>=A;p>0;){var b=l[o].s;u[b]<t?p-=1<<t-u[b]++-1:++o}for(;o>=0&&p;--o){var f=l[o].s;u[f]==t&&(--u[f],++p)}C=t}return{t:new pr(u),l:C}},Qr=function(e,t,n){return-1==e.s?Math.max(Qr(e.l,t,n+1),Qr(e.r,t,n+1)):t[e.s]=n},Or=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ar(++t),o=0,r=e[0],l=1,a=function(e){n[o++]=e},i=1;i<=t;++i)if(e[i]==r&&i!=t)++l;else{if(!r&&l>2){for(;l>138;l-=138)a(32754);l>2&&(a(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(a(r),--l;l>6;l-=6)a(8304);l>2&&(a(l-3<<5|8208),l=0)}for(;l--;)a(r);l=1,r=e[i]}return{c:n.subarray(0,o),n:t}},qr=function(e,t){for(var n=0,o=0;o<t.length;++o)n+=e[o]*t[o];return n},_r=function(e,t,n){var o=n.length,r=Lr(t+2);e[r]=255&o,e[r+1]=o>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var l=0;l<o;++l)e[r+l+4]=n[l];return 8*(r+4+o)},$r=function(e,t,n,o,r,l,a,i,g,s,c){Tr(t,c++,n),++r[256];for(var d=Ur(r,15),I=d.t,u=d.l,C=Ur(l,15),p=C.t,A=C.l,m=Or(I),h=m.c,b=m.n,f=Or(p),y=f.c,v=f.n,Z=new Ar(19),G=0;G<h.length;++G)++Z[31&h[G]];for(G=0;G<y.length;++G)++Z[31&y[G]];for(var S=Ur(Z,7),B=S.t,w=S.l,R=19;R>4&&!B[fr[R-1]];--R);var W,k,V,X,x=s+5<<3,J=qr(r,Xr)+qr(l,xr)+a,N=qr(r,I)+qr(l,p)+a+14+3*R+qr(Z,B)+2*Z[16]+3*Z[17]+7*Z[18];if(g>=0&&x<=J&&x<=N)return _r(t,c,e.subarray(g,g+s));if(Tr(t,c,1+(N<J)),c+=2,N<J){W=Vr(I,u,0),k=I,V=Vr(p,A,0),X=p;var H=Vr(B,w,0);Tr(t,c,b-257),Tr(t,c+5,v-1),Tr(t,c+10,R-4),c+=14;for(G=0;G<R;++G)Tr(t,c+3*G,B[fr[G]]);c+=3*R;for(var F=[h,y],Y=0;Y<2;++Y){var K=F[Y];for(G=0;G<K.length;++G){var M=31&K[G];Tr(t,c,H[M]),c+=B[M],M>15&&(Tr(t,c,K[G]>>5&127),c+=K[G]>>12)}}}else W=Jr,k=Xr,V=Hr,X=xr;for(G=0;G<i;++G){var L=o[G];if(L>255){Pr(t,c,W[(M=L>>18&31)+257]),c+=k[M+257],M>7&&(Tr(t,c,L>>23&31),c+=hr[M]);var E=31&L;Pr(t,c,V[E]),c+=X[E],E>3&&(Pr(t,c,L>>5&8191),c+=br[E])}else Pr(t,c,W[L]),c+=k[L]}return Pr(t,c,W[256]),c+k[256]},el=new mr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tl=new pr(0),nl=function(e,t,n,o,r,l){var a=l.z||e.length,i=new pr(o+a+5*(1+Math.ceil(a/7e3))+r),g=i.subarray(o,i.length-r),s=l.l,c=7&(l.r||0);if(t){c&&(g[0]=l.r>>3);for(var d=el[t-1],I=d>>13,u=8191&d,C=(1<<n)-1,p=l.p||new Ar(32768),A=l.h||new Ar(C+1),m=Math.ceil(n/3),h=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<h)&C},f=new mr(25e3),y=new Ar(288),v=new Ar(32),Z=0,G=0,S=l.i||0,B=0,w=l.w||0,R=0;S+2<a;++S){var W=b(S),k=32767&S,V=A[W];if(p[k]=V,A[W]=k,w<=S){var X=a-S;if((Z>7e3||B>24576)&&(X>423||!s)){c=$r(e,g,0,f,y,v,G,B,R,S-R,c),B=Z=G=0,R=S;for(var x=0;x<286;++x)y[x]=0;for(x=0;x<30;++x)v[x]=0}var J=2,N=0,H=u,F=k-V&32767;if(X>2&&W==b(S-F))for(var Y=Math.min(I,X)-1,K=Math.min(32767,S),M=Math.min(258,X);F<=K&&--H&&k!=V;){if(e[S+J]==e[S+J-F]){for(var L=0;L<M&&e[S+L]==e[S+L-F];++L);if(L>J){if(J=L,N=F,L>Y)break;var E=Math.min(F,L-2),z=0;for(x=0;x<E;++x){var j=S-F+x&32767,D=j-p[j]&32767;D>z&&(z=D,V=j)}}}F+=(k=V)-(V=p[k])&32767}if(N){f[B++]=268435456|Gr[J]<<18|wr[N];var T=31&Gr[J],P=31&wr[N];G+=hr[T]+br[P],++y[257+T],++v[P],w=S+J,++Z}else f[B++]=e[S],++y[e[S]]}}for(S=Math.max(S,w);S<a;++S)f[B++]=e[S],++y[e[S]];c=$r(e,g,s,f,y,v,G,B,R,S-R,c),s||(l.r=7&c|g[c/8|0]<<3,c-=7,l.h=A,l.p=p,l.i=S,l.w=w)}else{for(S=l.w||0;S<a+s;S+=65535){var U=S+65535;U>=a&&(g[c/8|0]=s,U=a),c=_r(g,c+1,e.subarray(S,U))}l.i=a}return Er(i,0,o+Lr(c)+r)},ol=function(){var e=1,t=0;return{p:function(n){for(var o=e,r=t,l=0|n.length,a=0;a!=l;){for(var i=Math.min(a+2655,l);a<i;++a)r+=o+=n[a];o=(65535&o)+15*(o>>16),r=(65535&r)+15*(r>>16)}e=o,t=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},rl=function(e,t,n,o,r){if(!r&&(r={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),a=new pr(l.length+e.length);a.set(l),a.set(e,l.length),e=a,r.w=l.length}return nl(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,o,r)},ll=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},al=function(e,t){var n=t.level,o=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=o<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var r=ol();r.p(t.dictionary),ll(e,2,r.d())}},il=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&jr(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&jr(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function gl(e,t){t||(t={});var n=ol();n.p(e);var o=rl(e,t,t.dictionary?6:2,4);return al(o,t),ll(o,o.length-4,n.d()),o}function sl(e,t){return Dr(e.subarray(il(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var cl="undefined"!=typeof TextDecoder&&new TextDecoder;try{cl.decode(tl,{stream:!0})}catch(gE){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var dl=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function Il(){dl.console&&"function"==typeof dl.console.log&&dl.console.log.apply(dl.console,arguments)}var ul={log:Il,warn:function(e){dl.console&&("function"==typeof dl.console.warn?dl.console.warn.apply(dl.console,arguments):Il.call(null,arguments))},error:function(e){dl.console&&("function"==typeof dl.console.error?dl.console.error.apply(dl.console,arguments):Il(e))}};function Cl(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){bl(o.response,t,n)},o.onerror=function(){ul.error("could not download file")},o.send()}function pl(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function Al(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(kg){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ml,hl,bl=dl.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,Cr.A)(window))||window!==dl?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var o=dl.URL||dl.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin!==location.origin?pl(r.href)?Cl(e,t,n):Al(r,r.target="_blank"):Al(r)):(r.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(r.href)}),4e4),setTimeout((function(){Al(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(pl(e))Cl(e,t,n);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){Al(o)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,Cr.A)(t)&&(ul.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return Cl(e,t,n);var r="application/octet-stream"===e.type,l=/constructor/i.test(dl.HTMLElement)||dl.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&l)&&"object"===("undefined"==typeof FileReader?"undefined":(0,Cr.A)(FileReader))){var i=new FileReader;i.onloadend=function(){var e=i.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},i.readAsDataURL(e)}else{var g=dl.URL||dl.webkitURL,s=g.createObjectURL(e);o?o.location=s:location.href=s,o=null,setTimeout((function(){g.revokeObjectURL(s)}),4e4)}});function fl(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],o=0;o<n.length;o++){var r=n[o].re,l=n[o].process,a=r.exec(e);a&&(t=l(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function yl(e,t){var n=e[0],o=e[1],r=e[2],l=e[3];n=Zl(n,o,r,l,t[0],7,-680876936),l=Zl(l,n,o,r,t[1],12,-389564586),r=Zl(r,l,n,o,t[2],17,606105819),o=Zl(o,r,l,n,t[3],22,-1044525330),n=Zl(n,o,r,l,t[4],7,-176418897),l=Zl(l,n,o,r,t[5],12,1200080426),r=Zl(r,l,n,o,t[6],17,-1473231341),o=Zl(o,r,l,n,t[7],22,-45705983),n=Zl(n,o,r,l,t[8],7,1770035416),l=Zl(l,n,o,r,t[9],12,-1958414417),r=Zl(r,l,n,o,t[10],17,-42063),o=Zl(o,r,l,n,t[11],22,-1990404162),n=Zl(n,o,r,l,t[12],7,1804603682),l=Zl(l,n,o,r,t[13],12,-40341101),r=Zl(r,l,n,o,t[14],17,-1502002290),n=Gl(n,o=Zl(o,r,l,n,t[15],22,1236535329),r,l,t[1],5,-165796510),l=Gl(l,n,o,r,t[6],9,-1069501632),r=Gl(r,l,n,o,t[11],14,643717713),o=Gl(o,r,l,n,t[0],20,-373897302),n=Gl(n,o,r,l,t[5],5,-701558691),l=Gl(l,n,o,r,t[10],9,38016083),r=Gl(r,l,n,o,t[15],14,-660478335),o=Gl(o,r,l,n,t[4],20,-405537848),n=Gl(n,o,r,l,t[9],5,568446438),l=Gl(l,n,o,r,t[14],9,-1019803690),r=Gl(r,l,n,o,t[3],14,-187363961),o=Gl(o,r,l,n,t[8],20,1163531501),n=Gl(n,o,r,l,t[13],5,-1444681467),l=Gl(l,n,o,r,t[2],9,-51403784),r=Gl(r,l,n,o,t[7],14,1735328473),n=Sl(n,o=Gl(o,r,l,n,t[12],20,-1926607734),r,l,t[5],4,-378558),l=Sl(l,n,o,r,t[8],11,-2022574463),r=Sl(r,l,n,o,t[11],16,1839030562),o=Sl(o,r,l,n,t[14],23,-35309556),n=Sl(n,o,r,l,t[1],4,-1530992060),l=Sl(l,n,o,r,t[4],11,1272893353),r=Sl(r,l,n,o,t[7],16,-155497632),o=Sl(o,r,l,n,t[10],23,-1094730640),n=Sl(n,o,r,l,t[13],4,681279174),l=Sl(l,n,o,r,t[0],11,-358537222),r=Sl(r,l,n,o,t[3],16,-722521979),o=Sl(o,r,l,n,t[6],23,76029189),n=Sl(n,o,r,l,t[9],4,-640364487),l=Sl(l,n,o,r,t[12],11,-421815835),r=Sl(r,l,n,o,t[15],16,530742520),n=Bl(n,o=Sl(o,r,l,n,t[2],23,-995338651),r,l,t[0],6,-198630844),l=Bl(l,n,o,r,t[7],10,1126891415),r=Bl(r,l,n,o,t[14],15,-1416354905),o=Bl(o,r,l,n,t[5],21,-57434055),n=Bl(n,o,r,l,t[12],6,1700485571),l=Bl(l,n,o,r,t[3],10,-1894986606),r=Bl(r,l,n,o,t[10],15,-1051523),o=Bl(o,r,l,n,t[1],21,-2054922799),n=Bl(n,o,r,l,t[8],6,1873313359),l=Bl(l,n,o,r,t[15],10,-30611744),r=Bl(r,l,n,o,t[6],15,-1560198380),o=Bl(o,r,l,n,t[13],21,1309151649),n=Bl(n,o,r,l,t[4],6,-145523070),l=Bl(l,n,o,r,t[11],10,-1120210379),r=Bl(r,l,n,o,t[2],15,718787259),o=Bl(o,r,l,n,t[9],21,-343485551),e[0]=Jl(n,e[0]),e[1]=Jl(o,e[1]),e[2]=Jl(r,e[2]),e[3]=Jl(l,e[3])}function vl(e,t,n,o,r,l){return t=Jl(Jl(t,e),Jl(o,l)),Jl(t<<r|t>>>32-r,n)}function Zl(e,t,n,o,r,l,a){return vl(t&n|~t&o,e,t,r,l,a)}function Gl(e,t,n,o,r,l,a){return vl(t&o|n&~o,e,t,r,l,a)}function Sl(e,t,n,o,r,l,a){return vl(t^n^o,e,t,r,l,a)}function Bl(e,t,n,o,r,l,a){return vl(n^(t|~o),e,t,r,l,a)}function wl(e){var t,n=e.length,o=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)yl(o,Rl(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(yl(o,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,yl(o,r),o}function Rl(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ml=dl.atob.bind(dl),hl=dl.btoa.bind(dl);var Wl="0123456789abcdef".split("");function kl(e){for(var t="",n=0;n<4;n++)t+=Wl[e>>8*n+4&15]+Wl[e>>8*n&15];return t}function Vl(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Xl(e){return wl(e).map(Vl).join("")}var xl="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=kl(e[t]);return e.join("")}(wl("hello"));function Jl(e,t){if(xl){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Nl(e,t){var n,o,r,l;if(e!==n){for(var a=(r=e,l=1+(256/e.length|0),new Array(l+1).join(r)),i=[],g=0;g<256;g++)i[g]=g;var s=0;for(g=0;g<256;g++){var c=i[g];s=(s+c+a.charCodeAt(g))%256,i[g]=i[s],i[s]=c}n=e,o=i}else i=o;var d=t.length,I=0,u=0,C="";for(g=0;g<d;g++)u=(u+(c=i[I=(I+1)%256]))%256,i[I]=i[u],i[u]=c,a=i[(i[I]+i[u])%256],C+=String.fromCharCode(t.charCodeAt(g)^a);return C}var Hl={print:4,modify:8,copy:16,"annot-forms":32};function Fl(e,t,n,o){this.v=1,this.r=2;var r=192;e.forEach((function(e){if(void 0!==Hl.perm)throw new Error("Invalid permission: "+e);r+=Hl[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var l=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,a),this.P=-(1+(255^r)),this.encryptionKey=Xl(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=Nl(this.encryptionKey,this.padding)}function Yl(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,o=0;o<n;o++){var r=e.charCodeAt(o);t+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):e[o]}return t}function Kl(e){if("object"!==(0,Cr.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,o){if(o=o||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof o)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[n,!!o],r},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var o=Array.prototype.slice.call(arguments,1),r=[];for(var l in t[n]){var a=t[n][l];try{a[0].apply(e,o)}catch(n){dl.console&&ul.error("jsPDF PubSub Error",n.message,n)}a[1]&&r.push(l)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ml(e){if(!(this instanceof Ml))return new Ml(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Ll(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function El(e,t,n,o,r){if(!(this instanceof El))return new El(e,t,n,o,r);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Ll.call(this,o,r)}function zl(e,t,n,o,r){if(!(this instanceof zl))return new zl(e,t,n,o,r);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Ll.call(this,o,r)}function jl(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",o=arguments[1],r=arguments[2],l=arguments[3],a=[],i=1,g=16,s="S",c=null;"object"===(0,Cr.A)(e=e||{})&&(n=e.orientation,o=e.unit||o,r=e.format||r,l=e.compress||e.compressPdf||l,null!==(c=e.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),i="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(g=e.floatPrecision),s=e.defaultPathOperation||"S"),a=e.filters||(!0===l?["FlateEncode"]:a),o=o||"mm",n=(""+(n||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,I={},u={internal:{},__private__:{}};u.__private__.PubSub=Kl;var C="1.3",p=u.__private__.getPdfVersion=function(){return C};u.__private__.setPdfVersion=function(e){C=e};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return A};var m=u.__private__.getPageFormat=function(e){return A[e]};r=r||"a4";var h="compat",b="advanced",f=h;function y(){this.saveGraphicsState(),q(new Ve(Ie,0,0,-Ie,0,cn()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),s="n",f=b}function v(){this.restoreGraphicsState(),s="S",f=h}var Z=u.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};u.advancedAPI=function(e){var t=f===h;return t&&y.call(this),"function"!=typeof e||(e(this),t&&v.call(this)),this},u.compatAPI=function(e){var t=f===b;return t&&v.call(this),"function"!=typeof e||(e(this),t&&y.call(this)),this},u.isAdvancedAPI=function(){return f===b};var G,S=function(e){if(f!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=u.roundToPrecision=u.__private__.roundToPrecision=function(e,n){var o=t||n;if(isNaN(e)||isNaN(o))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(o).replace(/0+$/,"")};G=u.hpf=u.__private__.hpf="number"==typeof g?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return B(e,g)}:"smart"===g?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return B(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return B(e,16)};var w=u.f2=u.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return B(e,2)},R=u.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return B(e,3)},W=u.scale=u.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return f===h?e*Ie:f===b?e:void 0},k=function(e){return W(function(e){return f===h?cn()-e:f===b?e:void 0}(e))};u.__private__.setPrecision=u.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var V,X="00000000000000000000000000000000",x=u.__private__.getFileId=function(){return X},J=u.__private__.setFileId=function(e){return X=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():X.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==c&&(bt=new Fl(c.userPermissions,c.userPassword,c.ownerPassword,X)),X};u.setFileId=function(e){return J(e),this},u.getFileId=function(){return x()};var N=u.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",o=Math.floor(Math.abs(t/60)),r=Math.abs(t%60),l=[n,M(o),"'",M(r),"'"].join("");return["D:",e.getFullYear(),M(e.getMonth()+1),M(e.getDate()),M(e.getHours()),M(e.getMinutes()),M(e.getSeconds()),l].join("")},H=u.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,o=parseInt(e.substr(8,2),10),r=parseInt(e.substr(10,2),10),l=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,o,r,l,a,0)},F=u.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=N(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return V=t},Y=u.__private__.getCreationDate=function(e){var t=V;return"jsDate"===e&&(t=H(V)),t};u.setCreationDate=function(e){return F(e),this},u.getCreationDate=function(e){return Y(e)};var K,M=u.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},L=u.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},E=0,z=[],j=[],D=0,T=[],P=[],U=!1,Q=j;u.__private__.setCustomOutputDestination=function(e){U=!0,Q=e};var O=function(e){U||(Q=e)};u.__private__.resetCustomOutputDestination=function(){U=!1,Q=j};var q=u.__private__.out=function(e){return e=e.toString(),D+=e.length+1,Q.push(e),Q},_=u.__private__.write=function(e){return q(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},$=u.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),o=new Uint8Array(n);t--;)o[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(e){return te=f===b?e/Ie:e,this};var ne,oe=u.__private__.getFontSize=u.getFontSize=function(){return f===h?te:te*Ie},re=e.R2L||!1;u.__private__.setR2L=u.setR2L=function(e){return re=e,this},u.__private__.getR2L=u.getR2L=function(){return re};var le,ae=u.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};u.__private__.getZoomMode=function(){return ne};var ie,ge=u.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');le=e};u.__private__.getPageMode=function(){return le};var se=u.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');ie=e};u.__private__.getLayoutMode=function(){return ie},u.__private__.setDisplayMode=u.setDisplayMode=function(e,t,n){return ae(e),se(t),ge(n),this};var ce={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ce).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ce[e]},u.__private__.getDocumentProperties=function(){return ce},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(e){for(var t in ce)ce.hasOwnProperty(t)&&e[t]&&(ce[t]=e[t]);return this},u.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ce).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ce[e]=t};var de,Ie,ue,Ce,pe,Ae={},me={},he=[],be={},fe={},ye={},ve={},Ze=null,Ge=0,Se=[],Be=new Kl(u),we=e.hotfixes||[],Re={},We={},ke=[],Ve=function e(t,n,o,r,l,a){if(!(this instanceof e))return new e(t,n,o,r,l,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(o)&&(o=0),isNaN(r)&&(r=1),isNaN(l)&&(l=0),isNaN(a)&&(a=0),this._matrix=[t,n,o,r,l,a]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ve.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join(e)},Ve.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,o=e.shx*this.sx+e.sy*this.shx,r=e.shx*this.shy+e.sy*this.sy,l=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ve(t,n,o,r,l,a)},Ve.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,o=this.sy,r=this.tx,l=this.ty,a=Math.sqrt(e*e+t*t),i=(e/=a)*n+(t/=a)*o;n-=e*i,o-=t*i;var g=Math.sqrt(n*n+o*o);return i/=g,e*(o/=g)<t*(n/=g)&&(e=-e,t=-t,i=-i,a=-a),{scale:new Ve(a,0,0,g,0,0),translate:new Ve(1,0,0,1,r,l),rotate:new Ve(e,t,-t,e,0,0),skew:new Ve(1,0,i,1,0,0)}},Ve.prototype.toString=function(e){return this.join(" ")},Ve.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,o=this.sy,r=this.tx,l=this.ty,a=1/(e*o-t*n),i=o*a,g=-t*a,s=-n*a,c=e*a;return new Ve(i,g,s,c,-i*r-s*l,-g*r-c*l)},Ve.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new nn(t,n)},Ve.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new nn(e.x+e.w,e.y+e.h));return new on(t.x,t.y,n.x-t.x,n.y-t.y)},Ve.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,o=this.sy,r=this.tx,l=this.ty;return new Ve(e,t,n,o,r,l)},u.Matrix=Ve;var Xe=u.matrixMult=function(e,t){return t.multiply(e)},xe=new Ve(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=xe;var Je=function(e,t){if(!fe[e]){var n=(t instanceof El?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=n,fe[e]=n,be[n]=t,Be.publish("addPattern",t)}};u.ShadingPattern=El,u.TilingPattern=zl,u.addShadingPattern=function(e,t){return S("addShadingPattern()"),Je(e,t),this},u.beginTilingPattern=function(e){S("beginTilingPattern()"),ln(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},u.endTilingPattern=function(e,t){S("endTilingPattern()"),t.stream=P[K].join("\n"),Je(e,t),Be.publish("endTilingPattern",t),ke.pop().restore()};var Ne,He=u.__private__.newObject=function(){var e=Fe();return Ye(e,!0),e},Fe=u.__private__.newObjectDeferred=function(){return E++,z[E]=function(){return D},E},Ye=function(e,t){return t="boolean"==typeof t&&t,z[e]=D,t&&q(e+" 0 obj"),e},Ke=u.__private__.newAdditionalObject=function(){var e={objId:Fe(),content:""};return T.push(e),e},Me=Fe(),Le=Fe(),Ee=u.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var o="#",r=0;r<3;r++)o+=("0"+Math.floor(255*parseFloat(t[r])).toString(16)).slice(-2);return o},ze=u.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,o=e.ch2,r=e.ch3,l=e.ch4,a="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var i=new fl(n);if(i.ok)n=i.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var g=parseInt(n.substr(1),16);n=g>>16&255,o=g>>8&255,r=255&g}if(void 0===o||void 0===l&&n===o&&o===r)if("string"==typeof n)t=n+" "+a[0];else if(2===e.precision)t=w(n/255)+" "+a[0];else t=R(n/255)+" "+a[0];else if(void 0===l||"object"===(0,Cr.A)(l)){if(l&&!isNaN(l.a)&&0===l.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)t=[n,o,r,a[1]].join(" ");else if(2===e.precision)t=[w(n/255),w(o/255),w(r/255),a[1]].join(" ");else t=[R(n/255),R(o/255),R(r/255),a[1]].join(" ")}else if("string"==typeof n)t=[n,o,r,l,a[2]].join(" ");else if(2===e.precision)t=[w(n),w(o),w(r),w(l),a[2]].join(" ");else t=[R(n),R(o),R(r),R(l),a[2]].join(" ");return t},je=u.__private__.getFilters=function(){return a},De=u.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||je(),o=e.alreadyAppliedFilters||[],r=e.addLength1||!1,l=t.length,a=e.objectId,i=function(e){return e};if(null!==c&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==c&&(i=bt.encryptor(a,0));var g={};!0===n&&(n=["FlateEncode"]);var s=e.additionalKeyValues||[],d=(g=void 0!==jl.API.processDataByFilters?jl.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(o)?o.join(" "):o.toString());if(0!==g.data.length&&(s.push({key:"Length",value:g.data.length}),!0===r&&s.push({key:"Length1",value:l})),0!=d.length)if(d.split("/").length-1==1)s.push({key:"Filter",value:d});else{s.push({key:"Filter",value:"["+d+"]"});for(var I=0;I<s.length;I+=1)if("DecodeParms"===s[I].key){for(var u=[],C=0;C<g.reverseChain.split("/").length-1;C+=1)u.push("null");u.push(s[I].value),s[I].value="["+u.join(" ")+"]"}}q("<<");for(var p=0;p<s.length;p++)q("/"+s[p].key+" "+s[p].value);q(">>"),0!==g.data.length&&(q("stream"),q(i(g.data)),q("endstream"))},Te=u.__private__.putPage=function(e){var t=e.number,n=e.data,o=e.objId,r=e.contentsObjId;Ye(o,!0),q("<</Type /Page"),q("/Parent "+e.rootDictionaryObjId+" 0 R"),q("/Resources "+e.resourceDictionaryObjId+" 0 R"),q("/MediaBox ["+parseFloat(G(e.mediaBox.bottomLeftX))+" "+parseFloat(G(e.mediaBox.bottomLeftY))+" "+G(e.mediaBox.topRightX)+" "+G(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&q("/CropBox ["+G(e.cropBox.bottomLeftX)+" "+G(e.cropBox.bottomLeftY)+" "+G(e.cropBox.topRightX)+" "+G(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&q("/BleedBox ["+G(e.bleedBox.bottomLeftX)+" "+G(e.bleedBox.bottomLeftY)+" "+G(e.bleedBox.topRightX)+" "+G(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&q("/TrimBox ["+G(e.trimBox.bottomLeftX)+" "+G(e.trimBox.bottomLeftY)+" "+G(e.trimBox.topRightX)+" "+G(e.trimBox.topRightY)+"]"),null!==e.artBox&&q("/ArtBox ["+G(e.artBox.bottomLeftX)+" "+G(e.artBox.bottomLeftY)+" "+G(e.artBox.topRightX)+" "+G(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&q("/UserUnit "+e.userUnit),Be.publish("putPage",{objId:o,pageContext:Se[t],pageNumber:t,page:n}),q("/Contents "+r+" 0 R"),q(">>"),q("endobj");var l=n.join("\n");return f===b&&(l+="\nQ"),Ye(r,!0),De({data:l,filters:je(),objectId:r}),q("endobj"),o},Pe=u.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Ge;e++)Se[e].objId=Fe(),Se[e].contentsObjId=Fe();for(e=1;e<=Ge;e++)n.push(Te({number:e,data:P[e],objId:Se[e].objId,contentsObjId:Se[e].contentsObjId,mediaBox:Se[e].mediaBox,cropBox:Se[e].cropBox,bleedBox:Se[e].bleedBox,trimBox:Se[e].trimBox,artBox:Se[e].artBox,userUnit:Se[e].userUnit,rootDictionaryObjId:Me,resourceDictionaryObjId:Le}));Ye(Me,!0),q("<</Type /Pages");var o="/Kids [";for(t=0;t<Ge;t++)o+=n[t]+" 0 R ";q(o+"]"),q("/Count "+Ge),q(">>"),q("endobj"),Be.publish("postPutPages")},Ue=function(e){Be.publish("putFont",{font:e,out:q,newObject:He,putStream:De}),!0!==e.isAlreadyPutted&&(e.objectNumber=He(),q("<<"),q("/Type /Font"),q("/BaseFont /"+Yl(e.postScriptName)),q("/Subtype /Type1"),"string"==typeof e.encoding&&q("/Encoding /"+e.encoding),q("/FirstChar 32"),q("/LastChar 255"),q(">>"),q("endobj"))},Qe=function(e){e.objectNumber=He();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[G(e.x),G(e.y),G(e.x+e.width),G(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");De({data:n,additionalKeyValues:t,objectId:e.objectNumber}),q("endobj")},Oe=function(e,t){t||(t=21);var n=He(),o=function(e,t){var n,o=[],r=1/(t-1);for(n=0;n<1;n+=r)o.push(n);if(o.push(1),0!=e[0].offset){var l={offset:0,color:e[0].color};e.unshift(l)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var i="",g=0,s=0;s<o.length;s++){for(n=o[s];n>e[g+1].offset;)g++;var c=e[g].offset,d=(n-c)/(e[g+1].offset-c),I=e[g].color,u=e[g+1].color;i+=L(Math.round((1-d)*I[0]+d*u[0]).toString(16))+L(Math.round((1-d)*I[1]+d*u[1]).toString(16))+L(Math.round((1-d)*I[2]+d*u[2]).toString(16))}return i.trim()}(e.colors,t),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+t+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De({data:o,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),q("endobj"),e.objectNumber=He(),q("<< /ShadingType "+e.type),q("/ColorSpace /DeviceRGB");var l="/Coords ["+G(parseFloat(e.coords[0]))+" "+G(parseFloat(e.coords[1]))+" ";2===e.type?l+=G(parseFloat(e.coords[2]))+" "+G(parseFloat(e.coords[3])):l+=G(parseFloat(e.coords[2]))+" "+G(parseFloat(e.coords[3]))+" "+G(parseFloat(e.coords[4]))+" "+G(parseFloat(e.coords[5])),q(l+="]"),e.matrix&&q("/Matrix ["+e.matrix.toString()+"]"),q("/Function "+n+" 0 R"),q("/Extend [true true]"),q(">>"),q("endobj")},qe=function(e,t){var n=Fe(),o=He();t.push({resourcesOid:n,objectOid:o}),e.objectNumber=o;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+e.boundingBox.map(G).join(" ")+"]"}),r.push({key:"XStep",value:G(e.xStep)}),r.push({key:"YStep",value:G(e.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),e.matrix&&r.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),De({data:e.stream,additionalKeyValues:r,objectId:e.objectNumber}),q("endobj")},_e=function(e){for(var t in e.objectNumber=He(),q("<<"),e)switch(t){case"opacity":q("/ca "+w(e[t]));break;case"stroke-opacity":q("/CA "+w(e[t]))}q(">>"),q("endobj")},$e=function(e){Ye(e.resourcesOid,!0),q("<<"),q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in q("/Font <<"),Ae)Ae.hasOwnProperty(e)&&(!1===d||!0===d&&I.hasOwnProperty(e))&&q("/"+e+" "+Ae[e].objectNumber+" 0 R");q(">>")}(),function(){if(Object.keys(be).length>0){for(var e in q("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof El&&be[e].objectNumber>=0&&q("/"+e+" "+be[e].objectNumber+" 0 R");Be.publish("putShadingPatternDict"),q(">>")}}(),function(e){if(Object.keys(be).length>0){for(var t in q("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof u.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&q("/"+t+" "+be[t].objectNumber+" 0 R");Be.publish("putTilingPatternDict"),q(">>")}}(e.objectOid),function(){if(Object.keys(ye).length>0){var e;for(e in q("/ExtGState <<"),ye)ye.hasOwnProperty(e)&&ye[e].objectNumber>=0&&q("/"+e+" "+ye[e].objectNumber+" 0 R");Be.publish("putGStateDict"),q(">>")}}(),function(){for(var e in q("/XObject <<"),Re)Re.hasOwnProperty(e)&&Re[e].objectNumber>=0&&q("/"+e+" "+Re[e].objectNumber+" 0 R");Be.publish("putXobjectDict"),q(">>")}(),q(">>"),q("endobj")},et=function(){var e=[];(function(){for(var e in Ae)Ae.hasOwnProperty(e)&&(!1===d||!0===d&&I.hasOwnProperty(e))&&Ue(Ae[e])})(),function(){var e;for(e in ye)ye.hasOwnProperty(e)&&_e(ye[e])}(),function(){for(var e in Re)Re.hasOwnProperty(e)&&Qe(Re[e])}(),function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof El?Oe(be[t]):be[t]instanceof zl&&qe(be[t],e))}(e),Be.publish("putResources"),e.forEach($e),$e({resourcesOid:Le,objectOid:Number.MAX_SAFE_INTEGER}),Be.publish("postPutResources")},tt=function(e){me[e.fontName]=me[e.fontName]||{},me[e.fontName][e.fontStyle]=e.id},nt=function(e,t,n,o,r){var l={id:"F"+(Object.keys(Ae).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:o,isStandardFont:r||!1,metadata:{}};return Be.publish("addFont",{font:l,instance:this}),Ae[l.id]=l,tt(l),l.id},ot=u.__private__.pdfEscape=u.pdfEscape=function(e,t){return function(e,t){var n,o,r,l,a,i,g,s,c;if(r=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&Ae[de].metadata&&Ae[de].metadata[r]&&Ae[de].metadata[r].encoding&&(l=Ae[de].metadata[r].encoding,!a&&Ae[de].encoding&&(a=Ae[de].encoding),!a&&l.codePages&&(a=l.codePages[0]),"string"==typeof a&&(a=l[a]),a)){for(g=!1,i=[],n=0,o=e.length;n<o;n++)(s=a[e.charCodeAt(n)])?i.push(String.fromCharCode(s)):i.push(e[n]),i[n].charCodeAt(0)>>8&&(g=!0);e=i.join("")}for(n=e.length;void 0===g&&0!==n;)e.charCodeAt(n-1)>>8&&(g=!0),n--;if(!g)return e;for(i=t.noBOM?[]:[254,255],n=0,o=e.length;n<o;n++){if((c=(s=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");i.push(c),i.push(s-(c<<8))}return String.fromCharCode.apply(void 0,i)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=u.__private__.beginPage=function(e){P[++Ge]=[],Se[Ge]={objId:0,contentsObjId:0,userUnit:Number(i),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},it(Ge),O(P[K])},lt=function(e,t){var o,l,a;switch(n=t||n,"string"==typeof e&&(o=m(e.toLowerCase()),Array.isArray(o)&&(l=o[0],a=o[1])),Array.isArray(e)&&(l=e[0]*Ie,a=e[1]*Ie),isNaN(l)&&(l=r[0],a=r[1]),(l>14400||a>14400)&&(ul.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),l=Math.min(14400,l),a=Math.min(14400,a)),r=[l,a],n.substr(0,1)){case"l":a>l&&(r=[a,l]);break;case"p":l>a&&(r=[a,l])}rt(r),Kt(Ft),q(Pt),0!==$t&&q($t+" J"),0!==en&&q(en+" j"),Be.publish("addPage",{pageNumber:Ge})},at=function(e){e>0&&e<=Ge&&(P.splice(e,1),Se.splice(e,1),Ge--,K>Ge&&(K=Ge),this.setPage(K))},it=function(e){e>0&&e<=Ge&&(K=e)},gt=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return P.length-1},st=function(e,t,n){var o,r=void 0;return n=n||{},e=void 0!==e?e:Ae[de].fontName,t=void 0!==t?t:Ae[de].fontStyle,o=e.toLowerCase(),void 0!==me[o]&&void 0!==me[o][t]?r=me[o][t]:void 0!==me[e]&&void 0!==me[e][t]?r=me[e][t]:!1===n.disableWarning&&ul.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=me.times[t])&&(r=me.times.normal),r},ct=u.__private__.putInfo=function(){var e=He(),t=function(e){return e};for(var n in null!==c&&(t=bt.encryptor(e,0)),q("<<"),q("/Producer ("+ot(t("jsPDF "+jl.version))+")"),ce)ce.hasOwnProperty(n)&&ce[n]&&q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+ot(t(ce[n]))+")");q("/CreationDate ("+ot(t(V))+")"),q(">>"),q("endobj")},dt=u.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Me;switch(He(),q("<<"),q("/Type /Catalog"),q("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":q("/OpenAction [3 0 R /Fit]");break;case"original":q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&q("/OpenAction [3 0 R /XYZ null null "+w(ne)+"]")}switch(ie||(ie="continuous"),ie){case"continuous":q("/PageLayout /OneColumn");break;case"single":q("/PageLayout /SinglePage");break;case"two":case"twoleft":q("/PageLayout /TwoColumnLeft");break;case"tworight":q("/PageLayout /TwoColumnRight")}le&&q("/PageMode /"+le),Be.publish("putCatalog"),q(">>"),q("endobj")},It=u.__private__.putTrailer=function(){q("trailer"),q("<<"),q("/Size "+(E+1)),q("/Root "+E+" 0 R"),q("/Info "+(E-1)+" 0 R"),null!==c&&q("/Encrypt "+bt.oid+" 0 R"),q("/ID [ <"+X+"> <"+X+"> ]"),q(">>")},ut=u.__private__.putHeader=function(){q("%PDF-"+C),q("%\xba\xdf\xac\xe0")},Ct=u.__private__.putXRef=function(){var e="0000000000";q("xref"),q("0 "+(E+1)),q("0000000000 65535 f ");for(var t=1;t<=E;t++)"function"==typeof z[t]?q((e+z[t]()).slice(-10)+" 00000 n "):void 0!==z[t]?q((e+z[t]).slice(-10)+" 00000 n "):q("0000000000 00000 n ")},pt=u.__private__.buildDocument=function(){E=0,D=0,j=[],z=[],T=[],Me=Fe(),Le=Fe(),O(j),Be.publish("buildDocument"),ut(),Pe(),function(){Be.publish("putAdditionalObjects");for(var e=0;e<T.length;e++){var t=T[e];Ye(t.objId,!0),q(t.content),q("endobj")}Be.publish("postPutAdditionalObjects")}(),et(),null!==c&&(bt.oid=He(),q("<<"),q("/Filter /Standard"),q("/V "+bt.v),q("/R "+bt.r),q("/U <"+bt.toHexString(bt.U)+">"),q("/O <"+bt.toHexString(bt.O)+">"),q("/P "+bt.P),q(">>"),q("endobj")),ct(),dt();var e=D;return Ct(),It(),q("startxref"),q(""+e),q("%%EOF"),O(P[K]),j.join("\n")},At=u.__private__.getBlob=function(e){return new Blob([$(e)],{type:"application/pdf"})},mt=u.output=u.__private__.output=(Ne=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":u.save(t.filename);break;case"arraybuffer":return $(pt());case"blob":return At(pt());case"bloburi":case"bloburl":if(void 0!==dl.URL&&"function"==typeof dl.URL.createObjectURL)return dl.URL&&dl.URL.createObjectURL(At(pt()))||void 0;ul.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",o=pt();try{n=hl(o)}catch(e){n=hl(unescape(encodeURIComponent(o)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(dl)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",l=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(r=t.pdfObjectUrl,l="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+l+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",i=dl.open();return null!==i&&i.document.write(a),i}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(dl)){var g='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',s=dl.open();if(null!==s){s.document.write(g);var c=this;s.document.documentElement.querySelector("#pdfViewer").onload=function(){s.document.title=t.filename,s.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return s}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(dl))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',I=dl.open();if(null!==I&&(I.document.write(d),I.document.title=t.filename),I||"undefined"==typeof safari)return I;break;case"datauri":case"dataurl":return dl.document.location.href=this.output("datauristring",t);default:return null}},Ne.foo=function(){try{return Ne.apply(this,arguments)}catch(Ne){var e=Ne.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Ne.message;if(!dl.console)throw new Error(t);dl.console.error(t,Ne),dl.alert&&alert(t)}},Ne.foo.bar=Ne,Ne.foo),ht=function(e){return!0===Array.isArray(we)&&we.indexOf(e)>-1};switch(o){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=1==ht("px_scaling")?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if("number"!=typeof o)throw new Error("Invalid unit: "+o);Ie=o}var bt=null;F(),J();var ft=u.__private__.getPageInfo=u.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Se[e].objId,pageNumber:e,pageContext:Se[e]}},yt=u.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Se)if(Se[t].objId===e)break;return ft(t)},vt=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:Se[K].objId,pageNumber:K,pageContext:Se[K]}};u.addPage=function(){return lt.apply(this,arguments),this},u.setPage=function(){return it.apply(this,arguments),O.call(this,P[K]),this},u.insertPage=function(e){return this.addPage(),this.movePage(K,e),this},u.movePage=function(e,t){var n,o;if(e>t){n=P[e],o=Se[e];for(var r=e;r>t;r--)P[r]=P[r-1],Se[r]=Se[r-1];P[t]=n,Se[t]=o,this.setPage(t)}else if(e<t){n=P[e],o=Se[e];for(var l=e;l<t;l++)P[l]=P[l+1],Se[l]=Se[l+1];P[t]=n,Se[t]=o,this.setPage(t)}return this},u.deletePage=function(){return at.apply(this,arguments),this},u.__private__.text=u.text=function(e,t,n,o,r){var l,a,i,g,s,c,d,u,C,p=(o=o||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var A=n;n=t,t=e,e=A}if(arguments[3]instanceof Ve==0?(i=arguments[4],g=arguments[5],"object"===(0,Cr.A)(d=arguments[3])&&null!==d||("string"==typeof i&&(g=i,i=null),"string"==typeof d&&(g=d,d=null),"number"==typeof d&&(i=d,d=null),o={flags:d,angle:i,align:g})):(S("The transform parameter of text() with a Matrix value"),C=r),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return p;var m,h="",y="number"==typeof o.lineHeightFactor?o.lineHeightFactor:Ht,v=p.internal.scaleFactor;function Z(e){return e=e.split("\t").join(Array(o.TabLen||9).join(" ")),ot(e,d)}function B(e){for(var t,n=e.concat(),o=[],r=n.length;r--;)"string"==typeof(t=n.shift())?o.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?o.push(t[0]):o.push([t[0],t[1],t[2]]);return o}function w(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var o,r,l=e.concat(),a=[],i=l.length;i--;)"string"==typeof(o=l.shift())?a.push(t(o)[0]):Array.isArray(o)&&"string"==typeof o[0]&&(r=t(o[0],o[1],o[2]),a.push([r[0],r[1],r[2]]));n=a}return n}var R=!1,k=!0;if("string"==typeof e)R=!0;else if(Array.isArray(e)){var V=e.concat();a=[];for(var X,x=V.length;x--;)("string"!=typeof(X=V.shift())||Array.isArray(X)&&"string"!=typeof X[0])&&(k=!1);R=k}if(!1===R)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var J=te/p.internal.scaleFactor,N=J*(y-1);switch(o.baseline){case"bottom":n-=N;break;case"top":n+=J-N;break;case"hanging":n+=J-2*N;break;case"middle":n+=J/2-N}if((c=o.maxWidth||0)>0&&("string"==typeof e?e=p.splitTextToSize(e,c):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(p.splitTextToSize(t,c))}),[]))),l={text:e,x:t,y:n,options:o,mutex:{pdfEscape:ot,activeFontKey:de,fonts:Ae,activeFontSize:te}},Be.publish("preProcessText",l),e=l.text,i=(o=l.options).angle,C instanceof Ve==0&&i&&"number"==typeof i){i*=Math.PI/180,0===o.rotationDirection&&(i=-i),f===b&&(i=-i);var H=Math.cos(i),F=Math.sin(i);C=new Ve(H,F,-F,H,0,0)}else i&&i instanceof Ve&&(C=i);f!==b||C||(C=xe),void 0!==(s=o.charSpace||qt)&&(h+=G(W(s))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(u=o.horizontalScale)&&(h+=G(100*u)+" Tz\n"),o.lang;var Y=-1,K=void 0!==o.renderingMode?o.renderingMode:o.stroke,M=p.internal.getCurrentPageInfo().pageContext;switch(K){case 0:case!1:case"fill":Y=0;break;case 1:case!0:case"stroke":Y=1;break;case 2:case"fillThenStroke":Y=2;break;case 3:case"invisible":Y=3;break;case 4:case"fillAndAddForClipping":Y=4;break;case 5:case"strokeAndAddPathForClipping":Y=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Y=6;break;case 7:case"addToPathForClipping":Y=7}var L=void 0!==M.usedRenderingMode?M.usedRenderingMode:-1;-1!==Y?h+=Y+" Tr\n":-1!==L&&(h+="0 Tr\n"),-1!==Y&&(M.usedRenderingMode=Y),g=o.align||"left";var E,z=te*y,j=p.internal.pageSize.getWidth(),D=Ae[de];s=o.charSpace||qt,c=o.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},o.flags);var T=[],P=function(e){return p.getStringUnitWidth(e,{font:D,charSpace:s,fontSize:te,doKerning:!1})*te/v};if("[object Array]"===Object.prototype.toString.call(e)){var U;a=B(e),"left"!==g&&(E=a.map(P));var Q,O=0;if("right"===g){t-=E[0],e=[],x=a.length;for(var _=0;_<x;_++)0===_?(Q=zt(t),U=jt(n)):(Q=W(O-E[_]),U=-z),e.push([a[_],Q,U]),O=E[_]}else if("center"===g){t-=E[0]/2,e=[],x=a.length;for(var $=0;$<x;$++)0===$?(Q=zt(t),U=jt(n)):(Q=W((O-E[$])/2),U=-z),e.push([a[$],Q,U]),O=E[$]}else if("left"===g){e=[],x=a.length;for(var ee=0;ee<x;ee++)e.push(a[ee])}else if("justify"===g&&"Identity-H"===D.encoding){e=[],x=a.length,c=0!==c?c:j;for(var ne=0,oe=0;oe<x;oe++)if(U=0===oe?jt(n):-z,Q=0===oe?zt(t):ne,oe<x-1){var le=W((c-E[oe])/(a[oe].split(" ").length-1)),ae=a[oe].split(" ");e.push([ae[0]+" ",Q,U]),ne=0;for(var ie=1;ie<ae.length;ie++){var ge=(P(ae[ie-1]+" "+ae[ie])-P(ae[ie]))*v+le;ie==ae.length-1?e.push([ae[ie],ge,0]):e.push([ae[ie]+" ",ge,0]),ne-=ge}}else e.push([a[oe],Q,U]);e.push(["",ne,0])}else{if("justify"!==g)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],x=a.length,c=0!==c?c:j,oe=0;oe<x;oe++)U=0===oe?jt(n):-z,Q=0===oe?zt(t):0,oe<x-1?T.push(G(W((c-E[oe])/(a[oe].split(" ").length-1)))):T.push(0),e.push([a[oe],Q,U])}}!0===("boolean"==typeof o.R2L?o.R2L:re)&&(e=w(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),l={text:e,x:t,y:n,options:o,mutex:{pdfEscape:ot,activeFontKey:de,fonts:Ae,activeFontSize:te}},Be.publish("postProcessText",l),e=l.text,m=l.mutex.isHex||!1;var se=Ae[de].encoding;"WinAnsiEncoding"!==se&&"StandardEncoding"!==se||(e=w(e,(function(e,t,n){return[Z(e),t,n]}))),a=B(e),e=[];for(var ce,Ie,ue,Ce=Array.isArray(a[0])?1:0,pe="",me=function(e,t,n){var r="";return n instanceof Ve?(n="number"==typeof o.angle?Xe(n,new Ve(1,0,0,1,e,t)):Xe(new Ve(1,0,0,1,e,t),n),f===b&&(n=Xe(new Ve(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=G(e)+" "+G(t)+" Td\n",r},he=0;he<a.length;he++){switch(pe="",Ce){case 1:ue=(m?"<":"(")+a[he][0]+(m?">":")"),ce=parseFloat(a[he][1]),Ie=parseFloat(a[he][2]);break;case 0:ue=(m?"<":"(")+a[he]+(m?">":")"),ce=zt(t),Ie=jt(n)}void 0!==T&&void 0!==T[he]&&(pe=T[he]+" Tw\n"),0===he?e.push(pe+me(ce,Ie,C)+ue):0===Ce?e.push(pe+ue):1===Ce&&e.push(pe+me(ce,Ie,C)+ue)}e=0===Ce?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=de+" "+te+" Tf\n",be+=G(te*y)+" TL\n",be+=Qt+"\n",be+=h,be+=e,q(be+="ET"),I[de]=!0,p};var Zt=u.__private__.clip=u.clip=function(e){return q("evenodd"===e?"W*":"W"),this};u.clipEvenOdd=function(){return Zt("evenodd")},u.__private__.discardPath=u.discardPath=function(){return q("n"),this};var Gt=u.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(e){return Gt(e)&&(s=e),this};var St=u.__private__.getStyle=u.getStyle=function(e){var t=s;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=u.close=function(){return q("h"),this};u.stroke=function(){return q("S"),this},u.fill=function(e){return wt("f",e),this},u.fillEvenOdd=function(e){return wt("f*",e),this},u.fillStroke=function(e){return wt("B",e),this},u.fillStrokeEvenOdd=function(e){return wt("B*",e),this};var wt=function(e,t){"object"===(0,Cr.A)(t)?kt(t,e):q(e)},Rt=function(e){null===e||f===b&&void 0===e||(e=St(e),q(e))};function Wt(e,t,n,o,r){var l=new zl(t||this.boundingBox,n||this.xStep,o||this.yStep,this.gState,r||this.matrix);l.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return Je(a,l),l}var kt=function(e,t){var n=fe[e.key],o=be[n];if(o instanceof El)q("q"),q(Vt(t)),o.gState&&u.setGState(o.gState),q(e.matrix.toString()+" cm"),q("/"+n+" sh"),q("Q");else if(o instanceof zl){var r=new Ve(1,0,0,-1,0,cn());e.matrix&&(r=r.multiply(e.matrix||xe),n=Wt.call(o,e.key,e.boundingBox,e.xStep,e.yStep,r).id),q("q"),q("/Pattern cs"),q("/"+n+" scn"),o.gState&&u.setGState(o.gState),q(t),q("Q")}},Vt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xt=u.moveTo=function(e,t){return q(G(W(e))+" "+G(k(t))+" m"),this},xt=u.lineTo=function(e,t){return q(G(W(e))+" "+G(k(t))+" l"),this},Jt=u.curveTo=function(e,t,n,o,r,l){return q([G(W(e)),G(k(t)),G(W(n)),G(k(o)),G(W(r)),G(k(l)),"c"].join(" ")),this};u.__private__.line=u.line=function(e,t,n,o,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||!Gt(r))throw new Error("Invalid arguments passed to jsPDF.line");return f===h?this.lines([[n-e,o-t]],e,t,[1,1],r||"S"):this.lines([[n-e,o-t]],e,t,[1,1]).stroke()},u.__private__.lines=u.lines=function(e,t,n,o,r,l){var a,i,g,s,c,d,I,u,C,p,A,m;if("number"==typeof e&&(m=n,n=t,t=e,e=m),o=o||[1,1],l=l||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(o)||!Gt(r)||"boolean"!=typeof l)throw new Error("Invalid arguments passed to jsPDF.lines");for(Xt(t,n),a=o[0],i=o[1],s=e.length,p=t,A=n,g=0;g<s;g++)2===(c=e[g]).length?(p=c[0]*a+p,A=c[1]*i+A,xt(p,A)):(d=c[0]*a+p,I=c[1]*i+A,u=c[2]*a+p,C=c[3]*i+A,p=c[4]*a+p,A=c[5]*i+A,Jt(d,I,u,C,p,A));return l&&Bt(),Rt(r),this},u.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],o=n.c;switch(n.op){case"m":Xt(o[0],o[1]);break;case"l":xt(o[0],o[1]);break;case"c":Jt.apply(this,o);break;case"h":Bt()}}return this},u.__private__.rect=u.rect=function(e,t,n,o,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||!Gt(r))throw new Error("Invalid arguments passed to jsPDF.rect");return f===h&&(o=-o),q([G(W(e)),G(k(t)),G(W(n)),G(W(o)),"re"].join(" ")),Rt(r),this},u.__private__.triangle=u.triangle=function(e,t,n,o,r,l,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||isNaN(r)||isNaN(l)||!Gt(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,o-t],[r-n,l-o],[e-r,t-l]],e,t,[1,1],a,!0),this},u.__private__.roundedRect=u.roundedRect=function(e,t,n,o,r,l,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||isNaN(r)||isNaN(l)||!Gt(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var i=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),l=Math.min(l,.5*o),this.lines([[n-2*r,0],[r*i,0,r,l-l*i,r,l],[0,o-2*l],[0,l*i,-r*i,l,-r,l],[2*r-n,0],[-r*i,0,-r,-l*i,-r,-l],[0,2*l-o],[0,-l*i,r*i,-l,r,-l]],e+r,t,[1,1],a,!0),this},u.__private__.ellipse=u.ellipse=function(e,t,n,o,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||!Gt(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var l=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*o;return Xt(e+n,t),Jt(e+n,t-a,e+l,t-o,e,t-o),Jt(e-l,t-o,e-n,t-a,e-n,t),Jt(e-n,t+a,e-l,t+o,e,t+o),Jt(e+l,t+o,e+n,t+a,e+n,t),Rt(r),this},u.__private__.circle=u.circle=function(e,t,n,o){if(isNaN(e)||isNaN(t)||isNaN(n)||!Gt(o))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,o)},u.setFont=function(e,t,n){return n&&(t=Z(t,n)),de=st(e,t,{disableWarning:!1}),this};var Nt=u.__private__.getFont=u.getFont=function(){return Ae[st.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var e,t,n={};for(e in me)if(me.hasOwnProperty(e))for(t in n[e]=[],me[e])me[e].hasOwnProperty(t)&&n[e].push(t);return n},u.addFont=function(e,t,n,o,r){var l=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==l.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==l.indexOf(arguments[3])&&(n=Z(n,o)),nt.call(this,e,t,n,r=r||"Identity-H")};var Ht,Ft=e.lineWidth||.200025,Yt=u.__private__.getLineWidth=u.getLineWidth=function(){return Ft},Kt=u.__private__.setLineWidth=u.setLineWidth=function(e){return Ft=e,q(G(W(e))+" w"),this};u.__private__.setLineDash=jl.API.setLineDash=jl.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return G(W(e))})).join(" "),t=G(W(t)),q("["+e+"] "+t+" d"),this};var Mt=u.__private__.getLineHeight=u.getLineHeight=function(){return te*Ht};u.__private__.getLineHeight=u.getLineHeight=function(){return te*Ht};var Lt=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Ht=e),this},Et=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return Ht};Lt(e.lineHeight);var zt=u.__private__.getHorizontalCoordinate=function(e){return W(e)},jt=u.__private__.getVerticalCoordinate=function(e){return f===b?e:Se[K].mediaBox.topRightY-Se[K].mediaBox.bottomLeftY-W(e)},Dt=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(e){return G(zt(e))},Tt=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(e){return G(jt(e))},Pt=e.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return Ee(Pt)},u.__private__.setStrokeColor=u.setDrawColor=function(e,t,n,o){return Pt=ze({ch1:e,ch2:t,ch3:n,ch4:o,pdfColorType:"draw",precision:2}),q(Pt),this};var Ut=e.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return Ee(Ut)},u.__private__.setFillColor=u.setFillColor=function(e,t,n,o){return Ut=ze({ch1:e,ch2:t,ch3:n,ch4:o,pdfColorType:"fill",precision:2}),q(Ut),this};var Qt=e.textColor||"0 g",Ot=u.__private__.getTextColor=u.getTextColor=function(){return Ee(Qt)};u.__private__.setTextColor=u.setTextColor=function(e,t,n,o){return Qt=ze({ch1:e,ch2:t,ch3:n,ch4:o,pdfColorType:"text",precision:3}),this};var qt=e.charSpace,_t=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(qt||0)};u.__private__.setCharSpace=u.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qt=e,this};var $t=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(e){var t=u.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,q(t+" J"),this};var en=0;u.__private__.setLineJoin=u.setLineJoin=function(e){var t=u.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return en=t,q(t+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return q(G(W(e))+" M"),this},u.GState=Ml,u.setGState=function(e){(e="string"==typeof e?ye[ve[e]]:tn(null,e)).equals(Ze)||(q("/"+e.id+" gs"),Ze=e)};var tn=function(e,t){if(!e||!ve[e]){var n=!1;for(var o in ye)if(ye.hasOwnProperty(o)&&ye[o].equals(t)){n=!0;break}if(n)t=ye[o];else{var r="GS"+(Object.keys(ye).length+1).toString(10);ye[r]=t,t.id=r}return e&&(ve[e]=t.id),Be.publish("addGState",t),t}};u.addGState=function(e,t){return tn(e,t),this},u.saveGraphicsState=function(){return q("q"),he.push({key:de,size:te,color:Qt}),this},u.restoreGraphicsState=function(){q("Q");var e=he.pop();return de=e.key,te=e.size,Qt=e.color,Ze=null,this},u.setCurrentTransformationMatrix=function(e){return q(e.toString()+" cm"),this},u.comment=function(e){return q("#"+e),this};var nn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var o=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(e){r=e.toString()}}),this},on=function(e,t,n,o){nn.call(this,e,t),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var l=o||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return l},set:function(e){isNaN(e)||(l=parseFloat(e))}}),this},rn=function(){this.page=Ge,this.currentPage=K,this.pages=P.slice(0),this.pagesContext=Se.slice(0),this.x=ue,this.y=Ce,this.matrix=pe,this.width=gn(K),this.height=cn(K),this.outputDestination=Q,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){Ge=this.page,K=this.currentPage,Se=this.pagesContext,P=this.pages,ue=this.x,Ce=this.y,pe=this.matrix,sn(K,this.width),dn(K,this.height),Q=this.outputDestination};var ln=function(e,t,n,o,r){ke.push(new rn),Ge=K=0,P=[],ue=e,Ce=t,pe=r,rt([n,o])};for(var an in u.beginFormObject=function(e,t,n,o,r){return ln(e,t,n,o,r),this},u.endFormObject=function(e){return function(e){if(We[e])ke.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Re).length+1).toString(10);t.id=n,We[e]=n,Re[n]=t,Be.publish("addFormObject",t),ke.pop().restore()}}(e),this},u.doFormObject=function(e,t){var n=Re[We[e]];return q("q"),q(t.toString()+" cm"),q("/"+n.id+" Do"),q("Q"),this},u.getFormObject=function(e){var t=Re[We[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},u.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(bl(At(pt()),e),"function"==typeof bl.unload&&dl.setTimeout&&setTimeout(bl.unload,911),this):new Promise((function(t,n){try{var o=bl(At(pt()),e);"function"==typeof bl.unload&&dl.setTimeout&&setTimeout(bl.unload,911),t(o)}catch(e){n(e.message)}}))},jl.API)jl.API.hasOwnProperty(an)&&("events"===an&&jl.API.events.length?function(e,t){var n,o,r;for(r=t.length-1;-1!==r;r--)n=t[r][0],o=t[r][1],e.subscribe.apply(e,[n].concat("function"==typeof o?[o]:o))}(Be,jl.API.events):u[an]=jl.API[an]);var gn=u.getPageWidth=function(e){return(Se[e=e||K].mediaBox.topRightX-Se[e].mediaBox.bottomLeftX)/Ie},sn=u.setPageWidth=function(e,t){Se[e].mediaBox.topRightX=t*Ie+Se[e].mediaBox.bottomLeftX},cn=u.getPageHeight=function(e){return(Se[e=e||K].mediaBox.topRightY-Se[e].mediaBox.bottomLeftY)/Ie},dn=u.setPageHeight=function(e,t){Se[e].mediaBox.topRightY=t*Ie+Se[e].mediaBox.bottomLeftY};return u.internal={pdfEscape:ot,getStyle:St,getFont:Nt,getFontSize:oe,getCharSpace:_t,getTextColor:Ot,getLineHeight:Mt,getLineHeightFactor:Et,getLineWidth:Yt,write:_,getHorizontalCoordinate:zt,getVerticalCoordinate:jt,getCoordinateString:Dt,getVerticalCoordinateString:Tt,collections:{},newObject:He,newAdditionalObject:Ke,newObjectDeferred:Fe,newObjectDeferredBegin:Ye,getFilters:je,putStream:De,events:Be,scaleFactor:Ie,pageSize:{getWidth:function(){return gn(K)},setWidth:function(e){sn(K,e)},getHeight:function(){return cn(K)},setHeight:function(e){dn(K,e)}},encryptionOptions:c,encryption:bt,getEncryptor:function(e){return null!==c?bt.encryptor(e,0):function(e){return e}},output:mt,getNumberOfPages:gt,pages:P,out:q,f2:w,f3:R,getPageInfo:ft,getPageInfoByObjId:yt,getCurrentPageInfo:vt,getPDFVersion:p,Point:nn,Rectangle:on,Matrix:Ve,hasHotfix:ht},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return gn(K)},set:function(e){sn(K,e)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return cn(K)},set:function(e){dn(K,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var o=nt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===d&&(I[o]=!0);var r=e[t][0].split("-");tt({id:o,fontName:r[0],fontStyle:r[1]||""})}Be.publish("addFonts",{fonts:Ae,dictionary:me})}.call(u,ee),de="F1",lt(r,n),Be.publish("initialized"),u}Fl.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Fl.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Fl.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Fl.prototype.processOwnerPassword=function(e,t){return Nl(Xl(t).substr(0,5),e)},Fl.prototype.encryptor=function(e,t){var n=Xl(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Nl(n,e)}},Ml.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,Cr.A)(e)!==(0,Cr.A)(this))return!1;var o=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;o++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&o--;return 0===o},jl.API={events:[]},jl.version="3.0.1";var Dl=jl.API,Tl=1,Pl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ul=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ql=function(e){return e.toFixed(2)},Ol=function(e){return e.toFixed(5)};Dl.__acroform__={};var ql=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_l=function(e){return e*Tl},$l=function(e){var t=new Aa,n=ka.internal.getHeight(e)||0,o=ka.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ql(o)),Number(Ql(n))],t},ea=Dl.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},ta=Dl.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},na=Dl.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},oa=Dl.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return na(e,t-1)},ra=Dl.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ea(e,t-1)},la=Dl.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ta(e,t-1)},aa=Dl.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,o=t.internal.getVerticalCoordinate,r=e[0],l=e[1],a=e[2],i=e[3],g={};return g.lowerLeft_X=n(r)||0,g.lowerLeft_Y=o(l+i)||0,g.upperRight_X=n(r+a)||0,g.upperRight_Y=o(l)||0,[Number(Ql(g.lowerLeft_X)),Number(Ql(g.lowerLeft_Y)),Number(Ql(g.upperRight_X)),Number(Ql(g.upperRight_Y))]},ia=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,o=ga(e,n),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+Ql(o.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=$l(e);return l.scope=e.scope,l.stream=t.join("\n"),l}},ga=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,o={text:"",fontSize:""},r=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map((function(e){return e.split("\n")})):r.map((function(e){return[e]}));var l=n,a=ka.internal.getHeight(e)||0;a=a<0?-a:a;var i=ka.internal.getWidth(e)||0;i=i<0?-i:i;var g=function(t,n,o){if(t+1<r.length){var l=n+" "+r[t+1][0];return sa(l,e,o).width<=i-4}return!1};l++;e:for(;l>0;){t="",l--;var s,c,d=sa("3",e,l).height,I=e.multiline?a-l:(a-d)/2,u=I+=2,C=0,p=0,A=0;if(l<=0){t="(...) Tj\n",t+="% Width of Text: "+sa(t,e,l=12).width+", FieldWidth:"+i+"\n";break}for(var m="",h=0,b=0;b<r.length;b++)if(r.hasOwnProperty(b)){var f=!1;if(1!==r[b].length&&A!==r[b].length-1){if((d+2)*(h+2)+2>a)continue e;m+=r[b][A],f=!0,p=b,b--}else{m=" "==(m+=r[b][A]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var y=parseInt(b),v=g(y,m,l),Z=b>=r.length-1;if(v&&!Z){m+=" ",A=0;continue}if(v||Z){if(Z)p=y;else if(e.multiline&&(d+2)*(h+2)+2>a)continue e}else{if(!e.multiline)continue e;if((d+2)*(h+2)+2>a)continue e;p=y}}for(var G="",S=C;S<=p;S++){var B=r[S];if(e.multiline){if(S===p){G+=B[A]+" ",A=(A+1)%B.length;continue}if(S===C){G+=B[B.length-1]+" ";continue}}G+=B[0]+" "}switch(G=" "==G.substr(G.length-1)?G.substr(0,G.length-1):G,c=sa(G,e,l).width,e.textAlign){case"right":s=i-c-2;break;case"center":s=(i-c)/2;break;default:s=2}t+=Ql(s)+" "+Ql(u)+" Td\n",t+="("+Pl(G)+") Tj\n",t+=-Ql(s)+" 0 Td\n",u=-(l+2),c=0,C=f?p:p+1,h++,m=""}break}return o.text=t,o.fontSize=l,o},sa=function(e,t,n){var o=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:o,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},ca={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},da=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Ia=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ha.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(ca)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tl=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ma,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];o.objId=void 0,o.hasAnnotation&&da(o,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var o in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(o)){var r=e[o],l=[],a=r.Rect;if(r.Rect&&(r.Rect=aa(r.Rect,t)),t.internal.newObjectDeferredBegin(r.objId,!0),r.DA=ka.createDefaultAppearanceStream(r),"object"===(0,Cr.A)(r)&&"function"==typeof r.getKeyValueListForStream&&(l=r.getKeyValueListForStream()),r.Rect=a,r.hasAppearanceStream&&!r.appearanceStreamContent){var i=ia(r);l.push({key:"AP",value:"<</N "+i+">>"}),t.internal.acroformPlugin.xForms.push(i)}if(r.appearanceStreamContent){var g="";for(var s in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(s)){var c=r.appearanceStreamContent[s];if(g+="/"+s+" ",g+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var o in c)if(c.hasOwnProperty(o)){var d=c[o];"function"==typeof d&&(d=d.call(t,r)),g+="/"+o+" "+d+" ",t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=c)&&(d=d.call(t,r)),g+="/"+o+" "+d,t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d);g+=">>"}l.push({key:"AP",value:"<<\n"+g+">>"})}t.internal.putStream({additionalKeyValues:l,objectId:r.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var o=n,r=e[n];t.internal.newObjectDeferredBegin(r.objId,!0),"object"===(0,Cr.A)(r)&&"function"==typeof r.putStream&&r.putStream(),delete e[o]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},ua=Dl.__acroform__.arrayToPdfArray=function(e,t,n){var o=function(e){return e};if(Array.isArray(e)){for(var r="[",l=0;l<e.length;l++)switch(0!==l&&(r+=" "),(0,Cr.A)(e[l])){case"boolean":case"number":case"object":r+=e[l].toString();break;case"string":"/"!==e[l].substr(0,1)?(void 0!==t&&n&&(o=n.internal.getEncryptor(t)),r+="("+Pl(o(e[l].toString()))+")"):r+=e[l].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ca=function(e,t,n){var o=function(e){return e};return void 0!==t&&n&&(o=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Pl(o(e))+")"},pa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pa.prototype.toString=function(){return this.objId+" 0 R"},pa.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},pa.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var o=t[n],r=this[o];r&&(Array.isArray(r)?e.push({key:o,value:ua(r,this.objId,this.scope)}):r instanceof pa?(r.scope=this.scope,e.push({key:o,value:r.objId+" 0 R"})):"function"!=typeof r&&e.push({key:o,value:r}))}return e};var Aa=function(){pa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};ql(Aa,pa);var ma=function(){pa.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Pl(t(e))+")"}},set:function(t){e=t}})};ql(ma,pa);var ha=function e(){pa.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(t,3))},set:function(e){!0===Boolean(e)?this.F=ra(t,3):this.F=la(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==o.length)return o},set:function(e){o=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(e){o[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(e){o[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(e){o[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(e){o[3]=e}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Ba)return;l="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Pl(t(l))+")"},set:function(e){l=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(e){l=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var i="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(e){g=e}});var s=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===s?50/Tl:s},set:function(e){s=e}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){c=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Ba||this instanceof Ra))return Ca(d,this.objId,this.scope)},set:function(e){e=e.toString(),d=e}});var I=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof Za==0?Ca(I,this.objId,this.scope):I},set:function(e){e=e.toString(),I=this instanceof Za==0?"("===e.substr(0,1)?Ul(e.substr(1,e.length-2)):Ul(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Za==1?Ul(I.substr(1,I.length-1)):I},set:function(e){e=e.toString(),I=this instanceof Za==1?"/"+e:e}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof Za==0?Ca(u,this.objId,this.scope):u},set:function(e){e=e.toString(),u=this instanceof Za==0?"("===e.substr(0,1)?Ul(e.substr(1,e.length-2)):Ul(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Za==1?Ul(u.substr(1,u.length-1)):u},set:function(e){e=e.toString(),u=this instanceof Za==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){e=Boolean(e),p=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(e){C=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,1):this.Ff=la(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,2):this.Ff=la(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,3):this.Ff=la(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==A)return A},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');A=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(A){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};ql(ha,pa);var ba=function(){ha.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ua(t,this.objId,this.scope)},set:function(e){var n,o;o=[],"string"==typeof(n=e)&&(o=function(e,t,n){n||(n=1);for(var o,r=[];o=t.exec(e);)r.push(o[n]);return r}(n,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,18):this.Ff=la(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=ra(this.Ff,19):this.Ff=la(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=ra(this.Ff,20),t.sort()):this.Ff=la(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,22):this.Ff=la(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,23):this.Ff=la(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,27):this.Ff=la(this.Ff,27)}}),this.hasAppearanceStream=!1};ql(ba,ha);var fa=function(){ba.call(this),this.fontName="helvetica",this.combo=!1};ql(fa,ba);var ya=function(){fa.call(this),this.combo=!0};ql(ya,fa);var va=function(){ya.call(this),this.edit=!0};ql(va,ya);var Za=function(){ha.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,15):this.Ff=la(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,16):this.Ff=la(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,17):this.Ff=la(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,26):this.Ff=la(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,o=[];for(n in o.push("<<"),t)o.push("/"+n+" ("+Pl(e(t[n]))+")");return o.push(">>"),o.join("\n")}},set:function(e){"object"===(0,Cr.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};ql(Za,ha);var Ga=function(){Za.call(this),this.pushButton=!0};ql(Ga,Za);var Sa=function(){Za.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};ql(Sa,Za);var Ba=function(){var e,t;ha.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),o)n.push("/"+t+" ("+Pl(e(o[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,Cr.A)(e)&&(o=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(e){"string"==typeof e&&(o.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ka.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ql(Ba,ha),Sa.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Sa.prototype.createOption=function(e){var t=new Ba;return t.Parent=this,t.optionName=e,this.Kids.push(t),Va.call(this.scope,t),t};var wa=function(){Za.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ka.CheckBox.createAppearanceStream()};ql(wa,Za);var Ra=function(){ha.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,13):this.Ff=la(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,21):this.Ff=la(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,23):this.Ff=la(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,24):this.Ff=la(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,25):this.Ff=la(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,26):this.Ff=la(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ql(Ra,ha);var Wa=function(){Ra.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(oa(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=ra(this.Ff,14):this.Ff=la(this.Ff,14)}}),this.password=!0};ql(Wa,Ra);var ka={CheckBox:{createAppearanceStream:function(){return{N:{On:ka.CheckBox.YesNormal},D:{On:ka.CheckBox.YesPushDown,Off:ka.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=$l(e);t.scope=e.scope;var n=[],o=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),l=ga(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ql(ka.internal.getWidth(e))+" "+Ql(ka.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+o+" "+Ql(l.fontSize)+" Tf "+r),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=$l(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),r=[],l=ka.internal.getHeight(e),a=ka.internal.getWidth(e),i=ga(e,e.caption);return r.push("1 g"),r.push("0 0 "+Ql(a)+" "+Ql(l)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Ql(a-1)+" "+Ql(l-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Ql(i.fontSize)+" Tf "+o),r.push(i.text),r.push("ET"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=$l(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ql(ka.internal.getWidth(e))+" "+Ql(ka.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ka.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ka.RadioButton.Circle.YesNormal,t.D[e]=ka.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=$l(e);t.scope=e.scope;var n=[],o=ka.internal.getWidth(e)<=ka.internal.getHeight(e)?ka.internal.getWidth(e)/4:ka.internal.getHeight(e)/4;o=Number((.9*o).toFixed(5));var r=ka.internal.Bezier_C,l=Number((o*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ol(ka.internal.getWidth(e)/2)+" "+Ol(ka.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=$l(e);t.scope=e.scope;var n=[],o=ka.internal.getWidth(e)<=ka.internal.getHeight(e)?ka.internal.getWidth(e)/4:ka.internal.getHeight(e)/4;o=Number((.9*o).toFixed(5));var r=Number((2*o).toFixed(5)),l=Number((r*ka.internal.Bezier_C).toFixed(5)),a=Number((o*ka.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ol(ka.internal.getWidth(e)/2)+" "+Ol(ka.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ol(ka.internal.getWidth(e)/2)+" "+Ol(ka.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=$l(e);t.scope=e.scope;var n=[],o=ka.internal.getWidth(e)<=ka.internal.getHeight(e)?ka.internal.getWidth(e)/4:ka.internal.getHeight(e)/4;o=Number((.9*o).toFixed(5));var r=Number((2*o).toFixed(5)),l=Number((r*ka.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ol(ka.internal.getWidth(e)/2)+" "+Ol(ka.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ka.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ka.RadioButton.Cross.YesNormal,t.D[e]=ka.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=$l(e);t.scope=e.scope;var n=[],o=ka.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ql(ka.internal.getWidth(e)-2)+" "+Ql(ka.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ql(o.x1.x)+" "+Ql(o.x1.y)+" m"),n.push(Ql(o.x2.x)+" "+Ql(o.x2.y)+" l"),n.push(Ql(o.x4.x)+" "+Ql(o.x4.y)+" m"),n.push(Ql(o.x3.x)+" "+Ql(o.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=$l(e);t.scope=e.scope;var n=ka.internal.calculateCross(e),o=[];return o.push("0.749023 g"),o.push("0 0 "+Ql(ka.internal.getWidth(e))+" "+Ql(ka.internal.getHeight(e))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+Ql(ka.internal.getWidth(e)-2)+" "+Ql(ka.internal.getHeight(e)-2)+" re"),o.push("W"),o.push("n"),o.push(Ql(n.x1.x)+" "+Ql(n.x1.y)+" m"),o.push(Ql(n.x2.x)+" "+Ql(n.x2.y)+" l"),o.push(Ql(n.x4.x)+" "+Ql(n.x4.y)+" m"),o.push(Ql(n.x3.x)+" "+Ql(n.x3.y)+" l"),o.push("s"),o.push("Q"),t.stream=o.join("\n"),t},OffPushDown:function(e){var t=$l(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ql(ka.internal.getWidth(e))+" "+Ql(ka.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};ka.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ka.internal.getWidth(e),n=ka.internal.getHeight(e),o=Math.min(t,n);return{x1:{x:(t-o)/2,y:(n-o)/2+o},x2:{x:(t-o)/2+o,y:(n-o)/2},x3:{x:(t-o)/2,y:(n-o)/2},x4:{x:(t-o)/2+o,y:(n-o)/2+o}}}},ka.internal.getWidth=function(e){var t=0;return"object"===(0,Cr.A)(e)&&(t=_l(e.Rect[2])),t},ka.internal.getHeight=function(e){var t=0;return"object"===(0,Cr.A)(e)&&(t=_l(e.Rect[3])),t};var Va=Dl.addField=function(e){if(Ia(this,e),!(e instanceof ha))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dl.AcroFormChoiceField=ba,Dl.AcroFormListBox=fa,Dl.AcroFormComboBox=ya,Dl.AcroFormEditBox=va,Dl.AcroFormButton=Za,Dl.AcroFormPushButton=Ga,Dl.AcroFormRadioButton=Sa,Dl.AcroFormCheckBox=wa,Dl.AcroFormTextField=Ra,Dl.AcroFormPasswordField=Wa,Dl.AcroFormAppearance=ka,Dl.AcroForm={ChoiceField:ba,ListBox:fa,ComboBox:ya,EditBox:va,Button:Za,PushButton:Ga,RadioButton:Sa,CheckBox:wa,TextField:Ra,PasswordField:Wa,Appearance:ka},jl.AcroForm={ChoiceField:ba,ListBox:fa,ComboBox:ya,EditBox:va,Button:Za,PushButton:Ga,RadioButton:Sa,CheckBox:wa,TextField:Ra,PasswordField:Wa,Appearance:ka};jl.AcroForm;function Xa(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=e.__addimage__.getImageFileTypeByImageData=function(e,o){var r,l,a,i,g,s=t;if("RGBA"===(o=o||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(v(e))for(g in n)for(a=n[g],r=0;r<a.length;r+=1){for(i=!0,l=0;l<a[r].length;l+=1)if(void 0!==a[r][l]&&a[r][l]!==e[l]){i=!1;break}if(!0===i){s=g;break}}else for(g in n)for(a=n[g],r=0;r<a.length;r+=1){for(i=!0,l=0;l<a[r].length;l+=1)if(void 0!==a[r][l]&&a[r][l]!==e.charCodeAt(l)){i=!1;break}if(!0===i){s=g;break}}return s===t&&o!==t&&(s=o),s},r=function e(t){for(var n=this.internal.write,o=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var l=[];if(l.push({key:"Type",value:"/XObject"}),l.push({key:"Subtype",value:"/Image"}),l.push({key:"Width",value:t.width}),l.push({key:"Height",value:t.height}),t.colorSpace===A.INDEXED?l.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(l.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===A.DEVICE_CMYK&&l.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),l.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&l.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var a="",i=0,g=t.transparency.length;i<g;i++)a+=t.transparency[i]+" "+t.transparency[i]+" ";l.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&l.push({key:"SMask",value:t.objectId+1+" 0 R"});var s=void 0!==t.filter?["/"+t.filter]:void 0;if(o({data:t.data,additionalKeyValues:l,alreadyAppliedFilters:s,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var c="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:c,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===A.INDEXED){var I=this.internal.newObject();o({data:G(new Uint8Array(t.palette)),objectId:I}),n("endobj")}},l=function(){var e=this.internal.collections.addImage_images;for(var t in e)r.call(this,e[t])},a=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var o in t)n("/I"+(e=t[o]).index,e.objectId,"0","R")},i=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",a))},g=function(){var e=this.internal.collections.addImage_images;return i.call(this),e},s=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(t){return"function"==typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(0,Cr.A)(e)&&1===e.nodeType},I=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var o=""+t.getAttribute("src");if(0===o.indexOf("data:image/"))return ml(unescape(o).split("base64,").pop());var r=e.loadFile(o,!0);if(void 0!==r)return r}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var l;switch(n){case"PNG":l="image/png";break;case"WEBP":l="image/webp";break;default:l="image/jpeg"}return ml(t.toDataURL(l,1).split("base64,").pop())}},u=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},C=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},p=function(e,t,n,o,r,l){var a=C.call(this,n,o,r),i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=g.call(this);if(n=a[0],o=a[1],c[r.index]=r,l){l*=Math.PI/180;var d=Math.cos(l),I=Math.sin(l),u=function(e){return e.toFixed(4)},p=[u(d),u(I),u(-1*I),u(d),0,0,"cm"]}this.internal.write("q"),l?(this.internal.write([1,"0","0",1,i(e),s(t+o),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([i(n),"0","0",i(o),"0","0","cm"].join(" "))):this.internal.write([i(n),"0","0",i(o),i(e),s(t+o),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},A=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},h=e.__addimage__.sHashCode=function(e){var t,n,o=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)o=(o<<5)-o+e.charCodeAt(t),o|=0;else if(v(e))for(n=e.byteLength/2,t=0;t<n;t++)o=(o<<5)-o+e[t],o|=0;return o},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},f=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},y=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return y()&&e instanceof ArrayBuffer};var v=e.__addimage__.isArrayBufferView=function(e){return y()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},Z=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),o=0;o<t;o++)n[o]=e.charCodeAt(o);return n},G=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=v(e)?e:new Uint8Array(e),o=0;o<n.length;o+=8192)t+=String.fromCharCode.apply(null,n.subarray(o,o+8192));return t};e.addImage=function(){var e,n,o,r,l,a,g,s,c;if("number"==typeof arguments[1]?(n=t,o=arguments[1],r=arguments[2],l=arguments[3],a=arguments[4],g=arguments[5],s=arguments[6],c=arguments[7]):(n=arguments[1],o=arguments[2],r=arguments[3],l=arguments[4],a=arguments[5],g=arguments[6],s=arguments[7],c=arguments[8]),"object"===(0,Cr.A)(e=arguments[0])&&!d(e)&&"imageData"in e){var I=e;e=I.imageData,n=I.format||n||t,o=I.x||o||0,r=I.y||r||0,l=I.w||I.width||l,a=I.h||I.height||a,g=I.alias||g,s=I.compression||s,c=I.rotation||I.angle||c}var u=this.internal.getFilters();if(void 0===s&&-1!==u.indexOf("FlateEncode")&&(s="SLOW"),isNaN(o)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");i.call(this);var C=S.call(this,e,n,g,s);return p.call(this,o,r,l,a,C,c),this};var S=function(n,r,l,a){var i,g,C;if("string"==typeof n&&o(n)===t){n=unescape(n);var p=B(n,!1);(""!==p||void 0!==(p=e.loadFile(n,!0)))&&(n=p)}if(d(n)&&(n=I(n,r)),r=o(n,r),!c(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(C=l)||0===C.length)&&(l=function(e){return"string"==typeof e||v(e)?h(e):v(e.data)?h(e.data):null}(n)),(i=u.call(this,l))||(y()&&(n instanceof Uint8Array||"RGBA"===r||(g=n,n=Z(n))),i=this["process"+r.toUpperCase()](n,s.call(this),l,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:m.NONE}(a),g)),!i)throw new Error("An unknown error occurred whilst processing the image.");return i},B=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,o="";if("string"==typeof e){var r;n=null!==(r=f(e))&&void 0!==r?r:e;try{o=ml(n)}catch(e){if(t)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return o};e.getImageProperties=function(n){var r,l,a="";if(d(n)&&(n=I(n)),"string"==typeof n&&o(n)===t&&(""===(a=B(n,!1))&&(a=e.loadFile(n)||""),n=a),l=o(n),!c(l))throw new Error("addImage does not support files of type '"+l+"', please ensure that a plugin for '"+l+"' support is added.");if(!y()||n instanceof Uint8Array||(n=Z(n)),!(r=this["process"+l.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=l,r}}(jl.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};jl.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,o,r,l=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(e.objId),g=e.pageContext.annotations,s=!1,c=0;c<g.length&&!s;c++)switch((n=g[c]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(s=!0);break;case"reference":case"text":case"freetext":s=!0}if(0!=s){this.internal.write("/Annots [");for(var d=0;d<g.length;d++){n=g[d];var I=this.internal.pdfEscape,u=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(C.objId),m=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+I(A(n.contents))+")",r+=" /Popup "+p.objId+" 0 R",r+=" /P "+i.objId+" 0 R",r+=" /T ("+I(A(m))+") >>",C.content=r;var h=C.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+h,n.open&&(r+=" /Open true"),r+=" >>",p.content=r,this.internal.write(C.objId,"0 R",p.objId,"0 R");break;case"freetext":o="/Rect ["+l(n.bounds.x)+" "+a(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+I(u(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var f=this.annotations._nameMap[n.options.name];n.options.pageNumber=f.page,n.options.top=f.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+I(u(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;default:var y=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+y+" "+n.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,o,r){var l=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:a(e),y:i(t),w:a(e+n),h:i(t+o)},options:r,type:"link"})},e.textWithLink=function(e,t,n,o){var r,l,a=this.getTextWidth(e),i=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==o.maxWidth){l=o.maxWidth;var g=this.splitTextToSize(e,l).length;r=Math.ceil(i*g)}else l=a,r=i;return this.text(e,t,n,o),n+=.2*i,"center"===o.align&&(t-=a/2),"right"===o.align&&(t-=a),this.link(t,n-i,l,r,o),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(jl.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},i=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&l(e)&&t[e.charCodeAt(0)].length<=2},g=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&r.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&l(e)&&t[e.charCodeAt(0)].length>=1};var s=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&l(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&l(e)&&t[e.charCodeAt(0)].length>=3};var c=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&l(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,o=n,r="",l=0;for(t=0;t<e.length;t+=1)void 0!==o[e.charCodeAt(t)]?(l++,"number"==typeof(o=o[e.charCodeAt(t)])&&(r+=String.fromCharCode(o),o=n,l=0),t===e.length-1&&(o=n,r+=e.charAt(t-(l-1)),t-=l-1,l=0)):(o=n,r+=e.charAt(t-l),t-=l,l=0);return r};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==o[e.charCodeAt(0)]};var I=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===l(e)?-1:!s(e)||!a(t)&&!a(n)||!a(n)&&i(t)||i(e)&&!a(t)||i(e)&&g(t)||i(e)&&i(t)?0:c(e)&&a(t)&&!i(t)&&a(n)&&s(n)?3:i(e)||!a(n)?1:2:-1},u=function(e){var n=0,o=0,r=0,l="",i="",g="",s=(e=e||"").split("\\s+"),c=[];for(n=0;n<s.length;n+=1){for(c.push(""),o=0;o<s[n].length;o+=1)l=s[n][o],i=s[n][o-1],g=s[n][o+1],a(l)?(r=I(l,i,g),c[n]+=-1!==r?String.fromCharCode(t[l.charCodeAt(0)][r]):l):c[n]+=l;c[n]=d(c[n])}return c.join(" ")},C=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var o=0;for(n=[],o=0;o<t.length;o+=1)Array.isArray(t[o])?n.push([u(t[o][0]),t[o][1],t[o][2]]):n.push([u(t[o])]);e=n}else e=u(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",C])}(jl.API),jl.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(e){o=e}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(jl.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,o=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var o=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var l=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return l},set:function(e){l=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return o.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){o.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),l=t.scaleFactor||this.internal.scaleFactor,a=0,i=0,g=0,s=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var c=t.maxWidth;c>0?"string"==typeof e?e=this.splitTextToSize(e,c):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(s.splitTextToSize(t,c))}),[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)a<(g=this.getStringUnitWidth(e[d],{font:r})*n)&&(a=g);return 0!==a&&(i=e.length),{w:a/=l,h:Math.max((i*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/l,0)}},e.cellAddPage=function(){o.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var e;e=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var r=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,i=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,s=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+i.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=i.top,s&&g&&(this.printHeaderRow(e.lineNumber,!0),e.y+=g[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,g,s,c){if(o.call(this),!g)throw new Error("No data for PDF table.");var d,I,u,C,p=[],A=[],m=[],h={},b={},f=[],y=[],v=(c=c||{}).autoSize||!1,Z=!1!==c.printHeaders,G=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,S=c.margins||Object.assign({width:this.getPageWidth()},t),B="number"==typeof c.padding?c.padding:3,w=c.headerBackgroundColor||"#c8c8c8",R=c.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=w,this.internal.__cell__.headerTextColor=R,this.setFontSize(G),null==s)A=p=Object.keys(g[0]),m=p.map((function(){return"left"}));else if(Array.isArray(s)&&"object"===(0,Cr.A)(s[0]))for(p=s.map((function(e){return e.name})),A=s.map((function(e){return e.prompt||e.name||""})),m=s.map((function(e){return e.align||"left"})),d=0;d<s.length;d+=1)b[s[d].name]=s[d].width*(19.049976/25.4);else Array.isArray(s)&&"string"==typeof s[0]&&(A=p=s,m=p.map((function(){return"left"})));if(v||Array.isArray(s)&&"string"==typeof s[0])for(d=0;d<p.length;d+=1){for(h[C=p[d]]=g.map((function(e){return e[C]})),this.setFont(void 0,"bold"),f.push(this.getTextDimensions(A[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=h[C],this.setFont(void 0,"normal"),u=0;u<I.length;u+=1)f.push(this.getTextDimensions(I[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[C]=Math.max.apply(null,f)+B+B,f=[]}if(Z){var W={};for(d=0;d<p.length;d+=1)W[p[d]]={},W[p[d]].text=A[d],W[p[d]].align=m[d];var k=i.call(this,W,b);y=p.map((function(t){return new l(e,n,b[t],k,W[t].text,void 0,W[t].align)})),this.setTableHeaderRow(y),this.printHeaderRow(1,!1)}var V=s.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(d=0;d<g.length;d+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:d,data:g[d]},this);var X=i.call(this,g[d],b);for(u=0;u<p.length;u+=1){var x=g[d][p[u]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:d,col:u,data:x},this),a.call(this,new l(e,n,b[p[u]],X,x,d+2,V[p[u]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var i=function(e,t){var n=this.internal.__cell__.padding,o=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(e).map((function(o){var r=e[o];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,t[o]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*o/r+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){o.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var i=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(i[0],i[1],i[2],i[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],s=0;s<this.internal.__cell__.tableHeaderRow.length;s+=1){r=this.internal.__cell__.tableHeaderRow[s].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,g.push(r)),r.lineNumber=e;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,r),this.setTextColor(c)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(jl.API);var xa={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ja=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Na=Xa(Ja),Ha=[100,200,300,400,500,600,700,800,900],Fa=Xa(Ha);function Ya(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return xa[e=e||"normal"]?e:"normal"}(e.style),o=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),r=function(e){return"number"==typeof Na[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:o,stretch:r,src:e.src||[],ref:e.ref||{name:t,style:[r,n,o].join(" ")}}}function Ka(e,t,n,o){var r;for(r=n;r>=0&&r<t.length;r+=o)if(e[t[r]])return e[t[r]];for(r=n;r>=0&&r<t.length;r-=o)if(e[t[r]])return e[t[r]]}var Ma={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},La={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ea(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function za(e){return e.trimLeft()}function ja(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Da(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Ta,Pa,Ua,Qa,Oa=["times"];!function(e){var t,n,o,r,l,a,i,g,s,c=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new g,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new a,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new a,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,n=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,a=this.internal.Point,i=this.internal.Rectangle,g=this.internal.Matrix,s=new c}]);var d=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var o=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return o},set:function(e){o=Boolean(e)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}});var l=0;Object.defineProperty(this,"posY",{get:function(){return l},set:function(e){isNaN(e)||(l=e)}}),Object.defineProperty(this,"margin",{get:function(){return s.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),s.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var i=0;Object.defineProperty(this,"lastBreak",{get:function(){return i},set:function(e){i=e}});var g=[];Object.defineProperty(this,"pageBreaks",{get:function(){return g},set:function(e){g=e}}),Object.defineProperty(this,"ctx",{get:function(){return s},set:function(e){e instanceof c&&(s=e)}}),Object.defineProperty(this,"path",{get:function(){return s.path},set:function(e){s.path=e}});var d=[];Object.defineProperty(this,"ctxStack",{get:function(){return d},set:function(e){d=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=I(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=I(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var u=null;function C(e,t){if(null===u){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var o=null;switch(e){case"bold":o={family:n,weight:"bold"};break;case"italic":o={family:n,style:"italic"};break;case"bolditalic":o={family:n,weight:"bold",style:"italic"};break;case"":case"normal":o={family:n}}null!==o&&(o.ref={name:n,style:e},t.push(o))}))})),t}(e.getFontList());u=function(e){for(var t={},n=0;n<e.length;++n){var o=Ya(e[n]),r=o.family,l=o.stretch,a=o.style,i=o.weight;t[r]=t[r]||{},t[r][l]=t[r][l]||{},t[r][l][a]=t[r][l][a]||{},t[r][l][a][i]=o}return t}(n.concat(t))}return u}var p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){u=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var o=t[3],r=t[4];t[5];var l=t[6],a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===a?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var i=function(e){var t,n,o=[],r=e.trim();if(""===r)return Oa;if(r in La)return[La[r]];for(;""!==r;){switch(n=null,t=(r=za(r)).charAt(0)){case'"':case"'":n=ja(r.substring(1),t);break;default:n=Da(r)}if(null===n)return Oa;if(o.push(n[0]),""!==(r=za(n[1]))&&","!==r.charAt(0))return Oa;r=r.replace(/^,/,"")}return o}(l);if(this.fontFaces){var g=function(e,t,n){for(var o=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},Ma,n.genericFontFamilies||{}),l=null,a=null,i=0;i<t.length;++i)if(r[(l=Ya(t[i])).family]&&(l.family=r[l.family]),e.hasOwnProperty(l.family)){a=e[l.family];break}if(!(a=a||e[o]))throw new Error("Could not find a font-family for the rule '"+Ea(l)+"' and default family '"+o+"'.");if(a=function(e,t){if(t[e])return t[e];var n=Na[e],o=n<=Na.normal?-1:1,r=Ka(t,Ja,n,o);if(!r)throw new Error("Could not find a matching font-stretch value for "+e);return r}(l.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=xa[e],o=0;o<n.length;++o)if(t[n[o]])return t[n[o]];throw new Error("Could not find a matching font-style for "+e)}(l.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Fa[e],o=Ka(t,Ha,n,e<400?-1:1);if(!o)throw new Error("Could not find a matching font-weight for value "+e);return o}(l.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Ea(l)+"'.");return a}(C(this.pdf,this.fontFaces),i.map((function(e){return{family:e,stretch:"normal",weight:o,style:n}})));this.pdf.setFont(g.ref.name,g.ref.style)}else{var s="";("bold"===o||parseInt(o,10)>=700||"bold"===n)&&(s="bold"),"italic"===n&&(s+="italic"),0===s.length&&(s="normal");for(var c="",d={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},I=0;I<i.length;I++){if(void 0!==this.pdf.internal.getFont(i[I],s,{noFallback:!0,disableWarning:!0})){c=i[I];break}if("bolditalic"===s&&void 0!==this.pdf.internal.getFont(i[I],"bold",{noFallback:!0,disableWarning:!0}))c=i[I],s="bold";else if(void 0!==this.pdf.internal.getFont(i[I],"normal",{noFallback:!0,disableWarning:!0})){c=i[I],s="normal";break}}if(""===c)for(var u=0;u<i.length;u++)if(d[i[u]]){c=d[i[u]];break}c=""===c?"Times":c,this.pdf.setFont(c,s)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};d.prototype.setLineDash=function(e){this.lineDash=e},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){f.call(this,"fill",!1)},d.prototype.stroke=function(){f.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw ul.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(e,t)},d.prototype.closePath=function(){var e=new a(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,Cr.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new a(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(e.x,e.y)},d.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw ul.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),f.call(this,null,!0)},d.prototype.quadraticCurveTo=function(e,t,n,o){if(isNaN(n)||isNaN(o)||isNaN(e)||isNaN(t))throw ul.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new a(n,o)),l=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"qct",x1:l.x,y1:l.y,x:r.x,y:r.y}),this.ctx.lastPoint=new a(r.x,r.y)},d.prototype.bezierCurveTo=function(e,t,n,o,r,l){if(isNaN(r)||isNaN(l)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o))throw ul.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var i=this.ctx.transform.applyToPoint(new a(r,l)),g=this.ctx.transform.applyToPoint(new a(e,t)),s=this.ctx.transform.applyToPoint(new a(n,o));this.path.push({type:"bct",x1:g.x,y1:g.y,x2:s.x,y2:s.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},d.prototype.arc=function(e,t,n,o,r,l){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||isNaN(r))throw ul.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(l=Boolean(l),!this.ctx.transform.isIdentity){var i=this.ctx.transform.applyToPoint(new a(e,t));e=i.x,t=i.y;var g=this.ctx.transform.applyToPoint(new a(0,n)),s=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(g.x-s.x,2)+Math.pow(g.y-s.y,2))}Math.abs(r-o)>=2*Math.PI&&(o=0,r=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:o,endAngle:r,counterclockwise:l})},d.prototype.arcTo=function(e,t,n,o,r){throw new Error("arcTo not implemented.")},d.prototype.rect=function(e,t,n,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o))throw ul.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+o),this.lineTo(e,t+o),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},d.prototype.fillRect=function(e,t,n,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o))throw ul.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,o),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},d.prototype.strokeRect=function(e,t,n,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o))throw ul.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(e,t,n,o),this.stroke())},d.prototype.clearRect=function(e,t,n,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o))throw ul.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,o))},d.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var o=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=o}},d.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var I=function(e){var t,n,o,r;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,o=0,r=0;else{var l=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==l)t=parseInt(l[1]),n=parseInt(l[2]),o=parseInt(l[3]),r=1;else if(null!==(l=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(l[1]),n=parseInt(l[2]),o=parseInt(l[3]),r=parseFloat(l[4]);else{if(r=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new fl(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,o=e.substring(3,4),o+=o):(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),o=parseInt(o,16)}}return{r:t,g:n,b:o,a:r,style:e}},u=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},C=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(e,t,n,o){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ul.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(o=isNaN(o)?void 0:o,!u.call(this)){var r=J(this.ctx.transform.rotation),l=this.ctx.transform.scaleX;R.call(this,{text:e,x:t,y:n,scale:l,angle:r,align:this.textAlign,maxWidth:o})}},d.prototype.strokeText=function(e,t,n,o){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ul.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){o=isNaN(o)?void 0:o;var r=J(this.ctx.transform.rotation),l=this.ctx.transform.scaleX;R.call(this,{text:e,x:t,y:n,scale:l,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:o})}},d.prototype.measureText=function(e){if("string"!=typeof e)throw ul.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,o=t.internal.getFontSize(),r=t.getStringUnitWidth(e)*o/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:r*=Math.round(96*n/72*1e4)/1e4})},d.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw ul.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new g(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.rotate=function(e){if(isNaN(e))throw ul.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new g(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},d.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw ul.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new g(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.transform=function(e,t,n,o,r,l){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(o)||isNaN(r)||isNaN(l))throw ul.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new g(e,t,n,o,r,l);this.ctx.transform=this.ctx.transform.multiply(a)},d.prototype.setTransform=function(e,t,n,o,r,l){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,o=isNaN(o)?1:o,r=isNaN(r)?0:r,l=isNaN(l)?0:l,this.ctx.transform=new g(e,t,n,o,r,l)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(e,t,n,o,r,l,a,s,c){var d=this.pdf.getImageProperties(e),I=1,u=1,C=1,m=1;void 0!==o&&void 0!==s&&(C=s/o,m=c/r,I=d.width/o*s/o,u=d.height/r*c/r),void 0===l&&(l=t,a=n,t=0,n=0),void 0!==o&&void 0===s&&(s=o,c=r),void 0===o&&void 0===s&&(s=d.width,c=d.height);for(var f,v=this.ctx.transform.decompose(),Z=J(v.rotate.shx),G=new g,S=(G=(G=(G=G.multiply(v.translate)).multiply(v.skew)).multiply(v.scale)).applyToRectangle(new i(l-t*C,a-n*m,o*I,r*u)),B=A.call(this,S),w=[],R=0;R<B.length;R+=1)-1===w.indexOf(B[R])&&w.push(B[R]);if(b(w),this.autoPaging)for(var W=w[0],k=w[w.length-1],V=W;V<k+1;V++){this.pdf.setPage(V);var X=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],x=1===V?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],H=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===V?0:N+(V-2)*H;if(0!==this.ctx.clip_path.length){var Y=this.path;f=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=h(f,this.posX+this.margin[3],-F+x+this.ctx.prevPageLastElemOffset),y.call(this,"fill",!0),this.path=Y}var K=JSON.parse(JSON.stringify(S));K=h([K],this.posX+this.margin[3],-F+x+this.ctx.prevPageLastElemOffset)[0];var M=(V>W||V<k)&&p.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],X,H,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",K.x,K.y,K.w,K.h,null,null,Z),M&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",S.x,S.y,S.w,S.h,null,null,Z)};var A=function(e,t,n){var o=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":o.push(Math.floor((e.y+r)/n)+1);break;case"arc":o.push(Math.floor((e.y+r-e.radius)/n)+1),o.push(Math.floor((e.y+r+e.radius)/n)+1);break;case"qct":var l=N(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);o.push(Math.floor((l.y+r)/n)+1),o.push(Math.floor((l.y+l.h+r)/n)+1);break;case"bct":var a=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);o.push(Math.floor((a.y+r)/n)+1),o.push(Math.floor((a.y+a.h+r)/n)+1);break;case"rect":o.push(Math.floor((e.y+r)/n)+1),o.push(Math.floor((e.y+e.h+r)/n)+1)}for(var i=0;i<o.length;i+=1)for(;this.pdf.internal.getNumberOfPages()<o[i];)m.call(this);return o},m=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,o=this.lineCap,r=this.lineWidth,l=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=o,this.lineWidth=r,this.lineJoin=l},h=function(e,t,n){for(var o=0;o<e.length;o++)switch(e[o].type){case"bct":e[o].x2+=t,e[o].y2+=n;case"qct":e[o].x1+=t,e[o].y1+=n;default:e[o].x+=t,e[o].y+=n}return e},b=function(e){return e.sort((function(e,t){return e-t}))},f=function(e,t){for(var n,o,r=this.fillStyle,l=this.strokeStyle,a=this.lineCap,i=this.lineWidth,g=Math.abs(i*this.ctx.transform.scaleX),s=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),I=[],u=0;u<d.length;u++)if(void 0!==d[u].x)for(var C=A.call(this,d[u]),f=0;f<C.length;f+=1)-1===I.indexOf(C[f])&&I.push(C[f]);for(var v=0;v<I.length;v++)for(;this.pdf.internal.getNumberOfPages()<I[v];)m.call(this);if(b(I),this.autoPaging)for(var Z=I[0],G=I[I.length-1],S=Z;S<G+1;S++){this.pdf.setPage(S),this.fillStyle=r,this.strokeStyle=l,this.lineCap=a,this.lineWidth=g,this.lineJoin=s;var B=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],w=1===S?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],W=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],k=1===S?0:R+(S-2)*W;if(0!==this.ctx.clip_path.length){var V=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=h(n,this.posX+this.margin[3],-k+w+this.ctx.prevPageLastElemOffset),y.call(this,e,!0),this.path=V}if(o=JSON.parse(JSON.stringify(c)),this.path=h(o,this.posX+this.margin[3],-k+w+this.ctx.prevPageLastElemOffset),!1===t||0===S){var X=(S>Z||S<G)&&p.call(this);X&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],B,W,null).clip().discardPath()),y.call(this,e,t),X&&this.pdf.restoreGraphicsState()}this.lineWidth=i}else this.lineWidth=g,y.call(this,e,t),this.lineWidth=i;this.path=c},y=function(e,t){if(("stroke"!==e||t||!C.call(this))&&("stroke"===e||t||!u.call(this))){for(var n,o,r=[],l=this.path,a=0;a<l.length;a++){var i=l[a];switch(i.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:i,deltas:[],abs:[]});break;case"lt":var g=r.length;if(l[a-1]&&!isNaN(l[a-1].x)&&(n=[i.x-l[a-1].x,i.y-l[a-1].y],g>0))for(;g>=0;g--)if(!0!==r[g-1].close&&!0!==r[g-1].begin){r[g-1].deltas.push(n),r[g-1].abs.push(i);break}break;case"bct":n=[i.x1-l[a-1].x,i.y1-l[a-1].y,i.x2-l[a-1].x,i.y2-l[a-1].y,i.x-l[a-1].x,i.y-l[a-1].y],r[r.length-1].deltas.push(n);break;case"qct":var s=l[a-1].x+2/3*(i.x1-l[a-1].x),c=l[a-1].y+2/3*(i.y1-l[a-1].y),d=i.x+2/3*(i.x1-i.x),I=i.y+2/3*(i.y1-i.y),p=i.x,A=i.y;n=[s-l[a-1].x,c-l[a-1].y,d-l[a-1].x,I-l[a-1].y,p-l[a-1].x,A-l[a-1].y],r[r.length-1].deltas.push(n);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(i)}}o=t?null:"stroke"===e?"stroke":"fill";for(var m=!1,h=0;h<r.length;h++)if(r[h].arc)for(var b=r[h].abs,f=0;f<b.length;f++){var y=b[f];"arc"===y.type?G.call(this,y.x,y.y,y.radius,y.startAngle,y.endAngle,y.counterclockwise,void 0,t,!m):W.call(this,y.x,y.y),m=!0}else if(!0===r[h].close)this.pdf.internal.out("h"),m=!1;else if(!0!==r[h].begin){var v=r[h].start.x,Z=r[h].start.y;k.call(this,r[h].deltas,v,Z),m=!0}o&&S.call(this,o),t&&B.call(this)}},v=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},Z=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(e,t,n,o,r,l,a,i,g){for(var s=X.call(this,n,o,r,l),c=0;c<s.length;c++){var d=s[c];0===c&&(g?w.call(this,d.x1+e,d.y1+t):W.call(this,d.x1+e,d.y1+t)),V.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}i?B.call(this):S.call(this,a)},S=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},w=function(e,t){this.pdf.internal.out(n(e)+" "+o(t)+" m")},R=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),o=v.call(this,e.y),r=Z.call(this,o)-n.h,l=this.ctx.transform.applyToPoint(new a(e.x,o)),s=this.ctx.transform.decompose(),c=new g;c=(c=(c=c.multiply(s.translate)).multiply(s.skew)).multiply(s.scale);for(var d,I,u,C=this.ctx.transform.applyToRectangle(new i(e.x,o,n.w,n.h)),m=c.applyToRectangle(new i(e.x,r,n.w,n.h)),f=A.call(this,m),G=[],S=0;S<f.length;S+=1)-1===G.indexOf(f[S])&&G.push(f[S]);if(b(G),this.autoPaging)for(var B=G[0],w=G[G.length-1],R=B;R<w+1;R++){this.pdf.setPage(R);var W=1===R?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],V=this.pdf.internal.pageSize.height-this.margin[2],X=V-this.margin[0],x=this.pdf.internal.pageSize.width-this.margin[1],J=x-this.margin[3],N=1===R?0:k+(R-2)*X;if(0!==this.ctx.clip_path.length){var H=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=h(d,this.posX+this.margin[3],-1*N+W),y.call(this,"fill",!0),this.path=H}var F=h([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-N+W+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(I=this.pdf.internal.getFontSize(),this.pdf.setFontSize(I*e.scale),u=this.lineWidth,this.lineWidth=u*e.scale);var Y="text"!==this.autoPaging;if(Y||F.y+F.h<=V){if(Y||F.y>=W&&F.x<=x){var K=Y?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||x-F.x)[0],M=h([JSON.parse(JSON.stringify(C))],this.posX+this.margin[3],-N+W+this.ctx.prevPageLastElemOffset)[0],L=Y&&(R>B||R<w)&&p.call(this);L&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],J,X,null).clip().discardPath()),this.pdf.text(K,M.x,M.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),L&&this.pdf.restoreGraphicsState()}}else F.y<V&&(this.ctx.prevPageLastElemOffset+=V-F.y);e.scale>=.01&&(this.pdf.setFontSize(I),this.lineWidth=u)}else e.scale>=.01&&(I=this.pdf.internal.getFontSize(),this.pdf.setFontSize(I*e.scale),u=this.lineWidth,this.lineWidth=u*e.scale),this.pdf.text(e.text,l.x+this.posX,l.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(I),this.lineWidth=u)},W=function(e,t,r,l){r=r||0,l=l||0,this.pdf.internal.out(n(e+r)+" "+o(t+l)+" l")},k=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},V=function(e,n,o,a,i,g,s,c){this.pdf.internal.out([t(r(o+e)),t(l(a+n)),t(r(i+e)),t(l(g+n)),t(r(s+e)),t(l(c+n)),"c"].join(" "))},X=function(e,t,n,o){for(var r=2*Math.PI,l=Math.PI/2;t>n;)t-=r;var a=Math.abs(n-t);a<r&&o&&(a=r-a);for(var i=[],g=o?-1:1,s=t;a>1e-5;){var c=s+g*Math.min(a,l);i.push(x.call(this,e,s,c)),a-=Math.abs(c-s),s=c}return i},x=function(e,t,n){var o=(n-t)/2,r=e*Math.cos(o),l=e*Math.sin(o),a=r,i=-l,g=a*a+i*i,s=g+a*r+i*l,c=4/3*(Math.sqrt(2*g*s)-s)/(a*l-i*r),d=a-c*i,I=i+c*a,u=d,C=-I,p=o+t,A=Math.cos(p),m=Math.sin(p);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*A-I*m,y2:d*m+I*A,x3:u*A-C*m,y3:u*m+C*A,x4:e*Math.cos(n),y4:e*Math.sin(n)}},J=function(e){return 180*e/Math.PI},N=function(e,t,n,o,r,l){var a=e+.5*(n-e),g=t+.5*(o-t),s=r+.5*(n-r),c=l+.5*(o-l),d=Math.min(e,r,a,s),I=Math.max(e,r,a,s),u=Math.min(t,l,g,c),C=Math.max(t,l,g,c);return new i(d,u,I-d,C-u)},H=function(e,t,n,o,r,l,a,g){var s,c,d,I,u,C,p,A,m,h,b,f,y,v,Z=n-e,G=o-t,S=r-n,B=l-o,w=a-r,R=g-l;for(c=0;c<41;c++)m=(p=(d=e+(s=c/40)*Z)+s*((u=n+s*S)-d))+s*(u+s*(r+s*w-u)-p),h=(A=(I=t+s*G)+s*((C=o+s*B)-I))+s*(C+s*(l+s*R-C)-A),0==c?(b=m,f=h,y=m,v=h):(b=Math.min(b,m),f=Math.min(f,h),y=Math.max(y,m),v=Math.max(v,h));return new i(Math.round(b),Math.round(f),Math.round(y-b),Math.round(v-f))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(jl.API),function(e){var t=function(e){var t,n,o,r,l,a,i,g,s,c;for(/[^\x00-\xFF]/.test(e),n=[],o=0,r=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;r>o;o+=4)0!==(l=(e.charCodeAt(o)<<24)+(e.charCodeAt(o+1)<<16)+(e.charCodeAt(o+2)<<8)+e.charCodeAt(o+3))?(a=(l=((l=((l=((l=(l-(c=l%85))/85)-(s=l%85))/85)-(g=l%85))/85)-(i=l%85))/85)%85,n.push(a+33,i+33,g+33,s+33,c+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,o,r,l,a=String,i="length",g=255,s="charCodeAt",c="slice",d="replace";for(e[c](-2),e=e[c](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),o=[],r=0,l=(e+=t="uuuuu"[c](e[i]%5||5))[i];l>r;r+=5)n=52200625*(e[s](r)-33)+614125*(e[s](r+1)-33)+7225*(e[s](r+2)-33)+85*(e[s](r+3)-33)+(e[s](r+4)-33),o.push(g&n>>24,g&n>>16,g&n>>8,g&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(o,t[i]),a.fromCharCode.apply(a,o)},o=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",o=0;o<e.length;o+=2)n+=String.fromCharCode("0x"+(e[o]+e[o+1]));return n},r=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=gl(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,l){var a=0,i=e||"",g=[];for("string"==typeof(l=l||[])&&(l=[l]),a=0;a<l.length;a+=1)switch(l[a]){case"ASCII85Decode":case"/ASCII85Decode":i=n(i),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=t(i),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=o(i),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=r(i),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[a]+'" is not implemented')}return{data:i,reverseChain:g.reverse().join(" ")}}}(jl.API),(Qa=jl.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var o=void 0;try{o=function(e,t,n){var o=new XMLHttpRequest,r=0,l=function(e){var t=e.length,n=[],o=String.fromCharCode;for(r=0;r<t;r+=1)n.push(o(255&e.charCodeAt(r)));return n.join("")};if(o.open("GET",e,!t),o.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(o.onload=function(){200===o.status?n(l(this.responseText)):n(void 0)}),o.send(null),t&&200===o.status)return l(o.responseText)}(e,t,n)}catch(e){}return o}(e,t,n)},Qa.loadImageFile=Qa.loadFile,function(e){function t(){return(dl.html2canvas?Promise.resolve(dl.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function o(){return(dl.DOMPurify?Promise.resolve(dl.DOMPurify):n.e(977).then(n.bind(n,7977))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var r=function(e){var t=(0,Cr.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},l=function(e,t){var n=document.createElement(e);for(var o in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[o]=t.style[o];return n},a=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),o=e.convert(Promise.resolve(),n);return(o=o.setProgress(1,e,1,[e])).set(t)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(e,t){return e.__proto__=t||a.prototype,e},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(r(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(o).then((function(t){return this.set({src:l("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var o=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||o.appendChild(e(r,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(o.value=t.value),o.addEventListener("load",(function(){o.scrollTop=t.scrollTop,o.scrollLeft=t.scrollLeft}),!0)),o}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,o="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:o,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var l=0;l<n.length;++l){var a=n[l],i=a.src.find((function(e){return"truetype"===e.format}));i&&t.addFont(i.url,a.ref.name,a.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,t.context2d.save(!0),e(this.prop.container,r)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},a.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},a.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},a.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(e){if("object"!==r(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in a.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},a.prototype.get=function(e,t){return this.then((function(){var n=e in a.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},a.prototype.setMargin=function(e){return this.then((function(){switch(r(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},a.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||jl.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},a.prototype.setProgress=function(e,t,n,o){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=o&&(this.progress.stack=o),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(e,t,n,o){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,o?this.progress.stack.concat(o):null)},a.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},a.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var o=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),r=n.call(o,e,t);return a.convert(r,this.__proto__)},a.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},a.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},a.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return a.convert(t,this)},a.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},a.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,jl.getPageSize=function(e,t,n){if("object"===(0,Cr.A)(e)){var o=e;e=o.orientation,t=o.unit||t,n=o.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var r,l=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+t}var i,g=0,s=0;if(a.hasOwnProperty(l))g=a[l][1]/r,s=a[l][0]/r;else try{g=n[1],s=n[0]}catch(Qa){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",s>g&&(i=s,s=g,g=i);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",g>s&&(i=s,s=g,g=i)}return{width:s,height:g,unit:t,k:r,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Ya):null;var n=new a(t);return t.worker?n:n.from(e).doCallback()}}(jl.API),jl.API.addJS=function(e){return Ua=e,this.internal.events.subscribe("postPutResources",(function(){Ta=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ta+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Pa=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ua+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Ta&&void 0!==Pa&&this.internal.out("/Names <</JavaScript "+Ta+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=e.outline.render().split(/\r\n/),r=0;r<o.length;r++){var l=o[r],a=n.exec(l);if(null!=a){var i=a[1];e.internal.newObjectDeferredBegin(i,!1)}e.internal.write(l)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,s=[];for(r=0;r<g;r++){var c=e.internal.newObject();s.push(c);var d=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var I=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<s.length;r++)e.internal.write("(page_"+(r+1)+")"+s[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+I+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var o={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<t.children.length;o++){var r=t.children[o];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(t)),o>0&&this.line("/Prev "+this.makeRef(t.children[o-1])),o<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[o+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var l=this.count=this.count_r({count:0},r);if(l>0&&this.line("/Count "+l),r.options&&r.options.pageNumber){var a=e.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var i=0;i<t.children.length;i++)this.renderItems(t.children[i])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(jl.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,o,r,l,a){var i,g=this.decode.DCT_DECODE,s=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=l||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(i=function(e){for(var n,o=256*e.charCodeAt(4)+e.charCodeAt(5),r=e.length,l={width:0,height:0,numcomponents:1},a=4;a<r;a+=2){if(a+=o,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),l={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}o=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return l}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}s={data:e,width:i.width,height:i.height,colorSpace:a,bitsPerComponent:8,filter:g,index:n,alias:o}}return s}}(jl.API);var qa,_a,$a,ei,ti,ni=function(){var e,t,n;function o(e){var t,n,o,r,l,a,i,g,s,c,d,I,u,C;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),s=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},l=this.readUInt16(),r=this.readUInt16()||100,a.delay=1e3*l/r,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===s&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,I=0;0<=t?I<t:I>t;0<=t?++I:--I)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(o=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>o)throw new Error("More transparent colors than palette size");if((c=o-this.transparency.indexed.length)>0)for(u=0;0<=c?u<c:u>c;0<=c?++u:--u)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":i=(d=this.read(t)).indexOf(0),g=String.fromCharCode.apply(String,d.slice(0,i)),this.text[g]=String.fromCharCode.apply(String,d.slice(i+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(C=this.colorType)||6===C,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),o=0,r=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function l(l,a,i,g){var s,c,d,I,u,C,p,A,m,h,b,f,y,v,Z,G,S,B,w,R,W,k=Math.ceil((r.width-l)/i),V=Math.ceil((r.height-a)/g),X=r.width==k&&r.height==V;for(v=t*k,f=X?n:new Uint8Array(v*V),C=e.length,y=0,c=0;y<V&&o<C;){switch(e[o++]){case 0:for(I=S=0;S<v;I=S+=1)f[c++]=e[o++];break;case 1:for(I=B=0;B<v;I=B+=1)s=e[o++],u=I<t?0:f[c-t],f[c++]=(s+u)%256;break;case 2:for(I=w=0;w<v;I=w+=1)s=e[o++],d=(I-I%t)/t,Z=y&&f[(y-1)*v+d*t+I%t],f[c++]=(Z+s)%256;break;case 3:for(I=R=0;R<v;I=R+=1)s=e[o++],d=(I-I%t)/t,u=I<t?0:f[c-t],Z=y&&f[(y-1)*v+d*t+I%t],f[c++]=(s+Math.floor((u+Z)/2))%256;break;case 4:for(I=W=0;W<v;I=W+=1)s=e[o++],d=(I-I%t)/t,u=I<t?0:f[c-t],0===y?Z=G=0:(Z=f[(y-1)*v+d*t+I%t],G=d&&f[(y-1)*v+(d-1)*t+I%t]),p=u+Z-G,A=Math.abs(p-u),h=Math.abs(p-Z),b=Math.abs(p-G),m=A<=h&&A<=b?u:h<=b?Z:G,f[c++]=(s+m)%256;break;default:throw new Error("Invalid filter algorithm: "+e[o-1])}if(!X){var x=((a+y*g)*r.width+l)*t,J=y*v;for(I=0;I<k;I+=1){for(var N=0;N<t;N+=1)n[x++]=f[J++];x+=(i-1)*t}}y++}}return e=sl(e),1==r.interlaceMethod?(l(0,0,8,8),l(4,0,8,8),l(0,4,4,8),l(2,0,4,4),l(0,2,2,4),l(1,0,2,2),l(0,1,1,2)):l(0,0,1,1),n},o.prototype.decodePalette=function(){var e,t,n,o,r,l,a,i,g;for(n=this.palette,l=this.transparency.indexed||[],r=new Uint8Array((l.length||0)+n.length),o=0,e=0,t=a=0,i=n.length;a<i;t=a+=3)r[o++]=n[t],r[o++]=n[t+1],r[o++]=n[t+2],r[o++]=null!=(g=l[e++])?g:255;return r},o.prototype.copyToImageData=function(e,t){var n,o,r,l,a,i,g,s,c,d,I;if(o=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(I=this._decodedPalette)?I:this._decodedPalette=this.decodePalette(),o=4,n=!0),s=(r=e.data||e).length,a=c||t,l=i=0,1===o)for(;l<s;)g=c?4*t[l/4]:i,d=a[g++],r[l++]=d,r[l++]=d,r[l++]=d,r[l++]=n?a[g++]:255,i=g;else for(;l<s;)g=c?4*t[l/4]:i,r[l++]=a[g++],r[l++]=a[g++],r[l++]=a[g++],r[l++]=n?a[g++]:255,i=g},o.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var r=function(){if("[object Window]"===Object.prototype.toString.call(dl)){try{t=dl.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return r(),e=function(e){var o;if(!0===r())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(t){var n,o,r,l,a,i,g,s;if(this.animation){for(s=[],o=a=0,i=(g=this.animation.frames).length;a<i;o=++a)n=g[o],r=t.createImageData(n.width,n.height),l=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,l),n.imageData=r,s.push(n.image=e(r));return s}},o.prototype.renderFrame=function(e,t){var n,o,r;return n=(o=this.animation.frames)[t],r=o[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?e.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&e.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},o.prototype.animate=function(e){var t,n,o,r,l,a,i=this;return n=0,a=this.animation,r=a.numFrames,o=a.frames,l=a.numPlays,(t=function(){var a,g;if(a=n++%r,g=o[a],i.renderFrame(e,a),r>1&&n/r<l)return i.animation._timeout=setTimeout(t,g.delay)})()},o.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},o.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},o}();function oi(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,o=e[t++]|e[t++]<<8,r=e[t++],l=r>>7,a=1<<1+(7&r);e[t++],e[t++];var i=null,g=null;l&&(i=t,g=a,t+=3*a);var s=!0,c=[],d=0,I=null,u=0,C=null;for(this.width=n,this.height=o;s&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,C=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((w=e[t++])>=0))throw Error("Invalid block size");if(0===w)break;t+=w}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var p=e[t++];d=e[t++]|e[t++]<<8,I=e[t++],0==(1&p)&&(I=null),u=p>>2&7,t++;break;case 254:for(;;){if(!((w=e[t++])>=0))throw Error("Invalid block size");if(0===w)break;t+=w}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var A=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,h=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,f=e[t++],y=f>>6&1,v=1<<1+(7&f),Z=i,G=g,S=!1;f>>7&&(S=!0,Z=t,G=v,t+=3*v);var B=t;for(t++;;){var w;if(!((w=e[t++])>=0))throw Error("Invalid block size");if(0===w)break;t+=w}c.push({x:A,y:m,width:h,height:b,has_local_palette:S,palette_offset:Z,palette_size:G,data_offset:B,data_length:t-B,transparent_index:I,interlaced:!!y,delay:d,disposal:u});break;case 59:s=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return C},this.frameInfo=function(e){if(e<0||e>=c.length)throw new Error("Frame index out of range.");return c[e]},this.decodeAndBlitFrameBGRA=function(t,o){var r=this.frameInfo(t),l=r.width*r.height,a=new Uint8Array(l);ri(e,r.data_offset,a,l);var i=r.palette_offset,g=r.transparent_index;null===g&&(g=256);var s=r.width,c=n-s,d=s,I=4*(r.y*n+r.x),u=4*((r.y+r.height)*n+r.x),C=I,p=4*c;!0===r.interlaced&&(p+=4*n*7);for(var A=8,m=0,h=a.length;m<h;++m){var b=a[m];if(0===d&&(d=s,(C+=p)>=u&&(p=4*c+4*n*(A-1),C=I+(s+c)*(A<<1),A>>=1)),b===g)C+=4;else{var f=e[i+3*b],y=e[i+3*b+1],v=e[i+3*b+2];o[C++]=v,o[C++]=y,o[C++]=f,o[C++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,o){var r=this.frameInfo(t),l=r.width*r.height,a=new Uint8Array(l);ri(e,r.data_offset,a,l);var i=r.palette_offset,g=r.transparent_index;null===g&&(g=256);var s=r.width,c=n-s,d=s,I=4*(r.y*n+r.x),u=4*((r.y+r.height)*n+r.x),C=I,p=4*c;!0===r.interlaced&&(p+=4*n*7);for(var A=8,m=0,h=a.length;m<h;++m){var b=a[m];if(0===d&&(d=s,(C+=p)>=u&&(p=4*c+4*n*(A-1),C=I+(s+c)*(A<<1),A>>=1)),b===g)C+=4;else{var f=e[i+3*b],y=e[i+3*b+1],v=e[i+3*b+2];o[C++]=f,o[C++]=y,o[C++]=v,o[C++]=255}--d}}}function ri(e,t,n,o){for(var r=e[t++],l=1<<r,a=l+1,i=a+1,g=r+1,s=(1<<g)-1,c=0,d=0,I=0,u=e[t++],C=new Int32Array(4096),p=null;;){for(;c<16&&0!==u;)d|=e[t++]<<c,c+=8,1===u?u=e[t++]:--u;if(c<g)break;var A=d&s;if(d>>=g,c-=g,A!==l){if(A===a)break;for(var m=A<i?A:p,h=0,b=m;b>l;)b=C[b]>>8,++h;var f=b;if(I+h+(m!==A?1:0)>o)return void ul.log("Warning, gif stream longer than expected.");n[I++]=f;var y=I+=h;for(m!==A&&(n[I++]=f),b=m;h--;)b=C[b],n[--y]=255&b,b>>=8;null!==p&&i<4096&&(C[i++]=p<<8|f,i>=s+1&&g<12&&(++g,s=s<<1|1)),p=A}else i=a+1,s=(1<<(g=r+1))-1,p=null}return I!==o&&ul.log("Warning, gif stream shorter than expected."),n}function li(e){var t,n,o,r,l,a=Math.floor,i=new Array(64),g=new Array(64),s=new Array(64),c=new Array(64),d=new Array(65535),I=new Array(65535),u=new Array(64),C=new Array(64),p=[],A=0,m=7,h=new Array(64),b=new Array(64),f=new Array(64),y=new Array(256),v=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(e,t){for(var n=0,o=0,r=new Array,l=1;l<=16;l++){for(var a=1;a<=e[l];a++)r[t[o]]=[],r[t[o]][0]=n,r[t[o]][1]=l,o++,n++;n*=2}return r}function x(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(A|=1<<m),n--,--m<0&&(255==A?(J(255),J(0)):J(A),m=7,A=0)}function J(e){p.push(e)}function N(e){J(e>>8&255),J(255&e)}function H(e,t,n,o,r){for(var l,a=r[0],i=r[240],g=function(e,t){var n,o,r,l,a,i,g,s,c,d,I=0;for(c=0;c<8;++c){n=e[I],o=e[I+1],r=e[I+2],l=e[I+3],a=e[I+4],i=e[I+5],g=e[I+6];var C=n+(s=e[I+7]),p=n-s,A=o+g,m=o-g,h=r+i,b=r-i,f=l+a,y=l-a,v=C+f,Z=C-f,G=A+h,S=A-h;e[I]=v+G,e[I+4]=v-G;var B=.707106781*(S+Z);e[I+2]=Z+B,e[I+6]=Z-B;var w=.382683433*((v=y+b)-(S=m+p)),R=.5411961*v+w,W=1.306562965*S+w,k=.707106781*(G=b+m),V=p+k,X=p-k;e[I+5]=X+R,e[I+3]=X-R,e[I+1]=V+W,e[I+7]=V-W,I+=8}for(I=0,c=0;c<8;++c){n=e[I],o=e[I+8],r=e[I+16],l=e[I+24],a=e[I+32],i=e[I+40],g=e[I+48];var x=n+(s=e[I+56]),J=n-s,N=o+g,H=o-g,F=r+i,Y=r-i,K=l+a,M=l-a,L=x+K,E=x-K,z=N+F,j=N-F;e[I]=L+z,e[I+32]=L-z;var D=.707106781*(j+E);e[I+16]=E+D,e[I+48]=E-D;var T=.382683433*((L=M+Y)-(j=H+J)),P=.5411961*L+T,U=1.306562965*j+T,Q=.707106781*(z=Y+H),O=J+Q,q=J-Q;e[I+40]=q+P,e[I+24]=q-P,e[I+8]=O+U,e[I+56]=O-U,I++}for(c=0;c<64;++c)d=e[c]*t[c],u[c]=d>0?d+.5|0:d-.5|0;return u}(e,t),s=0;s<64;++s)C[Z[s]]=g[s];var c=C[0]-n;n=C[0],0==c?x(o[0]):(x(o[I[l=32767+c]]),x(d[l]));for(var p=63;p>0&&0==C[p];)p--;if(0==p)return x(a),n;for(var A,m=1;m<=p;){for(var h=m;0==C[m]&&m<=p;)++m;var b=m-h;if(b>=16){A=b>>4;for(var f=1;f<=A;++f)x(i);b&=15}l=32767+C[m],x(r[(b<<4)+I[l]]),x(d[l]),m++}return 63!=p&&x(a),n}function F(e){e=Math.min(Math.max(e,1),100),l!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var o=a((t[n]*e+50)/100);o=Math.min(Math.max(o,1),255),i[Z[n]]=o}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],l=0;l<64;l++){var d=a((r[l]*e+50)/100);d=Math.min(Math.max(d,1),255),g[Z[l]]=d}for(var I=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],u=0,C=0;C<8;C++)for(var p=0;p<8;p++)s[u]=1/(i[Z[u]]*I[C]*I[p]*8),c[u]=1/(g[Z[u]]*I[C]*I[p]*8),u++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),l=e)}this.encode=function(e,l){l&&F(l),p=new Array,A=0,m=7,N(65496),N(65504),N(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),N(1),N(1),J(0),J(0),function(){N(65499),N(132),J(0);for(var e=0;e<64;e++)J(i[e]);J(1);for(var t=0;t<64;t++)J(g[t])}(),function(e,t){N(65472),N(17),J(8),N(t),N(e),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(e.width,e.height),function(){N(65476),N(418),J(0);for(var e=0;e<16;e++)J(G[e+1]);for(var t=0;t<=11;t++)J(S[t]);J(16);for(var n=0;n<16;n++)J(B[n+1]);for(var o=0;o<=161;o++)J(w[o]);J(1);for(var r=0;r<16;r++)J(R[r+1]);for(var l=0;l<=11;l++)J(W[l]);J(17);for(var a=0;a<16;a++)J(k[a+1]);for(var i=0;i<=161;i++)J(V[i])}(),N(65498),N(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var a=0,d=0,I=0;A=0,m=7,this.encode.displayName="_encode_";for(var u,C,y,Z,X,Y,K,M,L,E=e.data,z=e.width,j=e.height,D=4*z,T=0;T<j;){for(u=0;u<D;){for(X=D*T+u,K=-1,M=0,L=0;L<64;L++)Y=X+(M=L>>3)*D+(K=4*(7&L)),T+M>=j&&(Y-=D*(T+1+M-j)),u+K>=D&&(Y-=u+K-D+4),C=E[Y++],y=E[Y++],Z=E[Y++],h[L]=(v[C]+v[y+256|0]+v[Z+512|0]>>16)-128,b[L]=(v[C+768|0]+v[y+1024|0]+v[Z+1280|0]>>16)-128,f[L]=(v[C+1280|0]+v[y+1536|0]+v[Z+1792|0]>>16)-128;a=H(h,s,a,t,o),d=H(b,c,d,n,r),I=H(f,c,I,n,r),u+=32}T+=8}if(m>=0){var P=[];P[1]=m+1,P[0]=(1<<m+1)-1,x(P)}return N(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)y[t]=e(t)}(),t=X(G,S),n=X(R,W),o=X(B,w),r=X(k,V),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var o=e;o<t;o++)I[32767+o]=n,d[32767+o]=[],d[32767+o][1]=n,d[32767+o][0]=o;for(var r=-(t-1);r<=-e;r++)I[32767+r]=n,d[32767+r]=[],d[32767+r][1]=n,d[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)v[e]=19595*e,v[e+256|0]=38470*e,v[e+512|0]=7471*e+32768,v[e+768|0]=-11059*e,v[e+1024|0]=-21709*e,v[e+1280|0]=32768*e+8421375,v[e+1536|0]=-27439*e,v[e+1792|0]=-5329*e}(),F(e)}function ai(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ii(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var o=0;4>o;o++)if(e[t+o]!=n.charCodeAt(o))return!0;return!1}function o(e,t,n,o,r){for(var l=0;l<r;l++)e[t+l]=n[o+l]}function r(e,t,n,o){for(var r=0;r<o;r++)e[t+r]=n}function l(e){return new Int32Array(e)}function a(e,t){for(var n=[],o=0;o<e;o++)n.push(new t);return n}function i(e,t){var n=[];return function e(n,o,r){for(var l=r[o],a=0;a<l&&(n.push(r.length>o+1?[]:new t),!(r.length<o+1));a++)e(n[a],o+1,r)}(n,0,e),n}var g=function(){var e=this;function g(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function s(e,n,o,r,l){t(!(r%o));do{e[n+(r-=o)]=l}while(0<r)}function c(e,n,o,r,a){if(t(2328>=a),512>=a)var i=l(512);else if(null==(i=l(a)))return 0;return function(e,n,o,r,a,i){var c,I,u=n,C=1<<o,p=l(16),A=l(16);for(t(0!=a),t(null!=r),t(null!=e),t(0<o),I=0;I<a;++I){if(15<r[I])return 0;++p[r[I]]}if(p[0]==a)return 0;for(A[1]=0,c=1;15>c;++c){if(p[c]>1<<c)return 0;A[c+1]=A[c]+p[c]}for(I=0;I<a;++I)c=r[I],0<r[I]&&(i[A[c]++]=I);if(1==A[15])return(r=new d).g=0,r.value=i[0],s(e,u,1,C,r),C;var m,h=-1,b=C-1,f=0,y=1,v=1,Z=1<<o;for(I=0,c=1,a=2;c<=o;++c,a<<=1){if(y+=v<<=1,0>(v-=p[c]))return 0;for(;0<p[c];--p[c])(r=new d).g=c,r.value=i[I++],s(e,u+f,a,Z,r),f=g(f,c)}for(c=o+1,a=2;15>=c;++c,a<<=1){if(y+=v<<=1,0>(v-=p[c]))return 0;for(;0<p[c];--p[c]){if(r=new d,(f&b)!=h){for(u+=Z,m=1<<(h=c)-o;15>h&&!(0>=(m-=p[h]));)++h,m<<=1;C+=Z=1<<(m=h-o),e[n+(h=f&b)].g=m+o,e[n+h].value=u-n-h}r.g=c-o,r.value=i[I++],s(e,u+(f>>o),a,Z,r),f=g(f,c)}}return y!=2*A[15]-1?0:C}(e,n,o,r,a,i)}function d(){this.value=this.g=0}function I(){this.value=this.g=0}function u(){this.G=a(5,d),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Kn,I)}function C(e,n,o,r){t(null!=e),t(null!=n),t(2147483648>r),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=o,e.Jd=n,e.Yc=o+r,e.Zc=4<=r?o+r-4+1:o,B(e)}function p(e,t){for(var n=0;0<t--;)n|=R(e,128)<<t;return n}function A(e,t){var n=p(e,t);return w(e)?-n:n}function m(e,n,o,r){var l,a=0;for(t(null!=e),t(null!=n),t(4294967288>r),e.Sb=r,e.Ra=0,e.u=0,e.h=0,4<r&&(r=4),l=0;l<r;++l)a+=n[o+l]<<8*l;e.Ra=a,e.bb=r,e.oa=n,e.pa=o}function h(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<En-8>>>0,++e.bb,e.u-=8;Z(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=Ln){var o=v(e)&Mn[n];return e.u+=n,h(e),o}return e.h=1,e.u=0}function f(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function v(e){return e.Ra>>>(e.u&En-1)>>>0}function Z(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>En}function G(e,t){e.u=t,e.h=Z(e)}function S(e){e.u>=zn&&(t(e.u>=zn),h(e))}function B(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function w(e){return p(e,1)}function R(e,t){var n=e.Ca;0>e.b&&B(e);var o=e.b,r=n*t>>>8,l=(e.I>>>o>r)+0;for(l?(n-=r,e.I-=r+1<<o>>>0):n=r+1,o=n,r=0;256<=o;)r+=8,o>>=8;return o=7^r+jn[o],e.b-=o,e.Ca=(n<<o)-1,l}function W(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function k(e,t){return e[t+0]|e[t+1]<<8}function V(e,t){return k(e,t)|e[t+2]<<16}function X(e,t){return k(e,t)|k(e,t+2)<<16}function x(e,n){var o=1<<n;return t(null!=e),t(0<n),e.X=l(o),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function J(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),o(n.X,0,e.X,0,1<<n.Xa)}function N(){this.X=[],this.Xa=this.Mb=0}function H(e,n,o,r){t(null!=o),t(null!=r);var l=o[0],a=r[0];return 0==l&&(l=(e*a+n/2)/n),0==a&&(a=(n*l+e/2)/e),0>=l||0>=a?0:(o[0]=l,r[0]=a,1)}function F(e,t){return e+(1<<t)-1>>>t}function Y(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function K(t,n){e[n]=function(n,o,r,l,a,i,g){var s;for(s=0;s<a;++s){var c=e[t](i[g+s-1],r,l+s);i[g+s]=Y(n[o+s],c)}}}function M(){this.ud=this.hd=this.jd=0}function L(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function E(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function z(e,t){return E(e+(e-t+.5>>1))}function j(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function D(e,t,n,o,r,l,a){for(o=l[a-1],n=0;n<r;++n)l[a+n]=o=Y(e[t+n],o)}function T(e,t,n,o,r){var l;for(l=0;l<n;++l){var a=e[t+l],i=a>>8&255,g=16711935&(g=(g=16711935&a)+((i<<16)+i));o[r+l]=(4278255360&a)+g>>>0}}function P(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function U(e,t,n,o,r,l){var a;for(a=0;a<o;++a){var i=t[n+a],g=i>>>8,s=i,c=255&(c=(c=i>>>16)+((e.jd<<24>>24)*(g<<24>>24)>>>5));s=255&(s=(s+=(e.hd<<24>>24)*(g<<24>>24)>>>5)+((e.ud<<24>>24)*(c<<24>>24)>>>5)),r[l+a]=(4278255360&i)+(c<<16)+s}}function Q(t,n,o,r,l){e[n]=function(e,t,n,o,a,i,g,s,c){for(o=g;o<s;++o)for(g=0;g<c;++g)a[i++]=l(n[r(e[t++])])},e[t]=function(t,n,a,i,g,s,c){var d=8>>t.b,I=t.Ea,u=t.K[0],C=t.w;if(8>d)for(t=(1<<t.b)-1,C=(1<<d)-1;n<a;++n){var p,A=0;for(p=0;p<I;++p)p&t||(A=r(i[g++])),s[c++]=l(u[A&C]),A>>=d}else e["VP8LMapColor"+o](i,g,u,C,s,c,n,a,I)}}function O(e,t,n,o,r){for(n=t+n;t<n;){var l=e[t++];o[r++]=l>>16&255,o[r++]=l>>8&255,o[r++]=255&l}}function q(e,t,n,o,r){for(n=t+n;t<n;){var l=e[t++];o[r++]=l>>16&255,o[r++]=l>>8&255,o[r++]=255&l,o[r++]=l>>24&255}}function _(e,t,n,o,r){for(n=t+n;t<n;){var l=(a=e[t++])>>16&240|a>>12&15,a=240&a|a>>28&15;o[r++]=l,o[r++]=a}}function $(e,t,n,o,r){for(n=t+n;t<n;){var l=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;o[r++]=l,o[r++]=a}}function ee(e,t,n,o,r){for(n=t+n;t<n;){var l=e[t++];o[r++]=255&l,o[r++]=l>>8&255,o[r++]=l>>16&255}}function te(e,t,n,r,l,a){if(0==a)for(n=t+n;t<n;)W(r,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),l+=32;else o(r,l,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function oe(e){return e==jo||e==Do||e==To||e==Po}function re(){this.eb=[],this.size=this.A=this.fb=0}function le(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new re,this.f.kb=new le,this.sd=null}function ie(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ge(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function se(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ce(e,t){var n=e.T,r=t.ba.f.RGBA,l=r.eb,a=r.fb+e.ka*r.A,i=hr[t.ba.S],g=e.y,s=e.O,c=e.f,d=e.N,I=e.ea,u=e.W,C=t.cc,p=t.dc,A=t.Mc,m=t.Nc,h=e.ka,b=e.ka+e.T,f=e.U,y=f+1>>1;for(0==h?i(g,s,null,null,c,d,I,u,c,d,I,u,l,a,null,null,f):(i(t.ec,t.fc,g,s,C,p,A,m,c,d,I,u,l,a-r.A,l,a,f),++n);h+2<b;h+=2)C=c,p=d,A=I,m=u,d+=e.Rc,u+=e.Rc,a+=2*r.A,i(g,(s+=2*e.fa)-e.fa,g,s,C,p,A,m,c,d,I,u,l,a-r.A,l,a,f);return s+=e.fa,e.j+b<e.o?(o(t.ec,t.fc,g,s,f),o(t.cc,t.dc,c,d,y),o(t.Mc,t.Nc,I,u,y),n--):1&b||i(g,s,null,null,c,d,I,u,c,d,I,u,l,a+r.A,null,null,f),n}function de(e,n,o){var r=e.F,l=[e.J];if(null!=r){var a=e.U,i=n.ba.S,g=i==Lo||i==To;n=n.ba.f.RGBA;var s=[0],c=e.ka;s[0]=e.T,e.Kb&&(0==c?--s[0]:(--c,l[0]-=e.width),e.j+e.ka+e.T==e.o&&(s[0]=e.o-e.j-c));var d=n.eb;c=n.fb+c*n.A,e=Bo(r,l[0],e.width,a,s,d,c+(g?0:3),n.A),t(o==s),e&&oe(i)&&Go(d,c,g,a,s,n.A)}return 0}function Ie(e){var t=e.ma,n=t.ba.S,o=11>n,r=n==Yo||n==Mo||n==Lo||n==Eo||12==n||oe(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Hn(t.Oa,e,r?11:12))return 0;if(r&&oe(n)&&bn(),e.da)alert("todo:use_scaling");else{if(o){if(t.Ib=se,e.Kb){if(n=e.U+1>>1,t.memory=l(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ce,bn()}}else alert("todo:EmitYUV");r&&(t.Jb=de,o&&mn())}if(o&&!Xr){for(e=0;256>e;++e)xr[e]=89858*(e-128)+wr>>Br,Hr[e]=-22014*(e-128)+wr,Nr[e]=-45773*(e-128),Jr[e]=113618*(e-128)+wr>>Br;for(e=Rr;e<Wr;++e)t=76283*(e-16)+wr>>Br,Fr[e-Rr]=De(t,255),Yr[e-Rr]=De(t+8>>4,15);Xr=1}return 1}function ue(e){var n=e.ma,o=e.U,r=e.T;return t(!(1&e.ka)),0>=o||0>=r?0:(o=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,o),n.Dc+=o,1)}function Ce(e){e.ma.memory=null}function pe(e,t,n,o){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,o[0]=b(e,1),0!=b(e,3)?0:!e.h)}function Ae(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function me(e,t){return 120<t?t-120:1<=(n=((n=$o[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function he(e,t,n){var o=v(n),r=e[t+=255&o].g-8;return 0<r&&(G(n,n.u+8),o=v(n),t+=e[t].value,t+=o&(1<<r)-1),G(n,n.u+e[t].g),e[t].value}function be(e,n,o){return o.g+=e.g,o.value+=e.value<<n>>>0,t(8>=o.g),e.g}function fe(e,n,o){var r=e.xc;return t((n=0==r?0:e.vc[e.md*(o>>r)+(n>>r)])<e.Wb),e.Ya[n]}function ye(e,n,r,l){var a=e.ab,i=e.c*n,g=e.C;n=g+n;var s=r,c=l;for(l=e.Ta,r=e.Ua;0<a--;){var d=e.gc[a],I=g,u=n,C=s,p=c,A=(c=l,s=r,d.Ea);switch(t(I<u),t(u<=d.nc),d.hc){case 2:Pn(C,p,(u-I)*A,c,s);break;case 0:var m=I,h=u,b=c,f=s,y=(B=d).Ea;0==m&&(Dn(C,p,null,null,1,b,f),D(C,p+1,0,0,y-1,b,f+1),p+=y,f+=y,++m);for(var v=1<<B.b,Z=v-1,G=F(y,B.b),S=B.K,B=B.w+(m>>B.b)*G;m<h;){var w=S,R=B,W=1;for(Tn(C,p,b,f-y,1,b,f);W<y;){var k=(W&~Z)+v;k>y&&(k=y),(0,_n[w[R++]>>8&15])(C,p+ +W,b,f+W-y,k-W,b,f+W),W=k}p+=y,f+=y,++m&Z||(B+=G)}u!=d.nc&&o(c,s-A,c,s+(u-I-1)*A,A);break;case 1:for(A=C,h=p,y=(C=d.Ea)-(f=C&~(b=(p=1<<d.b)-1)),m=F(C,d.b),v=d.K,d=d.w+(I>>d.b)*m;I<u;){for(Z=v,G=d,S=new M,B=h+f,w=h+C;h<B;)P(Z[G++],S),$n(S,A,h,p,c,s),h+=p,s+=p;h<w&&(P(Z[G++],S),$n(S,A,h,y,c,s),h+=y,s+=y),++I&b||(d+=m)}break;case 3:if(C==c&&p==s&&0<d.b){for(h=c,C=A=s+(u-I)*A-(f=(u-I)*F(d.Ea,d.b)),p=c,b=s,m=[],f=(y=f)-1;0<=f;--f)m[f]=p[b+f];for(f=y-1;0<=f;--f)h[C+f]=m[f];Un(d,I,u,c,A,c,s)}else Un(d,I,u,C,p,c,s)}s=l,c=r}c!=r&&o(l,r,s,c,i)}function ve(e,n){var o=e.V,r=e.Ba+e.c*e.C,l=n-e.C;if(t(n<=e.l.o),t(16>=l),0<l){var a=e.l,i=e.Ta,g=e.Ua,s=a.width;if(ye(e,l,o,r),l=g=[g],t((o=e.C)<(r=n)),t(a.v<a.va),r>a.o&&(r=a.o),o<a.j){var c=a.j-o;o=a.j,l[0]+=c*s}if(o>=r?o=0:(l[0]+=4*a.v,a.ka=o-a.j,a.U=a.va-a.v,a.T=r-o,o=1),o){if(g=g[0],11>(o=e.ca).S){var d=o.f.RGBA,I=(r=o.S,l=a.U,a=a.T,c=d.eb,d.A),u=a;for(d=d.fb+e.Ma*d.A;0<u--;){var C=i,p=g,A=l,m=c,h=d;switch(r){case Fo:eo(C,p,A,m,h);break;case Yo:to(C,p,A,m,h);break;case jo:to(C,p,A,m,h),Go(m,h,0,A,1,0);break;case Ko:ro(C,p,A,m,h);break;case Mo:te(C,p,A,m,h,1);break;case Do:te(C,p,A,m,h,1),Go(m,h,0,A,1,0);break;case Lo:te(C,p,A,m,h,0);break;case To:te(C,p,A,m,h,0),Go(m,h,1,A,1,0);break;case Eo:no(C,p,A,m,h);break;case Po:no(C,p,A,m,h),So(m,h,A,1,0);break;case zo:oo(C,p,A,m,h);break;default:t(0)}g+=s,d+=I}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=o.height)}}e.C=n,t(e.C<=e.i)}function Ze(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,o=e.Ya[t].H;if(0<n[1][o[1]+0].g||0<n[2][o[2]+0].g||0<n[3][o[3]+0].g)return 0}return 1}function Ge(e,n,o,r,l,a){if(0!=e.Z){var i=e.qd,g=e.rd;for(t(null!=mr[e.Z]);n<o;++n)mr[e.Z](i,g,r,l,r,l,a),i=r,g=l,l+=a;e.qd=i,e.rd=g}}function Se(e,n){var o=e.l.ma,r=0==o.Z||1==o.Z?e.l.j:e.C;if(r=e.C<r?r:e.C,t(n<=e.l.o),n>r){var l=e.l.width,a=o.ca,i=o.tb+l*r,g=e.V,s=e.Ba+e.c*r,c=e.gc;t(1==e.ab),t(3==c[0].hc),On(c[0],r,n,g,s,a,i),Ge(o,r,n,a,i,l)}e.C=e.Ma=n}function Be(e,n,o,r,l,a,i){var g=e.$/r,s=e.$%r,c=e.m,d=e.s,I=o+e.$,u=I;l=o+r*l;var C=o+r*a,p=280+d.ua,A=e.Pb?g:16777216,m=0<d.ua?d.Wa:null,h=d.wc,b=I<C?fe(d,s,g):null;t(e.C<a),t(C<=l);var f=!1;e:for(;;){for(;f||I<C;){var y=0;if(g>=A){var B=I-o;t((A=e).Pb),A.wd=A.m,A.xd=B,0<A.s.ua&&J(A.s.Wa,A.s.vb),A=g+tr}if(s&h||(b=fe(d,s,g)),t(null!=b),b.Qb&&(n[I]=b.qb,f=!0),!f)if(S(c),b.jc){y=c,B=n;var w=I,R=b.pd[v(y)&Kn-1];t(b.jc),256>R.g?(G(y,y.u+R.g),B[w]=R.value,y=0):(G(y,y.u+R.g-256),t(256<=R.value),y=R.value),0==y&&(f=!0)}else y=he(b.G[0],b.H[0],c);if(c.h)break;if(f||256>y){if(!f)if(b.nd)n[I]=(b.qb|y<<8)>>>0;else{if(S(c),f=he(b.G[1],b.H[1],c),S(c),B=he(b.G[2],b.H[2],c),w=he(b.G[3],b.H[3],c),c.h)break;n[I]=(w<<24|f<<16|y<<8|B)>>>0}if(f=!1,++I,++s>=r&&(s=0,++g,null!=i&&g<=a&&!(g%16)&&i(e,g),null!=m))for(;u<I;)y=n[u++],m.X[(506832829*y&4294967295)>>>m.Mb]=y}else if(280>y){if(y=Ae(y-256,c),B=he(b.G[4],b.H[4],c),S(c),B=me(r,B=Ae(B,c)),c.h)break;if(I-o<B||l-I<y)break e;for(w=0;w<y;++w)n[I+w]=n[I+w-B];for(I+=y,s+=y;s>=r;)s-=r,++g,null!=i&&g<=a&&!(g%16)&&i(e,g);if(t(I<=l),s&h&&(b=fe(d,s,g)),null!=m)for(;u<I;)y=n[u++],m.X[(506832829*y&4294967295)>>>m.Mb]=y}else{if(!(y<p))break e;for(f=y-280,t(null!=m);u<I;)y=n[u++],m.X[(506832829*y&4294967295)>>>m.Mb]=y;y=I,t(!(f>>>(B=m).Xa)),n[y]=B.X[f],f=!0}f||t(c.h==Z(c))}if(e.Pb&&c.h&&I<l)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&J(e.s.vb,e.s.Wa);else{if(c.h)break e;null!=i&&i(e,g>a?a:g),e.a=0,e.$=I-o}return 1}return e.a=3,0}function we(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Re(){var t=new an;return null==t?null:(t.a=0,t.xb=Ar,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Pn=T,$n=U,eo=O,to=q,no=_,oo=$,ro=ee,e.VP8LMapColor32b=Qn,e.VP8LMapColor8b=qn,t)}function We(e,n,o,i,g){var s=1,I=[e],C=[n],p=i.m,A=i.s,m=null,h=0;e:for(;;){if(o)for(;s&&b(p,1);){var f=I,y=C,Z=i,B=1,w=Z.m,R=Z.gc[Z.ab],W=b(w,2);if(Z.Oc&1<<W)s=0;else{switch(Z.Oc|=1<<W,R.hc=W,R.Ea=f[0],R.nc=y[0],R.K=[null],++Z.ab,t(4>=Z.ab),W){case 0:case 1:R.b=b(w,3)+2,B=We(F(R.Ea,R.b),F(R.nc,R.b),0,Z,R.K),R.K=R.K[0];break;case 3:var k,V=b(w,8)+1,X=16<V?0:4<V?1:2<V?2:3;if(f[0]=F(R.Ea,X),R.b=X,k=B=We(V,1,0,Z,R.K)){var J,N=V,H=R,K=1<<(8>>H.b),M=l(K);if(null==M)k=0;else{var L=H.K[0],E=H.w;for(M[0]=H.K[0][0],J=1;J<1*N;++J)M[J]=Y(L[E+J],M[J-1]);for(;J<4*K;++J)M[J]=0;H.K[0]=null,H.K[0]=M,k=1}}B=k;break;case 2:break;default:t(0)}s=B}}if(I=I[0],C=C[0],s&&b(p,1)&&!(s=1<=(h=b(p,4))&&11>=h)){i.a=3;break e}var z;if(z=s)t:{var j,D,T,P=i,U=I,Q=C,O=h,q=o,_=P.m,$=P.s,ee=[null],te=1,ne=0,oe=er[O];n:for(;;){if(q&&b(_,1)){var re=b(_,3)+2,le=F(U,re),ae=F(Q,re),ie=le*ae;if(!We(le,ae,0,P,ee))break n;for(ee=ee[0],$.xc=re,j=0;j<ie;++j){var ge=ee[j]>>8&65535;ee[j]=ge,ge>=te&&(te=ge+1)}}if(_.h)break n;for(D=0;5>D;++D){var se=Oo[D];!D&&0<O&&(se+=1<<O),ne<se&&(ne=se)}var ce=a(te*oe,d),de=te,Ie=a(de,u);if(null==Ie)var ue=null;else t(65536>=de),ue=Ie;var Ce=l(ne);if(null==ue||null==Ce||null==ce){P.a=1;break n}var pe=ce;for(j=T=0;j<te;++j){var Ae=ue[j],me=Ae.G,he=Ae.H,fe=0,ye=1,ve=0;for(D=0;5>D;++D){se=Oo[D],me[D]=pe,he[D]=T,!D&&0<O&&(se+=1<<O);o:{var Ze,Ge=se,Se=P,Re=Ce,ke=pe,Ve=T,Xe=0,xe=Se.m,Je=b(xe,1);if(r(Re,0,0,Ge),Je){var Ne=b(xe,1)+1,He=b(xe,1),Fe=b(xe,0==He?1:8);Re[Fe]=1,2==Ne&&(Re[Fe=b(xe,8)]=1);var Ye=1}else{var Ke=l(19),Me=b(xe,4)+4;if(19<Me){Se.a=3;var Le=0;break o}for(Ze=0;Ze<Me;++Ze)Ke[_o[Ze]]=b(xe,3);var Ee=void 0,ze=void 0,je=Se,De=Ke,Te=Ge,Pe=Re,Ue=0,Qe=je.m,Oe=8,qe=a(128,d);r:for(;c(qe,0,7,De,19);){if(b(Qe,1)){var _e=2+2*b(Qe,3);if((Ee=2+b(Qe,_e))>Te)break r}else Ee=Te;for(ze=0;ze<Te&&Ee--;){S(Qe);var $e=qe[0+(127&v(Qe))];G(Qe,Qe.u+$e.g);var et=$e.value;if(16>et)Pe[ze++]=et,0!=et&&(Oe=et);else{var tt=16==et,nt=et-16,ot=Qo[nt],rt=b(Qe,Uo[nt])+ot;if(ze+rt>Te)break r;for(var lt=tt?Oe:0;0<rt--;)Pe[ze++]=lt}}Ue=1;break r}Ue||(je.a=3),Ye=Ue}(Ye=Ye&&!xe.h)&&(Xe=c(ke,Ve,8,Re,Ge)),Ye&&0!=Xe?Le=Xe:(Se.a=3,Le=0)}if(0==Le)break n;if(ye&&1==qo[D]&&(ye=0==pe[T].g),fe+=pe[T].g,T+=Le,3>=D){var at,it=Ce[0];for(at=1;at<se;++at)Ce[at]>it&&(it=Ce[at]);ve+=it}}if(Ae.nd=ye,Ae.Qb=0,ye&&(Ae.qb=(me[3][he[3]+0].value<<24|me[1][he[1]+0].value<<16|me[2][he[2]+0].value)>>>0,0==fe&&256>me[0][he[0]+0].value&&(Ae.Qb=1,Ae.qb+=me[0][he[0]+0].value<<8)),Ae.jc=!Ae.Qb&&6>ve,Ae.jc){var gt,st=Ae;for(gt=0;gt<Kn;++gt){var ct=gt,dt=st.pd[ct],It=st.G[0][st.H[0]+ct];256<=It.value?(dt.g=It.g+256,dt.value=It.value):(dt.g=0,dt.value=0,ct>>=be(It,8,dt),ct>>=be(st.G[1][st.H[1]+ct],16,dt),ct>>=be(st.G[2][st.H[2]+ct],0,dt),be(st.G[3][st.H[3]+ct],24,dt))}}}$.vc=ee,$.Wb=te,$.Ya=ue,$.yc=ce,z=1;break t}z=0}if(!(s=z)){i.a=3;break e}if(0<h){if(A.ua=1<<h,!x(A.Wa,h)){i.a=1,s=0;break e}}else A.ua=0;var ut=i,Ct=I,pt=C,At=ut.s,mt=At.xc;if(ut.c=Ct,ut.i=pt,At.md=F(Ct,mt),At.wc=0==mt?-1:(1<<mt)-1,o){i.xb=pr;break e}if(null==(m=l(I*C))){i.a=1,s=0;break e}s=(s=Be(i,m,0,I,C,C,null))&&!p.h;break e}return s?(null!=g?g[0]=m:(t(null==m),t(o)),i.$=0,o||we(A)):we(A),s}function ke(e,n){var o=e.c*e.i,r=o+n+16*n;return t(e.c<=n),e.V=l(r),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+o+n,1)}function Ve(e,n){var o=e.C,r=n-o,l=e.V,a=e.Ba+e.c*o;for(t(n<=e.l.o);0<r;){var i=16<r?16:r,g=e.l.ma,s=e.l.width,c=s*i,d=g.ca,I=g.tb+s*o,u=e.Ta,C=e.Ua;ye(e,i,l,a),wo(u,C,d,I,c),Ge(g,o,o+i,d,I,s),r-=i,l+=i*e.c,o+=i}t(o==n),e.C=e.Ma=n}function Xe(){this.ub=this.yd=this.td=this.Rb=0}function xe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Je(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Ne(){this.Yb=function(){var e=[];return function e(t,n,o){for(var r=o[n],l=0;l<r&&(t.push(o.length>n+1?[]:0),!(o.length<n+1));l++)e(t[l],n+1,o)}(e,0,[3,11]),e}()}function He(){this.jb=l(3),this.Wc=i([4,8],Ne),this.Xc=i([4,17],Ne)}function Fe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ye(){this.ld=this.La=this.dd=this.tc=0}function Ke(){this.Na=this.la=0}function Me(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Le(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ee(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ye),this.Y=0,this.ya=Array(new Le),this.aa=0,this.l=new Te}function ze(){this.y=l(16),this.f=l(8),this.ea=l(8)}function je(){this.cb=this.a=0,this.sc="",this.m=new f,this.Od=new Xe,this.Kc=new xe,this.ed=new Fe,this.Qa=new Je,this.Ic=this.$c=this.Aa=0,this.D=new Ee,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,f),this.ia=0,this.pb=a(4,Me),this.Pa=new He,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ze),this.Hd=0,this.rb=Array(new Ke),this.sb=0,this.wa=Array(new Ye),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Le),this.L=this.aa=0,this.gd=i([4,2],Ye),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function De(e,t){return 0>e?0:e>t?t:e}function Te(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pe(){var e=new je;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,rr||(rr=qe)),e}function Ue(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Qe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Oe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ue(e,2,"null VP8Io passed to VP8GetHeaders()");var o=n.data,l=n.w,a=n.ha;if(4>a)return Ue(e,7,"Truncated header.");var i=o[l+0]|o[l+1]<<8|o[l+2]<<16,g=e.Od;if(g.Rb=!(1&i),g.td=i>>1&7,g.yd=i>>4&1,g.ub=i>>5,3<g.td)return Ue(e,3,"Incorrect keyframe parameters.");if(!g.yd)return Ue(e,4,"Frame not displayable.");l+=3,a-=3;var s=e.Kc;if(g.Rb){if(7>a)return Ue(e,7,"cannot parse picture header");if(!Qe(o,l,a))return Ue(e,3,"Bad code word");s.c=16383&(o[l+4]<<8|o[l+3]),s.Td=o[l+4]>>6,s.i=16383&(o[l+6]<<8|o[l+5]),s.Ud=o[l+6]>>6,l+=7,a-=7,e.za=s.c+15>>4,e.Ub=s.i+15>>4,n.width=s.c,n.height=s.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((i=e.Pa).jb,0,255,i.jb.length),t(null!=(i=e.Qa)),i.Cb=0,i.Bb=0,i.Fb=1,r(i.Zb,0,0,i.Zb.length),r(i.Lb,0,0,i.Lb)}if(g.ub>a)return Ue(e,7,"bad partition length");C(i=e.m,o,l,g.ub),l+=g.ub,a-=g.ub,g.Rb&&(s.Ld=w(i),s.Kd=w(i)),s=e.Qa;var c,d=e.Pa;if(t(null!=i),t(null!=s),s.Cb=w(i),s.Cb){if(s.Bb=w(i),w(i)){for(s.Fb=w(i),c=0;4>c;++c)s.Zb[c]=w(i)?A(i,7):0;for(c=0;4>c;++c)s.Lb[c]=w(i)?A(i,6):0}if(s.Bb)for(c=0;3>c;++c)d.jb[c]=w(i)?p(i,8):255}else s.Bb=0;if(i.Ka)return Ue(e,3,"cannot parse segment header");if((s=e.ed).zd=w(i),s.Tb=p(i,6),s.wb=p(i,3),s.Pc=w(i),s.Pc&&w(i)){for(d=0;4>d;++d)w(i)&&(s.vd[d]=A(i,6));for(d=0;4>d;++d)w(i)&&(s.od[d]=A(i,6))}if(e.L=0==s.Tb?0:s.zd?1:2,i.Ka)return Ue(e,3,"cannot parse filter header");var I=a;if(a=c=l,l=c+I,s=I,e.Xb=(1<<p(e.m,2))-1,I<3*(d=e.Xb))o=7;else{for(c+=3*d,s-=3*d,I=0;I<d;++I){var u=o[a+0]|o[a+1]<<8|o[a+2]<<16;u>s&&(u=s),C(e.Jc[+I],o,c,u),c+=u,s-=u,a+=3}C(e.Jc[+d],o,c,s),o=c<l?0:5}if(0!=o)return Ue(e,o,"cannot parse partitions");for(o=p(c=e.m,7),a=w(c)?A(c,4):0,l=w(c)?A(c,4):0,s=w(c)?A(c,4):0,d=w(c)?A(c,4):0,c=w(c)?A(c,4):0,I=e.Qa,u=0;4>u;++u){if(I.Cb){var m=I.Zb[u];I.Fb||(m+=o)}else{if(0<u){e.pb[u]=e.pb[0];continue}m=o}var h=e.pb[u];h.Sc[0]=nr[De(m+a,127)],h.Sc[1]=or[De(m+0,127)],h.Eb[0]=2*nr[De(m+l,127)],h.Eb[1]=101581*or[De(m+s,127)]>>16,8>h.Eb[1]&&(h.Eb[1]=8),h.Qc[0]=nr[De(m+d,117)],h.Qc[1]=or[De(m+c,127)],h.lc=m+c}if(!g.Rb)return Ue(e,4,"Not a key frame.");for(w(i),g=e.Pa,o=0;4>o;++o){for(a=0;8>a;++a)for(l=0;3>l;++l)for(s=0;11>s;++s)d=R(i,cr[o][a][l][s])?p(i,8):gr[o][a][l][s],g.Wc[o][a].Yb[l][s]=d;for(a=0;17>a;++a)g.Xc[o][a]=g.Wc[o][dr[a]]}return e.kc=w(i),e.kc&&(e.Bd=p(i,8)),e.cb=1}function qe(e,t,n,o,r,l,a){var i=t[r].Yb[n];for(n=0;16>r;++r){if(!R(e,i[n+0]))return r;for(;!R(e,i[n+1]);)if(i=t[++r].Yb[0],n=0,16==r)return 16;var g=t[r+1].Yb;if(R(e,i[n+2])){var s=e,c=0;if(R(s,(I=i)[(d=n)+3]))if(R(s,I[d+6])){for(i=0,d=2*(c=R(s,I[d+8]))+(I=R(s,I[d+9+c])),c=0,I=lr[d];I[i];++i)c+=c+R(s,I[i]);c+=3+(8<<d)}else R(s,I[d+7])?(c=7+2*R(s,165),c+=R(s,145)):c=5+R(s,159);else c=R(s,I[d+4])?3+R(s,I[d+5]):2;i=g[2]}else c=1,i=g[1];g=a+ar[r],0>(s=e).b&&B(s);var d,I=s.b,u=(d=s.Ca>>1)-(s.I>>I)>>31;--s.b,s.Ca+=u,s.Ca|=1,s.I-=(d+1&u)<<I,l[g]=((c^u)-u)*o[(0<r)+0]}return 16}function _e(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,r(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,n){if(null==e)return 0;if(null==n)return Ue(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Oe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var i=Mr[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-i>>4,e.zb=n.j-i>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+i>>4,e.Hb=n.va+15+i>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var g=e.ed;for(i=0;4>i;++i){var s;if(e.Qa.Cb){var c=e.Qa.Lb[i];e.Qa.Fb||(c+=g.Tb)}else c=g.Tb;for(s=0;1>=s;++s){var d=e.gd[i][s],I=c;if(g.Pc&&(I+=g.vd[0],s&&(I+=g.od[0])),0<(I=0>I?0:63<I?63:I)){var u=I;0<g.wb&&(u=4<g.wb?u>>2:u>>1)>9-g.wb&&(u=9-g.wb),1>u&&(u=1),d.dd=u,d.tc=2*I+u,d.ld=40<=I?2:15<=I?1:0}else d.tc=0;d.La=s}}}i=0}else Ue(e,6,"Frame setup failed"),i=e.a;if(i=0==i){if(i){e.$c=0,0<e.Aa||(e.Ic=Er);e:{i=e.Ic,g=4*(u=e.za);var C=32*u,p=u+1,A=0<e.L?u*(0<e.Aa?2:1):0,m=(2==e.Aa?2:1)*u;if((d=g+832+(s=3*(16*i+Mr[e.L])/2*C)+(c=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)i=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=l(d),e.Fc=0,null==e.Ec){i=Ue(e,1,"no memory during frame initialization.");break e}e.Vb=d}d=e.Ec,I=e.Fc,e.Ac=d,e.Bc=I,I+=g,e.Gd=a(C,ze),e.Hd=0,e.rb=a(p+1,Ke),e.sb=1,e.wa=A?a(A,Ye):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=u),t(!0),e.oc=d,e.pc=I,I+=832,e.ya=a(m,Le),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=u),e.R=16*u,e.B=8*u,u=(C=Mr[e.L])*e.R,C=C/2*e.B,e.sa=d,e.ta=I+u,e.qa=e.sa,e.ra=e.ta+16*i*e.R+C,e.Ha=e.qa,e.Ia=e.ra+8*i*e.B+C,e.$c=0,I+=s,e.mb=c?d:null,e.nb=c?I:null,t(I+c<=e.Fc+e.Vb),_e(e),r(e.Ac,e.Bc,0,g),i=1}}if(i){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Xo){for(i=-255;255>=i;++i)Ro[255+i]=0>i?-i:i;for(i=-1020;1020>=i;++i)Wo[1020+i]=-128>i?-128:127<i?127:i;for(i=-112;112>=i;++i)ko[112+i]=-16>i?-16:15<i?15:i;for(i=-255;510>=i;++i)Vo[255+i]=0>i?0:255<i?255:i;Xo=1}lo=st,ao=lt,go=at,so=it,co=gt,io=rt,Io=Ut,uo=Qt,Co=_t,po=$t,Ao=Ot,mo=qt,ho=en,bo=tn,fo=Et,yo=zt,vo=jt,Zo=Dt,ur[0]=Gt,ur[1]=dt,ur[2]=vt,ur[3]=Zt,ur[4]=St,ur[5]=wt,ur[6]=Bt,ur[7]=Rt,ur[8]=kt,ur[9]=Wt,Ir[0]=mt,Ir[1]=ut,Ir[2]=Ct,Ir[3]=pt,Ir[4]=ht,Ir[5]=bt,Ir[6]=ft,Cr[0]=Jt,Cr[1]=It,Cr[2]=Vt,Cr[3]=Xt,Cr[4]=Ht,Cr[5]=Nt,Cr[6]=Ft,i=1}else i=0}i&&(i=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,i=e.Jc[e.M&e.Xb],g=e.m,s=e;for(a=0;a<s.za;++a){var c=g,d=s,I=d.Ac,u=d.Bc+4*a,C=d.zc,p=d.ya[d.aa+a];if(d.Qa.Bb?p.$b=R(c,d.Pa.jb[0])?2+R(c,d.Pa.jb[2]):R(c,d.Pa.jb[1]):p.$b=0,d.kc&&(p.Ad=R(c,d.Bd)),p.Za=!R(c,145)+0,p.Za){var A=p.Ob,m=0;for(d=0;4>d;++d){var h,b=C[0+d];for(h=0;4>h;++h){b=sr[I[u+h]][b];for(var f=ir[R(c,b[0])];0<f;)f=ir[2*f+R(c,b[f])];b=-f,I[u+h]=b}o(A,m,I,u,4),m+=4,C[0+d]=b}}else b=R(c,156)?R(c,128)?1:3:R(c,163)?2:0,p.Ob[0]=b,r(I,u,b,4),r(C,0,b,4);p.Dd=R(c,142)?R(c,114)?R(c,183)?1:3:2:0}if(s.m.Ka)return Ue(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(s=i,c=(g=e).rb[g.sb-1],I=g.rb[g.sb+g.ja],a=g.ya[g.aa+g.ja],u=g.kc?a.Ad:0)c.la=I.la=0,a.Za||(c.Na=I.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var y,v;if(c=I,I=s,u=g.Pa.Xc,C=g.ya[g.aa+g.ja],p=g.pb[C.$b],d=C.ad,A=0,m=g.rb[g.sb-1],b=h=0,r(d,A,0,384),C.Za)var Z=0,G=u[3];else{f=l(16);var S=c.Na+m.Na;if(S=rr(I,u[1],S,p.Eb,0,f,0),c.Na=m.Na=(0<S)+0,1<S)lo(f,0,d,A);else{var B=f[0]+3>>3;for(f=0;256>f;f+=16)d[A+f]=B}Z=1,G=u[0]}var w=15&c.la,W=15&m.la;for(f=0;4>f;++f){var k=1&W;for(B=v=0;4>B;++B)w=w>>1|(k=(S=rr(I,G,S=k+(1&w),p.Sc,Z,d,A))>Z)<<7,v=v<<2|(3<S?3:1<S?2:0!=d[A+0]),A+=16;w>>=4,W=W>>1|k<<7,h=(h<<8|v)>>>0}for(G=w,Z=W>>4,y=0;4>y;y+=2){for(v=0,w=c.la>>4+y,W=m.la>>4+y,f=0;2>f;++f){for(k=1&W,B=0;2>B;++B)S=k+(1&w),w=w>>1|(k=0<(S=rr(I,u[2],S,p.Qc,0,d,A)))<<3,v=v<<2|(3<S?3:1<S?2:0!=d[A+0]),A+=16;w>>=2,W=W>>1|k<<5}b|=v<<4*y,G|=w<<4<<y,Z|=(240&W)<<y}c.la=G,m.la=Z,C.Hc=h,C.Gc=b,C.ia=43690&b?0:p.ia,u=!(h|b)}if(0<g.L&&(g.wa[g.Y+g.ja]=g.gd[a.$b][a.Za],g.wa[g.Y+g.ja].La|=!u),s.Ka)return Ue(e,7,"Premature end-of-file encountered.")}if(_e(e),g=n,s=1,a=(i=e).D,c=0<i.L&&i.M>=i.zb&&i.M<=i.Va,0==i.Aa)e:{if(a.M=i.M,a.uc=c,Jn(i,a),s=1,a=(v=i.D).Nb,c=(b=Mr[i.L])*i.R,I=b/2*i.B,f=16*a*i.R,B=8*a*i.B,u=i.sa,C=i.ta-c+f,p=i.qa,d=i.ra-I+B,A=i.Ha,m=i.Ia-I+B,W=0==(w=v.M),h=w>=i.Va-1,2==i.Aa&&Jn(i,v),v.uc)for(k=(S=i).D.M,t(S.D.uc),v=S.yb;v<S.Hb;++v){Z=v,G=k;var V=(X=(L=S).D).Nb;y=L.R;var X=X.wa[X.Y+Z],x=L.sa,J=L.ta+16*V*y+16*Z,N=X.dd,H=X.tc;if(0!=H)if(t(3<=H),1==L.L)0<Z&&yo(x,J,y,H+4),X.La&&Zo(x,J,y,H),0<G&&fo(x,J,y,H+4),X.La&&vo(x,J,y,H);else{var F=L.B,Y=L.qa,K=L.ra+8*V*F+8*Z,M=L.Ha,L=L.Ia+8*V*F+8*Z;V=X.ld,0<Z&&(uo(x,J,y,H+4,N,V),po(Y,K,M,L,F,H+4,N,V)),X.La&&(mo(x,J,y,H,N,V),bo(Y,K,M,L,F,H,N,V)),0<G&&(Io(x,J,y,H+4,N,V),Co(Y,K,M,L,F,H+4,N,V)),X.La&&(Ao(x,J,y,H,N,V),ho(Y,K,M,L,F,H,N,V))}}if(i.ia&&alert("todo:DitherRow"),null!=g.put){if(v=16*w,w=16*(w+1),W?(g.y=i.sa,g.O=i.ta+f,g.f=i.qa,g.N=i.ra+B,g.ea=i.Ha,g.W=i.Ia+B):(v-=b,g.y=u,g.O=C,g.f=p,g.N=d,g.ea=A,g.W=m),h||(w-=b),w>g.o&&(w=g.o),g.F=null,g.J=null,null!=i.Fa&&0<i.Fa.length&&v<w&&(g.J=In(i,g,v,w-v),g.F=i.mb,null==g.F&&0==g.F.length)){s=Ue(i,3,"Could not decode alpha data.");break e}v<g.j&&(b=g.j-v,v=g.j,t(!(1&b)),g.O+=i.R*b,g.N+=i.B*(b>>1),g.W+=i.B*(b>>1),null!=g.F&&(g.J+=g.width*b)),v<w&&(g.O+=g.v,g.N+=g.v>>1,g.W+=g.v>>1,null!=g.F&&(g.J+=g.v),g.ka=v-g.j,g.U=g.va-g.v,g.T=w-v,s=g.put(g))}a+1!=i.Ic||h||(o(i.sa,i.ta-c,u,C+16*i.R,c),o(i.qa,i.ra-I,p,d+8*i.B,I),o(i.Ha,i.Ia-I,A,m+8*i.B,I))}if(!s)return Ue(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),i&=1}return i?(e.cb=0,i):0}function et(e,t,n,o,r){r=e[t+n+32*o]+(r>>3),e[t+n+32*o]=-256&r?0>r?0:255:r}function tt(e,t,n,o,r,l){et(e,t,0,n,o+r),et(e,t,1,n,o+l),et(e,t,2,n,o-l),et(e,t,3,n,o-r)}function nt(e){return(20091*e>>16)+e}function ot(e,t,n,o){var r,a=0,i=l(16);for(r=0;4>r;++r){var g=e[t+0]+e[t+8],s=e[t+0]-e[t+8],c=(35468*e[t+4]>>16)-nt(e[t+12]),d=nt(e[t+4])+(35468*e[t+12]>>16);i[a+0]=g+d,i[a+1]=s+c,i[a+2]=s-c,i[a+3]=g-d,a+=4,t++}for(r=a=0;4>r;++r)g=(e=i[a+0]+4)+i[a+8],s=e-i[a+8],c=(35468*i[a+4]>>16)-nt(i[a+12]),et(n,o,0,0,g+(d=nt(i[a+4])+(35468*i[a+12]>>16))),et(n,o,1,0,s+c),et(n,o,2,0,s-c),et(n,o,3,0,g-d),a++,o+=32}function rt(e,t,n,o){var r=e[t+0]+4,l=35468*e[t+4]>>16,a=nt(e[t+4]),i=35468*e[t+1]>>16;tt(n,o,0,r+a,e=nt(e[t+1]),i),tt(n,o,1,r+l,e,i),tt(n,o,2,r-l,e,i),tt(n,o,3,r-a,e,i)}function lt(e,t,n,o,r){ot(e,t,n,o),r&&ot(e,t+16,n,o+4)}function at(e,t,n,o){ao(e,t+0,n,o,1),ao(e,t+32,n,o+128,1)}function it(e,t,n,o){var r;for(e=e[t+0]+4,r=0;4>r;++r)for(t=0;4>t;++t)et(n,o,t,r,e)}function gt(e,t,n,o){e[t+0]&&so(e,t+0,n,o),e[t+16]&&so(e,t+16,n,o+4),e[t+32]&&so(e,t+32,n,o+128),e[t+48]&&so(e,t+48,n,o+128+4)}function st(e,t,n,o){var r,a=l(16);for(r=0;4>r;++r){var i=e[t+0+r]+e[t+12+r],g=e[t+4+r]+e[t+8+r],s=e[t+4+r]-e[t+8+r],c=e[t+0+r]-e[t+12+r];a[0+r]=i+g,a[8+r]=i-g,a[4+r]=c+s,a[12+r]=c-s}for(r=0;4>r;++r)i=(e=a[0+4*r]+3)+a[3+4*r],g=a[1+4*r]+a[2+4*r],s=a[1+4*r]-a[2+4*r],c=e-a[3+4*r],n[o+0]=i+g>>3,n[o+16]=c+s>>3,n[o+32]=i-g>>3,n[o+48]=c-s>>3,o+=64}function ct(e,t,n){var o,r=t-32,l=No,a=255-e[r-1];for(o=0;o<n;++o){var i,g=l,s=a+e[t-1];for(i=0;i<n;++i)e[t+i]=g[s+e[r+i]];t+=32}}function dt(e,t){ct(e,t,4)}function It(e,t){ct(e,t,8)}function ut(e,t){ct(e,t,16)}function Ct(e,t){var n;for(n=0;16>n;++n)o(e,t+32*n,e,t-32,16)}function pt(e,t){var n;for(n=16;0<n;--n)r(e,t,e[t-1],16),t+=32}function At(e,t,n){var o;for(o=0;16>o;++o)r(t,n+32*o,e,16)}function mt(e,t){var n,o=16;for(n=0;16>n;++n)o+=e[t-1+32*n]+e[t+n-32];At(o>>5,e,t)}function ht(e,t){var n,o=8;for(n=0;16>n;++n)o+=e[t-1+32*n];At(o>>4,e,t)}function bt(e,t){var n,o=8;for(n=0;16>n;++n)o+=e[t+n-32];At(o>>4,e,t)}function ft(e,t){At(128,e,t)}function yt(e,t,n){return e+2*t+n+2>>2}function vt(e,t){var n,r=t-32;for(r=new Uint8Array([yt(e[r-1],e[r+0],e[r+1]),yt(e[r+0],e[r+1],e[r+2]),yt(e[r+1],e[r+2],e[r+3]),yt(e[r+2],e[r+3],e[r+4])]),n=0;4>n;++n)o(e,t+32*n,r,0,r.length)}function Zt(e,t){var n=e[t-1],o=e[t-1+32],r=e[t-1+64],l=e[t-1+96];W(e,t+0,16843009*yt(e[t-1-32],n,o)),W(e,t+32,16843009*yt(n,o,r)),W(e,t+64,16843009*yt(o,r,l)),W(e,t+96,16843009*yt(r,l,l))}function Gt(e,t){var n,o=4;for(n=0;4>n;++n)o+=e[t+n-32]+e[t-1+32*n];for(o>>=3,n=0;4>n;++n)r(e,t+32*n,o,4)}function St(e,t){var n=e[t-1+0],o=e[t-1+32],r=e[t-1+64],l=e[t-1-32],a=e[t+0-32],i=e[t+1-32],g=e[t+2-32],s=e[t+3-32];e[t+0+96]=yt(o,r,e[t-1+96]),e[t+1+96]=e[t+0+64]=yt(n,o,r),e[t+2+96]=e[t+1+64]=e[t+0+32]=yt(l,n,o),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=yt(a,l,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=yt(i,a,l),e[t+3+32]=e[t+2+0]=yt(g,i,a),e[t+3+0]=yt(s,g,i)}function Bt(e,t){var n=e[t+1-32],o=e[t+2-32],r=e[t+3-32],l=e[t+4-32],a=e[t+5-32],i=e[t+6-32],g=e[t+7-32];e[t+0+0]=yt(e[t+0-32],n,o),e[t+1+0]=e[t+0+32]=yt(n,o,r),e[t+2+0]=e[t+1+32]=e[t+0+64]=yt(o,r,l),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=yt(r,l,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=yt(l,a,i),e[t+3+64]=e[t+2+96]=yt(a,i,g),e[t+3+96]=yt(i,g,g)}function wt(e,t){var n=e[t-1+0],o=e[t-1+32],r=e[t-1+64],l=e[t-1-32],a=e[t+0-32],i=e[t+1-32],g=e[t+2-32],s=e[t+3-32];e[t+0+0]=e[t+1+64]=l+a+1>>1,e[t+1+0]=e[t+2+64]=a+i+1>>1,e[t+2+0]=e[t+3+64]=i+g+1>>1,e[t+3+0]=g+s+1>>1,e[t+0+96]=yt(r,o,n),e[t+0+64]=yt(o,n,l),e[t+0+32]=e[t+1+96]=yt(n,l,a),e[t+1+32]=e[t+2+96]=yt(l,a,i),e[t+2+32]=e[t+3+96]=yt(a,i,g),e[t+3+32]=yt(i,g,s)}function Rt(e,t){var n=e[t+0-32],o=e[t+1-32],r=e[t+2-32],l=e[t+3-32],a=e[t+4-32],i=e[t+5-32],g=e[t+6-32],s=e[t+7-32];e[t+0+0]=n+o+1>>1,e[t+1+0]=e[t+0+64]=o+r+1>>1,e[t+2+0]=e[t+1+64]=r+l+1>>1,e[t+3+0]=e[t+2+64]=l+a+1>>1,e[t+0+32]=yt(n,o,r),e[t+1+32]=e[t+0+96]=yt(o,r,l),e[t+2+32]=e[t+1+96]=yt(r,l,a),e[t+3+32]=e[t+2+96]=yt(l,a,i),e[t+3+64]=yt(a,i,g),e[t+3+96]=yt(i,g,s)}function Wt(e,t){var n=e[t-1+0],o=e[t-1+32],r=e[t-1+64],l=e[t-1+96];e[t+0+0]=n+o+1>>1,e[t+2+0]=e[t+0+32]=o+r+1>>1,e[t+2+32]=e[t+0+64]=r+l+1>>1,e[t+1+0]=yt(n,o,r),e[t+3+0]=e[t+1+32]=yt(o,r,l),e[t+3+32]=e[t+1+64]=yt(r,l,l),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=l}function kt(e,t){var n=e[t-1+0],o=e[t-1+32],r=e[t-1+64],l=e[t-1+96],a=e[t-1-32],i=e[t+0-32],g=e[t+1-32],s=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=o+n+1>>1,e[t+0+64]=e[t+2+96]=r+o+1>>1,e[t+0+96]=l+r+1>>1,e[t+3+0]=yt(i,g,s),e[t+2+0]=yt(a,i,g),e[t+1+0]=e[t+3+32]=yt(n,a,i),e[t+1+32]=e[t+3+64]=yt(o,n,a),e[t+1+64]=e[t+3+96]=yt(r,o,n),e[t+1+96]=yt(l,r,o)}function Vt(e,t){var n;for(n=0;8>n;++n)o(e,t+32*n,e,t-32,8)}function Xt(e,t){var n;for(n=0;8>n;++n)r(e,t,e[t-1],8),t+=32}function xt(e,t,n){var o;for(o=0;8>o;++o)r(t,n+32*o,e,8)}function Jt(e,t){var n,o=8;for(n=0;8>n;++n)o+=e[t+n-32]+e[t-1+32*n];xt(o>>4,e,t)}function Nt(e,t){var n,o=4;for(n=0;8>n;++n)o+=e[t+n-32];xt(o>>3,e,t)}function Ht(e,t){var n,o=4;for(n=0;8>n;++n)o+=e[t-1+32*n];xt(o>>3,e,t)}function Ft(e,t){xt(128,e,t)}function Yt(e,t,n){var o=e[t-n],r=e[t+0],l=3*(r-o)+xo[1020+e[t-2*n]-e[t+n]],a=Jo[112+(l+4>>3)];e[t-n]=No[255+o+Jo[112+(l+3>>3)]],e[t+0]=No[255+r-a]}function Kt(e,t,n,o){var r=e[t+0],l=e[t+n];return Ho[255+e[t-2*n]-e[t-n]]>o||Ho[255+l-r]>o}function Mt(e,t,n,o){return 4*Ho[255+e[t-n]-e[t+0]]+Ho[255+e[t-2*n]-e[t+n]]<=o}function Lt(e,t,n,o,r){var l=e[t-3*n],a=e[t-2*n],i=e[t-n],g=e[t+0],s=e[t+n],c=e[t+2*n],d=e[t+3*n];return 4*Ho[255+i-g]+Ho[255+a-s]>o?0:Ho[255+e[t-4*n]-l]<=r&&Ho[255+l-a]<=r&&Ho[255+a-i]<=r&&Ho[255+d-c]<=r&&Ho[255+c-s]<=r&&Ho[255+s-g]<=r}function Et(e,t,n,o){var r=2*o+1;for(o=0;16>o;++o)Mt(e,t+o,n,r)&&Yt(e,t+o,n)}function zt(e,t,n,o){var r=2*o+1;for(o=0;16>o;++o)Mt(e,t+o*n,1,r)&&Yt(e,t+o*n,1)}function jt(e,t,n,o){var r;for(r=3;0<r;--r)Et(e,t+=4*n,n,o)}function Dt(e,t,n,o){var r;for(r=3;0<r;--r)zt(e,t+=4,n,o)}function Tt(e,t,n,o,r,l,a,i){for(l=2*l+1;0<r--;){if(Lt(e,t,n,l,a))if(Kt(e,t,n,i))Yt(e,t,n);else{var g=e,s=t,c=n,d=g[s-2*c],I=g[s-c],u=g[s+0],C=g[s+c],p=g[s+2*c],A=27*(h=xo[1020+3*(u-I)+xo[1020+d-C]])+63>>7,m=18*h+63>>7,h=9*h+63>>7;g[s-3*c]=No[255+g[s-3*c]+h],g[s-2*c]=No[255+d+m],g[s-c]=No[255+I+A],g[s+0]=No[255+u-A],g[s+c]=No[255+C-m],g[s+2*c]=No[255+p-h]}t+=o}}function Pt(e,t,n,o,r,l,a,i){for(l=2*l+1;0<r--;){if(Lt(e,t,n,l,a))if(Kt(e,t,n,i))Yt(e,t,n);else{var g=e,s=t,c=n,d=g[s-c],I=g[s+0],u=g[s+c],C=Jo[112+(4+(p=3*(I-d))>>3)],p=Jo[112+(p+3>>3)],A=C+1>>1;g[s-2*c]=No[255+g[s-2*c]+A],g[s-c]=No[255+d+p],g[s+0]=No[255+I-C],g[s+c]=No[255+u-A]}t+=o}}function Ut(e,t,n,o,r,l){Tt(e,t,n,1,16,o,r,l)}function Qt(e,t,n,o,r,l){Tt(e,t,1,n,16,o,r,l)}function Ot(e,t,n,o,r,l){var a;for(a=3;0<a;--a)Pt(e,t+=4*n,n,1,16,o,r,l)}function qt(e,t,n,o,r,l){var a;for(a=3;0<a;--a)Pt(e,t+=4,1,n,16,o,r,l)}function _t(e,t,n,o,r,l,a,i){Tt(e,t,r,1,8,l,a,i),Tt(n,o,r,1,8,l,a,i)}function $t(e,t,n,o,r,l,a,i){Tt(e,t,1,r,8,l,a,i),Tt(n,o,1,r,8,l,a,i)}function en(e,t,n,o,r,l,a,i){Pt(e,t+4*r,r,1,8,l,a,i),Pt(n,o+4*r,r,1,8,l,a,i)}function tn(e,t,n,o,r,l,a,i){Pt(e,t+4,1,r,8,l,a,i),Pt(n,o+4,1,r,8,l,a,i)}function nn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ge,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function on(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ln(){this.ua=0,this.Wa=new N,this.vb=new N,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new u,this.yc=new d}function an(){this.xb=this.a=0,this.l=new Te,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new y,this.Pb=0,this.wd=new y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ln,this.ab=0,this.gc=a(4,rn),this.Oc=0}function gn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Te,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function sn(e,t,n,o,r,l,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)r[l+t]=e+n[o+t]&255,e=r[l+t]}function cn(e,t,n,o,r,l,a){var i;if(null==e)sn(null,null,n,o,r,l,a);else for(i=0;i<a;++i)r[l+i]=e[t+i]+n[o+i]&255}function dn(e,t,n,o,r,l,a){if(null==e)sn(null,null,n,o,r,l,a);else{var i,g=e[t+0],s=g,c=g;for(i=0;i<a;++i)s=c+(g=e[t+i])-s,c=n[o+i]+(-256&s?0>s?0:255:s)&255,s=g,r[l+i]=c}}function In(e,n,r,a){var i=n.width,g=n.o;if(t(null!=e&&null!=n),0>r||0>=a||r+a>g)return null;if(!e.Cc){if(null==e.ga){var s;if(e.ga=new gn,(s=null==e.ga)||(s=n.width*n.o,t(0==e.Gb.length),e.Gb=l(s),e.Uc=0,null==e.Gb?s=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,s=1),s=!s),!s){s=e.ga;var c=e.Fa,d=e.P,I=e.qc,u=e.mb,C=e.nb,p=d+1,A=I-1,h=s.l;if(t(null!=c&&null!=u&&null!=n),mr[0]=null,mr[1]=sn,mr[2]=cn,mr[3]=dn,s.ca=u,s.tb=C,s.c=n.width,s.i=n.height,t(0<s.c&&0<s.i),1>=I)n=0;else if(s.$a=3&c[d+0],s.Z=c[d+0]>>2&3,s.Lc=c[d+0]>>4&3,d=c[d+0]>>6&3,0>s.$a||1<s.$a||4<=s.Z||1<s.Lc||d)n=0;else if(h.put=ue,h.ac=Ie,h.bc=Ce,h.ma=s,h.width=n.width,h.height=n.height,h.Da=n.Da,h.v=n.v,h.va=n.va,h.j=n.j,h.o=n.o,s.$a)e:{t(1==s.$a),n=Re();t:for(;;){if(null==n){n=0;break e}if(t(null!=s),s.mc=n,n.c=s.c,n.i=s.i,n.l=s.l,n.l.ma=s,n.l.width=s.c,n.l.height=s.i,n.a=0,m(n.m,c,p,A),!We(s.c,s.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ze(n.s)?(s.ic=1,c=n.c*n.i,n.Ta=null,n.Ua=0,n.V=l(c),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(s.ic=0,n=ke(n,s.c)),!n)break t;n=1;break e}s.mc=null,n=0}else n=A>=s.c*s.i;s=!n}if(s)return null;1!=e.ga.Lc?e.Ga=0:a=g-r}t(null!=e.ga),t(r+a<=g);e:{if(n=(c=e.ga).c,g=c.l.o,0==c.$a){if(p=e.rc,A=e.Vc,h=e.Fa,d=e.P+1+r*n,I=e.mb,u=e.nb+r*n,t(d<=e.P+e.qc),0!=c.Z)for(t(null!=mr[c.Z]),s=0;s<a;++s)mr[c.Z](p,A,h,d,I,u,n),p=I,A=u,u+=n,d+=n;else for(s=0;s<a;++s)o(I,u,h,d,n),p=I,A=u,u+=n,d+=n;e.rc=p,e.Vc=A}else{if(t(null!=c.mc),n=r+a,t(null!=(s=c.mc)),t(n<=s.i),s.C>=n)n=1;else if(c.ic||mn(),c.ic){c=s.V,p=s.Ba,A=s.c;var b=s.i,f=(h=1,d=s.$/A,I=s.$%A,u=s.m,C=s.s,s.$),y=A*b,v=A*n,G=C.wc,B=f<v?fe(C,I,d):null;t(f<=y),t(n<=b),t(Ze(C));t:for(;;){for(;!u.h&&f<v;){if(I&G||(B=fe(C,I,d)),t(null!=B),S(u),256>(b=he(B.G[0],B.H[0],u)))c[p+f]=b,++f,++I>=A&&(I=0,++d<=n&&!(d%16)&&Se(s,d));else{if(!(280>b)){h=0;break t}b=Ae(b-256,u);var w,R=he(B.G[4],B.H[4],u);if(S(u),!(f>=(R=me(A,R=Ae(R,u)))&&y-f>=b)){h=0;break t}for(w=0;w<b;++w)c[p+f+w]=c[p+f+w-R];for(f+=b,I+=b;I>=A;)I-=A,++d<=n&&!(d%16)&&Se(s,d);f<v&&I&G&&(B=fe(C,I,d))}t(u.h==Z(u))}Se(s,d>n?n:d);break t}!h||u.h&&f<y?(h=0,s.a=u.h?5:3):s.$=f,n=h}else n=Be(s,s.V,s.Ba,s.c,s.i,n,Ve);if(!n){a=0;break e}}r+a>=g&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+r*i}function un(e,t,n,o,r,l){for(;0<r--;){var a,i=e,g=t+(n?1:0),s=e,c=t+(n?0:3);for(a=0;a<o;++a){var d=s[c+4*a];255!=d&&(d*=32897,i[g+4*a+0]=i[g+4*a+0]*d>>23,i[g+4*a+1]=i[g+4*a+1]*d>>23,i[g+4*a+2]=i[g+4*a+2]*d>>23)}t+=l}}function Cn(e,t,n,o,r){for(;0<o--;){var l;for(l=0;l<n;++l){var a=e[t+2*l+0],i=15&(s=e[t+2*l+1]),g=4369*i,s=(240&s|s>>4)*g>>16;e[t+2*l+0]=(240&a|a>>4)*g>>16&240|(15&a|a<<4)*g>>16>>4&15,e[t+2*l+1]=240&s|i}t+=r}}function pn(e,t,n,o,r,l,a,i){var g,s,c=255;for(s=0;s<r;++s){for(g=0;g<o;++g){var d=e[t+g];l[a+4*g]=d,c&=d}t+=n,a+=i}return 255!=c}function An(e,t,n,o,r){var l;for(l=0;l<r;++l)n[o+l]=e[t+l]>>8}function mn(){Go=un,So=Cn,Bo=pn,wo=An}function hn(n,o,r){e[n]=function(e,n,l,a,i,g,s,c,d,I,u,C,p,A,m,h,b){var f,y=b-1>>1,v=i[g+0]|s[c+0]<<16,Z=d[I+0]|u[C+0]<<16;t(null!=e);var G=3*v+Z+131074>>2;for(o(e[n+0],255&G,G>>16,p,A),null!=l&&(G=3*Z+v+131074>>2,o(l[a+0],255&G,G>>16,m,h)),f=1;f<=y;++f){var S=i[g+f]|s[c+f]<<16,B=d[I+f]|u[C+f]<<16,w=v+S+Z+B+524296,R=w+2*(S+Z)>>3;G=R+v>>1,v=(w=w+2*(v+B)>>3)+S>>1,o(e[n+2*f-1],255&G,G>>16,p,A+(2*f-1)*r),o(e[n+2*f-0],255&v,v>>16,p,A+(2*f-0)*r),null!=l&&(G=w+Z>>1,v=R+B>>1,o(l[a+2*f-1],255&G,G>>16,m,h+(2*f-1)*r),o(l[a+2*f+0],255&v,v>>16,m,h+(2*f+0)*r)),v=S,Z=B}1&b||(G=3*v+Z+131074>>2,o(e[n+b-1],255&G,G>>16,p,A+(b-1)*r),null!=l&&(G=3*Z+v+131074>>2,o(l[a+b-1],255&G,G>>16,m,h+(b-1)*r)))}}function bn(){hr[Fo]=br,hr[Yo]=yr,hr[Ko]=fr,hr[Mo]=vr,hr[Lo]=Zr,hr[Eo]=Gr,hr[zo]=Sr,hr[jo]=yr,hr[Do]=vr,hr[To]=Zr,hr[Po]=Gr}function fn(e){return e&~Vr?0>e?0:255:e>>kr}function yn(e,t){return fn((19077*e>>8)+(26149*t>>8)-14234)}function vn(e,t,n){return fn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Zn(e,t){return fn((19077*e>>8)+(33050*t>>8)-17685)}function Gn(e,t,n,o,r){o[r+0]=yn(e,n),o[r+1]=vn(e,t,n),o[r+2]=Zn(e,t)}function Sn(e,t,n,o,r){o[r+0]=Zn(e,t),o[r+1]=vn(e,t,n),o[r+2]=yn(e,n)}function Bn(e,t,n,o,r){var l=vn(e,t,n);t=l<<3&224|Zn(e,t)>>3,o[r+0]=248&yn(e,n)|l>>5,o[r+1]=t}function wn(e,t,n,o,r){var l=240&Zn(e,t)|15;o[r+0]=240&yn(e,n)|vn(e,t,n)>>4,o[r+1]=l}function Rn(e,t,n,o,r){o[r+0]=255,Gn(e,t,n,o,r+1)}function Wn(e,t,n,o,r){Sn(e,t,n,o,r),o[r+3]=255}function kn(e,t,n,o,r){Gn(e,t,n,o,r),o[r+3]=255}function De(e,t){return 0>e?0:e>t?t:e}function Vn(t,n,o){e[t]=function(e,t,r,l,a,i,g,s,c){for(var d=s+(-2&c)*o;s!=d;)n(e[t+0],r[l+0],a[i+0],g,s),n(e[t+1],r[l+0],a[i+0],g,s+o),t+=2,++l,++i,s+=2*o;1&c&&n(e[t+0],r[l+0],a[i+0],g,s)}}function Xn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function xn(e,t,n,o,r){switch(e>>>30){case 3:ao(t,n,o,r,0);break;case 2:io(t,n,o,r);break;case 1:so(t,n,o,r)}}function Jn(e,t){var n,l,a=t.M,i=t.Nb,g=e.oc,s=e.pc+40,c=e.oc,d=e.pc+584,I=e.oc,u=e.pc+600;for(n=0;16>n;++n)g[s+32*n-1]=129;for(n=0;8>n;++n)c[d+32*n-1]=129,I[u+32*n-1]=129;for(0<a?g[s-1-32]=c[d-1-32]=I[u-1-32]=129:(r(g,s-32-1,127,21),r(c,d-32-1,127,9),r(I,u-32-1,127,9)),l=0;l<e.za;++l){var C=t.ya[t.aa+l];if(0<l){for(n=-1;16>n;++n)o(g,s+32*n-4,g,s+32*n+12,4);for(n=-1;8>n;++n)o(c,d+32*n-4,c,d+32*n+4,4),o(I,u+32*n-4,I,u+32*n+4,4)}var p=e.Gd,A=e.Hd+l,m=C.ad,h=C.Hc;if(0<a&&(o(g,s-32,p[A].y,0,16),o(c,d-32,p[A].f,0,8),o(I,u-32,p[A].ea,0,8)),C.Za){var b=g,f=s-32+16;for(0<a&&(l>=e.za-1?r(b,f,p[A].y[15],4):o(b,f,p[A+1].y,0,4)),n=0;4>n;n++)b[f+128+n]=b[f+256+n]=b[f+384+n]=b[f+0+n];for(n=0;16>n;++n,h<<=2)b=g,f=s+Kr[n],ur[C.Ob[n]](b,f),xn(h,m,16*+n,b,f)}else if(b=Xn(l,a,C.Ob[0]),Ir[b](g,s),0!=h)for(n=0;16>n;++n,h<<=2)xn(h,m,16*+n,g,s+Kr[n]);for(n=C.Gc,b=Xn(l,a,C.Dd),Cr[b](c,d),Cr[b](I,u),h=m,b=c,f=d,255&(C=n|0)&&(170&C?go(h,256,b,f):co(h,256,b,f)),C=I,h=u,255&(n>>=8)&&(170&n?go(m,320,C,h):co(m,320,C,h)),a<e.Ub-1&&(o(p[A].y,0,g,s+480,16),o(p[A].f,0,c,d+224,8),o(p[A].ea,0,I,u+224,8)),n=8*i*e.B,p=e.sa,A=e.ta+16*l+16*i*e.R,m=e.qa,C=e.ra+8*l+n,h=e.Ha,b=e.Ia+8*l+n,n=0;16>n;++n)o(p,A+n*e.R,g,s+32*n,16);for(n=0;8>n;++n)o(m,C+n*e.B,c,d+32*n,8),o(h,b+n*e.B,I,u+32*n,8)}}function Nn(e,o,r,l,a,i,g,s,c){var d=[0],I=[0],u=0,C=null!=c?c.kd:0,p=null!=c?c:new on;if(null==e||12>r)return 7;p.data=e,p.w=o,p.ha=r,o=[o],r=[r],p.gb=[p.gb];e:{var A=o,h=r,b=p.gb;if(t(null!=e),t(null!=h),t(null!=b),b[0]=0,12<=h[0]&&!n(e,A[0],"RIFF")){if(n(e,A[0]+8,"WEBP")){b=3;break e}var f=X(e,A[0]+4);if(12>f||4294967286<f){b=3;break e}if(C&&f>h[0]-8){b=7;break e}b[0]=f,A[0]+=12,h[0]-=12}b=0}if(0!=b)return b;for(f=0<p.gb[0],r=r[0];;){e:{var v=e;h=o,b=r;var Z=d,G=I,S=A=[0];if((R=u=[u])[0]=0,8>b[0])b=7;else{if(!n(v,h[0],"VP8X")){if(10!=X(v,h[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var B=X(v,h[0]+8),w=1+V(v,h[0]+12);if(2147483648<=w*(v=1+V(v,h[0]+15))){b=3;break e}null!=S&&(S[0]=B),null!=Z&&(Z[0]=w),null!=G&&(G[0]=v),h[0]+=18,b[0]-=18,R[0]=1}b=0}}if(u=u[0],A=A[0],0!=b)return b;if(h=!!(2&A),!f&&u)return 3;if(null!=i&&(i[0]=!!(16&A)),null!=g&&(g[0]=h),null!=s&&(s[0]=0),g=d[0],A=I[0],u&&h&&null==c){b=0;break}if(4>r){b=7;break}if(f&&u||!f&&!u&&!n(e,o[0],"ALPH")){r=[r],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{B=e,b=o,f=r;var R=p.gb;Z=p.na,G=p.P,S=p.Sa,w=22,t(null!=B),t(null!=f),v=b[0];var W=f[0];for(t(null!=Z),t(null!=S),Z[0]=null,G[0]=null,S[0]=0;;){if(b[0]=v,f[0]=W,8>W){b=7;break e}var k=X(B,v+4);if(4294967286<k){b=3;break e}var x=8+k+1&-2;if(w+=x,0<R&&w>R){b=3;break e}if(!n(B,v,"VP8 ")||!n(B,v,"VP8L")){b=0;break e}if(W[0]<x){b=7;break e}n(B,v,"ALPH")||(Z[0]=B,G[0]=v+8,S[0]=k),v+=x,W-=x}}if(r=r[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=b)break}r=[r],p.Ja=[p.Ja],p.xa=[p.xa];e:if(R=e,b=o,f=r,Z=p.gb[0],G=p.Ja,S=p.xa,B=b[0],v=!n(R,B,"VP8 "),w=!n(R,B,"VP8L"),t(null!=R),t(null!=f),t(null!=G),t(null!=S),8>f[0])b=7;else{if(v||w){if(R=X(R,B+4),12<=Z&&R>Z-12){b=3;break e}if(C&&R>f[0]-8){b=7;break e}G[0]=R,b[0]+=8,f[0]-=8,S[0]=w}else S[0]=5<=f[0]&&47==R[B+0]&&!(R[B+4]>>5),G[0]=f[0];b=0}if(r=r[0],p.Ja=p.Ja[0],p.xa=p.xa[0],o=o[0],0!=b)break;if(4294967286<p.Ja)return 3;if(null==s||h||(s[0]=p.xa?2:1),g=[g],A=[A],p.xa){if(5>r){b=7;break}s=g,C=A,h=i,null==e||5>r?e=0:5<=r&&47==e[o+0]&&!(e[o+4]>>5)?(f=[0],R=[0],Z=[0],m(G=new y,e,o,r),pe(G,f,R,Z)?(null!=s&&(s[0]=f[0]),null!=C&&(C[0]=R[0]),null!=h&&(h[0]=Z[0]),e=1):e=0):e=0}else{if(10>r){b=7;break}s=A,null==e||10>r||!Qe(e,o+3,r-3)?e=0:(C=e[o+0]|e[o+1]<<8|e[o+2]<<16,h=16383&(e[o+7]<<8|e[o+6]),e=16383&(e[o+9]<<8|e[o+8]),1&C||3<(C>>1&7)||!(C>>4&1)||C>>5>=p.Ja||!h||!e?e=0:(g&&(g[0]=h),s&&(s[0]=e),e=1))}if(!e)return 3;if(g=g[0],A=A[0],u&&(d[0]!=g||I[0]!=A))return 3;null!=c&&(c[0]=p,c.offset=o-c.w,t(4294967286>o-c.w),t(c.offset==c.ha-r));break}return 0==b||7==b&&u&&null==c?(null!=i&&(i[0]|=null!=p.na&&0<p.na.length),null!=l&&(l[0]=g),null!=a&&(a[0]=A),0):b}function Hn(e,t,n){var o=t.width,r=t.height,l=0,a=0,i=o,g=r;if(t.Da=null!=e&&0<e.Da,t.Da&&(i=e.cd,g=e.bd,l=e.v,a=e.j,11>n||(l&=-2,a&=-2),0>l||0>a||0>=i||0>=g||l+i>o||a+g>r))return 0;if(t.v=l,t.j=a,t.va=l+i,t.o=a+g,t.U=i,t.T=g,t.da=null!=e&&0<e.da,t.da){if(!H(i,g,n=[e.ib],l=[e.hb]))return 0;t.ib=n[0],t.hb=l[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*o/4&&t.hb<3*r/4,t.Kb=0),1}function Fn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Yn(e,t,n,o){if(null==o||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var r=n.cd,a=n.bd,i=-2&n.v,g=-2&n.j;if(0>i||0>g||0>=r||0>=a||i+r>e||g+a>t)return 2;e=r,t=a}if(n.da){if(!H(e,t,r=[n.ib],a=[n.hb]))return 2;e=r[0],t=a[0]}}o.width=e,o.height=t;e:{var s=o.width,c=o.height;if(e=o.S,0>=s||0>=c||!(e>=Fo&&13>e))e=2;else{if(0>=o.Rd&&null==o.sd){i=a=r=t=0;var d=(g=s*zr[e])*c;if(11>e||(a=(c+1)/2*(t=(s+1)/2),12==e&&(i=(r=s)*c)),null==(c=l(d+2*a+i))){e=1;break e}o.sd=c,11>e?((s=o.f.RGBA).eb=c,s.fb=0,s.A=g,s.size=d):((s=o.f.kb).y=c,s.O=0,s.fa=g,s.Fd=d,s.f=c,s.N=0+d,s.Ab=t,s.Cd=a,s.ea=c,s.W=0+d+a,s.Db=t,s.Ed=a,12==e&&(s.F=c,s.J=0+d+2*a),s.Tc=i,s.lb=r)}if(t=1,r=o.S,a=o.width,i=o.height,r>=Fo&&13>r)if(11>r)e=o.f.RGBA,t&=(g=Math.abs(e.A))*(i-1)+a<=e.size,t&=g>=a*zr[r],t&=null!=e.eb;else{e=o.f.kb,g=(a+1)/2,d=(i+1)/2,s=Math.abs(e.fa),c=Math.abs(e.Ab);var I=Math.abs(e.Db),u=Math.abs(e.lb),C=u*(i-1)+a;t&=s*(i-1)+a<=e.Fd,t&=c*(d-1)+g<=e.Cd,t=(t&=I*(d-1)+g<=e.Ed)&s>=a&c>=g&I>=g,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==r&&(t&=u>=a,t&=C<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Fn(o)),e}var Kn=64,Mn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ln=24,En=32,zn=8,jn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];K("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return L(L(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return L(e,t[n-1])},e.Predictor7=function(e,t,n){return L(e,t[n+0])},e.Predictor8=function(e,t,n){return L(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return L(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return L(L(e,t[n-1]),L(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var o=t[n+0];return 0>=j(o>>24&255,e>>24&255,(t=t[n-1])>>24&255)+j(o>>16&255,e>>16&255,t>>16&255)+j(o>>8&255,e>>8&255,t>>8&255)+j(255&o,255&e,255&t)?o:e},e.Predictor12=function(e,t,n){var o=t[n+0];return(E((e>>24&255)+(o>>24&255)-((t=t[n-1])>>24&255))<<24|E((e>>16&255)+(o>>16&255)-(t>>16&255))<<16|E((e>>8&255)+(o>>8&255)-(t>>8&255))<<8|E((255&e)+(255&o)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var o=t[n-1];return(z((e=L(e,t[n+0]))>>24&255,o>>24&255)<<24|z(e>>16&255,o>>16&255)<<16|z(e>>8&255,o>>8&255)<<8|z(255&e,255&o))>>>0};var Dn=e.PredictorAdd0;e.PredictorAdd1=D,K("Predictor2","PredictorAdd2"),K("Predictor3","PredictorAdd3"),K("Predictor4","PredictorAdd4"),K("Predictor5","PredictorAdd5"),K("Predictor6","PredictorAdd6"),K("Predictor7","PredictorAdd7"),K("Predictor8","PredictorAdd8"),K("Predictor9","PredictorAdd9"),K("Predictor10","PredictorAdd10"),K("Predictor11","PredictorAdd11"),K("Predictor12","PredictorAdd12"),K("Predictor13","PredictorAdd13");var Tn=e.PredictorAdd2;Q("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),Q("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Pn,Un=e.ColorIndexInverseTransform,Qn=e.MapARGB,On=e.VP8LColorIndexInverseTransformAlpha,qn=e.MapAlpha,_n=e.VP8LPredictorsAdd=[];_n.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var $n,eo,to,no,oo,ro,lo,ao,io,go,so,co,Io,uo,Co,po,Ao,mo,ho,bo,fo,yo,vo,Zo,Go,So,Bo,wo,Ro=l(511),Wo=l(2041),ko=l(225),Vo=l(767),Xo=0,xo=Wo,Jo=ko,No=Vo,Ho=Ro,Fo=0,Yo=1,Ko=2,Mo=3,Lo=4,Eo=5,zo=6,jo=7,Do=8,To=9,Po=10,Uo=[2,3,7],Qo=[3,3,11],Oo=[280,256,256,256,40],qo=[0,1,1,1,0],_o=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$o=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],er=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tr=8,nr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],or=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rr=null,lr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ar=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ir=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],sr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ir=[],ur=[],Cr=[],pr=1,Ar=2,mr=[],hr=[];hn("UpsampleRgbLinePair",Gn,3),hn("UpsampleBgrLinePair",Sn,3),hn("UpsampleRgbaLinePair",kn,4),hn("UpsampleBgraLinePair",Wn,4),hn("UpsampleArgbLinePair",Rn,4),hn("UpsampleRgba4444LinePair",wn,2),hn("UpsampleRgb565LinePair",Bn,2);var br=e.UpsampleRgbLinePair,fr=e.UpsampleBgrLinePair,yr=e.UpsampleRgbaLinePair,vr=e.UpsampleBgraLinePair,Zr=e.UpsampleArgbLinePair,Gr=e.UpsampleRgba4444LinePair,Sr=e.UpsampleRgb565LinePair,Br=16,wr=1<<Br-1,Rr=-227,Wr=482,kr=6,Vr=(256<<kr)-1,Xr=0,xr=l(256),Jr=l(256),Nr=l(256),Hr=l(256),Fr=l(Wr-Rr),Yr=l(Wr-Rr);Vn("YuvToRgbRow",Gn,3),Vn("YuvToBgrRow",Sn,3),Vn("YuvToRgbaRow",kn,4),Vn("YuvToBgraRow",Wn,4),Vn("YuvToArgbRow",Rn,4),Vn("YuvToRgba4444Row",wn,2),Vn("YuvToRgb565Row",Bn,2);var Kr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Mr=[0,2,8],Lr=[8,7,6,4,4,2,2,2,1,1,1,1],Er=1;this.WebPDecodeRGBA=function(e,n,o,r,l){var a=Yo,i=new nn,g=new ae;i.ba=g,g.S=a,g.width=[g.width],g.height=[g.height];var s=g.width,c=g.height,d=new ie;if(null==d||null==e)var I=2;else t(null!=d),I=Nn(e,n,o,d.width,d.height,d.Pd,d.Qd,d.format,null);if(0!=I?s=0:(null!=s&&(s[0]=d.width[0]),null!=c&&(c[0]=d.height[0]),s=1),s){g.width=g.width[0],g.height=g.height[0],null!=r&&(r[0]=g.width),null!=l&&(l[0]=g.height);e:{if(r=new Te,(l=new on).data=e,l.w=n,l.ha=o,l.kd=1,n=[0],t(null!=l),(0==(e=Nn(l.data,l.w,l.ha,null,null,null,n,null,l))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=i),r.data=l.data,r.w=l.w+l.offset,r.ha=l.ha-l.offset,r.put=ue,r.ac=Ie,r.bc=Ce,r.ma=i,l.xa){if(null==(e=Re())){i=1;break e}if(function(e,n){var o=[0],r=[0],l=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,m(e.m,n.data,n.w,n.ha),!pe(e.m,o,r,l)){e.a=3;break t}if(e.xb=Ar,n.width=o[0],n.height=r[0],!We(o[0],r[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,r)){if(r=0==(n=Yn(r.width,r.height,i.Oa,i.ba))){t:{r=e;n:for(;;){if(null==r){r=0;break t}if(t(null!=r.s.yc),t(null!=r.s.Ya),t(0<r.s.Wb),t(null!=(o=r.l)),t(null!=(l=o.ma)),0!=r.xb){if(r.ca=l.ba,r.tb=l.tb,t(null!=r.ca),!Hn(l.Oa,o,Mo)){r.a=2;break n}if(!ke(r,o.width))break n;if(o.da)break n;if((o.da||oe(r.ca.S))&&mn(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&mn()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!x(r.s.vb,r.s.Wa.Xa)){r.a=1;break n}r.xb=0}if(!Be(r,r.V,r.Ba,r.c,r.i,o.o,ve))break n;l.Dc=r.Ma,r=1;break t}t(0!=r.a),r=0}r=!r}r&&(n=e.a)}else n=e.a}else{if(null==(e=new Pe)){i=1;break e}if(e.Fa=l.na,e.P=l.P,e.qc=l.Sa,Oe(e,r)){if(0==(n=Yn(r.width,r.height,i.Oa,i.ba))){if(e.Aa=0,o=i.Oa,t(null!=(l=e)),null!=o){if(0<(s=0>(s=o.Md)?0:100<s?255:255*s/100)){for(c=d=0;4>c;++c)12>(I=l.pb[c]).lc&&(I.ia=s*Lr[0>I.lc?0:I.lc]>>3),d|=I.ia;d&&(alert("todo:VP8InitRandom"),l.ia=1)}l.Ga=o.Id,100<l.Ga?l.Ga=100:0>l.Ga&&(l.Ga=0)}$e(e,r)||(n=e.a)}}else n=e.a}0==n&&null!=i.Oa&&i.Oa.fd&&(n=Fn(i.ba))}i=n}a=0!=i?null:11>a?g.f.RGBA.eb:g.f.kb.y}else a=null;return a};var zr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function s(e,t){for(var n="",o=0;o<4;o++)n+=String.fromCharCode(e[t++]);return n}function c(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new g;var I=[0],u=[0],C=[],p=new g,A=e,m=function(e,t){var n={},o=0,r=!1,l=0,a=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(d(e,t+=4),t+=8;t<e.length;){var i=s(e,t),g=d(e,t+=4);t+=4;var I=g+(1&g);switch(i){case"VP8 ":case"VP8L":void 0===n.frames[o]&&(n.frames[o]={}),(p=n.frames[o]).src_off=r?a:t-8,p.src_size=l+g+8,o++,r&&(r=!1,l=0,a=0);break;case"VP8X":(p=n.header={}).feature_flags=e[t];var u=t+4;p.canvas_width=1+c(e,u),u+=3,p.canvas_height=1+c(e,u),u+=3;break;case"ALPH":r=!0,l=I+8,a=t-8;break;case"ANIM":(p=n.header).bgcolor=d(e,t),u=t+4,p.loop_count=(A=e)[(m=u)+0]|A[m+1]<<8,u+=2;break;case"ANMF":var C,p;(p=n.frames[o]={}).offset_x=2*c(e,t),t+=3,p.offset_y=2*c(e,t),t+=3,p.width=1+c(e,t),t+=3,p.height=1+c(e,t),t+=3,p.duration=c(e,t),t+=3,C=e[t++],p.dispose=1&C,p.blend=C>>1&1}"ANMF"!=i&&(t+=I)}var A,m;return n}}(A,0);m.response=A,m.rgbaoutput=!0,m.dataurl=!1;var h=m.header?m.header:null,b=m.frames?m.frames:null;if(h){h.loop_counter=h.loop_count,I=[h.canvas_height],u=[h.canvas_width];for(var f=0;f<b.length&&0!=b[f].blend;f++);}var y=b[0],v=p.WebPDecodeRGBA(A,y.src_off,y.src_size,u,I);y.rgba=v,y.imgwidth=u[0],y.imgheight=I[0];for(var Z=0;Z<u[0]*I[0]*4;Z++)C[Z]=v[Z];return this.width=u,this.height=I,this.data=C,this}!function(e){var t=function(t,o,g,s){var c=4,d=l;switch(s){case e.image_compression.FAST:c=1,d=r;break;case e.image_compression.MEDIUM:c=6,d=a;break;case e.image_compression.SLOW:c=9,d=i}var I=gl(t=n(t,o,g,d),{level:c});return e.__addimage__.arrayBufferToBinaryString(I)},n=function(e,t,n,o){for(var r,l,a,i=e.length/t,g=new Uint8Array(e.length+i),d=s(),I=0;I<i;I+=1){if(a=I*t,r=e.subarray(a,a+t),o)g.set(o(r,n,l),a+I);else{for(var u,C=d.length,p=[];u<C;u+=1)p[u]=d[u](r,n,l);var A=c(p.concat());g.set(p[A],a+I)}l=r}return g},o=function(e){var t=Array.apply([],e);return t.unshift(0),t},r=function(e,t){var n,o=[],r=e.length;o[0]=1;for(var l=0;l<r;l+=1)n=e[l-t]||0,o[l+1]=e[l]-n+256&255;return o},l=function(e,t,n){var o,r=[],l=e.length;r[0]=2;for(var a=0;a<l;a+=1)o=n&&n[a]||0,r[a+1]=e[a]-o+256&255;return r},a=function(e,t,n){var o,r,l=[],a=e.length;l[0]=3;for(var i=0;i<a;i+=1)o=e[i-t]||0,r=n&&n[i]||0,l[i+1]=e[i]+256-(o+r>>>1)&255;return l},i=function(e,t,n){var o,r,l,a,i=[],s=e.length;i[0]=4;for(var c=0;c<s;c+=1)o=e[c-t]||0,r=n&&n[c]||0,l=n&&n[c-t]||0,a=g(o,r,l),i[c+1]=e[c]-a+256&255;return i},g=function(e,t,n){if(e===t&&t===n)return e;var o=Math.abs(t-n),r=Math.abs(e-n),l=Math.abs(e+t-n-n);return o<=r&&o<=l?e:r<=l?t:n},s=function(){return[o,r,l,a,i]},c=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,o,r,l){var a,i,g,s,c,d,I,u,C,p,A,m,h,b,f,y=this.decode.FLATE_DECODE,v="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(g=new ni(n)).imgData,i=g.bits,a=g.colorSpace,c=g.colors,-1!==[4,6].indexOf(g.colorType)){if(8===g.bits){C=(u=32==g.pixelBitlength?new Uint32Array(g.decodePixels().buffer):16==g.pixelBitlength?new Uint16Array(g.decodePixels().buffer):new Uint8Array(g.decodePixels().buffer)).length,A=new Uint8Array(C*g.colors),p=new Uint8Array(C);var Z,G=g.pixelBitlength-g.bits;for(b=0,f=0;b<C;b++){for(h=u[b],Z=0;Z<G;)A[f++]=h>>>Z&255,Z+=g.bits;p[b]=h>>>Z&255}}if(16===g.bits){C=(u=new Uint32Array(g.decodePixels().buffer)).length,A=new Uint8Array(C*(32/g.pixelBitlength)*g.colors),p=new Uint8Array(C*(32/g.pixelBitlength)),m=g.colors>1,b=0,f=0;for(var S=0;b<C;)h=u[b++],A[f++]=h>>>0&255,m&&(A[f++]=h>>>16&255,h=u[b++],A[f++]=h>>>0&255),p[S++]=h>>>16&255;i=8}l!==e.image_compression.NONE?(n=t(A,g.width*g.colors,g.colors,l),I=t(p,g.width,1,l)):(n=A,I=p,y=void 0)}if(3===g.colorType&&(a=this.color_spaces.INDEXED,d=g.palette,g.transparency.indexed)){var B=g.transparency.indexed,w=0;for(b=0,C=B.length;b<C;++b)w+=B[b];if((w/=255)===C-1&&-1!==B.indexOf(0))s=[B.indexOf(0)];else if(w!==C){for(u=g.decodePixels(),p=new Uint8Array(u.length),b=0,C=u.length;b<C;b++)p[b]=B[u[b]];I=t(p,g.width,1)}}var R=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(l);return y===this.decode.FLATE_DECODE&&(v="/Predictor "+R+" "),v+="/Colors "+c+" /BitsPerComponent "+i+" /Columns "+g.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:r,data:n,index:o,filter:y,decodeParameters:v,transparency:s,palette:d,sMask:I,predictor:R,width:g.width,height:g.height,bitsPerComponent:i,colorSpace:a}}}}(jl.API),function(e){e.processGIF89A=function(t,n,o,r){var l=new oi(t),a=l.width,i=l.height,g=[];l.decodeAndBlitFrameRGBA(0,g);var s={data:g,width:a,height:i},c=new li(100).encode(s,100);return e.processJPEG.call(this,c,n,o,r)},e.processGIF87A=e.processGIF89A}(jl.API),ai.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:o,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ai.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){ul.log("bit decode error:"+e)}},ai.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var o=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var l=this.datav.getUint8(this.pos++,!0),a=o*this.width*4+8*r*4,i=0;i<8&&8*r+i<this.width;i++){var g=this.palette[l>>7-i&1];this.data[a+4*i]=g.blue,this.data[a+4*i+1]=g.green,this.data[a+4*i+2]=g.red,this.data[a+4*i+3]=255}0!==n&&(this.pos+=4-n)}},ai.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var l=this.datav.getUint8(this.pos++,!0),a=o*this.width*4+2*r*4,i=l>>4,g=15&l,s=this.palette[i];if(this.data[a]=s.blue,this.data[a+1]=s.green,this.data[a+2]=s.red,this.data[a+3]=255,2*r+1>=this.width)break;s=this.palette[g],this.data[a+4]=s.blue,this.data[a+4+1]=s.green,this.data[a+4+2]=s.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},ai.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var r=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*o;if(r<this.palette.length){var a=this.palette[r];this.data[l]=a.red,this.data[l+1]=a.green,this.data[l+2]=a.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}0!==e&&(this.pos+=4-e)}},ai.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(l&t)/t*255|0,i=(l>>5&t)/t*255|0,g=(l>>10&t)/t*255|0,s=l>>15?255:0,c=o*this.width*4+4*r;this.data[c]=g,this.data[c+1]=i,this.data[c+2]=a,this.data[c+3]=s}this.pos+=e}},ai.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var r=this.bottom_up?o:this.height-1-o,l=0;l<this.width;l++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&t)/t*255|0,g=(a>>5&n)/n*255|0,s=(a>>11)/t*255|0,c=r*this.width*4+4*l;this.data[c]=s,this.data[c+1]=g,this.data[c+2]=i,this.data[c+3]=255}this.pos+=e}},ai.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=l,this.data[a+1]=r,this.data[a+2]=o,this.data[a+3]=255}this.pos+=this.width%4}},ai.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=l,this.data[i+1]=r,this.data[i+2]=o,this.data[i+3]=a}},ai.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,o,r){var l=new ai(t,!1),a=l.width,i=l.height,g={data:l.getData(),width:a,height:i},s=new li(100).encode(g,100);return e.processJPEG.call(this,s,n,o,r)}}(jl.API),ii.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,o,r){var l=new ii(t),a=l.width,i=l.height,g={data:l.getData(),width:a,height:i},s=new li(100).encode(g,100);return e.processJPEG.call(this,s,n,o,r)}}(jl.API),jl.API.processRGBA=function(e,t,n){for(var o=e.data,r=o.length,l=new Uint8Array(r/4*3),a=new Uint8Array(r/4),i=0,g=0,s=0;s<r;s+=4){var c=o[s],d=o[s+1],I=o[s+2],u=o[s+3];l[i++]=c,l[i++]=d,l[i++]=I,a[g++]=u}var C=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:C,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},jl.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},qa=jl.API,_a=qa.getCharWidthsArray=function(e,t){var n,o,r=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),i=t.widths?t.widths:r.metadata.Unicode.widths,g=i.fof?i.fof:1,s=t.kerning?t.kerning:r.metadata.Unicode.kerning,c=s.fof?s.fof:1,d=!1!==t.doKerning,I=0,u=e.length,C=0,p=i[0]||g,A=[];for(n=0;n<u;n++)o=e.charCodeAt(n),"function"==typeof r.metadata.widthOfString?A.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(o))+a*(1e3/l)||0)/1e3):(I=d&&"object"===(0,Cr.A)(s[o])&&!isNaN(parseInt(s[o][C],10))?s[o][C]/c:0,A.push((i[o]||p)/g+I)),C=o;return A},$a=qa.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),o=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return qa.processArabic&&(e=qa.processArabic(e)),"function"==typeof o.metadata.widthOfString?o.metadata.widthOfString(e,n,r)/n:_a.apply(this,arguments).reduce((function(e,t){return e+t}),0)},ei=function(e,t,n,o){for(var r=[],l=0,a=e.length,i=0;l!==a&&i+t[l]<n;)i+=t[l],l++;r.push(e.slice(0,l));var g=l;for(i=0;l!==a;)i+t[l]>o&&(r.push(e.slice(g,l)),i=0,g=l),i+=t[l],l++;return g!==l&&r.push(e.slice(g,l)),r},ti=function(e,t,n){n||(n={});var o,r,l,a,i,g,s,c=[],d=[c],I=n.textIndent||0,u=0,C=0,p=e.split(" "),A=_a.apply(this,[" ",n])[0];if(g=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var m=Array(g).join(" "),h=[];p.map((function(e){(e=e.split(/\s*\n/)).length>1?h=h.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):h.push(e[0])})),p=h,g=$a.apply(this,[m,n])}for(l=0,a=p.length;l<a;l++){var b=0;if(o=p[l],g&&"\n"==o[0]&&(o=o.substr(1),b=1),I+u+(C=(r=_a.apply(this,[o,n])).reduce((function(e,t){return e+t}),0))>t||b){if(C>t){for(i=ei.apply(this,[o,r,t-(I+u),t]),c.push(i.shift()),c=[i.pop()];i.length;)d.push([i.shift()]);C=r.slice(o.length-(c[0]?c[0].length:0)).reduce((function(e,t){return e+t}),0)}else c=[o];d.push(c),I=C+g,u=A}else c.push(o),I+=u+C,u=A}return s=g?function(e,t){return(t?m:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(s)},qa.splitTextToSize=function(e,t,n){var o,r=(n=n||{}).fontSize||this.internal.getFontSize(),l=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);o=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/r;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,l.lineIndent=n.lineIndent;var i,g,s=[];for(i=0,g=o.length;i<g;i++)s=s.concat(ti.apply(this,[o[i],a,l]));return s},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},o={},r=0;r<16;r++)n[t[r]]="0123456789abcdef"[r],o["0123456789abcdef"[r]]=t[r];var l=function(e){return"0x"+parseInt(e,10).toString(16)},a=e.__fontmetrics__.compress=function(e){var t,n,r,i,g=["{"];for(var s in e){if(t=e[s],isNaN(parseInt(s,10))?n="'"+s+"'":(s=parseInt(s,10),n=(n=l(s).slice(2)).slice(0,-1)+o[n.slice(-1)]),"number"==typeof t)t<0?(r=l(t).slice(3),i="-"):(r=l(t).slice(2),i=""),r=i+r.slice(0,-1)+o[r.slice(-1)];else{if("object"!==(0,Cr.A)(t))throw new Error("Don't know what to do with value type "+(0,Cr.A)(t)+".");r=a(t)}g.push(n+r)}return g.push("}"),g.join("")},i=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,o,r,l,a={},i=1,g=a,s=[],c="",d="",I=e.length-1,u=1;u<I;u+=1)"'"==(l=e[u])?t?(r=t.join(""),t=void 0):t=[]:t?t.push(l):"{"==l?(s.push([g,r]),g={},r=void 0):"}"==l?((o=s.pop())[0][o[1]]=g,r=void 0,g=o[0]):"-"==l?i=-1:void 0===r?n.hasOwnProperty(l)?(c+=n[l],r=parseInt(c,16)*i,i=1,c=""):c+=l:n.hasOwnProperty(l)?(d+=n[l],g[r]=parseInt(d,16)*i,i=1,r=void 0,d=""):d+=l;return a},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:i("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},s={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},c={Unicode:{"Courier-Oblique":i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":i("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":i("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":i("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:i("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:i("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":i("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:i("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":i("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":i("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":i("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=c.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var o=s.Unicode[t.postScriptName];o&&(t.metadata.Unicode.encoding=o,t.encoding=o.codePages[0])}])}(jl.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),o=0;o<t;o++)n[o]=e.charCodeAt(o);return n};e.API.events.push(["addFont",function(n){var o=void 0,r=n.font,l=n.instance;if(!r.isStandardFont){if(void 0===l)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(o=!1===l.existsFileInVFS(r.postScriptName)?l.loadFile(r.postScriptName):l.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(ml(o)),n.metadata=e.API.TTFFont.open(o),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,o)}}])}(jl),function(){function e(){return(dl.canvg?Promise.resolve(dl.canvg):n.e(455).then(n.bind(n,8455))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}jl.API.addSvgAsImage=function(t,n,o,r,l,a,i,g){if(isNaN(n)||isNaN(o))throw ul.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(l))throw ul.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var s=document.createElement("canvas");s.width=r,s.height=l;var c=s.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,s.width,s.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},I=this;return e().then((function(e){return e.fromString(c,t,d)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(d)})).then((function(){I.addImage(s.toDataURL("image/jpeg",1),n,o,r,l,i,g)}))}}(),jl.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var r=0;r<this.internal.pages[o].length;r++)this.internal.pages[o][r]=this.internal.pages[o][r].replace(t,n);return this},jl.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var o,r,l,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},i=Object.keys(a),g=[],s=0,c=0,d=0;function I(e,t){var n,o=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(o=!0);return o}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var u=i.length;for(d=0;d<u;d+=1)n[i[d]].value=n[i[d]].defaultValue,n[i[d]].explicitSet=!1}if("object"===(0,Cr.A)(e))for(r in e)if(l=e[r],I(i,r)&&void 0!==l){if("boolean"===n[r].type&&"boolean"==typeof l)n[r].value=l;else if("name"===n[r].type&&I(n[r].valueSet,l))n[r].value=l;else if("integer"===n[r].type&&Number.isInteger(l))n[r].value=l;else if("array"===n[r].type){for(s=0;s<l.length;s+=1)if(o=!0,1===l[s].length&&"number"==typeof l[s][0])g.push(String(l[s]-1));else if(l[s].length>1){for(c=0;c<l[s].length;c+=1)"number"!=typeof l[s][c]&&(o=!1);!0===o&&g.push([l[s][0]-1,l[s][1]-1].join(" "))}n[r].value="["+g.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+o.length+r.length+t.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+o+r+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,o){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(jl.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,o=t.metadata.Unicode.widths,r=["","0","00","000","0000"],l=[""],a=0,i=e.length;a<i;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==o.indexOf(n)&&(o.push(n),o.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return l.join("");n=n.toString(16),l.push(r[4-n.length],n)}return l.join("")},o=function(e){var t,n,o,r,l,a,i;for(l="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",o=[],a=0,i=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;a<i;a++)t=n[a],o.length>=100&&(l+="\n"+o.length+" beginbfchar\n"+o.join("\n")+"\nendbfchar",o=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(r=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),o.push("<"+t+"><"+r+">"));return o.length&&(l+="\n"+o.length+" beginbfchar\n"+o.join("\n")+"\nendbfchar\n"),l+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,r=t.out,l=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var i=n.metadata.Unicode.widths,g=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),s="",c=0;c<g.length;c++)s+=String.fromCharCode(g[c]);var d=l();a({data:s,addLength1:!0,objectId:d}),r("endobj");var I=l();a({data:o(n.metadata.toUnicode),addLength1:!0,objectId:I}),r("endobj");var u=l();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+Yl(n.fontName)),r("/FontFile2 "+d+" 0 R"),r("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var C=l();r("<<"),r("/Type /Font"),r("/BaseFont /"+Yl(n.fontName)),r("/FontDescriptor "+u+" 0 R"),r("/W "+e.API.PDFObject.convert(i)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=l(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+I+" 0 R"),r("/BaseFont /"+Yl(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+C+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,r=t.out,l=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var i=n.metadata.rawData,g="",s=0;s<i.length;s++)g+=String.fromCharCode(i[s]);var c=l();a({data:g,addLength1:!0,objectId:c}),r("endobj");var d=l();a({data:o(n.metadata.toUnicode),addLength1:!0,objectId:d}),r("endobj");var I=l();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+c+" 0 R"),r("/Flags 96"),r("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+Yl(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=l();for(var u=0;u<n.metadata.hmtx.widths.length;u++)n.metadata.hmtx.widths[u]=parseInt(n.metadata.hmtx.widths[u]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+Yl(n.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(t)}]);var r=function(e){var t,o=e.text||"",r=e.x,l=e.y,a=e.options||{},i=e.mutex||{},g=i.pdfEscape,s=i.activeFontKey,c=i.fonts,d=s,I="",u=0,C="",p=c[d].encoding;if("Identity-H"!==c[d].encoding)return{text:o,x:r,y:l,options:a,mutex:i};for(C=o,d=s,Array.isArray(o)&&(C=o[0]),u=0;u<C.length;u+=1)c[d].metadata.hasOwnProperty("cmap")&&(t=c[d].metadata.cmap.unicode.codeMap[C[u].charCodeAt(0)]),t||C[u].charCodeAt(0)<256&&c[d].metadata.hasOwnProperty("Unicode")?I+=C[u]:I+="";var A="";return parseInt(d.slice(1))<14||"WinAnsiEncoding"===p?A=g(I,d).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===p&&(A=n(I,c[d])),i.isHex=!0,{text:A,x:r,y:l,options:a,mutex:i}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],o={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var l=0;for(l=0;l<t.length;l+=1)Array.isArray(t[l])&&3===t[l].length?n.push([r(Object.assign({},o,{text:t[l][0]})).text,t[l][1],t[l][2]]):n.push(r(Object.assign({},o,{text:t[l]})).text);e.text=n}else e.text=r(Object.assign({},o,{text:t})).text}])}(jl),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(jl.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,o,r,l,a,i,g,s=t,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},u={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,m=0;this.__bidiEngine__={};var h=function(e){var t=e.charCodeAt(),n=t>>8,o=u[n];return void 0!==o?s[256*o+(255&t)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=h(e.charAt(n))))return!1;if("R"===t)return!0}return!1},f=function(e,t,a,i){var g,s,c,d,I=t[i];switch(I){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(I="AN");break;case"AL":A=!0,I="R";break;case"WS":case"BN":I="N";break;case"CS":i<1||i+1>=t.length||"EN"!==(g=a[i-1])&&"AN"!==g||"EN"!==(s=t[i+1])&&"AN"!==s?I="N":A&&(s="AN"),I=s===g?s:"N";break;case"ES":I="EN"===(g=i>0?a[i-1]:"B")&&i+1<t.length&&"EN"===t[i+1]?"EN":"N";break;case"ET":if(i>0&&"EN"===a[i-1]){I="EN";break}if(A){I="N";break}for(c=i+1,d=t.length;c<d&&"ET"===t[c];)c++;I=c<d&&"EN"===t[c]?"EN":"N";break;case"NSM":if(r&&!l){for(d=t.length,c=i+1;c<d&&"NSM"===t[c];)c++;if(c<d){var u=e[i],C=u>=1425&&u<=2303||64286===u;if(g=t[c],C&&("R"===g||"AL"===g)){I="R";break}}}I=i<1||"B"===(g=t[i-1])?"N":a[i-1];break;case"B":A=!1,n=!0,I=m;break;case"S":o=!0,I="N"}return I},y=function(e,t,n){var o=e.split("");return n&&v(o,n,{hiLevel:m}),o.reverse(),t&&t.reverse(),o.join("")},v=function(e,t,r){var l,a,i,g,s,u=-1,C=e.length,p=0,b=[],y=m?d:c,v=[];for(A=!1,n=!1,o=!1,a=0;a<C;a++)v[a]=h(e[a]);for(i=0;i<C;i++){if(s=p,b[i]=f(e,v,b,i),l=240&(p=y[s][I[b[i]]]),p&=15,t[i]=g=y[p][5],l>0)if(16===l){for(a=u;a<i;a++)t[a]=1;u=-1}else u=-1;if(y[p][6])-1===u&&(u=i);else if(u>-1){for(a=u;a<i;a++)t[a]=g;u=-1}"B"===v[i]&&(t[i]=0),r.hiLevel|=g}o&&function(e,t,n){for(var o=0;o<n;o++)if("S"===e[o]){t[o]=m;for(var r=o-1;r>=0&&"WS"===e[r];r--)t[r]=m}}(v,t,C)},Z=function(e,t,o,r,l){if(!(l.hiLevel<e)){if(1===e&&1===m&&!n)return t.reverse(),void(o&&o.reverse());for(var a,i,g,s,c=t.length,d=0;d<c;){if(r[d]>=e){for(g=d+1;g<c&&r[g]>=e;)g++;for(s=d,i=g-1;s<i;s++,i--)a=t[s],t[s]=t[i],t[i]=a,o&&(a=o[s],o[s]=o[i],o[i]=a);d=g}d++}}},G=function(e,t,n){var o=e.split(""),r={hiLevel:m};return n||(n=[]),v(o,n,r),function(e,t,n){if(0!==n.hiLevel&&g)for(var o,r=0;r<e.length;r++)1===t[r]&&(o=C.indexOf(e[r]))>=0&&(e[r]=C[o+1])}(o,n,r),Z(2,o,t,n,r),Z(1,o,t,n,r),o.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===l&&(l=b(e)),void 0===i&&(i=b(e))}(e,t),r||!a||i)if(r&&a&&l^i)m=l?1:0,e=y(e,t,n);else if(!r&&a&&i)m=l?1:0,e=G(e,t,n),e=y(e,t);else if(!r||l||a||i){if(r&&!a&&l^i)e=y(e,t),l?(m=0,e=G(e,t,n)):(m=1,e=G(e,t,n),e=y(e,t));else if(r&&l&&!a&&i)m=1,e=G(e,t,n),e=y(e,t);else if(!r&&!a&&l^i){var o=g;l?(m=1,e=G(e,t,n),m=0,g=!1,e=G(e,t,n),g=o):(m=0,e=G(e,t,n),e=y(e,t),m=1,g=!1,e=G(e,t,n),g=o,e=y(e,t))}}else m=0,e=G(e,t,n);else m=l?1:0,e=G(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(r=e.isInputVisual,a=e.isOutputVisual,l=e.isInputRtl,i=e.isOutputRtl,g=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var o=e.options||{};e.mutex,o.lang;var r=[];if(o.isInputVisual="boolean"!=typeof o.isInputVisual||o.isInputVisual,n.setOptions(o),"[object Array]"===Object.prototype.toString.call(t)){var l=0;for(r=[],l=0;l<t.length;l+=1)"[object Array]"===Object.prototype.toString.call(t[l])?r.push([n.doBidiReorder(t[l][0]),t[l][1],t[l][2]]):r.push([n.doBidiReorder(t[l])]);e.text=r}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(jl),jl.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new si(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Ri(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ci(this.contents),this.head=new ui(this),this.name=new fi(this),this.cmap=new pi(this),this.toUnicode={},this.hhea=new Ai(this),this.maxp=new yi(this),this.hmtx=new vi(this),this.post=new hi(this),this.os2=new mi(this),this.loca=new wi(this),this.glyf=new Gi(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,o,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,o,r;for(r=[],t=0,n=(o=this.bbox).length;t<n;t++)e=o[t],r.push(Math.round(e*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),0!=(32768&(t=o>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var o,r,l,a;for(l=0,r=0,a=(e=""+e).length;0<=a?r<a:r>a;r=0<=a?++r:--r)o=e.charCodeAt(r),l+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/t)||0;return l*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var gi,si=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,o;for(o=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,o,r,l,a,i;return e=this.readByte(),t=this.readByte(),n=this.readByte(),o=this.readByte(),r=this.readByte(),l=this.readByte(),a=this.readByte(),i=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^r)+65536*(255^l)+256*(255^a)+(255^i)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*o+16777216*r+65536*l+256*a+i},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,o,r;for(r=[],n=0,o=e.length;n<o;n++)t=e[n],r.push(this.writeByte(t));return r},e}(),ci=function(){var e;function t(e){var t,n,o;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,o=this.tableCount;0<=o?n<o:n>o;n=0<=o?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,o,r,l,a,i,g,s,c,d,I,u,C;for(C in I=Object.keys(t).length,i=Math.log(2),c=16*Math.floor(Math.log(I)/i),l=Math.floor(c/i),s=16*I-c,(o=new si).writeInt(this.scalarType),o.writeShort(I),o.writeShort(c),o.writeShort(l),o.writeShort(s),r=16*I,g=o.pos+r,a=null,u=[],t)for(d=t[C],o.writeString(C),o.writeInt(e(d)),o.writeInt(g),o.writeInt(d.length),u=u.concat(d),"head"===C&&(a=g),g+=d.length;g%4;)u.push(0),g++;return o.write(u),n=2981146554-e(o.data),o.pos=a+8,o.writeUInt32(n),o.data},e=function(e){var t,n,o,r;for(e=Zi.call(e);e.length%4;)e.push(0);for(o=new si(e),n=0,t=0,r=e.length;t<r;t=t+=4)n+=o.readUInt32();return 4294967295&n},t}(),di={}.hasOwnProperty,Ii=function(e,t){for(var n in t)di.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};gi=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ui=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new si).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),Ci=function(){function e(e,t){var n,o,r,l,a,i,g,s,c,d,I,u,C,p,A,m,h;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=e.readByte();break;case 4:for(I=e.readUInt16(),d=I/2,e.pos+=6,r=function(){var t,n;for(n=[],i=t=0;0<=d?t<d:t>d;i=0<=d?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,C=function(){var t,n;for(n=[],i=t=0;0<=d?t<d:t>d;i=0<=d?++t:--t)n.push(e.readUInt16());return n}(),g=function(){var t,n;for(n=[],i=t=0;0<=d?t<d:t>d;i=0<=d?++t:--t)n.push(e.readUInt16());return n}(),s=function(){var t,n;for(n=[],i=t=0;0<=d?t<d:t>d;i=0<=d?++t:--t)n.push(e.readUInt16());return n}(),o=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],i=t=0;0<=o?t<o:t>o;i=0<=o?++t:--t)n.push(e.readUInt16());return n}(),i=A=0,h=r.length;A<h;i=++A)for(p=r[i],n=m=u=C[i];u<=p?m<=p:m>=p;n=u<=p?++m:--m)0===s[i]?l=n+g[i]:0!==(l=a[s[i]/2+(n-u)-(d-i)]||0)&&(l+=g[i]),this.codeMap[n]=65535&l}e.pos=c}return e.encode=function(e,t){var n,o,r,l,a,i,g,s,c,d,I,u,C,p,A,m,h,b,f,y,v,Z,G,S,B,w,R,W,k,V,X,x,J,N,H,F,Y,K,M,L,E,z,j,D,T,P;switch(W=new si,l=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(C=0,p=function(){var e=[];for(u=0;u<256;++u)e.push(0);return e}(),m={0:0},r={},k=0,J=l.length;k<J;k++)null==m[j=e[o=l[k]]]&&(m[j]=++C),r[o]={old:e[o],new:m[e[o]]},p[o]=m[e[o]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(p),{charMap:r,subtable:W.data,maxGlyphID:C+1};case"unicode":for(w=[],c=[],h=0,m={},n={},A=g=null,V=0,N=l.length;V<N;V++)null==m[f=e[o=l[V]]]&&(m[f]=++h),n[o]={old:f,new:m[f]},a=m[f]-o,null!=A&&a===g||(A&&c.push(A),w.push(o),g=a),A=o;for(A&&c.push(A),c.push(65535),w.push(65535),S=2*(G=w.length),Z=2*Math.pow(Math.log(G)/Math.LN2,2),d=Math.log(Z/2)/Math.LN2,v=2*G-Z,i=[],y=[],I=[],u=X=0,H=w.length;X<H;u=++X){if(B=w[u],s=c[u],65535===B){i.push(0),y.push(0);break}if(B-(R=n[B].new)>=32768)for(i.push(0),y.push(2*(I.length+G-u)),o=x=B;B<=s?x<=s:x>=s;o=B<=s?++x:--x)I.push(n[o].new);else i.push(R-B),y.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*G+2*I.length),W.writeUInt16(0),W.writeUInt16(S),W.writeUInt16(Z),W.writeUInt16(d),W.writeUInt16(v),E=0,F=c.length;E<F;E++)o=c[E],W.writeUInt16(o);for(W.writeUInt16(0),z=0,Y=w.length;z<Y;z++)o=w[z],W.writeUInt16(o);for(D=0,K=i.length;D<K;D++)a=i[D],W.writeUInt16(a);for(T=0,M=y.length;T<M;T++)b=y[T],W.writeUInt16(b);for(P=0,L=I.length;P<L;P++)C=I[P],W.writeUInt16(C);return{charMap:n,subtable:W.data,maxGlyphID:h+1}}},e}(),pi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,o;for(e.pos=this.offset,this.version=e.readUInt16(),o=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=o?n<o:n>o;n=0<=o?++n:--n)t=new Ci(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,o;return null==t&&(t="macroman"),n=Ci.encode(e,t),(o=new si).writeUInt16(0),o.writeUInt16(1),n.table=o.data.concat(n.subtable),n},e}(),Ai=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),mi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),hi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,o;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(n=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],o=[];e.pos<this.offset+this.length;)t=e.readByte(),o.push(this.names.push(e.readString(t)));return o;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,o;for(o=[],r=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;r=0<=n?++t:--t)o.push(e.readUInt32());return o}.call(this)}},e}(),bi=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},fi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,o,r,l,a,i,g,s,c,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(i={},r=s=0,c=n.length;s<c;r=++s)o=n[r],e.pos=o.offset,g=e.readString(o.length),l=new bi(g,o),null==i[d=o.nameID]&&(i[d]=[]),i[o.nameID].push(l);this.strings=i,this.copyright=i[0],this.fontFamily=i[1],this.fontSubfamily=i[2],this.uniqueSubfamily=i[3],this.fontName=i[4],this.version=i[5];try{this.postscriptName=i[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=i[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=i[7],this.manufacturer=i[8],this.designer=i[9],this.description=i[10],this.vendorUrl=i[11],this.designerUrl=i[12],this.license=i[13],this.licenseUrl=i[14],this.preferredFamily=i[15],this.preferredSubfamily=i[17],this.compatibleFull=i[18],this.sampleText=i[19]},e}(),yi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),vi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,o,r,l,a,i;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],t=n=0;0<=o?n<o:n>o;t=0<=o?++n:--n)r.push(e.readInt16());return r}(),this.widths=function(){var e,t,n,o;for(o=[],e=0,t=(n=this.metrics).length;e<t;e++)r=n[e],o.push(r.advance);return o}.call(this),n=this.widths[this.widths.length-1],i=[],t=l=0;0<=o?l<o:l>o;t=0<=o?++l:--l)i.push(this.widths.push(n));return i},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Zi=[].slice,Gi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,o,r,l,a,i,g,s,c;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,n=r.indexOf(e),0===(o=r.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,l=(a=new si(t.read(o))).readShort(),g=a.readShort(),c=a.readShort(),i=a.readShort(),s=a.readShort(),this.cache[e]=-1===l?new Bi(a,g,c,i,s):new Si(a,l,g,c,i,s),this.cache[e]))},e.prototype.encode=function(e,t,n){var o,r,l,a,i;for(l=[],r=[],a=0,i=t.length;a<i;a++)o=e[t[a]],r.push(l.length),o&&(l=l.concat(o.encode(n)));return r.push(l.length),{table:l,offsets:r}},e}(),Si=function(){function e(e,t,n,o,r,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=o,this.xMax=r,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Bi=function(){function e(e,t,n,o,r){var l,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=o,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;a=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&a;)l.pos+=1&a?4:2,128&a?l.pos+=8:64&a?l.pos+=4:8&a&&(l.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new si(Zi.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),wi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ii(e,gi),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,o;for(o=[],n=0,t=this.length;n<t;n+=2)o.push(2*e.readUInt16());return o}.call(this):function(){var t,o;for(o=[],n=0,t=this.length;n<t;n+=4)o.push(e.readUInt32());return o}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),o=0,r=0,l=0;l<n.length;++l)if(n[l]=o,r<t.length&&t[r]==l){++r,n[l]=o;var a=this.offsets[l],i=this.offsets[l+1]-a;i>0&&(o+=i)}for(var g=new Array(4*n.length),s=0;s<n.length;++s)g[4*s+3]=255&n[s],g[4*s+2]=(65280&n[s])>>8,g[4*s+1]=(16711680&n[s])>>16,g[4*s]=(4278190080&n[s])>>24;return g},e}(),Ri=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,o,r;for(t in o=this.font.cmap.tables[0].codeMap,e={},r=this.subset)n=r[t],e[t]=o[n];return e},e.prototype.glyphsFor=function(e){var t,n,o,r,l,a,i;for(o={},l=0,a=e.length;l<a;l++)o[r=e[l]]=this.font.glyf.glyphFor(r);for(r in t=[],o)(null!=(n=o[r])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(r in i=this.glyphsFor(t))n=i[r],o[r]=n;return o},e.prototype.encode=function(e,t){var n,o,r,l,a,i,g,s,c,d,I,u,C,p,A;for(o in n=pi.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),I={0:0},A=n.charMap)I[(i=A[o]).old]=i.new;for(u in d=n.maxGlyphID,l)u in I||(I[u]=d++);return s=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(I),c=Object.keys(s).sort((function(e,t){return e-t})),C=function(){var e,t,n;for(n=[],e=0,t=c.length;e<t;e++)a=c[e],n.push(s[a]);return n}(),r=this.font.glyf.encode(l,C,I),g=this.font.loca.encode(r.offsets,C),p={cmap:this.font.cmap.raw(),glyf:r.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();function Wi(e,t,n,o,r){o=o||{};var l=r.internal.scaleFactor,a=r.internal.getFontSize()/l,i=a*(r.getLineHeightFactor?r.getLineHeightFactor():1.15),g="",s=1;if("middle"!==o.valign&&"bottom"!==o.valign&&"center"!==o.halign&&"right"!==o.halign||(s=(g="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=a*(2-1.15),"middle"===o.valign?n-=s/2*i:"bottom"===o.valign&&(n-=s*i),"center"===o.halign||"right"===o.halign){var c=a;if("center"===o.halign&&(c*=.5),g&&s>=1){for(var d=0;d<g.length;d++)r.text(g[d],t-r.getStringUnitWidth(g[d])*c,n),n+=i;return r}t-=r.getStringUnitWidth(e)*c}return"justify"===o.halign?r.text(e,t,n,{maxWidth:o.maxWidth||100,align:"justify"}):r.text(e,t,n),r}jl.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var o,r,l,a;if(Array.isArray(n))return"["+function(){var e,r,l;for(l=[],e=0,r=n.length;e<r;e++)o=n[e],l.push(t.convert(o));return l}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(r in l=["<<"],n)a=n[r],l.push("/"+r+" "+t.convert(a));return l.push(">>"),l.join("\n")}return""+n},t}();var ki={},Vi=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:ki=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,n){var o,r,l;void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var a=this.jsPDFDocument.internal.getFont(),i=a.fontStyle,g=a.fontName;if(t.font&&(g=t.font),t.fontStyle){i=t.fontStyle;var s=this.getFontList()[g];s&&-1===s.indexOf(i)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(s[0]),i=s[0])}if(this.jsPDFDocument.setFont(g,i),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var c=e.unifyColor(t.fillColor);c&&(o=this.jsPDFDocument).setFillColor.apply(o,c),(c=e.unifyColor(t.textColor))&&(r=this.jsPDFDocument).setTextColor.apply(r,c),(c=e.unifyColor(t.lineColor))&&(l=this.jsPDFDocument).setDrawColor.apply(l,c),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,o,r){return this.jsPDFDocument.rect(e,t,n,o,r)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return ki||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Xi=function(e,t){return Xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Xi(e,t)};function xi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Xi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}"function"===typeof SuppressedError&&SuppressedError;var Ji=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return xi(t,e),t}(Array);function Ni(e,t,n){n.applyStyles(t,!0);var o=(Array.isArray(e)?e:[e]).map((function(e){return n.getTextWidth(e)})).reduce((function(e,t){return Math.max(e,t)}),0);return o}function Hi(e,t,n,o){var r=t.settings.tableLineWidth,l=t.settings.tableLineColor;e.applyStyles({lineWidth:r,lineColor:l});var a=Fi(r,!1);a&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),o.y-n.y,a)}function Fi(e,t){var n=e>0,o=t||0===t;return n&&o?"DF":n?"S":o?"F":null}function Yi(e,t){var n,o,r,l;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(n=e.left)&&void 0!==n?n:t,top:null!==(o=e.top)&&void 0!==o?o:t,right:null!==(r=e.right)&&void 0!==r?r:t,bottom:null!==(l=e.bottom)&&void 0!==l?l:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}function Ki(e,t){var n=Yi(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function Mi(e,t,n,o,r){var l={},a=96/72,i=Li(t,(function(e){return r.getComputedStyle(e).backgroundColor}));null!=i&&(l.fillColor=i);var g=Li(t,(function(e){return r.getComputedStyle(e).color}));null!=g&&(l.textColor=g);var s=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],o=96/(72/t),r=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,l=n.map((function(e){return parseInt(e||"0")/o})),a=Yi(l,0);r>a.top&&(a.top=r);r>a.bottom&&(a.bottom=r);return a}(o,n);s&&(l.cellPadding=s);var c="borderTopColor",d=a*n,I=o.borderTopWidth;if(o.borderBottomWidth===I&&o.borderRightWidth===I&&o.borderLeftWidth===I){var u=(parseFloat(I)||0)/d;u&&(l.lineWidth=u)}else l.lineWidth={top:(parseFloat(o.borderTopWidth)||0)/d,right:(parseFloat(o.borderRightWidth)||0)/d,bottom:(parseFloat(o.borderBottomWidth)||0)/d,left:(parseFloat(o.borderLeftWidth)||0)/d},l.lineWidth.top||(l.lineWidth.right?c="borderRightColor":l.lineWidth.bottom?c="borderBottomColor":l.lineWidth.left&&(c="borderLeftColor"));var C=Li(t,(function(e){return r.getComputedStyle(e)[c]}));null!=C&&(l.lineColor=C);var p=["left","right","center","justify"];-1!==p.indexOf(o.textAlign)&&(l.halign=o.textAlign),-1!==(p=["middle","bottom","top"]).indexOf(o.verticalAlign)&&(l.valign=o.verticalAlign);var A=parseInt(o.fontSize||"");isNaN(A)||(l.fontSize=A/a);var m=function(e){var t="";("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold");"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic");return t}(o);m&&(l.fontStyle=m);var h=(o.fontFamily||"").toLowerCase();return-1!==e.indexOf(h)&&(l.font=h),l}function Li(e,t){var n=Ei(e,t);if(!n)return null;var o=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!o||!Array.isArray(o))return null;var r=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])];return 0===parseInt(o[4])||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Ei(e,t){var n=t(e);return"rgba(0, 0, 0, 0)"===n||"transparent"===n||"initial"===n||"inherit"===n?null==e.parentElement?null:Ei(e.parentElement,t):n}function zi(e,t,n,o,r){var l,a,i;void 0===o&&(o=!1),void 0===r&&(r=!1),i="string"===typeof t?n.document.querySelector(t):t;var g=Object.keys(e.getFontList()),s=e.scaleFactor(),c=[],d=[],I=[];if(!i)return console.error("Html table could not be found with input: ",t),{head:c,body:d,foot:I};for(var u=0;u<i.rows.length;u++){var C=i.rows[u],p=null===(a=null===(l=null===C||void 0===C?void 0:C.parentElement)||void 0===l?void 0:l.tagName)||void 0===a?void 0:a.toLowerCase(),A=ji(g,s,n,C,o,r);A&&("thead"===p?c.push(A):"tfoot"===p?I.push(A):d.push(A))}return{head:c,body:d,foot:I}}function ji(e,t,n,o,r,l){for(var a=new Ji(o),i=0;i<o.cells.length;i++){var g=o.cells[i],s=n.getComputedStyle(g);if(r||"none"!==s.display){var c=void 0;l&&(c=Mi(e,g,t,s,n)),a.push({rowSpan:g.rowSpan,colSpan:g.colSpan,styles:c,_element:g,content:Di(g)})}}var d=n.getComputedStyle(o);if(a.length>0&&(r||"none"!==d.display))return a}function Di(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map((function(e){return e.trim()})).join("\n"),t.innerText||t.textContent||""}function Ti(e,t,n,o,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(e),a=1;a<arguments.length;a++){var i=arguments[a];if(null!=i)for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(l[g]=i[g])}return l}function Pi(e,t){var n=new Vi(e),o=n.getDocumentOptions(),r=n.getGlobalOptions();!function(e,t,n){for(var o=0,r=[e,t,n];o<r.length;o++){var l=r[o];l&&"object"!==typeof l&&console.error("The options parameter should be of type object, is: "+typeof l),l.startY&&"number"!==typeof l.startY&&(console.error("Invalid value for startY option",l.startY),delete l.startY)}}(r,o,t);var l,a=Ti({},r,o,t);"undefined"!==typeof window&&(l=window);var i=function(e,t,n){for(var o={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(r){if("columnStyles"===r){var l=e[r],a=t[r],i=n[r];o.columnStyles=Ti({},l,a,i)}else{var g=[e,t,n].map((function(e){return e[r]||{}}));o[r]=Ti({},g[0],g[1],g[2])}},l=0,a=Object.keys(o);l<a.length;l++){r(a[l])}return o}(r,o,t),g=function(e,t,n){for(var o={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,l=[e,t,n];r<l.length;r++){var a=l[r];a.didParseCell&&o.didParseCell.push(a.didParseCell),a.willDrawCell&&o.willDrawCell.push(a.willDrawCell),a.didDrawCell&&o.didDrawCell.push(a.didDrawCell),a.willDrawPage&&o.willDrawPage.push(a.willDrawPage),a.didDrawPage&&o.didDrawPage.push(a.didDrawPage)}return o}(r,o,t),s=function(e,t){var n,o,r,l,a,i,g,s,c,d,I,u,C,p,A=Yi(t.margin,40/e.scaleFactor()),m=null!==(n=function(e,t){var n=e.getLastAutoTable(),o=e.scaleFactor(),r=e.pageNumber(),l=!1;if(n&&n.startPageNumber){l=n.startPageNumber+n.pageNumber-1===r}if("number"===typeof t)return t;if((null==t||!1===t)&&l&&null!=(null===n||void 0===n?void 0:n.finalY))return n.finalY+20/o;return null}(e,t.startY))&&void 0!==n?n:A.top;C=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(o=t.showFoot)&&void 0!==o?o:"everyPage";p=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(r=t.showHead)&&void 0!==r?r:"everyPage";var h=null!==(l=t.useCss)&&void 0!==l&&l,b=t.theme||(h?"plain":"striped"),f=!!t.horizontalPageBreak,y=null!==(a=t.horizontalPageBreakRepeat)&&void 0!==a?a:null;return{includeHiddenHtml:null!==(i=t.includeHiddenHtml)&&void 0!==i&&i,useCss:h,theme:b,startY:m,margin:A,pageBreak:null!==(g=t.pageBreak)&&void 0!==g?g:"auto",rowPageBreak:null!==(s=t.rowPageBreak)&&void 0!==s?s:"auto",tableWidth:null!==(c=t.tableWidth)&&void 0!==c?c:"auto",showHead:p,showFoot:C,tableLineWidth:null!==(d=t.tableLineWidth)&&void 0!==d?d:0,tableLineColor:null!==(I=t.tableLineColor)&&void 0!==I?I:200,horizontalPageBreak:f,horizontalPageBreakRepeat:y,horizontalPageBreakBehaviour:null!==(u=t.horizontalPageBreakBehaviour)&&void 0!==u?u:"afterAllRows"}}(n,a),c=function(e,t,n){var o=t.head||[],r=t.body||[],l=t.foot||[];if(t.html){var a=t.includeHiddenHtml;if(n){var i=zi(e,t.html,n,a,t.useCss)||{};o=i.head||o,r=i.body||o,l=i.foot||o}else console.error("Cannot parse html in non browser environment")}var g=t.columns||function(e,t,n){var o=e[0]||t[0]||n[0]||[],r=[];return Object.keys(o).filter((function(e){return"_element"!==e})).forEach((function(e){var t,n=1;"object"!==typeof(t=Array.isArray(o)?o[parseInt(e)]:o[e])||Array.isArray(t)||(n=(null===t||void 0===t?void 0:t.colSpan)||1);for(var l=0;l<n;l++){var a={dataKey:Array.isArray(o)?r.length:e+(l>0?"_".concat(l):"")};r.push(a)}})),r}(o,r,l);return{columns:g,head:o,body:r,foot:l}}(n,a,l);return{id:t.tableId,content:c,hooks:g,styles:i,settings:s}}var Ui,Qi=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()},Oi=function(e){function t(t,n,o,r,l,a){var i=e.call(this,t,n,a)||this;return i.cell=o,i.row=r,i.column=l,i.section=r.section,i}return xi(t,e),t}(Qi),qi=function(){function e(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce((function(t,n){return t+n.getMaxCellHeight(e)}),0)},e.prototype.getFootHeight=function(e){return this.foot.reduce((function(t,n){return t+n.getMaxCellHeight(e)}),0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,o,r,l){for(var a=0,i=t;a<i.length;a++){var g=!1===(0,i[a])(new Oi(e,this,n,o,r,l));if(n.text=Array.isArray(n.text)?n.text:[n.text],g)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,o=this.hooks.didDrawPage;n<o.length;n++){(0,o[n])(new Qi(e,this,t))}},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,o=this.hooks.willDrawPage;n<o.length;n++){(0,o[n])(new Qi(e,this,t))}},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce((function(e,t){return e+t.wrappedWidth}),0);var t=this.settings.margin;return e-t.left-t.right},e}(),_i=function(){function e(e,t,n,o,r){void 0===r&&(r=!1),this.height=0,this.raw=e,e instanceof Ji&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=o,this.spansMultiplePages=r}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce((function(e,n){var o;return Math.max(e,(null===(o=t.cells[n.index])||void 0===o?void 0:o.height)||0)}),0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter((function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1})).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce((function(e,o){var r=n.cells[o.index];if(!r)return 0;var l=t.getLineHeight(r.styles.fontSize),a=r.padding("vertical")+l;return a>e?a:e}),0)},e}(),$i=function(){function e(e,t,n){var o;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var r=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,r=null!==(o=e.content)&&void 0!==o?o:e,e._element&&(this.raw=e._element));var l=null!=r?""+r:"";this.text=l.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var o=this.width-this.padding("horizontal");t=this.x+o/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var n=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=Yi(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}(),eg=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,o=e.allRows();n<o.length;n++){var r=o[n].cells[this.index];r&&"number"===typeof r.styles.cellWidth&&(t=Math.max(t,r.styles.cellWidth))}return t},e}();function tg(e,t){!function(e,t){var n=e.scaleFactor(),o=t.settings.horizontalPageBreak,r=Ki(e,t);t.allRows().forEach((function(l){for(var a=0,i=t.columns;a<i.length;a++){var g=i[a],s=l.cells[g.index];if(s){var c=t.hooks.didParseCell;t.callCellHooks(e,c,s,l,g,null);var d=s.padding("horizontal");s.contentWidth=Ni(s.text,s.styles,e)+d;var I=Ni(s.text.join(" ").split(/[^\S\u00A0]+/),s.styles,e);if(s.minReadableWidth=I+s.padding("horizontal"),"number"===typeof s.styles.cellWidth)s.minWidth=s.styles.cellWidth,s.wrappedWidth=s.styles.cellWidth;else if("wrap"===s.styles.cellWidth||!0===o)s.contentWidth>r?(s.minWidth=r,s.wrappedWidth=r):(s.minWidth=s.contentWidth,s.wrappedWidth=s.contentWidth);else{var u=10/n;s.minWidth=s.styles.minCellWidth||u,s.wrappedWidth=s.contentWidth,s.minWidth>s.wrappedWidth&&(s.wrappedWidth=s.minWidth)}}}})),t.allRows().forEach((function(e){for(var n=0,o=t.columns;n<o.length;n++){var r=o[n],l=e.cells[r.index];if(l&&1===l.colSpan)r.wrappedWidth=Math.max(r.wrappedWidth,l.wrappedWidth),r.minWidth=Math.max(r.minWidth,l.minWidth),r.minReadableWidth=Math.max(r.minReadableWidth,l.minReadableWidth);else{var a=t.styles.columnStyles[r.dataKey]||t.styles.columnStyles[r.index]||{},i=a.cellWidth||a.minCellWidth;i&&"number"===typeof i&&(r.minWidth=i,r.wrappedWidth=i)}l&&(l.colSpan>1&&!r.minWidth&&(r.minWidth=l.minWidth),l.colSpan>1&&!r.wrappedWidth&&(r.wrappedWidth=l.minWidth))}}))}(e,t);var n=[],o=0;t.columns.forEach((function(e){var r=e.getMaxCustomCellWidth(t);r?e.width=r:(e.width=e.wrappedWidth,n.push(e)),o+=e.width}));var r=t.getWidth(e.pageSize().width)-o;r&&(r=ng(n,r,(function(e){return Math.max(e.minReadableWidth,e.minWidth)}))),r&&(r=ng(n,r,(function(e){return e.minWidth}))),r=Math.abs(r),!t.settings.horizontalPageBreak&&r>.1/e.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var o=t[n],r=null,l=0,a=0,i=0;i<e.columns.length;i++){var g=e.columns[i];if((a-=1)>1&&e.columns[i+1])l+=g.width,delete o.cells[g.index];else if(r){var s=r;delete o.cells[g.index],r=null,s.width=g.width+l}else{if(!(s=o.cells[g.index]))continue;if(a=s.colSpan,l=0,s.colSpan>1){r=s,l+=g.width;continue}s.width=g.width+l}}}(t),function(e,t){for(var n={count:0,height:0},o=0,r=e.allRows();o<r.length;o++){for(var l=r[o],a=0,i=e.columns;a<i.length;a++){var g=i[a],s=l.cells[g.index];if(s){t.applyStyles(s.styles,!0);var c=s.width-s.padding("horizontal");if("linebreak"===s.styles.overflow)s.text=t.splitTextToSize(s.text,c+1/t.scaleFactor(),{fontSize:s.styles.fontSize});else if("ellipsize"===s.styles.overflow)s.text=og(s.text,c,s.styles,t,"...");else if("hidden"===s.styles.overflow)s.text=og(s.text,c,s.styles,t,"");else if("function"===typeof s.styles.overflow){var d=s.styles.overflow(s.text,c);s.text="string"===typeof d?[d]:d}s.contentHeight=s.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var I=s.contentHeight/s.rowSpan;s.rowSpan>1&&n.count*n.height<I*s.rowSpan?n={height:I,count:s.rowSpan}:n&&n.count>0&&n.height>I&&(I=n.height),I>l.height&&(l.height=I)}}n.count--}}(t,e),function(e){for(var t={},n=1,o=e.allRows(),r=0;r<o.length;r++)for(var l=o[r],a=0,i=e.columns;a<i.length;a++){var g=i[a],s=t[g.index];if(n>1)n--,delete l.cells[g.index];else if(s)s.cell.height+=l.height,n=s.cell.colSpan,delete l.cells[g.index],s.left--,s.left<=1&&delete t[g.index];else{var c=l.cells[g.index];if(!c)continue;if(c.height=l.height,c.rowSpan>1){var d=o.length-r,I=c.rowSpan>d?d:c.rowSpan;t[g.index]={cell:c,left:I,row:l}}}}}(t)}function ng(e,t,n){for(var o=t,r=e.reduce((function(e,t){return e+t.wrappedWidth}),0),l=0;l<e.length;l++){var a=e[l],i=o*(a.wrappedWidth/r),g=a.width+i,s=n(a),c=g<s?s:g;t-=c-a.width,a.width=c}if(t=Math.round(1e10*t)/1e10){var d=e.filter((function(e){return!(t<0)||e.width>n(e)}));d.length&&(t=ng(d,t,n))}return t}function og(e,t,n,o,r){return e.map((function(e){return function(e,t,n,o,r){var l=1e4*o.scaleFactor();if(t=Math.ceil(t*l)/l,t>=Ni(e,n,o))return e;for(;t<Ni(e+r,n,o)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+r}(e,t,n,o,r)}))}function rg(e,t){var n=new Vi(e),o=function(e,t){var n=e.content,o=function(e){return e.map((function(e,t){var n,o;return o="object"===typeof e&&null!==(n=e.dataKey)&&void 0!==n?n:t,new eg(o,e,t)}))}(n.columns);if(0===n.head.length){(r=ag(o,"head"))&&n.head.push(r)}if(0===n.foot.length){var r;(r=ag(o,"foot"))&&n.foot.push(r)}var l=e.settings.theme,a=e.styles;return{columns:o,head:lg("head",n.head,o,a,l,t),body:lg("body",n.body,o,a,l,t),foot:lg("foot",n.foot,o,a,l,t)}}(t,n.scaleFactor()),r=new qi(t,o);return tg(n,r),n.applyStyles(n.userStyles),r}function lg(e,t,n,o,r,l){var a={},i=t.map((function(t,i){for(var g=0,s={},c=0,d=0,I=0,u=n;I<u.length;I++){var C=u[I];if(null==a[C.index]||0===a[C.index].left)if(0===d){var p=void 0,A={};"object"!==typeof(p=Array.isArray(t)?t[C.index-c-g]:t[C.dataKey])||Array.isArray(p)||(A=(null===p||void 0===p?void 0:p.styles)||{});var m=ig(e,C,i,r,o,l,A),h=new $i(p,m,e);s[C.dataKey]=h,s[C.index]=h,d=h.colSpan-1,a[C.index]={left:h.rowSpan-1,times:d}}else d--,c++;else a[C.index].left--,d=a[C.index].times,g++}return new _i(t,i,e,s)}));return i}function ag(e,t){var n={};return e.forEach((function(e){if(null!=e.raw){var o=function(e,t){if("head"===e){if("object"===typeof t)return t.header||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=o&&(n[e.dataKey]=o)}})),Object.keys(n).length>0?n:null}function ig(e,t,n,o,r,l,a){var i,g={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[o];"head"===e?i=r.headStyles:"body"===e?i=r.bodyStyles:"foot"===e&&(i=r.footStyles);var s=Ti({},g.table,g[e],r.styles,i),c=r.columnStyles[t.dataKey]||r.columnStyles[t.index]||{},d="body"===e?c:{},I="body"===e&&n%2===0?Ti({},g.alternateRow,r.alternateRowStyles):{},u=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}(l),C=Ti({},u,s,I,d);return Ti(C,a)}function gg(e,t,n){var o;void 0===n&&(n={});var r=Ki(e,t),l=new Map,a=[],i=[],g=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?g=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(g=[t.settings.horizontalPageBreakRepeat]),g.forEach((function(e){var n=t.columns.find((function(t){return t.dataKey===e||t.index===e}));n&&!l.has(n.index)&&(l.set(n.index,!0),a.push(n.index),i.push(t.columns[n.index]),r-=n.wrappedWidth)}));for(var s=!0,c=null!==(o=null===n||void 0===n?void 0:n.start)&&void 0!==o?o:0;c<t.columns.length;)if(l.has(c))c++;else{var d=t.columns[c].wrappedWidth;if(!(s||r>=d))break;s=!1,a.push(c),i.push(t.columns[c]),r-=d,c++}return{colIndexes:a,columns:i,lastIndex:c-1}}function sg(e,t){var n=t.settings,o=n.startY,r=n.margin,l={x:r.left,y:o},a=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),i=o+r.bottom+a;"avoid"===n.pageBreak&&(i+=t.body.reduce((function(e,t){return e+t.height}),0));var g=new Vi(e);("always"===n.pageBreak||null!=n.startY&&i>g.pageSize().height)&&(bg(g),l.y=r.top),t.callWillDrawPageHooks(g,l);var s=Ti({},l);t.startPageNumber=g.pageNumber(),n.horizontalPageBreak?function(e,t,n,o){var r=function(e,t){for(var n=[],o=0;o<t.columns.length;o++){var r=gg(e,t,{start:o});r.columns.length&&(n.push(r),o=r.lastIndex)}return n}(e,t),l=t.settings;if("afterAllRows"===l.horizontalPageBreakBehaviour)r.forEach((function(r,l){e.applyStyles(e.userStyles),l>0?hg(e,t,n,o,r.columns,!0):cg(e,t,o,r.columns),function(e,t,n,o,r){e.applyStyles(e.userStyles),t.body.forEach((function(l,a){var i=a===t.body.length-1;Cg(e,t,l,i,n,o,r)}))}(e,t,n,o,r.columns),Ig(e,t,o,r.columns)}));else for(var a=-1,i=r[0],g=function(){var l=a;if(i){e.applyStyles(e.userStyles);var g=i.columns;a>=0?hg(e,t,n,o,g,!0):cg(e,t,o,g),l=dg(e,t,a+1,o,g),Ig(e,t,o,g)}var s=l-a;r.slice(1).forEach((function(r){e.applyStyles(e.userStyles),hg(e,t,n,o,r.columns,!0),dg(e,t,a+1,o,r.columns,s),Ig(e,t,o,r.columns)})),a=l};a<t.body.length-1;)g()}(g,t,s,l):(g.applyStyles(g.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach((function(e){return pg(g,t,e,l,t.columns)})),g.applyStyles(g.userStyles),t.body.forEach((function(e,n){var o=n===t.body.length-1;Cg(g,t,e,o,s,l,t.columns)})),g.applyStyles(g.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach((function(e){return pg(g,t,e,l,t.columns)}))),Hi(g,t,s,l),t.callEndPageHooks(g,l),t.finalY=l.y,e.lastAutoTable=t,g.applyStyles(g.userStyles)}function cg(e,t,n,o){var r=t.settings;e.applyStyles(e.userStyles),"firstPage"!==r.showHead&&"everyPage"!==r.showHead||t.head.forEach((function(r){return pg(e,t,r,n,o)}))}function dg(e,t,n,o,r,l){e.applyStyles(e.userStyles),l=null!==l&&void 0!==l?l:t.body.length;var a=Math.min(n+l,t.body.length),i=-1;return t.body.slice(n,a).forEach((function(l,a){var g=n+a===t.body.length-1,s=mg(e,t,g,o);l.canEntireRowFit(s,r)&&(pg(e,t,l,o,r),i=n+a)})),i}function Ig(e,t,n,o){var r=t.settings;e.applyStyles(e.userStyles),"lastPage"!==r.showFoot&&"everyPage"!==r.showFoot||t.foot.forEach((function(r){return pg(e,t,r,n,o)}))}function ug(e,t,n){var o=n.getLineHeight(e.styles.fontSize),r=e.padding("vertical"),l=Math.floor((t-r)/o);return Math.max(0,l)}function Cg(e,t,n,o,r,l,a){var i=mg(e,t,o,l);if(n.canEntireRowFit(i,a))pg(e,t,n,l,a);else if(function(e,t,n,o){var r=e.pageSize().height,l=o.settings.margin,a=r-(l.top+l.bottom);"body"===t.section&&(a-=o.getHeadHeight(o.columns)+o.getFootHeight(o.columns));var i=t.getMinimumRowHeight(o.columns,e),g=i<n;if(i>a)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!g)return!1;var s=t.hasRowSpan(o.columns);return t.getMaxCellHeight(o.columns)>a?(s&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!s&&"avoid"!==o.settings.rowPageBreak}(e,n,i,t)){var g=function(e,t,n,o){var r={};e.spansMultiplePages=!0,e.height=0;for(var l=0,a=0,i=n.columns;a<i.length;a++){var g=i[a];if(A=e.cells[g.index]){Array.isArray(A.text)||(A.text=[A.text]),(p=Ti(p=new $i(A.raw,A.styles,A.section),A)).text=[];var s=ug(A,t,o);A.text.length>s&&(p.text=A.text.splice(s,A.text.length));var c=o.scaleFactor(),d=o.getLineHeightFactor();A.contentHeight=A.getContentHeight(c,d),A.contentHeight>=t&&(A.contentHeight=t,p.styles.minCellHeight-=t),A.contentHeight>e.height&&(e.height=A.contentHeight),p.contentHeight=p.getContentHeight(c,d),p.contentHeight>l&&(l=p.contentHeight),r[g.index]=p}}var I=new _i(e.raw,-1,e.section,r,!0);I.height=l;for(var u=0,C=n.columns;u<C.length;u++){var p,A;g=C[u],(p=I.cells[g.index])&&(p.height=I.height),(A=e.cells[g.index])&&(A.height=e.height)}return I}(n,i,t,e);pg(e,t,n,l,a),hg(e,t,r,l,a),Cg(e,t,g,o,r,l,a)}else hg(e,t,r,l,a),Cg(e,t,n,o,r,l,a)}function pg(e,t,n,o,r){o.x=t.settings.margin.left;for(var l=0,a=r;l<a.length;l++){var i=a[l],g=n.cells[i.index];if(g)if(e.applyStyles(g.styles),g.x=o.x,g.y=o.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,g,n,i,o)){Ag(e,g,o);var s=g.getTextPos();Wi(g.text,s.x,s.y,{halign:g.styles.halign,valign:g.styles.valign,maxWidth:Math.ceil(g.width-g.padding("left")-g.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,g,n,i,o),o.x+=i.width}else o.x+=i.width;else o.x+=i.width}o.y+=n.height}function Ag(e,t,n){var o=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof o.lineWidth){var r=Fi(o.lineWidth,o.fillColor);r&&e.rect(t.x,n.y,t.width,t.height,r)}else"object"===typeof o.lineWidth&&(o.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,o){var r,l,a,i;o.top&&(r=n.x,l=n.y,a=n.x+t.width,i=n.y,o.right&&(a+=.5*o.right),o.left&&(r-=.5*o.left),g(o.top,r,l,a,i));o.bottom&&(r=n.x,l=n.y+t.height,a=n.x+t.width,i=n.y+t.height,o.right&&(a+=.5*o.right),o.left&&(r-=.5*o.left),g(o.bottom,r,l,a,i));o.left&&(r=n.x,l=n.y,a=n.x,i=n.y+t.height,o.top&&(l-=.5*o.top),o.bottom&&(i+=.5*o.bottom),g(o.left,r,l,a,i));o.right&&(r=n.x+t.width,l=n.y,a=n.x+t.width,i=n.y+t.height,o.top&&(l-=.5*o.top),o.bottom&&(i+=.5*o.bottom),g(o.right,r,l,a,i));function g(t,n,o,r,l){e.getDocument().setLineWidth(t),e.getDocument().line(n,o,r,l,"S")}}(e,t,n,o.lineWidth))}function mg(e,t,n,o){var r=t.settings.margin.bottom,l=t.settings.showFoot;return("everyPage"===l||"lastPage"===l&&n)&&(r+=t.getFootHeight(t.columns)),e.pageSize().height-o.y-r}function hg(e,t,n,o,r,l){void 0===r&&(r=[]),void 0===l&&(l=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||l||t.foot.forEach((function(n){return pg(e,t,n,o,r)})),t.callEndPageHooks(e,o);var a=t.settings.margin;Hi(e,t,n,o),bg(e),t.pageNumber++,o.x=a.left,o.y=a.top,n.y=a.top,t.callWillDrawPageHooks(e,o),"everyPage"===t.settings.showHead&&(t.head.forEach((function(n){return pg(e,t,n,o,r)})),e.applyStyles(e.userStyles))}function bg(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}try{if("undefined"!==typeof window&&window){var fg=window,yg=fg.jsPDF||(null===(Ui=fg.jspdf)||void 0===Ui?void 0:Ui.jsPDF);yg&&function(e){e.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sg(this,rg(this,Pi(this,e[0]))),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(e,t,n,o){Wi(e,t,n,o,this)},e.API.autoTableSetDefaults=function(e){return Vi.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){Vi.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var n;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var o=zi(new Vi(this),e,window,t,!1),r=o.head,l=o.body,a=(null===(n=r[0])||void 0===n?void 0:n.map((function(e){return e.content})))||[];return{columns:a,rows:l,data:l}}}(yg)}}catch(sE){console.error("Could not apply autoTable plugin",sE)}const vg="https://astrobsm-oracle-backend.onrender.com/api/v1",Zg="/logo192.png",Gg=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)([]),[i,g]=(0,o.useState)([]),[s]=(0,o.useState)(.5),[c,d]=(0,o.useState)(0),[I,u]=(0,o.useState)(0),[C,p]=(0,o.useState)(0),[A,m]=(0,o.useState)(!1),[h,b]=(0,o.useState)(null),[f,y]=(0,o.useState)(""),v=te();(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(vg,"/customers")),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){t([])}})(),(async()=>{try{const e=await fetch("".concat(vg,"/products")),t=await e.json();a(Array.isArray(t)?t:[])}catch(sE){a([])}})()}),[]),(0,o.useEffect)((()=>{const e=i.reduce(((e,t)=>{var n;return e+t.quantity*((null===(n=t.product)||void 0===n?void 0:n.unit_price)||0)}),0),t=e*s/100;d(e),u(t),p(e+t)}),[i,s]);const Z=(e,t,n)=>{const o=[...i];if("product"===t){const r=l.find((e=>e.id===parseInt(n)));o[e][t]=r||""}else o[e][t]=n;g(o)},G=async t=>{var o;const r=new jl({orientation:"portrait",unit:"mm",format:[58,150]});let l=null;try{const e=await fetch(Zg),t=await e.blob(),n=new window.FileReader,o=new Promise((e=>{n.onloadend=()=>e(n.result),n.readAsDataURL(t)}));l=await o,r.addImage(l,"PNG",14,4,30,12,void 0,"FAST")}catch(gE){}let a=18;r.setFontSize(10),r.text("Bonnesante Medicals",29,a,{align:"center"}),a+=5,r.setFontSize(7),r.text("No 17A Isuofia/6B Peace Avenue, Federal Housing TransEkulu",29,a,{align:"center"}),a+=4,r.text("Bank: MONIEPOINT 8259518195 | Access 1379643548",29,a,{align:"center"}),a+=4,r.text("Account Name: BONNESANTE MEDICALS",29,a,{align:"center"}),a+=5,r.setFontSize(9),r.text("paid"===t?"Payment Receipt":"Invoice",29,a,{align:"center"}),a+=6,r.setFontSize(7),r.text("Customer: ".concat((null===(o=e.find((e=>e.id===parseInt(n))))||void 0===o?void 0:o.name)||""),4,a),r.text("Date: ".concat((new Date).toLocaleDateString()),38,a),a+=4,r.setDrawColor(150),r.setLineWidth(.3),r.line(2,a,56,a),a+=2;const g=i.map(((e,t)=>{var n,o,r,l;return[t+1,(null===(n=e.product)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.slice(0,12))||"",e.quantity,((null===(r=e.product)||void 0===r?void 0:r.unit_price)||0).toFixed(2),((e.quantity||0)*((null===(l=e.product)||void 0===l?void 0:l.unit_price)||0)).toFixed(2)]}));!function(e,t){sg(e,rg(e,Pi(e,t)))}(r,{head:[["#","Product","Qty","Price","Total"]],body:g,startY:a,margin:{left:2,right:2},styles:{fontSize:7,cellPadding:1},headStyles:{fillColor:[142,68,173],textColor:255,halign:"center"},bodyStyles:{halign:"center"},theme:"grid",tableWidth:54});let d=r.lastAutoTable?r.lastAutoTable.finalY:a+4*g.length;return d+=2,r.setFontSize(8),r.text("Subtotal: \u20a6".concat(c.toFixed(2)),4,d),r.text("VAT (".concat(s,"%): \u20a6").concat(I.toFixed(2)),4,d+4),r.setFontSize(11),r.setFont(void 0,"bold"),r.text("TOTAL: \u20a6".concat(C.toFixed(2)),29,d+10,{align:"center"}),r.setFont(void 0,"normal"),r.setDrawColor(150),r.setLineWidth(.3),r.line(2,d+12,56,d+12),"paid"===t&&(r.setFontSize(10),r.setTextColor(0,128,0),r.text("PAID",29,d+17,{align:"center"}),r.setTextColor(0,0,0)),b(r),y("paid"===t?"receipt":"invoice"),m(!0),l},S=async t=>{const o=await G(t);await async function(t){var o;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const l=new Date,a={invoice_number:"INV-".concat(l.getFullYear()).concat(String(l.getMonth()+1).padStart(2,"0")).concat(String(l.getDate()).padStart(2,"0"),"-").concat(l.getHours()).concat(l.getMinutes()).concat(l.getSeconds()),customer_name:(null===(o=e.find((e=>e.id===parseInt(n))))||void 0===o?void 0:o.name)||"",total_amount:C,vat:I,status:"paid"===t?"paid":"unpaid",items:i.map((e=>{var t,n;return{product_id:null===(t=e.product)||void 0===t?void 0:t.id,quantity:e.quantity,price:null===(n=e.product)||void 0===n?void 0:n.unit_price}})),date:l.toISOString().split("T")[0],logo_url:r||Zg,pdf_url:null};try{const e=await fetch("".concat(vg,"/invoices"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){const t=await e.text();console.error("Failed to save invoice:",t)}}catch(jr){console.error("Error saving invoice:",jr)}}(t,o)};return(0,ao.jsxs)("div",{className:"generate-invoice-container",children:[(0,ao.jsx)("img",{src:Zg,alt:"Company Logo",style:{display:"block",margin:"0 auto 10px",maxWidth:100,maxHeight:60}}),(0,ao.jsx)("h1",{children:"Generate Invoice"}),(0,ao.jsxs)("div",{className:"company-details",children:[(0,ao.jsx)("h2",{children:"Bonnesante Medicals"}),(0,ao.jsx)("p",{children:"Head Office: No 17A Isuofia/6B Peace Avenue, Federal Housing TransEkulu"}),(0,ao.jsx)("p",{children:"Bank Name: MONIEPOINT"}),(0,ao.jsx)("p",{children:"Account Name: BONNESANTE MEDICALS"}),(0,ao.jsx)("p",{children:"Account Number: 8259518195"}),(0,ao.jsx)("p",{children:"Bank Name: Access Bank"}),(0,ao.jsx)("p",{children:"Account Name: BONNESANTE MEDICALS"}),(0,ao.jsx)("p",{children:"Account Number: 1379643548"})]}),(0,ao.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,ao.jsxs)("label",{children:["Customer:",(0,ao.jsxs)("select",{value:n,onChange:e=>r(e.target.value),required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select a customer"}),0===e.length&&(0,ao.jsx)("option",{disabled:!0,children:"No customers found"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsx)("p",{children:(0,ao.jsx)("a",{href:"#",onClick:()=>v("/register-customer"),children:"Register a new customer"})}),(0,ao.jsxs)("div",{className:"product-list",children:[i.map(((e,t)=>{var n;return(0,ao.jsxs)("div",{className:"product-item",children:[(0,ao.jsxs)("select",{value:(null===(n=e.product)||void 0===n?void 0:n.id)||"",onChange:e=>Z(t,"product",e.target.value),children:[(0,ao.jsx)("option",{value:"",children:"Select Product"}),0===l.length&&(0,ao.jsx)("option",{disabled:!0,children:"No products found"}),l.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,ao.jsx)("input",{type:"number",value:e.quantity,onChange:e=>Z(t,"quantity",parseInt(e.target.value)||0),placeholder:"Quantity"})]},t)})),(0,ao.jsx)("button",{type:"button",onClick:()=>{g([...i,{product:"",quantity:0}])},children:"Add Product"})]}),(0,ao.jsxs)("p",{children:["Subtotal: \u20a6",c.toFixed(2)]}),(0,ao.jsxs)("p",{children:["VAT (",s,"%): \u20a6",I.toFixed(2)]}),(0,ao.jsx)("p",{children:(0,ao.jsxs)("b",{children:["Total Amount: \u20a6",C.toFixed(2)]})}),(0,ao.jsx)("button",{type:"button",onClick:()=>S("unpaid"),children:"Submit as Unpaid (Generate Invoice PDF)"}),(0,ao.jsx)("button",{type:"button",onClick:()=>S("paid"),children:"Submit as Paid (Generate Payment Receipt PDF)"})]}),A&&(0,ao.jsxs)("div",{className:"pdf-download-modal",children:[(0,ao.jsxs)("p",{children:["receipt"===f?"Payment receipt":"Invoice"," generated!"]}),(0,ao.jsx)("button",{onClick:()=>{if(h){var t,o;const r=(null===(t=e.find((e=>e.id===parseInt(n))))||void 0===t||null===(o=t.name)||void 0===o?void 0:o.replace(/\s+/g,"_"))||"customer",l=(new Date).toISOString().split("T")[0],a="".concat("receipt"===f?"payment_receipt":"invoice","_").concat(r,"_").concat(l,".pdf");h.save(a),m(!1)}},children:"Download PDF"})]})]})};function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sg.apply(null,arguments)}var Bg=n(5173);const wg=parseInt(o.version,10),Rg=e=>{if(wg>=19){var t;const n=t=>{var n;return e(t,null!==(n=t.ref)&&void 0!==n?n:null)};return n.displayName=null!==(t=e.displayName)&&void 0!==t?t:e.name,n}return o.forwardRef(e)};function Wg(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}function kg(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=kg(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const Vg=function(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=kg(e))&&(o&&(o+=" "),o+=t);return o};function Xg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=o.useRef(void 0),l=o.useCallback((e=>{const n=t.map((t=>{if(null==t)return null;if("function"===typeof t){const n=t,o=n(e);return"function"===typeof o?o:()=>{n(null)}}return t.current=e,()=>{t.current=null}}));return()=>{n.forEach((e=>null===e||void 0===e?void 0:e()))}}),t);return o.useMemo((()=>t.every((e=>null==e))?null:e=>{r.current&&(r.current(),r.current=void 0),null!=e&&(r.current=l(e))}),t)}function xg(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.forEach((e=>t.searchParams.append("args[]",e))),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function Jg(e){if("string"!==typeof e)throw new Error(xg(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Ng(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const o={};for(const r in e){const l=e[r];let a="",i=!0;for(let e=0;e<l.length;e+=1){const o=l[e];o&&(a+=(!0===i?"":" ")+t(o),i=!1,n&&n[o]&&(a+=" "+n[o]))}o[r]=a}return o}const Hg=Object.is;function Fg(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,o=0;for(const r in e){if(n+=1,!Hg(e[r],t[r]))return!1;if(!(r in t))return!1}for(const r in t)o+=1;return n===o}function Yg(e){return o.memo(e,Fg)}function Kg(e,t){if(null==e)return{};var n,o,r=Wg(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Mg=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(gE){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Lg=Math.abs,Eg=String.fromCharCode,zg=Object.assign;function jg(e){return e.trim()}function Dg(e,t,n){return e.replace(t,n)}function Tg(e,t){return e.indexOf(t)}function Pg(e,t){return 0|e.charCodeAt(t)}function Ug(e,t,n){return e.slice(t,n)}function Qg(e){return e.length}function Og(e){return e.length}function qg(e,t){return t.push(e),e}var _g=1,$g=1,es=0,ts=0,ns=0,os="";function rs(e,t,n,o,r,l,a){return{value:e,root:t,parent:n,type:o,props:r,children:l,line:_g,column:$g,length:a,return:""}}function ls(e,t){return zg(rs("",null,null,"",null,null,0),e,{length:-e.length},t)}function as(){return ns=ts>0?Pg(os,--ts):0,$g--,10===ns&&($g=1,_g--),ns}function is(){return ns=ts<es?Pg(os,ts++):0,$g++,10===ns&&($g=1,_g++),ns}function gs(){return Pg(os,ts)}function ss(){return ts}function cs(e,t){return Ug(os,e,t)}function ds(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Is(e){return _g=$g=1,es=Qg(os=e),ts=0,[]}function us(e){return os="",e}function Cs(e){return jg(cs(ts-1,ms(91===e?e+2:40===e?e+1:e)))}function ps(e){for(;(ns=gs())&&ns<33;)is();return ds(e)>2||ds(ns)>3?"":" "}function As(e,t){for(;--t&&is()&&!(ns<48||ns>102||ns>57&&ns<65||ns>70&&ns<97););return cs(e,ss()+(t<6&&32==gs()&&32==is()))}function ms(e){for(;is();)switch(ns){case e:return ts;case 34:case 39:34!==e&&39!==e&&ms(ns);break;case 40:41===e&&ms(e);break;case 92:is()}return ts}function hs(e,t){for(;is()&&e+ns!==57&&(e+ns!==84||47!==gs()););return"/*"+cs(t,ts-1)+"*"+Eg(47===e?e:is())}function bs(e){for(;!ds(gs());)is();return cs(e,ts)}var fs="-ms-",ys="-moz-",vs="-webkit-",Zs="comm",Gs="rule",Ss="decl",Bs="@keyframes";function ws(e,t){for(var n="",o=Og(e),r=0;r<o;r++)n+=t(e[r],r,e,t)||"";return n}function Rs(e,t,n,o){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Ss:return e.return=e.return||e.value;case Zs:return"";case Bs:return e.return=e.value+"{"+ws(e.children,o)+"}";case Gs:e.value=e.props.join(",")}return Qg(n=ws(e.children,o))?e.return=e.value+"{"+n+"}":""}function Ws(e){return function(t){t.root||(t=t.return)&&e(t)}}function ks(e){return us(Vs("",null,null,null,[""],e=Is(e),0,[0],e))}function Vs(e,t,n,o,r,l,a,i,g){for(var s=0,c=0,d=a,I=0,u=0,C=0,p=1,A=1,m=1,h=0,b="",f=r,y=l,v=o,Z=b;A;)switch(C=h,h=is()){case 40:if(108!=C&&58==Pg(Z,d-1)){-1!=Tg(Z+=Dg(Cs(h),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:Z+=Cs(h);break;case 9:case 10:case 13:case 32:Z+=ps(C);break;case 92:Z+=As(ss()-1,7);continue;case 47:switch(gs()){case 42:case 47:qg(xs(hs(is(),ss()),t,n),g);break;default:Z+="/"}break;case 123*p:i[s++]=Qg(Z)*m;case 125*p:case 59:case 0:switch(h){case 0:case 125:A=0;case 59+c:-1==m&&(Z=Dg(Z,/\f/g,"")),u>0&&Qg(Z)-d&&qg(u>32?Js(Z+";",o,n,d-1):Js(Dg(Z," ","")+";",o,n,d-2),g);break;case 59:Z+=";";default:if(qg(v=Xs(Z,t,n,s,c,r,i,b,f=[],y=[],d),l),123===h)if(0===c)Vs(Z,t,v,v,f,l,d,i,y);else switch(99===I&&110===Pg(Z,3)?100:I){case 100:case 108:case 109:case 115:Vs(e,v,v,o&&qg(Xs(e,v,v,0,0,r,i,b,r,f=[],d),y),r,y,d,i,o?f:y);break;default:Vs(Z,v,v,v,[""],y,0,i,y)}}s=c=u=0,p=m=1,b=Z="",d=a;break;case 58:d=1+Qg(Z),u=C;default:if(p<1)if(123==h)--p;else if(125==h&&0==p++&&125==as())continue;switch(Z+=Eg(h),h*p){case 38:m=c>0?1:(Z+="\f",-1);break;case 44:i[s++]=(Qg(Z)-1)*m,m=1;break;case 64:45===gs()&&(Z+=Cs(is())),I=gs(),c=d=Qg(b=Z+=bs(ss())),h++;break;case 45:45===C&&2==Qg(Z)&&(p=0)}}return l}function Xs(e,t,n,o,r,l,a,i,g,s,c){for(var d=r-1,I=0===r?l:[""],u=Og(I),C=0,p=0,A=0;C<o;++C)for(var m=0,h=Ug(e,d+1,d=Lg(p=a[C])),b=e;m<u;++m)(b=jg(p>0?I[m]+" "+h:Dg(h,/&\f/g,I[m])))&&(g[A++]=b);return rs(e,t,n,0===r?Gs:i,g,s,c)}function xs(e,t,n){return rs(e,t,n,Zs,Eg(ns),Ug(e,2,-2),0)}function Js(e,t,n,o){return rs(e,t,n,Ss,Ug(e,0,o),Ug(e,o+1,-1),o)}var Ns=function(e,t,n){for(var o=0,r=0;o=r,r=gs(),38===o&&12===r&&(t[n]=1),!ds(r);)is();return cs(e,ts)},Hs=function(e,t){return us(function(e,t){var n=-1,o=44;do{switch(ds(o)){case 0:38===o&&12===gs()&&(t[n]=1),e[n]+=Ns(ts-1,t,n);break;case 2:e[n]+=Cs(o);break;case 4:if(44===o){e[++n]=58===gs()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Eg(o)}}while(o=is());return e}(Is(e),t))},Fs=new WeakMap,Ys=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,o=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Fs.get(n))&&!o){Fs.set(e,!0);for(var r=[],l=Hs(t,r),a=n.props,i=0,g=0;i<l.length;i++)for(var s=0;s<a.length;s++,g++)e.props[g]=r[i]?l[i].replace(/&\f/g,a[s]):a[s]+" "+l[i]}}},Ks=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Ms(e,t){switch(function(e,t){return 45^Pg(e,0)?(((t<<2^Pg(e,0))<<2^Pg(e,1))<<2^Pg(e,2))<<2^Pg(e,3):0}(e,t)){case 5103:return vs+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vs+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vs+e+ys+e+fs+e+e;case 6828:case 4268:return vs+e+fs+e+e;case 6165:return vs+e+fs+"flex-"+e+e;case 5187:return vs+e+Dg(e,/(\w+).+(:[^]+)/,vs+"box-$1$2"+fs+"flex-$1$2")+e;case 5443:return vs+e+fs+"flex-item-"+Dg(e,/flex-|-self/,"")+e;case 4675:return vs+e+fs+"flex-line-pack"+Dg(e,/align-content|flex-|-self/,"")+e;case 5548:return vs+e+fs+Dg(e,"shrink","negative")+e;case 5292:return vs+e+fs+Dg(e,"basis","preferred-size")+e;case 6060:return vs+"box-"+Dg(e,"-grow","")+vs+e+fs+Dg(e,"grow","positive")+e;case 4554:return vs+Dg(e,/([^-])(transform)/g,"$1"+vs+"$2")+e;case 6187:return Dg(Dg(Dg(e,/(zoom-|grab)/,vs+"$1"),/(image-set)/,vs+"$1"),e,"")+e;case 5495:case 3959:return Dg(e,/(image-set\([^]*)/,vs+"$1$`$1");case 4968:return Dg(Dg(e,/(.+:)(flex-)?(.*)/,vs+"box-pack:$3"+fs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vs+e+e;case 4095:case 3583:case 4068:case 2532:return Dg(e,/(.+)-inline(.+)/,vs+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qg(e)-1-t>6)switch(Pg(e,t+1)){case 109:if(45!==Pg(e,t+4))break;case 102:return Dg(e,/(.+:)(.+)-([^]+)/,"$1"+vs+"$2-$3$1"+ys+(108==Pg(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Tg(e,"stretch")?Ms(Dg(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Pg(e,t+1))break;case 6444:switch(Pg(e,Qg(e)-3-(~Tg(e,"!important")&&10))){case 107:return Dg(e,":",":"+vs)+e;case 101:return Dg(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vs+(45===Pg(e,14)?"inline-":"")+"box$3$1"+vs+"$2$3$1"+fs+"$2box$3")+e}break;case 5936:switch(Pg(e,t+11)){case 114:return vs+e+fs+Dg(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vs+e+fs+Dg(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vs+e+fs+Dg(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vs+e+fs+e+e}return e}var Ls=[function(e,t,n,o){if(e.length>-1&&!e.return)switch(e.type){case Ss:e.return=Ms(e.value,e.length);break;case Bs:return ws([ls(e,{value:Dg(e.value,"@","@"+vs)})],o);case Gs:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ws([ls(e,{props:[Dg(t,/:(read-\w+)/,":-moz-$1")]})],o);case"::placeholder":return ws([ls(e,{props:[Dg(t,/:(plac\w+)/,":"+vs+"input-$1")]}),ls(e,{props:[Dg(t,/:(plac\w+)/,":-moz-$1")]}),ls(e,{props:[Dg(t,/:(plac\w+)/,fs+"input-$1")]})],o)}return""}))}}],Es=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var o,r,l=e.stylisPlugins||Ls,a={},i=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;i.push(e)}));var g,s=[Ys,Ks],c=[Rs,Ws((function(e){g.insert(e)}))],d=function(e){var t=Og(e);return function(n,o,r,l){for(var a="",i=0;i<t;i++)a+=e[i](n,o,r,l)||"";return a}}(s.concat(l,c));r=function(e,t,n,o){g=n,function(e){ws(ks(e),d)}(e?e+"{"+t.styles+"}":t.styles),o&&(I.inserted[t.name]=!0)};var I={key:t,sheet:new Mg({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:r};return I.sheet.hydrate(i),I};function zs(e,t,n){var o="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(o+=n+" ")})),o}var js=function(e,t,n){var o=e.key+"-"+t.name;!1===n&&void 0===e.registered[o]&&(e.registered[o]=t.styles)},Ds=function(e,t,n){js(e,t,n);var o=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var r=t;do{e.insert(t===r?"."+o:"",r,e.sheet,!0),r=r.next}while(void 0!==r)}};var Ts={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Ps(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Us=/[A-Z]|^ms/g,Qs=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Os=function(e){return 45===e.charCodeAt(1)},qs=function(e){return null!=e&&"boolean"!==typeof e},_s=Ps((function(e){return Os(e)?e:e.replace(Us,"-$&").toLowerCase()})),$s=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Qs,(function(e,t,n){return tc={name:t,styles:n,next:tc},t}))}return 1===Ts[e]||Os(e)||"number"!==typeof t||0===t?t:t+"px"};function ec(e,t,n){if(null==n)return"";var o=n;if(void 0!==o.__emotion_styles)return o;switch(typeof n){case"boolean":return"";case"object":var r=n;if(1===r.anim)return tc={name:r.name,styles:r.styles,next:tc},r.name;var l=n;if(void 0!==l.styles){var a=l.next;if(void 0!==a)for(;void 0!==a;)tc={name:a.name,styles:a.styles,next:tc},a=a.next;return l.styles+";"}return function(e,t,n){var o="";if(Array.isArray(n))for(var r=0;r<n.length;r++)o+=ec(e,t,n[r])+";";else for(var l in n){var a=n[l];if("object"!==typeof a){var i=a;null!=t&&void 0!==t[i]?o+=l+"{"+t[i]+"}":qs(i)&&(o+=_s(l)+":"+$s(l,i)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var g=ec(e,t,a);switch(l){case"animation":case"animationName":o+=_s(l)+":"+g+";";break;default:o+=l+"{"+g+"}"}}else for(var s=0;s<a.length;s++)qs(a[s])&&(o+=_s(l)+":"+$s(l,a[s])+";")}return o}(e,t,n);case"function":if(void 0!==e){var i=tc,g=n(e);return tc=i,ec(e,t,g)}}var s=n;if(null==t)return s;var c=t[s];return void 0!==c?c:s}var tc,nc=/label:\s*([^\s;{]+)\s*(;|$)/g;function oc(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var o=!0,r="";tc=void 0;var l=e[0];null==l||void 0===l.raw?(o=!1,r+=ec(n,t,l)):r+=l[0];for(var a=1;a<e.length;a++){if(r+=ec(n,t,e[a]),o)r+=l[a]}nc.lastIndex=0;for(var i,g="";null!==(i=nc.exec(r));)g+="-"+i[1];var s=function(e){for(var t,n=0,o=0,r=e.length;r>=4;++o,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+g;return{name:s,styles:r,next:tc}}var rc=!!r.useInsertionEffect&&r.useInsertionEffect,lc=rc||function(e){return e()},ac=rc||o.useLayoutEffect,ic=o.createContext("undefined"!==typeof HTMLElement?Es({key:"css"}):null),gc=(ic.Provider,function(e){return(0,o.forwardRef)((function(t,n){var r=(0,o.useContext)(ic);return e(t,r,n)}))}),sc=o.createContext({});var cc={}.hasOwnProperty,dc="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ic=function(e){var t=e.cache,n=e.serialized,o=e.isStringTag;return js(t,n,o),lc((function(){return Ds(t,n,o)})),null},uc=gc((function(e,t,n){var r=e.css;"string"===typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var l=e[dc],a=[r],i="";"string"===typeof e.className?i=zs(t.registered,a,e.className):null!=e.className&&(i=e.className+" ");var g=oc(a,void 0,o.useContext(sc));i+=t.key+"-"+g.name;var s={};for(var c in e)cc.call(e,c)&&"css"!==c&&c!==dc&&(s[c]=e[c]);return s.className=i,n&&(s.ref=n),o.createElement(o.Fragment,null,o.createElement(Ic,{cache:t,serialized:g,isStringTag:"string"===typeof l}),o.createElement(l,s))})),Cc=uc,pc=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ac=Ps((function(e){return pc.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),mc=function(e){return"theme"!==e},hc=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Ac:mc},bc=function(e,t,n){var o;if(t){var r=t.shouldForwardProp;o=e.__emotion_forwardProp&&r?function(t){return e.__emotion_forwardProp(t)&&r(t)}:r}return"function"!==typeof o&&n&&(o=e.__emotion_forwardProp),o},fc=function(e){var t=e.cache,n=e.serialized,o=e.isStringTag;return js(t,n,o),lc((function(){return Ds(t,n,o)})),null},yc=function e(t,n){var r,l,a=t.__emotion_real===t,i=a&&t.__emotion_base||t;void 0!==n&&(r=n.label,l=n.target);var g=bc(t,n,a),s=g||hc(i),c=!s("as");return function(){var d=arguments,I=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&I.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)I.push.apply(I,d);else{var u=d[0];I.push(u[0]);for(var C=d.length,p=1;p<C;p++)I.push(d[p],u[p])}var A=gc((function(e,t,n){var r=c&&e.as||i,a="",d=[],u=e;if(null==e.theme){for(var C in u={},e)u[C]=e[C];u.theme=o.useContext(sc)}"string"===typeof e.className?a=zs(t.registered,d,e.className):null!=e.className&&(a=e.className+" ");var p=oc(I.concat(d),t.registered,u);a+=t.key+"-"+p.name,void 0!==l&&(a+=" "+l);var A=c&&void 0===g?hc(r):s,m={};for(var h in e)c&&"as"===h||A(h)&&(m[h]=e[h]);return m.className=a,n&&(m.ref=n),o.createElement(o.Fragment,null,o.createElement(fc,{cache:t,serialized:p,isStringTag:"string"===typeof r}),o.createElement(r,m))}));return A.displayName=void 0!==r?r:"Styled("+("string"===typeof i?i:i.displayName||i.name||"Component")+")",A.defaultProps=t.defaultProps,A.__emotion_real=A,A.__emotion_base=i,A.__emotion_styles=I,A.__emotion_forwardProp=g,Object.defineProperty(A,"toString",{value:function(){return"."+l}}),A.withComponent=function(t,o){return e(t,Sg({},n,o,{shouldForwardProp:bc(A,o,!0)})).apply(void 0,I)},A}}.bind(null);function vc(e,t){return yc(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){yc[e]=yc(e)}));const Zc=[];function Gc(e){return Zc[0]=e,oc(Zc)}var Sc=n(191);function Bc(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wc(e){if(o.isValidElement(e)||(0,Sc.Hy)(e)||!Bc(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=wc(e[n])})),t}function Rc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?Xe({},e):e;return Bc(e)&&Bc(t)&&Object.keys(t).forEach((l=>{o.isValidElement(t[l])||(0,Sc.Hy)(t[l])?r[l]=t[l]:Bc(t[l])&&Object.prototype.hasOwnProperty.call(e,l)&&Bc(e[l])?r[l]=Rc(e[l],t[l],n):n.clone?r[l]=Bc(t[l])?wc(t[l]):t[l]:r[l]=t[l]})),r}const Wc=["values","unit","step"];function kc(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,r=Kg(e,Wc),l=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>Xe(Xe({},e),{},{[t.key]:t.val})),{})})(t),a=Object.keys(l);function i(e){const o="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(o).concat(n,")")}function g(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-o/100).concat(n,")")}function s(e,r){const l=a.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==l&&"number"===typeof t[a[l]]?t[a[l]]:r)-o/100).concat(n,")")}return Xe({keys:a,values:l,up:i,down:g,between:s,only:function(e){return a.indexOf(e)+1<a.length?s(e,a[a.indexOf(e)+1]):i(e)},not:function(e){const t=a.indexOf(e);return 0===t?i(a[1]):t===a.length-1?g(a[t]):s(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},r)}const Vc={borderRadius:4},Xc={xs:0,sm:600,md:900,lg:1200,xl:1536},xc={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(Xc[e],"px)")},Jc={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Xc[t]||t;return"number"===typeof n&&(n="".concat(n,"px")),e?"@container ".concat(e," (min-width:").concat(n,")"):"@container (min-width:".concat(n,")")}})};function Nc(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const e=o.breakpoints||xc;return t.reduce(((o,r,l)=>(o[e.up(e.keys[l])]=n(t[l]),o)),{})}if("object"===typeof t){const e=o.breakpoints||xc;return Object.keys(t).reduce(((r,l)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith("@".concat(e))))||!!t.match(/^@\d/))}(e.keys,l)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,o,r]=n,l=Number.isNaN(+o)?o||0:+o;return e.containerQueries(r).up(l)}(o.containerQueries?o:Jc,l);e&&(r[e]=n(t[l],l))}else if(Object.keys(e.values||Xc).includes(l)){r[e.up(l)]=n(t[l],l)}else{const e=l;r[e]=t[e]}return r}),{})}return n(t)}function Hc(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function Fc(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function Yc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Kc(e,t,n){let o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return o="function"===typeof e?e(n):Array.isArray(e)?e[n]||r:Yc(e,n)||r,t&&(o=t(o,r,e)),o}const Mc=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:r}=e,l=e=>{if(null==e[t])return null;const l=e[t],a=Yc(e.theme,o)||{};return Nc(e,l,(e=>{let o=Kc(a,r,e);return e===o&&"string"===typeof e&&(o=Kc(a,r,"".concat(t).concat("default"===e?"":Jg(e)),e)),!1===n?o:{[n]:o}}))};return l.propTypes={},l.filterProps=[t],l};const Lc=function(e,t){return t?Rc(e,t,{clone:!1}):e};const Ec={m:"margin",p:"padding"},zc={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jc={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Dc=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!jc[e])return[e];e=jc[e]}const[t,n]=e.split(""),o=Ec[t],r=zc[n]||"";return Array.isArray(r)?r.map((e=>o+e)):[o+r]})),Tc=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Pc=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Uc=[...Tc,...Pc];function Qc(e,t,n,o){var r;const l=null!==(r=Yc(e,t,!0))&&void 0!==r?r:n;return"number"===typeof l||"string"===typeof l?e=>"string"===typeof e?e:"string"===typeof l?l.startsWith("var(")&&0===e?0:l.startsWith("var(")&&1===e?l:"calc(".concat(e," * ").concat(l,")"):l*e:Array.isArray(l)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=l[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?"calc(-1 * ".concat(n,")"):"-".concat(n)}:"function"===typeof l?l:()=>{}}function Oc(e){return Qc(e,"spacing",8)}function qc(e,t){return"string"===typeof t||null==t?t:e(t)}function _c(e,t,n,o){if(!t.includes(n))return null;const r=function(e,t){return n=>e.reduce(((e,o)=>(e[o]=qc(t,n),e)),{})}(Dc(n),o);return Nc(e,e[n],r)}function $c(e,t){const n=Oc(e.theme);return Object.keys(e).map((o=>_c(e,t,o,n))).reduce(Lc,{})}function ed(e){return $c(e,Tc)}function td(e){return $c(e,Pc)}function nd(e){return $c(e,Uc)}ed.propTypes={},ed.filterProps=Tc,td.propTypes={},td.filterProps=Pc,nd.propTypes={},nd.filterProps=Uc;function od(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oc({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}const rd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),r=e=>Object.keys(e).reduce(((t,n)=>o[n]?Lc(t,o[n](e)):t),{});return r.propTypes={},r.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),r};function ld(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function ad(e,t){return Mc({prop:e,themeKey:"borders",transform:t})}const id=ad("border",ld),gd=ad("borderTop",ld),sd=ad("borderRight",ld),cd=ad("borderBottom",ld),dd=ad("borderLeft",ld),Id=ad("borderColor"),ud=ad("borderTopColor"),Cd=ad("borderRightColor"),pd=ad("borderBottomColor"),Ad=ad("borderLeftColor"),md=ad("outline",ld),hd=ad("outlineColor"),bd=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Qc(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:qc(t,e)});return Nc(e,e.borderRadius,n)}return null};bd.propTypes={},bd.filterProps=["borderRadius"];rd(id,gd,sd,cd,dd,Id,ud,Cd,pd,Ad,bd,md,hd);const fd=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Qc(e.theme,"spacing",8),n=e=>({gap:qc(t,e)});return Nc(e,e.gap,n)}return null};fd.propTypes={},fd.filterProps=["gap"];const yd=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Qc(e.theme,"spacing",8),n=e=>({columnGap:qc(t,e)});return Nc(e,e.columnGap,n)}return null};yd.propTypes={},yd.filterProps=["columnGap"];const vd=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Qc(e.theme,"spacing",8),n=e=>({rowGap:qc(t,e)});return Nc(e,e.rowGap,n)}return null};vd.propTypes={},vd.filterProps=["rowGap"];rd(fd,yd,vd,Mc({prop:"gridColumn"}),Mc({prop:"gridRow"}),Mc({prop:"gridAutoFlow"}),Mc({prop:"gridAutoColumns"}),Mc({prop:"gridAutoRows"}),Mc({prop:"gridTemplateColumns"}),Mc({prop:"gridTemplateRows"}),Mc({prop:"gridTemplateAreas"}),Mc({prop:"gridArea"}));function Zd(e,t){return"grey"===t?t:e}rd(Mc({prop:"color",themeKey:"palette",transform:Zd}),Mc({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Zd}),Mc({prop:"backgroundColor",themeKey:"palette",transform:Zd}));function Gd(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const Sd=Mc({prop:"width",transform:Gd}),Bd=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,o;const r=(null===(n=e.theme)||void 0===n||null===(n=n.breakpoints)||void 0===n||null===(n=n.values)||void 0===n?void 0:n[t])||Xc[t];return r?"px"!==(null===(o=e.theme)||void 0===o||null===(o=o.breakpoints)||void 0===o?void 0:o.unit)?{maxWidth:"".concat(r).concat(e.theme.breakpoints.unit)}:{maxWidth:r}:{maxWidth:Gd(t)}};return Nc(e,e.maxWidth,t)}return null};Bd.filterProps=["maxWidth"];const wd=Mc({prop:"minWidth",transform:Gd}),Rd=Mc({prop:"height",transform:Gd}),Wd=Mc({prop:"maxHeight",transform:Gd}),kd=Mc({prop:"minHeight",transform:Gd}),Vd=(Mc({prop:"size",cssProperty:"width",transform:Gd}),Mc({prop:"size",cssProperty:"height",transform:Gd}),rd(Sd,Bd,wd,Rd,Wd,kd,Mc({prop:"boxSizing"})),{border:{themeKey:"borders",transform:ld},borderTop:{themeKey:"borders",transform:ld},borderRight:{themeKey:"borders",transform:ld},borderBottom:{themeKey:"borders",transform:ld},borderLeft:{themeKey:"borders",transform:ld},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ld},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:bd},color:{themeKey:"palette",transform:Zd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Zd},backgroundColor:{themeKey:"palette",transform:Zd},p:{style:td},pt:{style:td},pr:{style:td},pb:{style:td},pl:{style:td},px:{style:td},py:{style:td},padding:{style:td},paddingTop:{style:td},paddingRight:{style:td},paddingBottom:{style:td},paddingLeft:{style:td},paddingX:{style:td},paddingY:{style:td},paddingInline:{style:td},paddingInlineStart:{style:td},paddingInlineEnd:{style:td},paddingBlock:{style:td},paddingBlockStart:{style:td},paddingBlockEnd:{style:td},m:{style:ed},mt:{style:ed},mr:{style:ed},mb:{style:ed},ml:{style:ed},mx:{style:ed},my:{style:ed},margin:{style:ed},marginTop:{style:ed},marginRight:{style:ed},marginBottom:{style:ed},marginLeft:{style:ed},marginX:{style:ed},marginY:{style:ed},marginInline:{style:ed},marginInlineStart:{style:ed},marginInlineEnd:{style:ed},marginBlock:{style:ed},marginBlockStart:{style:ed},marginBlockEnd:{style:ed},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fd},rowGap:{style:vd},columnGap:{style:yd},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Gd},maxWidth:{style:Bd},minWidth:{transform:Gd},height:{transform:Gd},maxHeight:{transform:Gd},minHeight:{transform:Gd},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Xd=function(){function e(e,t,n,o){const r={[e]:t,theme:n},l=o[e];if(!l)return{[e]:t};const{cssProperty:a=e,themeKey:i,transform:g,style:s}=l;if(null==t)return null;if("typography"===i&&"inherit"===t)return{[e]:t};const c=Yc(n,i)||{};if(s)return s(r);return Nc(r,t,(t=>{let n=Kc(c,g,t);return t===n&&"string"===typeof t&&(n=Kc(c,g,"".concat(e).concat("default"===t?"":Jg(t)),t)),!1===a?n:{[a]:n}}))}return function t(n){var o;const{sx:r,theme:l={}}=n||{};if(!r)return null;const a=null!==(o=l.unstable_sxConfig)&&void 0!==o?o:Vd;function i(n){let o=n;if("function"===typeof n)o=n(l);else if("object"!==typeof n)return n;if(!o)return null;const r=Hc(l.breakpoints),i=Object.keys(r);let g=r;return Object.keys(o).forEach((n=>{const r=function(e,t){return"function"===typeof e?e(t):e}(o[n],l);if(null!==r&&void 0!==r)if("object"===typeof r)if(a[n])g=Lc(g,e(n,r,l,a));else{const e=Nc({theme:l},r,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),r=new Set(o);return t.every((e=>r.size===Object.keys(e).length))}(e,r)?g=Lc(g,e):g[n]=t({sx:r,theme:l})}else g=Lc(g,e(n,r,l,a))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{var n,o;const r=/min-width:\s*([0-9.]+)/;return+((null===(n=e.match(r))||void 0===n?void 0:n[1])||0)-+((null===(o=t.match(r))||void 0===o?void 0:o[1])||0)}));return n.length?n.reduce(((e,n)=>{const o=t[n];return delete e[n],e[n]=o,e}),Xe({},t)):t}(l,Fc(i,g))}return Array.isArray(r)?r.map(i):i(r)}}();Xd.filterProps=["sx"];const xd=Xd;function Jd(e,t){const n=this;if(n.vars){var o;if(null===(o=n.colorSchemes)||void 0===o||!o[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r="*:where(".concat(r.replace(/\s*&$/,""),") &")),{[r]:t})}return n.palette.mode===e?t:{}}const Nd=["breakpoints","palette","spacing","shape"];const Hd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:o,shape:r={}}=e,l=Kg(e,Nd),a=kc(t),i=od(o);let g=Rc({breakpoints:a,direction:"ltr",components:{},palette:Xe({mode:"light"},n),spacing:i,shape:Xe(Xe({},Vc),r)},l);g=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function n(n,o){n.up=function(){return t(e.breakpoints.up(...arguments),o)},n.down=function(){return t(e.breakpoints.down(...arguments),o)},n.between=function(){return t(e.breakpoints.between(...arguments),o)},n.only=function(){return t(e.breakpoints.only(...arguments),o)},n.not=function(){const n=t(e.breakpoints.not(...arguments),o);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const o={},r=e=>(n(o,e),o);return n(r),Xe(Xe({},e),{},{containerQueries:r})}(g),g.applyStyles=Jd;for(var s=arguments.length,c=new Array(s>1?s-1:0),d=1;d<s;d++)c[d-1]=arguments[d];return g=c.reduce(((e,t)=>Rc(e,t)),g),g.unstable_sxConfig=Xe(Xe({},Vd),null===l||void 0===l?void 0:l.unstable_sxConfig),g.unstable_sx=function(e){return xd({sx:e,theme:this})},g},Fd=["variants"];function Yd(e){const{variants:t}=e,n=Kg(e,Fd),o={variants:t,style:Gc(n),isProcessed:!0};return o.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=Gc(e.style))})),o}const Kd=["variants"],Md=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Ld=Hd();function Ed(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function zd(e){return e?(t,n)=>n[e]:null}function jd(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>jd(e,t)));if(Array.isArray(null===n||void 0===n?void 0:n.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e}=n;t=Kg(n,Kd)}return Dd(e,n.variants,[t])}return null!==n&&void 0!==n&&n.isProcessed?n.style:n}function Dd(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let l=0;l<t.length;l+=1){const a=t[l];if("function"===typeof a.props){if(null!==n&&void 0!==n||(n=Xe(Xe(Xe({},e),e.ownerState),{},{ownerState:e.ownerState})),!a.props(n))continue}else for(const t in a.props){var r;if(e[t]!==a.props[t]&&(null===(r=e.ownerState)||void 0===r?void 0:r[t])!==a.props[t])continue e}"function"===typeof a.style?(null!==n&&void 0!==n||(n=Xe(Xe(Xe({},e),e.ownerState),{},{ownerState:e.ownerState})),o.push(a.style(n))):o.push(a.style)}return o}function Td(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=Ld,rootShouldForwardProp:o=Ed,slotShouldForwardProp:r=Ed}=e;function l(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==xd))));const{name:n,slot:a,skipVariantsResolver:i,skipSx:g,overridesResolver:s=zd(Ud(a))}=t,c=Kg(t,Md),d=void 0!==i?i:a&&"Root"!==a&&"root"!==a||!1,I=g||!1;let u=Ed;"Root"===a||"root"===a?u=o:a?u=r:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(u=void 0);const C=vc(e,Xe({shouldForwardProp:u,label:Pd(n,a)},c)),p=e=>{if(e.__emotion_real===e)return e;if("function"===typeof e)return function(t){return jd(t,e)};if(Bc(e)){const t=Yd(e);return t.variants?function(e){return jd(e,t)}:t.style}return e},A=function(){const t=[];for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];const i=r.map(p),g=[];if(t.push(l),n&&s&&g.push((function(e){var t;const o=null===(t=e.theme.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.styleOverrides;if(!o)return null;const r={};for(const n in o)r[n]=jd(e,o[n]);return s(e,r)})),n&&!d&&g.push((function(e){var t;const o=e.theme,r=null===o||void 0===o||null===(t=o.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.variants;return r?Dd(e,r):null})),I||g.push(xd),Array.isArray(i[0])){const e=i.shift(),n=new Array(t.length).fill(""),o=new Array(g.length).fill("");let r;r=[...n,...e,...o],r.raw=[...n,...e.raw,...o],t.unshift(r)}const c=[...t,...i,...g],u=C(...c);return e.muiName&&(u.muiName=e.muiName),u};return C.withConfig&&(A.withConfig=C.withConfig),A}}function Pd(e,t){}function Ud(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const Qd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function Od(e){return Qd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function qd(e){if(e.type)return e;if("#"===e.charAt(0))return qd(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(xg(9,e));let o,r=e.substring(t+1,e.length-1);if("color"===n){if(r=r.split(" "),o=r.shift(),4===r.length&&"/"===r[3].charAt(0)&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(o))throw new Error(xg(10,o))}else r=r.split(",");return r=r.map((e=>parseFloat(e))),{type:n,values:r,colorSpace:o}}const _d=(e,t)=>{try{return(e=>{const t=qd(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")})(e)}catch(sE){return e}};function $d(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.includes("rgb")?o=o.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(o[1]="".concat(o[1],"%"),o[2]="".concat(o[2],"%")),o=t.includes("color")?"".concat(n," ").concat(o.join(" ")):"".concat(o.join(", ")),"".concat(t,"(").concat(o,")")}function eI(e){e=qd(e);const{values:t}=e,n=t[0],o=t[1]/100,r=t[2]/100,l=o*Math.min(r,1-r),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return r-l*Math.max(Math.min(t-3,9-t,1),-1)};let i="rgb";const g=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(i+="a",g.push(t[3])),$d({type:i,values:g})}function tI(e){let t="hsl"===(e=qd(e)).type||"hsla"===e.type?qd(eI(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function nI(e,t){return e=qd(e),t=Od(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,$d(e)}function oI(e,t,n){try{return nI(e,t)}catch(sE){return e}}function rI(e,t){if(e=qd(e),t=Od(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return $d(e)}function lI(e,t,n){try{return rI(e,t)}catch(sE){return e}}function aI(e,t){if(e=qd(e),t=Od(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return $d(e)}function iI(e,t,n){try{return aI(e,t)}catch(sE){return e}}function gI(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return tI(e)>.5?rI(e,t):aI(e,t)}(e,t)}catch(sE){return e}}const sI={black:"#000",white:"#fff"},cI={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},dI={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},II={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},uI={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},CI={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},pI={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},AI={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},mI=["mode","contrastThreshold","tonalOffset"];function hI(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:sI.white,default:sI.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const bI=hI();function fI(){return{text:{primary:sI.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:sI.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const yI=fI();function vI(e,t,n,o){const r=o.light||o,l=o.dark||1.5*o;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=aI(e.main,r):"dark"===t&&(e.dark=rI(e.main,l)))}function ZI(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,r=Kg(e,mI),l=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:CI[200],light:CI[50],dark:CI[400]}:{main:CI[700],light:CI[400],dark:CI[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:dI[200],light:dI[50],dark:dI[400]}:{main:dI[500],light:dI[300],dark:dI[700]}}(t),i=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:II[500],light:II[300],dark:II[700]}:{main:II[700],light:II[400],dark:II[800]}}(t),g=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:pI[400],light:pI[300],dark:pI[700]}:{main:pI[700],light:pI[500],dark:pI[900]}}(t),s=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:AI[400],light:AI[300],dark:AI[700]}:{main:AI[800],light:AI[500],dark:AI[900]}}(t),c=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:uI[400],light:uI[300],dark:uI[700]}:{main:"#ed6c02",light:uI[500],dark:uI[900]}}(t);function d(e){const t=function(e,t){const n=tI(e),o=tI(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}(e,yI.text.primary)>=n?yI.text.primary:bI.text.primary;return t}const I=e=>{let{color:t,name:n,mainShade:r=500,lightShade:l=300,darkShade:a=700}=e;if(t=Xe({},t),!t.main&&t[r]&&(t.main=t[r]),!t.hasOwnProperty("main"))throw new Error(xg(11,n?" (".concat(n,")"):"",r));if("string"!==typeof t.main)throw new Error(xg(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return vI(t,"light",l,o),vI(t,"dark",a,o),t.contrastText||(t.contrastText=d(t.main)),t};let u;"light"===t?u=hI():"dark"===t&&(u=fI());return Rc(Xe({common:Xe({},sI),mode:t,primary:I({color:l,name:"primary"}),secondary:I({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:i,name:"error"}),warning:I({color:c,name:"warning"}),info:I({color:g,name:"info"}),success:I({color:s,name:"success"}),grey:cI,contrastThreshold:n,getContrastText:d,augmentColor:I,tonalOffset:o},u),r)}var GI=n(816);function SI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];if(!o.length)return"";const l=o[0];return"string"!==typeof l||l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(l):", var(--".concat(e?"".concat(e,"-"):"").concat(l).concat(t(...o.slice(1)),")")}return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),l=1;l<o;l++)r[l-1]=arguments[l];return"var(--".concat(e?"".concat(e,"-"):"").concat(n).concat(t(...r),")")}}function BI(e){const t={};return Object.entries(e).forEach((e=>{const[n,o]=e;"object"===typeof o&&(t[n]="".concat(o.fontStyle?"".concat(o.fontStyle," "):"").concat(o.fontVariant?"".concat(o.fontVariant," "):"").concat(o.fontWeight?"".concat(o.fontWeight," "):"").concat(o.fontStretch?"".concat(o.fontStretch," "):"").concat(o.fontSize||"").concat(o.lineHeight?"/".concat(o.lineHeight," "):"").concat(o.fontFamily||""))})),t}const wI=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=e;t.forEach(((e,l)=>{l===t.length-1?Array.isArray(r)?r[Number(e)]=n:r&&"object"===typeof r&&(r[e]=n):r&&"object"===typeof r&&(r[e]||(r[e]=o.includes(e)?[]:{}),r=r[e])}))};function RI(e,t){const{prefix:n,shouldSkipGeneratingVar:o}=t||{},r={},l={},a={};return((e,t,n)=>{!function e(o){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(o).forEach((o=>{let[a,i]=o;(!n||n&&!n([...r,a]))&&void 0!==i&&null!==i&&("object"===typeof i&&Object.keys(i).length>0?e(i,[...r,a],Array.isArray(i)?[...l,a]:l):t([...r,a],i,l))}))}(e)})(e,((e,t,i)=>{if(("string"===typeof t||"number"===typeof t)&&(!o||!o(e,t))){const o="--".concat(n?"".concat(n,"-"):"").concat(e.join("-")),g=((e,t)=>{if("number"===typeof t)return["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px");return t})(e,t);Object.assign(r,{[o]:g}),wI(l,e,"var(".concat(o,")"),i),wI(a,e,"var(".concat(o,", ").concat(g,")"),i)}}),(e=>"vars"===e[0])),{css:r,vars:l,varsWithDefaults:a}}const WI=["colorSchemes","components","defaultColorScheme"];const kI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=A,disableCssColorScheme:o,colorSchemeSelector:r}=t,{colorSchemes:l={},components:a,defaultColorScheme:i="light"}=e,g=Kg(e,WI),{vars:s,css:c,varsWithDefaults:d}=RI(g,t);let I=d;const u={},{[i]:C}=l,p=Kg(l,[i].map(GI.A));if(Object.entries(p||{}).forEach((e=>{let[n,o]=e;const{vars:r,css:l,varsWithDefaults:a}=RI(o,t);I=Rc(I,a),u[n]={css:l,vars:r}})),C){const{css:e,vars:n,varsWithDefaults:o}=RI(C,t);I=Rc(I,o),u[i]={css:e,vars:n}}function A(t,n){let o=r;if("class"===r&&(o=".%s"),"data"===r&&(o="[data-%s]"),null!==r&&void 0!==r&&r.startsWith("data-")&&!r.includes("%s")&&(o="[".concat(r,'="%s"]')),t){if("media"===o){var a;if(e.defaultColorScheme===t)return":root";const o=(null===(a=l[t])||void 0===a||null===(a=a.palette)||void 0===a?void 0:a.mode)||t;return{["@media (prefers-color-scheme: ".concat(o,")")]:{":root":n}}}if(o)return e.defaultColorScheme===t?":root, ".concat(o.replace("%s",String(t))):o.replace("%s",String(t))}return":root"}return{vars:I,generateThemeVars:()=>{let e=Xe({},s);return Object.entries(u).forEach((t=>{let[,{vars:n}]=t;e=Rc(e,n)})),e},generateStyleSheets:()=>{const t=[],r=e.defaultColorScheme||"light";function a(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:Xe({},n)}:e)}a(n(void 0,Xe({},c)),c);const{[r]:i}=u,g=Kg(u,[r].map(GI.A));if(i){var s;const{css:e}=i,t=null===(s=l[r])||void 0===s||null===(s=s.palette)||void 0===s?void 0:s.mode,g=Xe(!o&&t?{colorScheme:t}:{},e);a(n(r,Xe({},g)),g)}return Object.entries(g).forEach((e=>{var t;let[r,{css:i}]=e;const g=null===(t=l[r])||void 0===t||null===(t=t.palette)||void 0===t?void 0:t.mode,s=Xe(!o&&g?{colorScheme:g}:{},i);a(n(r,Xe({},s)),s)})),t}}};function VI(e,t){return Xe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const XI=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const xI={textTransform:"uppercase"},JI='"Roboto", "Helvetica", "Arial", sans-serif';function NI(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=JI,fontSize:r=14,fontWeightLight:l=300,fontWeightRegular:a=400,fontWeightMedium:i=500,fontWeightBold:g=700,htmlFontSize:s=16,allVariants:c,pxToRem:d}=n,I=Kg(n,XI);const u=r/14,C=d||(e=>"".concat(e/s*u,"rem")),p=(e,t,n,r,l)=>{return Xe(Xe(Xe({fontFamily:o,fontWeight:e,fontSize:C(t),lineHeight:n},o===JI?{letterSpacing:"".concat((a=r/t,Math.round(1e5*a)/1e5),"em")}:{}),l),c);var a},A={h1:p(l,96,1.167,-1.5),h2:p(l,60,1.2,-.5),h3:p(a,48,1.167,0),h4:p(a,34,1.235,.25),h5:p(a,24,1.334,0),h6:p(i,20,1.6,.15),subtitle1:p(a,16,1.75,.15),subtitle2:p(i,14,1.57,.1),body1:p(a,16,1.5,.15),body2:p(a,14,1.43,.15),button:p(i,14,1.75,.4,xI),caption:p(a,12,1.66,.4),overline:p(a,12,2.66,1,xI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Rc(Xe({htmlFontSize:s,pxToRem:C,fontFamily:o,fontSize:r,fontWeightLight:l,fontWeightRegular:a,fontWeightMedium:i,fontWeightBold:g},A),I,{clone:!1})}function HI(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const FI=["none",HI(0,2,1,-1,0,1,1,0,0,1,3,0),HI(0,3,1,-2,0,2,2,0,0,1,5,0),HI(0,3,3,-2,0,3,4,0,0,1,8,0),HI(0,2,4,-1,0,4,5,0,0,1,10,0),HI(0,3,5,-1,0,5,8,0,0,1,14,0),HI(0,3,5,-1,0,6,10,0,0,1,18,0),HI(0,4,5,-2,0,7,10,1,0,2,16,1),HI(0,5,5,-3,0,8,10,1,0,3,14,2),HI(0,5,6,-3,0,9,12,1,0,3,16,2),HI(0,6,6,-3,0,10,14,1,0,4,18,3),HI(0,6,7,-4,0,11,15,1,0,4,20,3),HI(0,7,8,-4,0,12,17,2,0,5,22,4),HI(0,7,8,-4,0,13,19,2,0,5,24,4),HI(0,7,9,-4,0,14,21,2,0,5,26,4),HI(0,8,9,-5,0,15,22,2,0,6,28,5),HI(0,8,10,-5,0,16,24,2,0,6,30,5),HI(0,8,11,-5,0,17,26,2,0,6,32,5),HI(0,9,11,-5,0,18,28,2,0,7,34,6),HI(0,9,12,-6,0,19,29,2,0,7,36,6),HI(0,10,13,-6,0,20,31,3,0,8,38,7),HI(0,10,13,-6,0,21,33,3,0,8,40,7),HI(0,10,14,-6,0,22,35,3,0,8,42,7),HI(0,11,14,-7,0,23,36,3,0,9,44,8),HI(0,11,15,-7,0,24,38,3,0,9,46,8)],YI=["duration","easing","delay"],KI={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},MI={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function LI(e){return"".concat(Math.round(e),"ms")}function EI(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function zI(e){const t=Xe(Xe({},KI),e.easing),n=Xe(Xe({},MI),e.duration);return Xe(Xe({getAutoHeightDuration:EI,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:r=n.standard,easing:l=t.easeInOut,delay:a=0}=o;Kg(o,YI);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof r?r:LI(r)," ").concat(l," ").concat("string"===typeof a?a:LI(a)))).join(",")}},e),{},{easing:t,duration:n})}const jI={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function DI(){const e=Xe({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return function e(t){const n=Object.entries(t);for(let r=0;r<n.length;r++){const[l,a]=n[r];!Bc(o=a)&&"undefined"!==typeof o&&"string"!==typeof o&&"boolean"!==typeof o&&"number"!==typeof o&&!Array.isArray(o)||l.startsWith("unstable_")?delete t[l]:Bc(a)&&(t[l]=Xe({},a),e(t[l]))}var o}(e),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(e,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const TI=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];const PI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:o,palette:r={},transitions:l={},typography:a={},shape:i}=e,g=Kg(e,TI);if(e.vars&&void 0===e.generateThemeVars)throw new Error(xg(20));const s=ZI(r),c=Hd(e);let d=Rc(c,{mixins:VI(c.breakpoints,n),palette:s,shadows:FI.slice(),typography:NI(s,a),transitions:zI(l),zIndex:Xe({},jI)});d=Rc(d,g);for(var I=arguments.length,u=new Array(I>1?I-1:0),C=1;C<I;C++)u[C-1]=arguments[C];return d=u.reduce(((e,t)=>Rc(e,t)),d),d.unstable_sxConfig=Xe(Xe({},Vd),null===g||void 0===g?void 0:g.unstable_sxConfig),d.unstable_sx=function(e){return xd({sx:e,theme:this})},d.toRuntimeSource=DI,d};function UI(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const QI=["palette","opacity","overlays"],OI=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=UI(t);return"linear-gradient(rgba(255 255 255 / ".concat(n,"), rgba(255 255 255 / ").concat(n,"))")}));function qI(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function _I(e){return"dark"===e?OI:[]}function $I(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const eu=e=>[...[...Array(25)].map(((t,n)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(n))),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],tu=e=>(t,n)=>{const o=e.rootSelector||":root",r=e.colorSchemeSelector;let l=r;if("class"===r&&(l=".%s"),"data"===r&&(l="[data-%s]"),null!==r&&void 0!==r&&r.startsWith("data-")&&!r.includes("%s")&&(l="[".concat(r,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const r={};return eu(e.cssVarPrefix).forEach((e=>{r[e]=n[e],delete n[e]})),"media"===l?{[o]:n,"@media (prefers-color-scheme: dark)":{[o]:r}}:l?{[l.replace("%s",t)]:r,["".concat(o,", ").concat(l.replace("%s",t))]:n}:{[o]:Xe(Xe({},n),r)}}if(l&&"media"!==l)return"".concat(o,", ").concat(l.replace("%s",String(t)))}else if(t){if("media"===l)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[o]:n}};if(l)return l.replace("%s",String(t))}return o},nu=["palette"],ou=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function ru(e,t,n){!e[t]&&n&&(e[t]=n)}function lu(e){return"string"===typeof e&&e.startsWith("hsl")?eI(e):e}function au(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=_d(lu(e[t]),("MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()."),"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.'))))}const iu=e=>{try{return e()}catch(sE){}};function gu(e,t,n,o){var r,l,a;if(!t)return;t=!0===t?{}:t;const i="dark"===o?"dark":"light";var g;if(!n)return void(e[o]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:o}=e,r=Kg(e,QI),l=ZI(t);return Xe({palette:l,opacity:Xe(Xe({},qI(l.mode)),n),overlays:o||_I(l.mode)},r)}(Xe(Xe({},t),{},{palette:Xe({mode:i},null===(g=t)||void 0===g?void 0:g.palette)})));const s=PI(Xe(Xe({},n),{},{palette:Xe({mode:i},null===(r=t)||void 0===r?void 0:r.palette)})),{palette:c}=s,d=Kg(s,nu);return e[o]=Xe(Xe({},t),{},{palette:c,opacity:Xe(Xe({},qI(i)),null===(l=t)||void 0===l?void 0:l.opacity),overlays:(null===(a=t)||void 0===a?void 0:a.overlays)||_I(i)}),d}function su(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:o=!1,cssVarPrefix:r="mui",shouldSkipGeneratingVar:l=$I,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),rootSelector:i=":root"}=e,g=Kg(e,ou),s=Object.keys(t)[0],c=n||(t.light&&"light"!==s?"light":s),d=function(){return SI(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(r),{[c]:I,light:u,dark:C}=t,p=Xe({},Kg(t,[c,"light","dark"].map(GI.A)));let A=I;if(("dark"===c&&!("dark"in t)||"light"===c&&!("light"in t))&&(A=!0),!A)throw new Error(xg(21,c));const m=gu(p,A,g,c);u&&!p.light&&gu(p,u,void 0,"light"),C&&!p.dark&&gu(p,C,void 0,"dark");let h=Xe(Xe({defaultColorScheme:c},m),{},{cssVarPrefix:r,colorSchemeSelector:a,rootSelector:i,getCssVar:d,colorSchemes:p,font:Xe(Xe({},BI(m.typography)),m.font),spacing:(b=g.spacing,"number"===typeof b?"".concat(b,"px"):"string"===typeof b||"function"===typeof b||Array.isArray(b)?b:"8px")});var b;Object.keys(h.colorSchemes).forEach((e=>{const t=h.colorSchemes[e].palette,n=e=>{const n=e.split("-"),o=n[1],r=n[2];return d(e,t[o][r])};if("light"===t.mode&&(ru(t.common,"background","#fff"),ru(t.common,"onBackground","#000")),"dark"===t.mode&&(ru(t.common,"background","#000"),ru(t.common,"onBackground","#fff")),function(e,t){t.forEach((t=>{e[t]||(e[t]={})}))}(t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),"light"===t.mode){ru(t.Alert,"errorColor",lI(t.error.light,.6)),ru(t.Alert,"infoColor",lI(t.info.light,.6)),ru(t.Alert,"successColor",lI(t.success.light,.6)),ru(t.Alert,"warningColor",lI(t.warning.light,.6)),ru(t.Alert,"errorFilledBg",n("palette-error-main")),ru(t.Alert,"infoFilledBg",n("palette-info-main")),ru(t.Alert,"successFilledBg",n("palette-success-main")),ru(t.Alert,"warningFilledBg",n("palette-warning-main")),ru(t.Alert,"errorFilledColor",iu((()=>t.getContrastText(t.error.main)))),ru(t.Alert,"infoFilledColor",iu((()=>t.getContrastText(t.info.main)))),ru(t.Alert,"successFilledColor",iu((()=>t.getContrastText(t.success.main)))),ru(t.Alert,"warningFilledColor",iu((()=>t.getContrastText(t.warning.main)))),ru(t.Alert,"errorStandardBg",iI(t.error.light,.9)),ru(t.Alert,"infoStandardBg",iI(t.info.light,.9)),ru(t.Alert,"successStandardBg",iI(t.success.light,.9)),ru(t.Alert,"warningStandardBg",iI(t.warning.light,.9)),ru(t.Alert,"errorIconColor",n("palette-error-main")),ru(t.Alert,"infoIconColor",n("palette-info-main")),ru(t.Alert,"successIconColor",n("palette-success-main")),ru(t.Alert,"warningIconColor",n("palette-warning-main")),ru(t.AppBar,"defaultBg",n("palette-grey-100")),ru(t.Avatar,"defaultBg",n("palette-grey-400")),ru(t.Button,"inheritContainedBg",n("palette-grey-300")),ru(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),ru(t.Chip,"defaultBorder",n("palette-grey-400")),ru(t.Chip,"defaultAvatarColor",n("palette-grey-700")),ru(t.Chip,"defaultIconColor",n("palette-grey-700")),ru(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ru(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ru(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ru(t.LinearProgress,"primaryBg",iI(t.primary.main,.62)),ru(t.LinearProgress,"secondaryBg",iI(t.secondary.main,.62)),ru(t.LinearProgress,"errorBg",iI(t.error.main,.62)),ru(t.LinearProgress,"infoBg",iI(t.info.main,.62)),ru(t.LinearProgress,"successBg",iI(t.success.main,.62)),ru(t.LinearProgress,"warningBg",iI(t.warning.main,.62)),ru(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.11)")),ru(t.Slider,"primaryTrack",iI(t.primary.main,.62)),ru(t.Slider,"secondaryTrack",iI(t.secondary.main,.62)),ru(t.Slider,"errorTrack",iI(t.error.main,.62)),ru(t.Slider,"infoTrack",iI(t.info.main,.62)),ru(t.Slider,"successTrack",iI(t.success.main,.62)),ru(t.Slider,"warningTrack",iI(t.warning.main,.62));const e=gI(t.background.default,.8);ru(t.SnackbarContent,"bg",e),ru(t.SnackbarContent,"color",iu((()=>t.getContrastText(e)))),ru(t.SpeedDialAction,"fabHoverBg",gI(t.background.paper,.15)),ru(t.StepConnector,"border",n("palette-grey-400")),ru(t.StepContent,"border",n("palette-grey-400")),ru(t.Switch,"defaultColor",n("palette-common-white")),ru(t.Switch,"defaultDisabledColor",n("palette-grey-100")),ru(t.Switch,"primaryDisabledColor",iI(t.primary.main,.62)),ru(t.Switch,"secondaryDisabledColor",iI(t.secondary.main,.62)),ru(t.Switch,"errorDisabledColor",iI(t.error.main,.62)),ru(t.Switch,"infoDisabledColor",iI(t.info.main,.62)),ru(t.Switch,"successDisabledColor",iI(t.success.main,.62)),ru(t.Switch,"warningDisabledColor",iI(t.warning.main,.62)),ru(t.TableCell,"border",iI(oI(t.divider,1),.88)),ru(t.Tooltip,"bg",oI(t.grey[700],.92))}if("dark"===t.mode){ru(t.Alert,"errorColor",iI(t.error.light,.6)),ru(t.Alert,"infoColor",iI(t.info.light,.6)),ru(t.Alert,"successColor",iI(t.success.light,.6)),ru(t.Alert,"warningColor",iI(t.warning.light,.6)),ru(t.Alert,"errorFilledBg",n("palette-error-dark")),ru(t.Alert,"infoFilledBg",n("palette-info-dark")),ru(t.Alert,"successFilledBg",n("palette-success-dark")),ru(t.Alert,"warningFilledBg",n("palette-warning-dark")),ru(t.Alert,"errorFilledColor",iu((()=>t.getContrastText(t.error.dark)))),ru(t.Alert,"infoFilledColor",iu((()=>t.getContrastText(t.info.dark)))),ru(t.Alert,"successFilledColor",iu((()=>t.getContrastText(t.success.dark)))),ru(t.Alert,"warningFilledColor",iu((()=>t.getContrastText(t.warning.dark)))),ru(t.Alert,"errorStandardBg",lI(t.error.light,.9)),ru(t.Alert,"infoStandardBg",lI(t.info.light,.9)),ru(t.Alert,"successStandardBg",lI(t.success.light,.9)),ru(t.Alert,"warningStandardBg",lI(t.warning.light,.9)),ru(t.Alert,"errorIconColor",n("palette-error-main")),ru(t.Alert,"infoIconColor",n("palette-info-main")),ru(t.Alert,"successIconColor",n("palette-success-main")),ru(t.Alert,"warningIconColor",n("palette-warning-main")),ru(t.AppBar,"defaultBg",n("palette-grey-900")),ru(t.AppBar,"darkBg",n("palette-background-paper")),ru(t.AppBar,"darkColor",n("palette-text-primary")),ru(t.Avatar,"defaultBg",n("palette-grey-600")),ru(t.Button,"inheritContainedBg",n("palette-grey-800")),ru(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),ru(t.Chip,"defaultBorder",n("palette-grey-700")),ru(t.Chip,"defaultAvatarColor",n("palette-grey-300")),ru(t.Chip,"defaultIconColor",n("palette-grey-300")),ru(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ru(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ru(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ru(t.LinearProgress,"primaryBg",lI(t.primary.main,.5)),ru(t.LinearProgress,"secondaryBg",lI(t.secondary.main,.5)),ru(t.LinearProgress,"errorBg",lI(t.error.main,.5)),ru(t.LinearProgress,"infoBg",lI(t.info.main,.5)),ru(t.LinearProgress,"successBg",lI(t.success.main,.5)),ru(t.LinearProgress,"warningBg",lI(t.warning.main,.5)),ru(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.13)")),ru(t.Slider,"primaryTrack",lI(t.primary.main,.5)),ru(t.Slider,"secondaryTrack",lI(t.secondary.main,.5)),ru(t.Slider,"errorTrack",lI(t.error.main,.5)),ru(t.Slider,"infoTrack",lI(t.info.main,.5)),ru(t.Slider,"successTrack",lI(t.success.main,.5)),ru(t.Slider,"warningTrack",lI(t.warning.main,.5));const e=gI(t.background.default,.98);ru(t.SnackbarContent,"bg",e),ru(t.SnackbarContent,"color",iu((()=>t.getContrastText(e)))),ru(t.SpeedDialAction,"fabHoverBg",gI(t.background.paper,.15)),ru(t.StepConnector,"border",n("palette-grey-600")),ru(t.StepContent,"border",n("palette-grey-600")),ru(t.Switch,"defaultColor",n("palette-grey-300")),ru(t.Switch,"defaultDisabledColor",n("palette-grey-600")),ru(t.Switch,"primaryDisabledColor",lI(t.primary.main,.55)),ru(t.Switch,"secondaryDisabledColor",lI(t.secondary.main,.55)),ru(t.Switch,"errorDisabledColor",lI(t.error.main,.55)),ru(t.Switch,"infoDisabledColor",lI(t.info.main,.55)),ru(t.Switch,"successDisabledColor",lI(t.success.main,.55)),ru(t.Switch,"warningDisabledColor",lI(t.warning.main,.55)),ru(t.TableCell,"border",lI(oI(t.divider,1),.68)),ru(t.Tooltip,"bg",oI(t.grey[700],.92))}au(t.background,"default"),au(t.background,"paper"),au(t.common,"background"),au(t.common,"onBackground"),au(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&ru(t[e],"mainChannel",_d(lu(n.main))),n.light&&ru(t[e],"lightChannel",_d(lu(n.light))),n.dark&&ru(t[e],"darkChannel",_d(lu(n.dark))),n.contrastText&&ru(t[e],"contrastTextChannel",_d(lu(n.contrastText))),"text"===e&&(au(t[e],"primary"),au(t[e],"secondary")),"action"===e&&(n.active&&au(t[e],"active"),n.selected&&au(t[e],"selected")))}))}));for(var f=arguments.length,y=new Array(f>1?f-1:0),v=1;v<f;v++)y[v-1]=arguments[v];h=y.reduce(((e,t)=>Rc(e,t)),h);const Z={prefix:r,disableCssColorScheme:o,shouldSkipGeneratingVar:l,getSelector:tu(h)},{vars:G,generateThemeVars:S,generateStyleSheets:B}=kI(h,Z);return h.vars=G,Object.entries(h.colorSchemes[h.defaultColorScheme]).forEach((e=>{let[t,n]=e;h[t]=n})),h.generateThemeVars=S,h.generateStyleSheets=B,h.generateSpacing=function(){return od(g.spacing,Oc(this))},h.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(a),h.spacing=h.generateSpacing(),h.shouldSkipGeneratingVar=l,h.unstable_sxConfig=Xe(Xe({},Vd),null===g||void 0===g?void 0:g.unstable_sxConfig),h.unstable_sx=function(e){return xd({sx:e,theme:this})},h.toRuntimeSource=DI,h}const cu=["palette","cssVariables","colorSchemes","defaultColorScheme"];function du(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]=Xe(Xe({},!0!==n&&n),{},{palette:ZI(Xe(Xe({},!0===n?{}:n.palette),{},{mode:t}))}))}function Iu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:o=(t?void 0:{light:!0}),defaultColorScheme:r=(null===t||void 0===t?void 0:t.mode)}=e,l=Kg(e,cu),a=r||"light",i=null===o||void 0===o?void 0:o[a],g=Xe(Xe({},o),t?{[a]:Xe(Xe({},"boolean"!==typeof i&&i),{},{palette:t})}:void 0);for(var s=arguments.length,c=new Array(s>1?s-1:0),d=1;d<s;d++)c[d-1]=arguments[d];if(!1===n){if(!("colorSchemes"in e))return PI(e,...c);let n=t;"palette"in e||g[a]&&(!0!==g[a]?n=g[a].palette:"dark"===a&&(n={mode:"dark"}));const o=PI(Xe(Xe({},e),{},{palette:n}),...c);return o.defaultColorScheme=a,o.colorSchemes=g,"light"===o.palette.mode&&(o.colorSchemes.light=Xe(Xe({},!0!==g.light&&g.light),{},{palette:o.palette}),du(o,"dark",g.dark)),"dark"===o.palette.mode&&(o.colorSchemes.dark=Xe(Xe({},!0!==g.dark&&g.dark),{},{palette:o.palette}),du(o,"light",g.light)),o}return t||"light"in g||"light"!==a||(g.light=!0),su(Xe(Xe({},l),{},{colorSchemes:g,defaultColorScheme:a},"boolean"!==typeof n&&n),...c)}const uu=Iu(),Cu="$$material";const pu=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},Au=e=>pu(e)&&"classes"!==e,mu=Td({themeId:Cu,defaultTheme:uu,rootShouldForwardProp:Au}),hu=e=>e,bu=(()=>{let e=hu;return{configure(t){e=t},generate:t=>e(t),reset(){e=hu}}})(),fu={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function yu(e,t){const n=fu[t];return n?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(n):"".concat(bu.generate(e),"-").concat(t)}function vu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o={};return t.forEach((t=>{o[t]=yu(e,t,n)})),o}function Zu(e){return yu("MuiDataGrid",e)}const Gu=vu("MuiDataGrid",["aiAssistantPanel","aiAssistantPanelHeader","aiAssistantPanelTitleContainer","aiAssistantPanelTitle","aiAssistantPanelBody","aiAssistantPanelEmptyText","aiAssistantPanelFooter","aiAssistantPanelConversation","aiAssistantPanelConversationList","aiAssistantPanelConversationTitle","aiAssistantPanelSuggestions","aiAssistantPanelSuggestionsList","aiAssistantPanelSuggestionsItem","aiAssistantPanelSuggestionsLabel","actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","aggregationRowOverlayWrapper","autoHeight","autosizing","mainContent","withSidePanel","booleanCell","cell--editable","cell--editing","cell--flex","cell--textCenter","cell--textLeft","cell--textRight","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--pinnedLeft","cell--pinnedRight","cell--selectionMode","cell","cellCheckbox","cellEmpty","cellSkeleton","cellOffsetLeft","checkboxInput","collapsible","collapsibleTrigger","collapsibleIcon","collapsiblePanel","columnHeader","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader--pinnedLeft","columnHeader--pinnedRight","columnHeader--last","columnHeader--lastUnpinned","columnHeader--siblingFocused","columnHeader--filter","columnHeaderFilterInput","columnHeaderFilterOperatorLabel","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeaders","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsManagement","columnsManagementRow","columnsManagementHeader","columnsManagementSearchInput","columnsManagementFooter","columnsManagementScrollArea","columnsManagementEmptyText","container--top","container--bottom","detailPanel","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filler","filler--borderBottom","filler--pinnedLeft","filler--pinnedRight","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","main--hasPinnedRight","main--hiddenContent","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","root--noToolbar","row","row--editable","row--editing","row--firstVisible","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","row--borderBottom","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","rowReorderIcon","rowSkeleton","scrollArea--left","scrollArea--right","scrollArea","scrollbar","scrollbar--vertical","scrollbar--horizontal","scrollbarFiller","scrollbarFiller--header","scrollbarFiller--borderTop","scrollbarFiller--borderBottom","scrollbarFiller--pinnedRight","selectedRowCount","sortButton","sortIcon","shadowScrollArea","sidebar","sidebarHeader","toolbarContainer","toolbar","toolbarLabel","toolbarDivider","toolbarFilterList","toolbarQuickFilter","toolbarQuickFilterTrigger","toolbarQuickFilterControl","virtualScroller","virtualScroller--hasScrollX","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","withVerticalBorder","withBorderColor","cell--withRightBorder","cell--withLeftBorder","columnHeader--withRightBorder","columnHeader--withLeftBorder","treeDataGroupingCell","treeDataGroupingCellToggle","treeDataGroupingCellLoadingContainer","groupingCriteriaCell","groupingCriteriaCellToggle","groupingCriteriaCellLoadingContainer","pinnedRows","pinnedRows--top","pinnedRows--bottom","pivotPanelAvailableFields","pivotPanelField","pivotPanelField--sorted","pivotPanelFieldActionContainer","pivotPanelFieldCheckbox","pivotPanelFieldDragIcon","pivotPanelFieldList","pivotPanelFieldName","pivotPanelHeader","pivotPanelPlaceholder","pivotPanelScrollArea","pivotPanelSearchContainer","pivotPanelSection","pivotPanelSectionTitle","pivotPanelSections","pivotPanelSwitch","pivotPanelSwitchLabel","prompt","promptContent","promptText","promptFeedback","promptChangeList","promptChangesToggle","promptChangesToggleIcon","promptIcon","promptIconContainer","promptError","promptAction"]),Su={values:{xs:0,sm:600,md:900,lg:1200,xl:1536},up:e=>{const t=Su.values,n="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(n,"px)")}},Bu={spacingUnit:"--DataGrid-t-spacing-unit",colors:{border:{base:"--DataGrid-t-color-border-base"},foreground:{base:"--DataGrid-t-color-foreground-base",muted:"--DataGrid-t-color-foreground-muted",accent:"--DataGrid-t-color-foreground-accent",disabled:"--DataGrid-t-color-foreground-disabled",error:"--DataGrid-t-color-foreground-error"},background:{base:"--DataGrid-t-color-background-base",overlay:"--DataGrid-t-color-background-overlay",backdrop:"--DataGrid-t-color-background-backdrop"},interactive:{hover:"--DataGrid-t-color-interactive-hover",hoverOpacity:"--DataGrid-t-color-interactive-hover-opacity",focus:"--DataGrid-t-color-interactive-focus",focusOpacity:"--DataGrid-t-color-interactive-focus-opacity",disabled:"--DataGrid-t-color-interactive-disabled",disabledOpacity:"--DataGrid-t-color-interactive-disabled-opacity",selected:"--DataGrid-t-color-interactive-selected",selectedOpacity:"--DataGrid-t-color-interactive-selected-opacity"}},header:{background:{base:"--DataGrid-t-header-background-base"}},cell:{background:{pinned:"--DataGrid-t-cell-background-pinned"}},radius:{base:"--DataGrid-t-radius-base"},typography:{font:{body:"--DataGrid-t-typography-font-body",small:"--DataGrid-t-typography-font-small",large:"--DataGrid-t-typography-font-large"},fontFamily:{base:"--DataGrid-t-typography-font-family-base"},fontWeight:{light:"--DataGrid-t-typography-font-weight-light",regular:"--DataGrid-t-typography-font-weight-regular",medium:"--DataGrid-t-typography-font-weight-medium",bold:"--DataGrid-t-typography-font-weight-bold"}},transitions:{easing:{easeIn:"--DataGrid-t-transition-easing-ease-in",easeOut:"--DataGrid-t-transition-easing-ease-out",easeInOut:"--DataGrid-t-transition-easing-ease-in-out"},duration:{short:"--DataGrid-t-transition-duration-short",base:"--DataGrid-t-transition-duration-base",long:"--DataGrid-t-transition-duration-long"}},shadows:{base:"--DataGrid-t-shadow-base",overlay:"--DataGrid-t-shadow-overlay"},zIndex:{panel:"--DataGrid-t-z-index-panel",menu:"--DataGrid-t-z-index-menu"}},wu=function e(t){if("string"===typeof t)return"var(".concat(t,")");const n={};for(const o in t)Object.hasOwn(t,o)&&(n[o]=e(t[o]));return n}(Bu),Ru=Sg({breakpoints:Su,spacing:function(e,t,n,o){if(void 0===e)return Wu(1);if(void 0===t)return Wu(e);if(void 0===n)return Wu(e)+" "+Wu(t);if(void 0===o)return Wu(e)+" "+Wu(t)+" "+Wu(n);return Wu(e)+" "+Wu(t)+" "+Wu(n)+" "+Wu(o)},transition:function(e,t){const{duration:n=Ru.transitions.duration.base,easing:o=Ru.transitions.easing.easeInOut,delay:r=0}=null!==t&&void 0!==t?t:{};return e.map((e=>"".concat(e," ").concat(n," ").concat(o," ").concat(r,"ms"))).join(", ")},keys:Bu},wu);function Wu(e){return 0===e?"0":"calc(var(--DataGrid-t-spacing-unit) * ".concat(e,")")}var ku=n(9461);const Vu={};function Xu(e,t){const n=o.useRef(Vu);return n.current===Vu&&(n.current=e(t)),n}const xu=Object.is,Ju=Fg,Nu=(e,t)=>e===t||e.length===t.length&&e.every(((e,n)=>e===t[n])),Hu=(e,t)=>{let n=Object.is;return t instanceof Array?n=Nu:t instanceof Object&&(n=Ju),n(e,t)},Fu=()=>({state:null,equals:null,selector:null,args:void 0}),Yu=[],Ku=()=>null,Mu=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xu;const l=Xu(Fu),a=null!==l.current.selector,[i,g]=o.useState(a?null:t(e,n));l.current.state=i,l.current.equals=r,l.current.selector=t;const s=l.current.args;if(l.current.args=n,a&&!Hu(s,n)){const t=l.current.selector(e,l.current.args);l.current.equals(l.current.state,t)||(l.current.state=t,g(t))}const c=o.useCallback((()=>(l.current.subscription||(l.current.subscription=e.current.store.subscribe((()=>{const t=l.current.selector(e,l.current.args);l.current.equals(l.current.state,t)||(l.current.state=t,g(t))}))),null)),Yu),d=o.useCallback((()=>()=>{l.current.subscription&&(l.current.subscription(),l.current.subscription=void 0)}),Yu);return(0,ku.useSyncExternalStore)(d,c,Ku),i},Lu=o.createContext(void 0);function Eu(){const e=o.useContext(Lu);if(void 0===e)throw new Error(["MUI X: Could not find the Data Grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join("\n"));return e}const zu={width:3,rx:1.5,x:10.5},ju=e=>e.current.state.dimensions.hasScrollX&&(!e.current.state.dimensions.hasScrollY||0===e.current.state.dimensions.scrollbarSize),Du=mu("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[t.root,{["&.".concat(Gu.autoHeight)]:t.autoHeight},{["&.".concat(Gu.autosizing)]:t.autosizing},{["&.".concat(Gu["root--densityStandard"])]:t["root--densityStandard"]},{["&.".concat(Gu["root--densityComfortable"])]:t["root--densityComfortable"]},{["&.".concat(Gu["root--densityCompact"])]:t["root--densityCompact"]},{["&.".concat(Gu["root--disableUserSelection"])]:t["root--disableUserSelection"]},{["&.".concat(Gu["root--noToolbar"])]:t["root--noToolbar"]},{["&.".concat(Gu.withVerticalBorder)]:t.withVerticalBorder},{["& .".concat(Gu.actionsCell)]:t.actionsCell},{["& .".concat(Gu.booleanCell)]:t.booleanCell},{["& .".concat(Gu.cell)]:t.cell},{["& .".concat(Gu["cell--editable"])]:t["cell--editable"]},{["& .".concat(Gu["cell--editing"])]:t["cell--editing"]},{["& .".concat(Gu["cell--flex"])]:t["cell--flex"]},{["& .".concat(Gu["cell--pinnedLeft"])]:t["cell--pinnedLeft"]},{["& .".concat(Gu["cell--pinnedRight"])]:t["cell--pinnedRight"]},{["& .".concat(Gu["cell--rangeBottom"])]:t["cell--rangeBottom"]},{["& .".concat(Gu["cell--rangeLeft"])]:t["cell--rangeLeft"]},{["& .".concat(Gu["cell--rangeRight"])]:t["cell--rangeRight"]},{["& .".concat(Gu["cell--rangeTop"])]:t["cell--rangeTop"]},{["& .".concat(Gu["cell--selectionMode"])]:t["cell--selectionMode"]},{["& .".concat(Gu["cell--textCenter"])]:t["cell--textCenter"]},{["& .".concat(Gu["cell--textLeft"])]:t["cell--textLeft"]},{["& .".concat(Gu["cell--textRight"])]:t["cell--textRight"]},{["& .".concat(Gu["cell--withLeftBorder"])]:t["cell--withLeftBorder"]},{["& .".concat(Gu["cell--withRightBorder"])]:t["cell--withRightBorder"]},{["& .".concat(Gu.cellCheckbox)]:t.cellCheckbox},{["& .".concat(Gu.cellEmpty)]:t.cellEmpty},{["& .".concat(Gu.cellOffsetLeft)]:t.cellOffsetLeft},{["& .".concat(Gu.cellSkeleton)]:t.cellSkeleton},{["& .".concat(Gu.checkboxInput)]:t.checkboxInput},{["& .".concat(Gu.columnHeader)]:t.columnHeader},{["& .".concat(Gu["columnHeader--alignCenter"])]:t["columnHeader--alignCenter"]},{["& .".concat(Gu["columnHeader--alignLeft"])]:t["columnHeader--alignLeft"]},{["& .".concat(Gu["columnHeader--alignRight"])]:t["columnHeader--alignRight"]},{["& .".concat(Gu["columnHeader--dragging"])]:t["columnHeader--dragging"]},{["& .".concat(Gu["columnHeader--emptyGroup"])]:t["columnHeader--emptyGroup"]},{["& .".concat(Gu["columnHeader--filledGroup"])]:t["columnHeader--filledGroup"]},{["& .".concat(Gu["columnHeader--filtered"])]:t["columnHeader--filtered"]},{["& .".concat(Gu["columnHeader--last"])]:t["columnHeader--last"]},{["& .".concat(Gu["columnHeader--lastUnpinned"])]:t["columnHeader--lastUnpinned"]},{["& .".concat(Gu["columnHeader--moving"])]:t["columnHeader--moving"]},{["& .".concat(Gu["columnHeader--numeric"])]:t["columnHeader--numeric"]},{["& .".concat(Gu["columnHeader--pinnedLeft"])]:t["columnHeader--pinnedLeft"]},{["& .".concat(Gu["columnHeader--pinnedRight"])]:t["columnHeader--pinnedRight"]},{["& .".concat(Gu["columnHeader--siblingFocused"])]:t["columnHeader--siblingFocused"]},{["& .".concat(Gu["columnHeader--sortable"])]:t["columnHeader--sortable"]},{["& .".concat(Gu["columnHeader--sorted"])]:t["columnHeader--sorted"]},{["& .".concat(Gu["columnHeader--withLeftBorder"])]:t["columnHeader--withLeftBorder"]},{["& .".concat(Gu["columnHeader--withRightBorder"])]:t["columnHeader--withRightBorder"]},{["& .".concat(Gu.columnHeaderCheckbox)]:t.columnHeaderCheckbox},{["& .".concat(Gu.columnHeaderDraggableContainer)]:t.columnHeaderDraggableContainer},{["& .".concat(Gu.columnHeaderTitleContainer)]:t.columnHeaderTitleContainer},{["& .".concat(Gu.columnHeaderTitleContainerContent)]:t.columnHeaderTitleContainerContent},{["& .".concat(Gu.columnSeparator)]:t.columnSeparator},{["& .".concat(Gu["columnSeparator--resizable"])]:t["columnSeparator--resizable"]},{["& .".concat(Gu["columnSeparator--resizing"])]:t["columnSeparator--resizing"]},{["& .".concat(Gu["columnSeparator--sideLeft"])]:t["columnSeparator--sideLeft"]},{["& .".concat(Gu["columnSeparator--sideRight"])]:t["columnSeparator--sideRight"]},{["& .".concat(Gu["container--bottom"])]:t["container--bottom"]},{["& .".concat(Gu["container--top"])]:t["container--top"]},{["& .".concat(Gu.detailPanelToggleCell)]:t.detailPanelToggleCell},{["& .".concat(Gu["detailPanelToggleCell--expanded"])]:t["detailPanelToggleCell--expanded"]},{["& .".concat(Gu.editBooleanCell)]:t.editBooleanCell},{["& .".concat(Gu.filterIcon)]:t.filterIcon},{["& .".concat(Gu["filler--borderBottom"])]:t["filler--borderBottom"]},{["& .".concat(Gu["filler--pinnedLeft"])]:t["filler--pinnedLeft"]},{["& .".concat(Gu["filler--pinnedRight"])]:t["filler--pinnedRight"]},{["& .".concat(Gu.groupingCriteriaCell)]:t.groupingCriteriaCell},{["& .".concat(Gu.groupingCriteriaCellLoadingContainer)]:t.groupingCriteriaCellLoadingContainer},{["& .".concat(Gu.groupingCriteriaCellToggle)]:t.groupingCriteriaCellToggle},{["& .".concat(Gu.headerFilterRow)]:t.headerFilterRow},{["& .".concat(Gu.iconSeparator)]:t.iconSeparator},{["& .".concat(Gu.menuIcon)]:t.menuIcon},{["& .".concat(Gu.menuIconButton)]:t.menuIconButton},{["& .".concat(Gu.menuList)]:t.menuList},{["& .".concat(Gu.menuOpen)]:t.menuOpen},{["& .".concat(Gu.overlayWrapperInner)]:t.overlayWrapperInner},{["& .".concat(Gu.pinnedRows)]:t.pinnedRows},{["& .".concat(Gu["pinnedRows--bottom"])]:t["pinnedRows--bottom"]},{["& .".concat(Gu["pinnedRows--top"])]:t["pinnedRows--top"]},{["& .".concat(Gu.row)]:t.row},{["& .".concat(Gu["row--borderBottom"])]:t["row--borderBottom"]},{["& .".concat(Gu["row--detailPanelExpanded"])]:t["row--detailPanelExpanded"]},{["& .".concat(Gu["row--dragging"])]:t["row--dragging"]},{["& .".concat(Gu["row--dynamicHeight"])]:t["row--dynamicHeight"]},{["& .".concat(Gu["row--editable"])]:t["row--editable"]},{["& .".concat(Gu["row--editing"])]:t["row--editing"]},{["& .".concat(Gu["row--firstVisible"])]:t["row--firstVisible"]},{["& .".concat(Gu["row--lastVisible"])]:t["row--lastVisible"]},{["& .".concat(Gu.rowReorderCell)]:t.rowReorderCell},{["& .".concat(Gu["rowReorderCell--draggable"])]:t["rowReorderCell--draggable"]},{["& .".concat(Gu.rowReorderCellContainer)]:t.rowReorderCellContainer},{["& .".concat(Gu.rowReorderCellPlaceholder)]:t.rowReorderCellPlaceholder},{["& .".concat(Gu.rowSkeleton)]:t.rowSkeleton},{["& .".concat(Gu.scrollbar)]:t.scrollbar},{["& .".concat(Gu["scrollbar--horizontal"])]:t["scrollbar--horizontal"]},{["& .".concat(Gu["scrollbar--vertical"])]:t["scrollbar--vertical"]},{["& .".concat(Gu.scrollbarFiller)]:t.scrollbarFiller},{["& .".concat(Gu["scrollbarFiller--borderBottom"])]:t["scrollbarFiller--borderBottom"]},{["& .".concat(Gu["scrollbarFiller--borderTop"])]:t["scrollbarFiller--borderTop"]},{["& .".concat(Gu["scrollbarFiller--header"])]:t["scrollbarFiller--header"]},{["& .".concat(Gu["scrollbarFiller--pinnedRight"])]:t["scrollbarFiller--pinnedRight"]},{["& .".concat(Gu.sortIcon)]:t.sortIcon},{["& .".concat(Gu.treeDataGroupingCell)]:t.treeDataGroupingCell},{["& .".concat(Gu.treeDataGroupingCellLoadingContainer)]:t.treeDataGroupingCellLoadingContainer},{["& .".concat(Gu.treeDataGroupingCellToggle)]:t.treeDataGroupingCellToggle},{["& .".concat(Gu.withBorderColor)]:t.withBorderColor}]})((()=>{const e=Eu(),t=Mu(e,ju),n=Ru.colors.background.base,o=Ru.header.background.base,r=Ru.cell.background.pinned,l=function(e){return Tu(e,1)}(Ru.colors.interactive.hover),a=Ru.colors.interactive.hoverOpacity,i=Ru.colors.interactive.selected,g=Ru.colors.interactive.selectedOpacity,s=i,c="calc(".concat(g," + ").concat(a,")"),d=Pu(n,l,a),I=Pu(n,i,g),u=Pu(n,s,c),C=Pu(r,l,a),p=Pu(r,i,g),A=Pu(r,s,c),m=e=>({["& .".concat(Gu["cell--pinnedLeft"],", & .").concat(Gu["cell--pinnedRight"])]:{backgroundColor:e,"&.Mui-selected":{backgroundColor:Pu(e,I,g),"&:hover":{backgroundColor:Pu(e,u,c)}}}}),h=m(C),b=m(p),f=m(A),y={backgroundColor:I,"&:hover":{backgroundColor:u,"@media (hover: none)":{backgroundColor:I}}};return{"--unstable_DataGrid-radius":Ru.radius.base,"--unstable_DataGrid-headWeight":Ru.typography.fontWeight.medium,"--DataGrid-rowBorderColor":Ru.colors.border.base,"--DataGrid-cellOffsetMultiplier":2,"--DataGrid-width":"0px","--DataGrid-hasScrollX":"0","--DataGrid-hasScrollY":"0","--DataGrid-scrollbarSize":"10px","--DataGrid-rowWidth":"0px","--DataGrid-columnsTotalWidth":"0px","--DataGrid-leftPinnedWidth":"0px","--DataGrid-rightPinnedWidth":"0px","--DataGrid-headerHeight":"0px","--DataGrid-headersTotalHeight":"0px","--DataGrid-topContainerHeight":"0px","--DataGrid-bottomContainerHeight":"0px",flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:Ru.colors.border.base,borderRadius:"var(--unstable_DataGrid-radius)",backgroundColor:Ru.colors.background.base,color:Ru.colors.foreground.base,font:Ru.typography.font.body,outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflow:"hidden",overflowAnchor:"none",transform:"translate(0, 0)",[".".concat(Gu.main," > *:first-child").concat("/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */")]:{borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"},["&.".concat(Gu.autoHeight)]:{height:"auto"},["&.".concat(Gu.autosizing)]:{["& .".concat(Gu.columnHeaderTitleContainerContent," > *")]:{overflow:"visible !important"},"@media (hover: hover)":{["& .".concat(Gu.menuIcon)]:{width:"0 !important",visibility:"hidden !important"}},["& .".concat(Gu.cell)]:{overflow:"visible !important",whiteSpace:"nowrap",minWidth:"max-content !important",maxWidth:"max-content !important"},["& .".concat(Gu.groupingCriteriaCell)]:{width:"unset"},["& .".concat(Gu.treeDataGroupingCell)]:{width:"unset"}},["&.".concat(Gu.withSidePanel)]:{flexDirection:"row"},["& .".concat(Gu.mainContent)]:{display:"flex",flexDirection:"column",overflow:"hidden",flex:1},["& .".concat(Gu.columnHeader,", & .").concat(Gu.cell)]:{WebkitTapHighlightColor:"transparent",padding:"0 10px",boxSizing:"border-box"},["& .".concat(Gu.columnHeader,":focus-within, & .").concat(Gu.cell,":focus-within")]:{outline:"solid ".concat(Tu(Ru.colors.interactive.focus,.5)," ").concat(1,"px"),outlineOffset:-1},["& .".concat(Gu.columnHeader,":focus, & .").concat(Gu.cell,":focus")]:{outline:"solid ".concat(Ru.colors.interactive.focus," ").concat(1,"px"),outlineOffset:-1},["& .".concat(Gu.columnHeader,":focus,\n      & .").concat(Gu["columnHeader--withLeftBorder"],",\n      & .").concat(Gu["columnHeader--withRightBorder"],",\n      & .").concat(Gu["columnHeader--siblingFocused"],",\n      & .").concat(Gu["virtualScroller--hasScrollX"]," .").concat(Gu["columnHeader--lastUnpinned"],",\n      & .").concat(Gu["virtualScroller--hasScrollX"]," .").concat(Gu["columnHeader--last"],"\n      ")]:{["& .".concat(Gu.columnSeparator)]:{opacity:0},"@media (hover: none)":{["& .".concat(Gu["columnSeparator--resizable"])]:{opacity:1}},["& .".concat(Gu["columnSeparator--resizable"],":hover")]:{opacity:1}},["&.".concat(Gu["root--noToolbar"],' [aria-rowindex="1"] [aria-colindex="1"]')]:{borderTopLeftRadius:"calc(var(--unstable_DataGrid-radius) - 1px)"},["&.".concat(Gu["root--noToolbar"],' [aria-rowindex="1"] .').concat(Gu["columnHeader--last"])]:{borderTopRightRadius:t?"calc(var(--unstable_DataGrid-radius) - 1px)":void 0},["& .".concat(Gu.columnHeaderCheckbox,", & .").concat(Gu.cellCheckbox)]:{padding:0,justifyContent:"center",alignItems:"center"},["& .".concat(Gu.columnHeader)]:{position:"relative",display:"flex",alignItems:"center",backgroundColor:o},["& .".concat(Gu["columnHeader--filter"])]:{paddingTop:8,paddingBottom:8,paddingRight:5,minHeight:"min-content",overflow:"hidden"},["& .".concat(Gu["virtualScroller--hasScrollX"]," .").concat(Gu["columnHeader--last"])]:{overflow:"hidden"},["& .".concat(Gu["pivotPanelField--sorted"]," .").concat(Gu.iconButtonContainer,",\n      & .").concat(Gu["columnHeader--sorted"]," .").concat(Gu.iconButtonContainer,",\n      & .").concat(Gu["columnHeader--filtered"]," .").concat(Gu.iconButtonContainer)]:{visibility:"visible",width:"auto"},["& .".concat(Gu.pivotPanelField,":not(.").concat(Gu["pivotPanelField--sorted"],") .").concat(Gu.sortButton,",\n      & .").concat(Gu.columnHeader,":not(.").concat(Gu["columnHeader--sorted"],") .").concat(Gu.sortButton)]:{opacity:0,transition:Ru.transition(["opacity"],{duration:Ru.transitions.duration.short})},["& .".concat(Gu.columnHeaderTitleContainer)]:{display:"flex",alignItems:"center",gap:Ru.spacing(.25),minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"},["& .".concat(Gu.columnHeaderTitleContainerContent)]:{overflow:"hidden",display:"flex",alignItems:"center"},["& .".concat(Gu["columnHeader--filledGroup"]," .").concat(Gu.columnHeaderTitleContainer)]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},["& .".concat(Gu.sortIcon,", & .").concat(Gu.filterIcon)]:{fontSize:"inherit"},["& .".concat(Gu["columnHeader--sortable"])]:{cursor:"pointer"},["& .".concat(Gu["columnHeader--alignCenter"]," .").concat(Gu.columnHeaderTitleContainer)]:{justifyContent:"center"},["& .".concat(Gu["columnHeader--alignRight"]," .").concat(Gu.columnHeaderDraggableContainer,", & .").concat(Gu["columnHeader--alignRight"]," .").concat(Gu.columnHeaderTitleContainer)]:{flexDirection:"row-reverse"},["& .".concat(Gu["columnHeader--alignCenter"]," .").concat(Gu.menuIcon)]:{marginLeft:"auto"},["& .".concat(Gu["columnHeader--alignRight"]," .").concat(Gu.menuIcon)]:{marginRight:"auto",marginLeft:-5},["& .".concat(Gu["columnHeader--moving"])]:{backgroundColor:d},["& .".concat(Gu["columnHeader--pinnedLeft"],", & .").concat(Gu["columnHeader--pinnedRight"])]:{position:"sticky",zIndex:40,background:Ru.header.background.base},["& .".concat(Gu.columnSeparator)]:{position:"absolute",overflow:"hidden",zIndex:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:10,color:Ru.colors.border.base},["& .".concat(Gu.columnHeaders)]:{width:"var(--DataGrid-rowWidth)",backgroundColor:o},"@media (hover: hover)":{["& .".concat(Gu.columnHeader,":hover")]:{["& .".concat(Gu.menuIcon)]:{width:"auto",visibility:"visible"},["& .".concat(Gu.iconButtonContainer)]:{visibility:"visible",width:"auto"}},["& .".concat(Gu.columnHeader,":not(.").concat(Gu["columnHeader--sorted"],"):hover .").concat(Gu.sortButton,",\n        & .").concat(Gu.pivotPanelField,":not(.").concat(Gu["pivotPanelField--sorted"],"):hover .").concat(Gu.sortButton,",\n        & .").concat(Gu.pivotPanelField,":not(.").concat(Gu["pivotPanelField--sorted"],") .").concat(Gu.sortButton,":focus-visible")]:{opacity:.5}},"@media (hover: none)":{["& .".concat(Gu.columnHeader," .").concat(Gu.menuIcon)]:{width:"auto",visibility:"visible"},["& .".concat(Gu.columnHeader,":focus,\n        & .").concat(Gu["columnHeader--siblingFocused"])]:{[".".concat(Gu["columnSeparator--resizable"])]:{color:Ru.colors.foreground.accent}},["& .".concat(Gu.pivotPanelField,":not(.").concat(Gu["pivotPanelField--sorted"],") .").concat(Gu.sortButton)]:{opacity:.5}},["& .".concat(Gu["columnSeparator--sideLeft"])]:{left:-5},["& .".concat(Gu["columnSeparator--sideRight"])]:{right:-5},["& .".concat(Gu["columnHeader--withRightBorder"]," .").concat(Gu["columnSeparator--sideLeft"])]:{left:-5.5},["& .".concat(Gu["columnHeader--withRightBorder"]," .").concat(Gu["columnSeparator--sideRight"])]:{right:-5.5},["& .".concat(Gu["columnSeparator--resizable"])]:{cursor:"col-resize",touchAction:"none",["&.".concat(Gu["columnSeparator--resizing"])]:{color:Ru.colors.foreground.accent},"@media (hover: none)":{["& .".concat(Gu.iconSeparator," rect")]:zu},"@media (hover: hover)":{"&:hover":{color:Ru.colors.foreground.accent,["& .".concat(Gu.iconSeparator," rect")]:zu}},"& svg":{pointerEvents:"none"}},["& .".concat(Gu.iconSeparator)]:{color:"inherit",transition:Ru.transition(["color","width"],{duration:Ru.transitions.duration.short})},["& .".concat(Gu.menuIcon)]:{width:0,visibility:"hidden",fontSize:20,marginRight:-5,display:"flex",alignItems:"center"},[".".concat(Gu.menuOpen)]:{visibility:"visible",width:"auto"},["& .".concat(Gu.headerFilterRow)]:{["& .".concat(Gu.columnHeader)]:{boxSizing:"border-box",borderBottom:"1px solid var(--DataGrid-rowBorderColor)"}},["& .".concat(Gu["row--borderBottom"]," .").concat(Gu.columnHeader,",\n      & .").concat(Gu["row--borderBottom"]," .").concat(Gu.filler,",\n      & .").concat(Gu["row--borderBottom"]," .").concat(Gu.scrollbarFiller)]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},["& .".concat(Gu["row--borderBottom"]," .").concat(Gu.cell)]:{borderBottom:"1px solid var(--rowBorderColor)"},[".".concat(Gu.row)]:{display:"flex",width:"var(--DataGrid-rowWidth)",breakInside:"avoid","--rowBorderColor":"var(--DataGrid-rowBorderColor)",["&.".concat(Gu["row--firstVisible"])]:{"--rowBorderColor":"transparent"},"&:hover":{backgroundColor:d,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Gu.rowSkeleton,":hover")]:{backgroundColor:"transparent"},"&.Mui-selected":y},["& .".concat(Gu["container--top"],", & .").concat(Gu["container--bottom"])]:{"[role=row]":{background:Ru.colors.background.base}},["& .".concat(Gu.cell)]:{flex:"0 0 auto",height:"var(--height)",width:"var(--width)",lineHeight:"calc(var(--height) - 1px)",boxSizing:"border-box",borderTop:"1px solid var(--rowBorderColor)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","&.Mui-selected":y},["& .".concat(Gu["virtualScrollerContent--overflowed"]," .").concat(Gu["row--lastVisible"]," .").concat(Gu.cell)]:{borderTopColor:"transparent"},["& .".concat(Gu.pinnedRows," .").concat(Gu.row,", .").concat(Gu.aggregationRowOverlayWrapper," .").concat(Gu.row)]:{backgroundColor:r,"&:hover":{backgroundColor:C}},["& .".concat(Gu["pinnedRows--top"]," :first-of-type")]:{["& .".concat(Gu.cell,", .").concat(Gu.scrollbarFiller)]:{borderTop:"none"}},["&.".concat(Gu["root--disableUserSelection"])]:{userSelect:"none"},["& .".concat(Gu["row--dynamicHeight"]," > .").concat(Gu.cell)]:{whiteSpace:"initial",lineHeight:"inherit"},["& .".concat(Gu.cellEmpty)]:{flex:1,padding:0,height:"unset"},["& .".concat(Gu.cell,".").concat(Gu["cell--selectionMode"])]:{cursor:"default"},["& .".concat(Gu.cell,".").concat(Gu["cell--editing"])]:{padding:1,display:"flex",boxShadow:Ru.shadows.base,backgroundColor:Ru.colors.background.overlay,"&:focus-within":{outline:"".concat(1,"px solid ").concat(Ru.colors.interactive.focus),outlineOffset:-1}},["& .".concat(Gu["row--editing"])]:{boxShadow:Ru.shadows.base},["& .".concat(Gu["row--editing"]," .").concat(Gu.cell)]:{boxShadow:"none",backgroundColor:Ru.colors.background.overlay},["& .".concat(Gu.editBooleanCell)]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},["& .".concat(Gu.booleanCell,'[data-value="true"]')]:{color:Ru.colors.foreground.muted},["& .".concat(Gu.booleanCell,'[data-value="false"]')]:{color:Ru.colors.foreground.disabled},["& .".concat(Gu.actionsCell)]:{display:"inline-flex",alignItems:"center",gridGap:Ru.spacing(1)},["& .".concat(Gu.rowReorderCell)]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:Ru.colors.interactive.disabledOpacity},["& .".concat(Gu["rowReorderCell--draggable"])]:{cursor:"grab",opacity:1},["& .".concat(Gu.rowReorderCellContainer)]:{padding:0,display:"flex",alignItems:"stretch"},[".".concat(Gu.withBorderColor)]:{borderColor:Ru.colors.border.base},["& .".concat(Gu["cell--withLeftBorder"],", & .").concat(Gu["columnHeader--withLeftBorder"])]:{borderLeftColor:"var(--DataGrid-rowBorderColor)",borderLeftWidth:"1px",borderLeftStyle:"solid"},["& .".concat(Gu["cell--withRightBorder"],", & .").concat(Gu["columnHeader--withRightBorder"])]:{borderRightColor:"var(--DataGrid-rowBorderColor)",borderRightWidth:"1px",borderRightStyle:"solid"},["& .".concat(Gu["cell--flex"])]:{display:"flex",alignItems:"center",lineHeight:"inherit"},["& .".concat(Gu["cell--textLeft"])]:{textAlign:"left",justifyContent:"flex-start"},["& .".concat(Gu["cell--textRight"])]:{textAlign:"right",justifyContent:"flex-end"},["& .".concat(Gu["cell--textCenter"])]:{textAlign:"center",justifyContent:"center"},["& .".concat(Gu["cell--pinnedLeft"],", & .").concat(Gu["cell--pinnedRight"])]:{position:"sticky",zIndex:30,background:Ru.cell.background.pinned,"&.Mui-selected":{backgroundColor:p}},["& .".concat(Gu.row)]:{"&:hover":h,"&.Mui-selected":b,"&.Mui-selected:hover":f},["& .".concat(Gu.cellOffsetLeft)]:{flex:"0 0 auto",display:"inline-block"},["& .".concat(Gu.cellSkeleton)]:{flex:"0 0 auto",height:"100%",display:"inline-flex",alignItems:"center"},["& .".concat(Gu.columnHeaderDraggableContainer)]:{display:"flex",width:"100%",height:"100%"},["& .".concat(Gu.rowReorderCellPlaceholder)]:{display:"none"},["& .".concat(Gu["columnHeader--dragging"],", & .").concat(Gu["row--dragging"])]:{background:Ru.colors.background.overlay,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:Ru.colors.interactive.disabledOpacity},["& .".concat(Gu["row--dragging"])]:{background:Ru.colors.background.overlay,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:Ru.colors.interactive.disabledOpacity,["& .".concat(Gu.rowReorderCellPlaceholder)]:{display:"flex"}},["& .".concat(Gu.treeDataGroupingCell)]:{display:"flex",alignItems:"center",width:"100%"},["& .".concat(Gu.treeDataGroupingCellToggle)]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:Ru.spacing(2)},["& .".concat(Gu.treeDataGroupingCellLoadingContainer,", .").concat(Gu.groupingCriteriaCellLoadingContainer)]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},["& .".concat(Gu.groupingCriteriaCell)]:{display:"flex",alignItems:"center",width:"100%"},["& .".concat(Gu.groupingCriteriaCellToggle)]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:Ru.spacing(2)},["& .".concat(Gu.columnHeaders," .").concat(Gu.scrollbarFiller)]:{backgroundColor:o},[".".concat(Gu.scrollbarFiller)]:{minWidth:"calc(var(--DataGrid-hasScrollY) * var(--DataGrid-scrollbarSize))",alignSelf:"stretch",["&.".concat(Gu["scrollbarFiller--borderTop"])]:{borderTop:"1px solid var(--DataGrid-rowBorderColor)"},["&.".concat(Gu["scrollbarFiller--borderBottom"])]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},["&.".concat(Gu["scrollbarFiller--pinnedRight"])]:{backgroundColor:Ru.cell.background.pinned,position:"sticky",right:0}},["& .".concat(Gu.filler)]:{flex:"1 0 auto"},["& .".concat(Gu["filler--borderBottom"])]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},["& .".concat(Gu.columnHeaders," .").concat(Gu.filler)]:{backgroundColor:o},["& .".concat(Gu["main--hiddenContent"])]:{["& .".concat(Gu.virtualScrollerContent)]:{position:"fixed",visibility:"hidden"},["& .".concat(Gu["scrollbar--vertical"],", & .").concat(Gu.pinnedRows,", & .").concat(Gu.virtualScroller," > .").concat(Gu.filler)]:{display:"none"}}}}));function Tu(e,t){return"rgba(from ".concat(e," r g b / ").concat(t,")")}function Pu(e,t,n){return"color-mix(in srgb,".concat(e,", ").concat(t," calc(").concat(n," * 100%))")}const Uu=o.createContext(void 0);const Qu=()=>{const e=o.useContext(Uu);if(!e)throw new Error("MUI X: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},Ou=o.createContext(void 0);const qu=()=>{const e=o.useContext(Ou);if(void 0===e)throw new Error(["MUI X: Could not find the Data Grid configuration context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join("\n"));return e},_u=o.createContext({className:"unset",tag:(0,ao.jsx)("style",{href:"/unset"})});function $u(){return o.useContext(_u).className}function eC(e){const t=qu(),n=Qu(),r=t.hooks.useCSSVariables(),l=o.useMemo((()=>{const e="".concat("MuiDataGridVariables","-").concat(r.id),t=".".concat(e,"{").concat(function(e){let t="";for(const n in e)Object.hasOwn(e,n)&&void 0!==e[n]&&(t+="".concat(n,":").concat(e[n],";"));return t}(r.variables),"}");return{className:e,tag:(0,ao.jsx)("style",{href:"/".concat(e),nonce:n.nonce,children:t})}}),[n.nonce,r]);return(0,ao.jsx)(_u.Provider,{value:l,children:e.children})}var tC=Symbol("NOT_FOUND");function nC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var oC=e=>Array.isArray(e)?e:[e];function rC(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var lC=(e,t)=>e===t;function aC(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;const{length:o}=t;for(let r=0;r<o;r++)if(!e(t[r],n[r]))return!1;return!0}}function iC(e,t){const n="object"===typeof t?t:{equalityCheck:t},{equalityCheck:o=lC,maxSize:r=1,resultEqualityCheck:l}=n,a=aC(o);let i=0;const g=r<=1?function(e){let t;return{get:n=>t&&e(t.key,n)?t.value:tC,put(e,n){t={key:e,value:n}},getEntries:()=>t?[t]:[],clear(){t=void 0}}}(a):function(e,t){let n=[];function o(e){const o=n.findIndex((n=>t(e,n.key)));if(o>-1){const e=n[o];return o>0&&(n.splice(o,1),n.unshift(e)),e.value}return tC}return{get:o,put:function(t,r){o(t)===tC&&(n.unshift({key:t,value:r}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(r,a);function s(){let t=g.get(arguments);if(t===tC){if(t=e.apply(null,arguments),i++,l){const e=g.getEntries().find((e=>l(e.value,t)));e&&(t=e.value,0!==i&&i--)}g.put(arguments,t)}return t}return s.clearCache=()=>{g.clear(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}var gC="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function sC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:o}=t;let r,l=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const o=e.get(n);void 0===o?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=o}else{let e=t.p;null===e&&(t.p=e=new Map);const o=e.get(n);void 0===o?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=o}}const i=t;let g;if(1===t.s)g=t.v;else if(g=e.apply(null,arguments),l++,o){var s,c,d;const e=null!==(s=null===(c=r)||void 0===c||null===(d=c.deref)||void 0===d?void 0:d.call(c))&&void 0!==s?s:r;null!=e&&o(e,g)&&(g=e,0!==l&&l--);r="object"===typeof g&&null!==g||"function"===typeof g?new gC(g):g}return i.s=1,i.v=g,g}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>l,a.resetResultsCount=()=>{l=0},a}function cC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const r="function"===typeof e?{memoize:e,memoizeOptions:n}:e,l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let o,l=0,a=0,i={},g=t.pop();"object"===typeof g&&(i=g,g=t.pop()),nC(g,"createSelector expects an output function after the inputs, but received: [".concat(typeof g,"]"));const s=Xe(Xe({},r),i),{memoize:c,memoizeOptions:d=[],argsMemoize:I=sC,argsMemoizeOptions:u=[],devModeChecks:C={}}=s,p=oC(d),A=oC(u),m=rC(t),h=c((function(){return l++,g.apply(null,arguments)}),...p);const b=I((function(){a++;const e=function(e,t){const n=[],{length:o}=e;for(let r=0;r<o;r++)n.push(e[r].apply(null,t));return n}(m,arguments);return o=h.apply(null,e),o}),...A);return Object.assign(b,{resultFunc:g,memoizedResultFunc:h,dependencies:m,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:c,argsMemoize:I})};return Object.assign(l,{withTypes:()=>l}),l}var dC=cC(sC),IC=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dC;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),o=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.reduce(((e,t,o)=>(e[n[o]]=t,e)),{})}));return o}),{withTypes:()=>IC});class uC{constructor(e){this.value=e}deref(){return this.value}}const CC=(()=>"undefined"===typeof WeakRef?uC:WeakRef)();const pC=cC({memoize:iC,memoizeOptions:{maxSize:1,equalityCheck:Object.is},argsMemoize:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:o}=t;let r,l=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e+=1){let n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){"current"in n&&"instanceId"in n.current&&(n=n.current.state);let e=t.o;null===e&&(e=new WeakMap,t.o=e);const o=e.get(n);void 0===o?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=o}else{let e=t.p;null===e&&(e=new Map,t.p=e);const o=e.get(n);void 0===o?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=o}}const i=t;let g;if(1===t.s)g=t.v;else if(g=e.apply(null,arguments),l+=1,o){const e=function(e){return e instanceof CC?e.deref():e}(r);null!=e&&o(e,g)&&(g=e,0!==l&&(l-=1));r="object"===typeof g&&null!==g||"function"===typeof g?new CC(g):g}return i.s=1,i.v=g,g}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>l,a.resetResultsCount=()=>{l=0},a}}),AC=new WeakMap,mC=function(e,t,n,o,r,l){if((arguments.length<=6?0:arguments.length-6)>0)throw new Error("Unsupported number of selectors");let a;if(e&&t&&n&&o&&r&&l)a=(a,i)=>{const g=e(a,i),s=t(a,i),c=n(a,i),d=o(a,i),I=r(a,i);return l(g,s,c,d,I,i)};else if(e&&t&&n&&o&&r)a=(l,a)=>{const i=e(l,a),g=t(l,a),s=n(l,a),c=o(l,a);return r(i,g,s,c,a)};else if(e&&t&&n&&o)a=(r,l)=>{const a=e(r,l),i=t(r,l),g=n(r,l);return o(a,i,g,l)};else if(e&&t&&n)a=(o,r)=>{const l=e(o,r),a=t(o,r);return n(l,a,r)};else{if(!e||!t)throw new Error("Missing arguments");a=(n,o)=>{const r=e(n,o);return t(r,o)}}return a},hC=e=>(t,n)=>e(t.current.state,n),bC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{const o=e.current.instanceId,r=AC.get(o),l=null!==r&&void 0!==r?r:new Map,a=l.get(t);if(l&&a){if(!Hu(a.selectorArgs,n)){const o=void 0!==n?[...t.slice(0,t.length-1),()=>n,t[t.length-1]]:t,r=pC(...o);return r.selectorArgs=n,l.set(t,r),r(e,n)}return a(e,n)}const i=void 0!==n?[...t.slice(0,t.length-1),()=>n,t[t.length-1]]:t,g=pC(...i);return g.selectorArgs=n,r||AC.set(o,l),l.set(t,g),g(e,n)}},fC={compact:.7,comfortable:1.3,standard:1},yC=hC((e=>e.density)),vC=mC(yC,(e=>fC[e])),ZC=()=>()=>{},GC=()=>!1,SC=()=>!0;let BC=function(e){return e.LEFT="left",e.RIGHT="right",e}({});const wC={left:[],right:[]},RC=hC((e=>e.isRtl)),WC=hC((e=>e.columns)),kC=mC(WC,(e=>e.orderedFields)),VC=mC(WC,(e=>e.lookup)),XC=bC(kC,VC,((e,t)=>e.map((e=>t[e])))),xC=mC(WC,(e=>e.columnVisibilityModel)),JC=mC(WC,(e=>e.initialColumnVisibilityModel)),NC=bC(XC,xC,((e,t)=>e.filter((e=>!1!==t[e.field])))),HC=bC(NC,(e=>e.map((e=>e.field)))),FC=hC((e=>e.pinnedColumns)),YC=(bC(FC,kC,RC,((e,t,n)=>KC(e,t,n))),bC(WC,FC,HC,RC,((e,t,n,o)=>{const r=KC(t,n,o);return{left:r.left.map((t=>e.lookup[t])),right:r.right.map((t=>e.lookup[t]))}})));function KC(e,t,n){var o,r;if(!Array.isArray(e.left)&&!Array.isArray(e.right))return wC;if(0===(null===(o=e.left)||void 0===o?void 0:o.length)&&0===(null===(r=e.right)||void 0===r?void 0:r.length))return wC;const l=(e,t)=>Array.isArray(e)?e.filter((e=>t.includes(e))):[],a=l(e.left,t),i=t.filter((e=>!a.includes(e))),g=l(e.right,i);return n?{left:g,right:a}:{left:a,right:g}}const MC=bC(NC,(e=>{const t=[];let n=0;for(let o=0;o<e.length;o+=1)t.push(n),n+=e[o].computedWidth;return t})),LC=bC(XC,(e=>e.filter((e=>e.filterable)))),EC=bC(XC,(e=>e.reduce(((e,t)=>(t.filterable&&(e[t.field]=t),e)),{}))),zC=bC(XC,(e=>e.some((e=>void 0!==e.colSpan)))),jC=hC((e=>e.preferencePanel)),DC=mC(jC,((e,t)=>!(!e.open||e.labelId!==t)));var TC=function(e){return e.filters="filters",e.columns="columns",e.aiAssistant="aiAssistant",e}(TC||{});const PC=o.createContext(void 0);function UC(){const e=o.useContext(PC);if(void 0===e)throw new Error(["MUI X: Could not find the Data Grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join("\n"));return e}const QC=o.createContext(void 0);function OC(){const e=o.useContext(QC);if(void 0===e)throw new Error("MUI X: Missing context.");return e}function qC(e){let{children:t}=e;const n=o.useRef(null),r=o.useRef(null),l=o.useRef(null),a=o.useMemo((()=>({columnsPanelTriggerRef:n,filterPanelTriggerRef:r,aiAssistantPanelTriggerRef:l})),[]);return(0,ao.jsx)(QC.Provider,{value:a,children:t})}function _C(){var e,t;const n=UC(),o=Mu(n,XC),r=Qu(),l=Mu(n,jC),{columnsPanelTriggerRef:a,filterPanelTriggerRef:i,aiAssistantPanelTriggerRef:g}=OC(),s=n.current.unstable_applyPipeProcessors("preferencePanel",null,null!==(e=l.openedPanelValue)&&void 0!==e?e:TC.filters);let c=null;switch(l.openedPanelValue){case TC.filters:c=i.current;break;case TC.columns:c=a.current;break;case TC.aiAssistant:c=g.current}return(0,ao.jsx)(r.slots.panel,Sg({id:l.panelId,open:o.length>0&&l.open,"aria-labelledby":l.labelId,target:c,onClose:()=>n.current.hidePreferences()},null===(t=r.slotProps)||void 0===t?void 0:t.panel,{children:s}))}function $C(){var e;const t=Qu();return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(_C,{}),t.showToolbar&&(0,ao.jsx)(t.slots.toolbar,Sg({},null===(e=t.slotProps)||void 0===e?void 0:e.toolbar))]})}const ep=Td(),tp=hC((e=>e.dimensions)),np=mC(tp,(e=>e.columnsTotalWidth)),op=mC(tp,(e=>e.rowHeight)),rp=mC(tp,(e=>e.contentSize.height)),lp=mC(tp,(e=>e.hasScrollX)),ap=mC(tp,(e=>e.hasScrollY)),ip=mC(tp,(e=>e.columnsTotalWidth<e.viewportOuterSize.width)),gp=mC(tp,(e=>e.headerHeight)),sp=mC(tp,(e=>e.groupHeaderHeight)),cp=(mC(tp,(e=>e.headerFilterHeight)),mC(tp,(e=>e.hasScrollX?e.scrollbarSize:0))),dp=mC(tp,(e=>e.hasScrollY?e.scrollbarSize:0)),Ip=mC(tp,cp,((e,t)=>{const n=e.viewportOuterSize.height-e.minimumSize.height>0;return!(0===t&&!n)})),up="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;const Cp=function(e){const t=o.useRef(e);return up((()=>{t.current=e})),o.useRef((function(){return(0,t.current)(...arguments)})).current};class pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.timeouts=new Map,this.cleanupTimeout=1e3,this.cleanupTimeout=e}register(e,t,n){this.timeouts||(this.timeouts=new Map);const o=setTimeout((()=>{"function"===typeof t&&t(),this.timeouts.delete(n.cleanupToken)}),this.cleanupTimeout);this.timeouts.set(n.cleanupToken,o)}unregister(e){const t=this.timeouts.get(e.cleanupToken);t&&(this.timeouts.delete(e.cleanupToken),clearTimeout(t))}reset(){this.timeouts&&(this.timeouts.forEach(((e,t)=>{this.unregister({cleanupToken:t})})),this.timeouts=void 0)}}class Ap{constructor(){this.registry=new FinalizationRegistry((e=>{"function"===typeof e&&e()}))}register(e,t,n){this.registry.register(e,t,n)}unregister(e){this.registry.unregister(e)}reset(){}}class mp{static create(){return new mp}}const hp={current:Zp()};let bp=0;function fp(e,t,n,r){const l=o.useState(mp.create)[0],a=o.useRef(null),i=o.useRef(null);i.current=n;const g=o.useRef(null);if(!a.current&&i.current){const n=(e,t,n)=>{var o;t.defaultMuiPrevented||(null===(o=i.current)||void 0===o||o.call(i,e,t,n))};a.current=e.current.subscribeEvent(t,n,r),bp+=1,g.current={cleanupToken:bp},hp.current.register(l,(()=>{var e;null===(e=a.current)||void 0===e||e.call(a),a.current=null,g.current=null}),g.current)}else!i.current&&a.current&&(a.current(),a.current=null,g.current&&(hp.current.unregister(g.current),g.current=null));o.useEffect((()=>{if(!a.current&&i.current){const n=(e,t,n)=>{var o;t.defaultMuiPrevented||(null===(o=i.current)||void 0===o||o.call(i,e,t,n))};a.current=e.current.subscribeEvent(t,n,r)}return g.current&&hp.current&&(hp.current.unregister(g.current),g.current=null),()=>{var e;null===(e=a.current)||void 0===e||e.call(a),a.current=null}}),[e,t,r])}const yp={isFirst:!0};function vp(e,t,n){fp(e,t,n,yp)}function Zp(){return"undefined"!==typeof FinalizationRegistry?new Ap:new pp}const Gp=[];function Sp(e){o.useEffect(e,Gp)}class Bp{constructor(){(0,ke.A)(this,"currentId",null),(0,ke.A)(this,"clear",(()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)})),(0,ke.A)(this,"disposeEffect",(()=>this.clear))}static create(){return new Bp}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function wp(){const e=Xu(Bp.create).current;return Sp(e.disposeEffect),e}function Rp(e,t){const n=Xe({},t);for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const r=o;if("components"===r||"slots"===r)n[r]=Xe(Xe({},e[r]),n[r]);else if("componentsProps"===r||"slotProps"===r){const o=e[r],l=t[r];if(l)if(o){n[r]=Xe({},l);for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const t=e;n[r][t]=Rp(o[t],l[t])}}else n[r]=l;else n[r]=o||{}}else void 0===n[r]&&(n[r]=e[r])}return n}function Wp(e){throw new Error("Failed assertion: should not be rendered")}const kp=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange","slotProps"],Vp=mu(Wp,{name:"MuiDataGrid",slot:"EditInputCell"})({font:Ru.typography.font.body,padding:"1px 0","& input":{padding:"0 16px",height:"100%"}}),Xp=Rg(((e,t)=>{const n=Qu(),{id:r,value:l,field:a,colDef:i,hasFocus:g,debounceMs:s=200,isProcessingProps:c,onValueChange:d,slotProps:I}=e,u=Wg(e,kp),C=UC(),p=o.useRef(null),[A,m]=o.useState(l),h=(e=>{const{classes:t}=e;return Ng({root:["editInputCell"]},Zu,t)})(n),b=o.useCallback((async e=>{const t=e.target.value,n=C.current.getColumn(a);let o=t;n.valueParser&&(o=n.valueParser(t,C.current.getRow(r),n,C)),m(o),C.current.setEditCellValue({id:r,field:a,value:o,debounceMs:s,unstable_skipValueParser:!0},e),d&&await d(e,t)}),[C,s,a,r,d]),f=C.current.unstable_getEditCellMeta(r,a);return o.useEffect((()=>{"debouncedSetEditCellValue"!==(null===f||void 0===f?void 0:f.changeReason)&&m(l)}),[f,l]),up((()=>{g&&p.current.focus()}),[g]),(0,ao.jsx)(Vp,Sg({as:n.slots.baseInput,inputRef:p,className:h.root,ownerState:n,fullWidth:!0,type:"number"===i.type?i.type:"text",value:null!==A&&void 0!==A?A:"",onChange:b,endAdornment:c?(0,ao.jsx)(n.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},u,null===I||void 0===I?void 0:I.root,{ref:t}))}));const xp=hC((e=>e.rows)),Jp=mC(xp,(e=>e.totalRowCount)),Np=mC(xp,(e=>e.loading)),Hp=mC(xp,(e=>e.totalTopLevelRowCount)),Fp=mC(xp,(e=>e.dataRowIdToModelLookup)),Yp=(mC(Fp,((e,t)=>e[t])),mC(xp,(e=>e.tree))),Kp=mC(Yp,((e,t)=>e[t])),Mp=mC(xp,(e=>e.groupsToFetch)),Lp=mC(xp,(e=>e.groupingName)),Ep=mC(xp,(e=>e.treeDepths)),zp=bC(xp,(e=>{var t;const n=Object.entries(e.treeDepths);return 0===n.length?1:(null!==(t=n.filter((e=>{let[,t]=e;return t>0})).map((e=>{let[t]=e;return Number(t)})).sort(((e,t)=>t-e))[0])&&void 0!==t?t:0)+1})),jp=mC(xp,(e=>e.dataRowIds)),Dp=bC(jp,Fp,((e,t)=>e.reduce(((e,n)=>t[n]?(e.push(t[n]),e):e),[]))),Tp=bC(mC(xp,(e=>null===e||void 0===e?void 0:e.additionalRowGroups)),(e=>{var t,n,o,r;const l=null===e||void 0===e?void 0:e.pinnedRows;return{bottom:null!==(t=null===l||void 0===l||null===(n=l.bottom)||void 0===n?void 0:n.map((e=>{var t;return{id:e.id,model:null!==(t=e.model)&&void 0!==t?t:{}}})))&&void 0!==t?t:[],top:null!==(o=null===l||void 0===l||null===(r=l.top)||void 0===r?void 0:r.map((e=>{var t;return{id:e.id,model:null!==(t=e.model)&&void 0!==t?t:{}}})))&&void 0!==o?o:[]}})),Pp=mC(Tp,(e=>{var t,n;return((null===e||void 0===e||null===(t=e.top)||void 0===t?void 0:t.length)||0)+((null===e||void 0===e||null===(n=e.bottom)||void 0===n?void 0:n.length)||0)})),Up=(e,t)=>t&&e.length>1?[e[0]]:e,Qp=(e,t)=>n=>Sg({},n,{sorting:Sg({},n.sorting,{sortModel:Up(e,t)})}),Op=(e,t)=>{const n=e.map((e=>((e,t)=>{const n=t.current.getColumn(e.field);if(!n||null===e.sort)return null;let o;return o=n.getSortComparator?n.getSortComparator(e.sort):"desc"===e.sort?function(){return-1*n.sortComparator(...arguments)}:n.sortComparator,o?{getSortCellParams:e=>({id:e,field:n.field,rowNode:Kp(t,e),value:t.current.getCellValue(e,n.field),api:t.current}),comparator:o}:null})(e,t))).filter((e=>!!e));return 0===n.length?null:e=>e.map((e=>({node:e,params:n.map((t=>t.getSortCellParams(e.id)))}))).sort(((e,t)=>{return o=e,r=t,n.reduce(((e,t,n)=>{if(0!==e)return e;const l=o.params[n],a=r.params[n];return t.comparator(l.value,a.value,l,a)}),0);var o,r})).map((e=>e.node.id))},qp=(e,t)=>{const n=e.indexOf(t);return t&&-1!==n&&n+1!==e.length?e[n+1]:e[0]},_p=(e,t)=>null==e&&null!=t?-1:null==t&&null!=e?1:null==e&&null==t?0:null,$p=new Intl.Collator,eA=(e,t)=>{const n=_p(e,t);return null!==n?n:Number(e)-Number(t)},tA=(e,t)=>{const n=_p(e,t);return null!==n?n:e>t?1:e<t?-1:0};let nA=0;const oA=Xe({},r).useId;function rA(e){if(void 0!==oA){const t=oA();return null!==e&&void 0!==e?e:t}return function(e){const[t,n]=o.useState(e),r=e||t;return o.useEffect((()=>{null==t&&(nA+=1,n("mui-".concat(nA)))}),[t]),r}(e)}const lA=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","slotProps","clearButton","headerFilterMenu"];function aA(e){var t,n,r;const{item:l,applyValue:a,type:i,apiRef:g,focusElementRef:s,tabIndex:c,disabled:d,slotProps:I,clearButton:u,headerFilterMenu:C}=e,p=Wg(e,lA),A=null===I||void 0===I?void 0:I.root,m=wp(),[h,b]=o.useState(iA(l.value)),[f,y]=o.useState(!1),v=rA(),Z=Qu(),G=o.useCallback((e=>{const t=iA(e.target.value);b(t),y(!0),m.start(Z.filterDebounceMs,(()=>{const e=Sg({},l,{value:"number"!==i||Number.isNaN(Number(t))?t:Number(t),fromInput:v});a(e),y(!1)}))}),[m,Z.filterDebounceMs,l,i,v,a]);return o.useEffect((()=>{l.fromInput===v&&null!=l.value||b(iA(l.value))}),[v,l]),(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(Z.slots.baseTextField,Sg({id:v,label:g.current.getLocaleText("filterPanelInputLabel"),placeholder:g.current.getLocaleText("filterPanelInputPlaceholder"),value:null!==h&&void 0!==h?h:"",onChange:G,type:i||"text",disabled:d,slotProps:Sg({},null===A||void 0===A?void 0:A.slotProps,{input:Sg({endAdornment:f?(0,ao.jsx)(Z.slots.loadIcon,{fontSize:"small",color:"action"}):null},null===A||void 0===A||null===(t=A.slotProps)||void 0===t?void 0:t.input),htmlInput:Sg({tabIndex:c},null===A||void 0===A||null===(n=A.slotProps)||void 0===n?void 0:n.htmlInput)}),inputRef:s},null===(r=Z.slotProps)||void 0===r?void 0:r.baseTextField,p,A)),C,u]})}function iA(e){if(null!=e&&""!==e)return String(e)}function gA(e){return"object"===typeof e&&null!==e}function sA(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const cA=(e,t,n)=>Math.max(t,Math.min(n,e));function dA(e,t){return Array.from({length:t-e}).map(((t,n)=>e+n))}function IA(e){return"function"===typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}const uA=(e,t)=>n=>{e&&t(n)};function CA(e){const{item:t,applyValue:n,type:r,apiRef:l,focusElementRef:a,slotProps:i}=e,g=rA(),[s,c]=o.useState([]),[d,I]=o.useState(t.value||[]),u=Qu();o.useEffect((()=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:[];I(n.map(String))}),[t.value]);const C=o.useCallback(((e,o)=>{I(o.map(String)),n(Sg({},t,{value:[...o.map((e=>"number"===r?Number(e):e))]}))}),[n,t,r]),p=o.useCallback(((e,t)=>{c(""===t?[]:[t])}),[c]),A=u.slots.baseAutocomplete;return(0,ao.jsx)(A,Sg({multiple:!0,freeSolo:!0,options:s,id:g,value:d,onChange:C,onInputChange:p,label:l.current.getLocaleText("filterPanelInputLabel"),placeholder:l.current.getLocaleText("filterPanelInputPlaceholder"),slotProps:{textField:{type:r||"text",inputRef:a}}},null===i||void 0===i?void 0:i.root))}var pA=function(e){return e.And="and",e.Or="or",e}(pA||{});const AA={filteredRowsLookup:{},filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}},mA=()=>({items:[],logicOperator:pA.And,quickFilterValues:[],quickFilterLogicOperator:pA.And});function hA(e){return{current:e.current.getPublicApi()}}let bA;const fA=(e,t)=>{const n=Sg({},e);if(null==n.id&&(n.id=Math.round(1e5*Math.random())),null==n.operator){const e=VC(t)[n.field];n.operator=e&&e.filterOperators[0].value}return n},yA=(e,t,n)=>{const o=e.items.length>1;let r;r=o&&t?[e.items[0]]:e.items;const l=o&&r.some((e=>null==e.id));return r.some((e=>null==e.operator))||l?Sg({},e,{items:r.map((e=>fA(e,n)))}):e.items!==r?Sg({},e,{items:r}):e},vA=(e,t,n)=>o=>Sg({},o,{filterModel:yA(e,t,n)}),ZA=e=>"string"===typeof e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,GA=(e,t)=>{if(!e.field||!e.operator)return null;const n=t.current.getColumn(e.field);if(!n)return null;let o;if(n.valueParser){var r;const l=n.valueParser;o=Array.isArray(e.value)?null===(r=e.value)||void 0===r?void 0:r.map((e=>l(e,void 0,n,t))):l(e.value,void 0,n,t)}else o=e.value;const{ignoreDiacritics:l}=t.current.rootProps;l&&(o=ZA(o));const a=Sg({},e,{value:o}),i=n.filterOperators;if(null===i||void 0===i||!i.length)throw new Error("MUI X: No filter operators found for column '".concat(n.field,"'."));const g=i.find((e=>e.value===a.operator));if(!g)throw new Error("MUI X: No filter operator found for column '".concat(n.field,"' and operator value '").concat(a.operator,"'."));const s=hA(t),c=g.getApplyFilterFn(a,n);return"function"!==typeof c?null:{item:a,fn:e=>{let o=t.current.getRowValue(e,n);return l&&(o=ZA(o)),c(o,e,n,s)}}};let SA=1;const BA=(e,t,n)=>{const{items:o}=e,r=o.map((e=>GA(e,t))).filter((e=>!!e));if(0===r.length)return null;if(n||!function(){if(void 0!==bA)return bA;try{bA=new Function("return true")()}catch(Jl){bA=!1}return bA}())return(e,t)=>{const n={};for(let o=0;o<r.length;o+=1){const l=r[o];t&&!t(l.item.field)||(n[l.item.id]=l.fn(e))}return n};const l=new Function("appliers","row","shouldApplyFilter",'"use strict";\n'.concat(r.map(((e,t)=>"const shouldApply".concat(t," = !shouldApplyFilter || shouldApplyFilter(").concat(JSON.stringify(e.item.field),");"))).join("\n"),"\n\nconst result$$ = {\n").concat(r.map(((e,t)=>"  ".concat(JSON.stringify(String(e.item.id)),": !shouldApply").concat(t," ? false : appliers[").concat(t,"].fn(row),"))).join("\n"),"\n};\n\nreturn result$$;").replaceAll("$$",String(SA)));SA+=1;return(e,t)=>l(r,e,t)},wA=e=>{var t;return null===(t=e.quickFilterExcludeHiddenColumns)||void 0===t||t},RA=(e,t,n)=>{const o=BA(e,t,n),r=((e,t)=>{var n,o;const r=null!==(n=null===(o=e.quickFilterValues)||void 0===o?void 0:o.filter(Boolean))&&void 0!==n?n:[];if(0===r.length)return null;const l=wA(e)?HC(t):kC(t),a=[],{ignoreDiacritics:i}=t.current.rootProps,g=hA(t);return l.forEach((e=>{const n=t.current.getColumn(e),o=null===n||void 0===n?void 0:n.getApplyQuickFilterFn;o&&a.push({column:n,appliers:r.map((e=>{const t=i?ZA(e):e;return{fn:o(t,n,g)}}))})})),function(e,n){const o={};e:for(let l=0;l<r.length;l+=1){const s=r[l];for(let r=0;r<a.length;r+=1){const{column:c,appliers:d}=a[r],{field:I}=c;if(n&&!n(I))continue;const u=d[l];let C=t.current.getRowValue(e,c);if(null!==u.fn&&(i&&(C=ZA(C)),u.fn(C,e,c,g))){o[s]=!0;continue e}}o[s]=!1}return o}})(e,t);return function(e,t,n){var l,a;n.passingFilterItems=null!==(l=null===o||void 0===o?void 0:o(e,t))&&void 0!==l?l:null,n.passingQuickFilterValues=null!==(a=null===r||void 0===r?void 0:r(e,t))&&void 0!==a?a:null}},WA=e=>null!=e,kA=(e,t,n,o,r)=>{const l=((e,t,n)=>(e.cleanedFilterItems||(e.cleanedFilterItems=n.filter((e=>null!==GA(e,t)))),e.cleanedFilterItems))(r,o,n.items),a=e.filter(WA),i=t.filter(WA);if(a.length>0){var g;const e=e=>a.some((t=>t[e.id]));if((null!==(g=n.logicOperator)&&void 0!==g?g:mA().logicOperator)===pA.And){if(!l.every(e))return!1}else{if(!l.some(e))return!1}}if(i.length>0&&null!=n.quickFilterValues){var s;const e=e=>i.some((t=>t[e]));if((null!==(s=n.quickFilterLogicOperator)&&void 0!==s?s:mA().quickFilterLogicOperator)===pA.And){if(!n.quickFilterValues.every(e))return!1}else{if(!n.quickFilterValues.some(e))return!1}}return!0},VA=(e,t)=>n=>{if(!n.value)return null;const o=e?n.value:n.value.trim(),r=new RegExp(sA(o),"i");return e=>{if(null==e)return t;const n=r.test(String(e));return t?!n:n}},XA=(e,t)=>n=>{if(!n.value)return null;const o=e?n.value:n.value.trim(),r=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return e=>{if(null==e)return t;const n=0===r.compare(o,e.toString());return t?!n:n}},xA=e=>()=>t=>{const n=""===t||null==t;return e?!n:n},JA={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:(e,t)=>{const n=_p(e,t);return null!==n?n:"string"===typeof e?$p.compare(e.toString(),t.toString()):e-t},type:"string",align:"left",filterOperators:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{value:"contains",getApplyFilterFn:VA(e,!1),InputComponent:aA},{value:"doesNotContain",getApplyFilterFn:VA(e,!0),InputComponent:aA},{value:"equals",getApplyFilterFn:XA(e,!1),InputComponent:aA},{value:"doesNotEqual",getApplyFilterFn:XA(e,!0),InputComponent:aA},{value:"startsWith",getApplyFilterFn:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp("^".concat(sA(n),".*$"),"i");return e=>null!=e&&o.test(e.toString())},InputComponent:aA},{value:"endsWith",getApplyFilterFn:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),o=new RegExp(".*".concat(sA(n),"$"),"i");return e=>null!=e&&o.test(e.toString())},InputComponent:aA},{value:"isEmpty",getApplyFilterFn:xA(!1),requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:xA(!0),requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:t=>{if(!Array.isArray(t.value)||0===t.value.length)return null;const n=e?t.value:t.value.map((e=>e.trim())),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return e=>null!=e&&n.some((t=>0===o.compare(t,e.toString()||"")))},InputComponent:CA}]}(),renderEditCell:e=>(0,ao.jsx)(Xp,Sg({},e)),getApplyQuickFilterFn:e=>{if(!e)return null;const t=new RegExp(sA(e),"i");return(e,n,o,r)=>{let l=r.current.getRowFormattedValue(n,o);return r.current.ignoreDiacritics&&(l=ZA(l)),null!=l&&t.test(l.toString())}}},NA=e=>null==e?null:Number(e),HA=Sg({},JA,{type:"number",align:"right",headerAlign:"right",sortComparator:eA,valueParser:e=>""===e?null:Number(e),valueFormatter:e=>function(e){return"number"===typeof e&&!Number.isNaN(e)}(e)?e.toLocaleString():e||"",filterOperators:[{value:"=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>NA(t)===e.value,InputComponent:aA,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>NA(t)!==e.value,InputComponent:aA,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&NA(t)>e.value,InputComponent:aA,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&NA(t)>=e.value,InputComponent:aA,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&NA(t)<e.value,InputComponent:aA,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:t=>null!=t&&NA(t)<=e.value,InputComponent:aA,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:()=>e=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>e=>null!=e,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:e=>Array.isArray(e.value)&&0!==e.value.length?t=>null!=t&&e.value.includes(Number(t)):null,InputComponent:CA,InputComponentProps:{type:"number"}}],getApplyQuickFilterFn:e=>null==e||Number.isNaN(e)||""===e?null:t=>NA(t)===NA(e)}),FA=["item","applyValue","type","apiRef","focusElementRef","slotProps","isFilterActive","headerFilterMenu","clearButton","tabIndex","disabled"];function YA(e,t){if(null==e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?"":"date"===t?n.toISOString().substring(0,10):"datetime-local"===t?(n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),n.toISOString().substring(0,19)):n.toISOString().substring(0,10)}function KA(e){var t;const{item:n,applyValue:r,type:l,apiRef:a,focusElementRef:i,slotProps:g,headerFilterMenu:s,clearButton:c,tabIndex:d,disabled:I}=e,u=Wg(e,FA),C=null===g||void 0===g?void 0:g.root.slotProps,p=wp(),[A,m]=o.useState((()=>YA(n.value,l))),[h,b]=o.useState(!1),f=rA(),y=Qu(),v=o.useCallback((e=>{p.clear();const t=e.target.value;m(t),b(!0),p.start(y.filterDebounceMs,(()=>{const e=new Date(t);r(Sg({},n,{value:Number.isNaN(e.getTime())?void 0:e})),b(!1)}))}),[r,n,y.filterDebounceMs,p]);return o.useEffect((()=>{const e=YA(n.value,l);m(e)}),[n.value,l]),(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(y.slots.baseTextField,Sg({fullWidth:!0,id:f,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:A,onChange:v,type:l||"text",disabled:I,inputRef:i,slotProps:Sg({},C,{input:Sg({endAdornment:h?(0,ao.jsx)(y.slots.loadIcon,{fontSize:"small",color:"action"}):null},null===C||void 0===C?void 0:C.input),htmlInput:Sg({max:"datetime-local"===l?"9999-12-31T23:59":"9999-12-31",tabIndex:d},null===C||void 0===C?void 0:C.htmlInput)})},null===(t=y.slotProps)||void 0===t?void 0:t.baseTextField,u,null===g||void 0===g?void 0:g.root)),s,c]})}function MA(e,t,n,o){if(!e.value)return null;const r=new Date(e.value);n?r.setSeconds(0,0):(r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),r.setHours(0,0,0,0));const l=r.getTime();return e=>{if(!e)return!1;if(o)return t(e.getTime(),l);const r=new Date(e);return n?r.setSeconds(0,0):r.setHours(0,0,0,0),t(r.getTime(),l)}}const LA=e=>[{value:"is",getApplyFilterFn:t=>MA(t,((e,t)=>e===t),e),InputComponent:KA,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:t=>MA(t,((e,t)=>e!==t),e),InputComponent:KA,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:t=>MA(t,((e,t)=>e>t),e),InputComponent:KA,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:t=>MA(t,((e,t)=>e>=t),e),InputComponent:KA,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:t=>MA(t,((e,t)=>e<t),e,!e),InputComponent:KA,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:t=>MA(t,((e,t)=>e<=t),e),InputComponent:KA,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:()=>e=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>e=>null!=e,requiresFilterValue:!1}],EA=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange","slotProps"],zA=mu(Wp)({fontSize:"inherit"});function jA(e){var t;const{id:n,value:r,field:l,colDef:a,hasFocus:i,onValueChange:g,slotProps:s}=e,c=Wg(e,EA),d="dateTime"===a.type,I=UC(),u=o.useRef(null),C=o.useMemo((()=>{let e,t;if(e=null==r?null:r instanceof Date?r:new Date((null!==r&&void 0!==r?r:"").toString()),null==e||Number.isNaN(e.getTime()))t="";else{t=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,d?16:10)}return{parsed:e,formatted:t}}),[r,d]),[p,A]=o.useState(C),m=Qu(),h=(e=>{const{classes:t}=e;return Ng({root:["editInputCell"]},Zu,t)})({classes:m.classes}),b=o.useCallback((e=>{if(""===e)return null;const[t,n]=e.split("T"),[o,r,l]=t.split("-"),a=new Date;if(a.setFullYear(Number(o),Number(r)-1,Number(l)),a.setHours(0,0,0,0),n){const[e,t]=n.split(":");a.setHours(Number(e),Number(t),0,0)}return a}),[]),f=o.useCallback((async e=>{const t=e.target.value,o=b(t);g&&await g(e,o),A({parsed:o,formatted:t}),I.current.setEditCellValue({id:n,field:l,value:o},e)}),[I,l,n,g,b]);return o.useEffect((()=>{A((e=>{var t,n;return C.parsed!==e.parsed&&(null===(t=C.parsed)||void 0===t?void 0:t.getTime())!==(null===(n=e.parsed)||void 0===n?void 0:n.getTime())?C:e}))}),[C]),up((()=>{i&&u.current.focus()}),[i]),(0,ao.jsx)(zA,Sg({as:m.slots.baseInput,inputRef:u,fullWidth:!0,className:h.root,type:d?"datetime-local":"date",value:p.formatted,onChange:f},c,null===s||void 0===s?void 0:s.root,{slotProps:{htmlInput:Sg({max:d?"9999-12-31T23:59":"9999-12-31"},null===s||void 0===s||null===(t=s.root)||void 0===t||null===(t=t.slotProps)||void 0===t?void 0:t.htmlInput)}}))}const DA=e=>(0,ao.jsx)(jA,Sg({},e));const TA="auto-generated-group-node-root",PA=Symbol("mui.id_autogenerated");const UA=(e,t,n)=>{const o=t?t(e):e.id;return function(e,t){if(null==e)throw new Error(["MUI X: The Data Grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A row was provided without id in the rows prop:",JSON.stringify(t)].join("\n"))}(o,e,n),o},QA=e=>{let{rows:t,getRowId:n,loading:o,rowCount:r}=e;const l={type:"full",rows:[]},a={};for(let i=0;i<t.length;i+=1){const e=t[i],o=UA(e,n);a[o]=e,l.rows.push(o)}return{rowsBeforePartialUpdates:t,loadingPropBeforePartialUpdates:o,rowCountPropBeforePartialUpdates:r,updates:l,dataRowIdToModelLookup:a}},OA=e=>{let{tree:t,rowCountProp:n=0}=e;const o=t[TA];return Math.max(n,o.children.length+(null==o.footerId?0:1))},qA=e=>{let{apiRef:t,rowCountProp:n=0,loadingProp:o,previousTree:r,previousTreeDepths:l,previousGroupsToFetch:a}=e;const i=t.current.caches.rows,{tree:g,treeDepths:s,dataRowIds:c,groupingName:d,groupsToFetch:I=[]}=t.current.applyStrategyProcessor("rowTreeCreation",{previousTree:r,previousTreeDepths:l,updates:i.updates,dataRowIdToModelLookup:i.dataRowIdToModelLookup,previousGroupsToFetch:a}),u=t.current.unstable_applyPipeProcessors("hydrateRows",{tree:g,treeDepths:s,dataRowIds:c,dataRowIdToModelLookup:i.dataRowIdToModelLookup});return t.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},Sg({},u,{totalRowCount:Math.max(n,u.dataRowIds.length),totalTopLevelRowCount:OA({tree:u.tree,rowCountProp:n}),groupingName:d,loading:o,groupsToFetch:I})},_A=e=>"skeletonRow"===e.type||"footer"===e.type||"group"===e.type&&e.isAutoGenerated||"pinnedRow"===e.type&&e.isAutoGenerated,$A=(e,t,n)=>{const o=e[t];if("group"!==o.type)return[];const r=[];for(let l=0;l<o.children.length;l+=1){const t=o.children[l];n&&_A(e[t])||r.push(t);const a=$A(e,t,n);for(let e=0;e<a.length;e+=1)r.push(a[e])}return n||null==o.footerId||r.push(o.footerId),r},em=e=>{var t,n,o;let{previousCache:r,getRowId:l,updates:a,groupKeys:i}=e;if("full"===r.updates.type)throw new Error("MUI X: Unable to prepare a partial update if a full update is not applied yet.");const g=new Map;a.forEach((e=>{const t=UA(e,l,"A row was provided without id when calling updateRows():");g.has(t)?g.set(t,Sg({},g.get(t),e)):g.set(t,e)}));const s={type:"partial",actions:{insert:[...null!==(t=r.updates.actions.insert)&&void 0!==t?t:[]],modify:[...null!==(n=r.updates.actions.modify)&&void 0!==n?n:[]],remove:[...null!==(o=r.updates.actions.remove)&&void 0!==o?o:[]]},idToActionLookup:Sg({},r.updates.idToActionLookup),groupKeys:i},c=Sg({},r.dataRowIdToModelLookup),d={insert:{},modify:{},remove:{}};g.forEach(((e,t)=>{const n=s.idToActionLookup[t];if("delete"===e._action){if("remove"===n||!c[t])return;return null!=n&&(d[n][t]=!0),s.actions.remove.push(t),void delete c[t]}const o=c[t];if(o)return"remove"===n?(d.remove[t]=!0,s.actions.modify.push(t)):null==n&&s.actions.modify.push(t),void(c[t]=Sg({},o,e));"remove"===n?(d.remove[t]=!0,s.actions.insert.push(t)):null==n&&s.actions.insert.push(t),c[t]=e}));const I=Object.keys(d);for(let u=0;u<I.length;u+=1){const e=I[u],t=d[e];Object.keys(t).length>0&&(s.actions[e]=s.actions[e].filter((e=>!t[e])))}return{dataRowIdToModelLookup:c,updates:s,rowsBeforePartialUpdates:r.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:r.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:r.rowCountPropBeforePartialUpdates}},tm="var(--DataGrid-overlayHeight, calc(var(--height) * 2))";function nm(e,t,n){const o=[];return t.forEach((t=>{const r=UA(t,n,"A row was provided without id when calling updateRows():"),l=Kp(e,r);if("pinnedRow"===(null===l||void 0===l?void 0:l.type)){const n=e.current.caches.pinnedRows,o=n.idLookup[r];o&&(n.idLookup[r]=Sg({},o,t))}else o.push(t)})),o}const om=(e,t,n)=>"number"===typeof e&&e>0?e:t,rm=(["MUI X: The `rowHeight` prop should be a number greater than 0.","The default value will be used instead."].join("\n"),["MUI X: The `getRowHeight` prop should return a number greater than 0 or 'auto'.","The default value will be used instead."].join("\n"),hC(((e,t)=>PA in t?t[PA]:e.props.getRowId?e.props.getRowId(t):t.id)));function lm(e){let{value:t,columnType:n,rowId:o,field:r}=e;if(!(t instanceof Date))throw new Error(["MUI X: `".concat(n,"` column type only accepts `Date` objects as values."),"Use `valueGetter` to transform the value into a `Date` object.","Row ID: ".concat(o,', field: "').concat(r,'".')].join("\n"))}const am=Sg({},JA,{type:"date",sortComparator:tA,valueFormatter:(e,t,n,o)=>{if(!e)return"";return lm({value:e,columnType:"date",rowId:rm(o,t),field:n.field}),e.toLocaleDateString()},filterOperators:LA(),renderEditCell:DA,pastedValueParser:e=>new Date(e)}),im=Sg({},JA,{type:"dateTime",sortComparator:tA,valueFormatter:(e,t,n,o)=>{if(!e)return"";return lm({value:e,columnType:"dateTime",rowId:rm(o,t),field:n.field}),e.toLocaleString()},filterOperators:LA(!0),renderEditCell:DA,pastedValueParser:e=>new Date(e)}),gm="__row_group_by_columns_group__",sm="__detail_panel_toggle__";let cm=function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.VIRTUAL=3]="VIRTUAL",e}({});const dm=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","hideDescendantCount"];function Im(e){const{value:t,rowNode:n}=e,r=Wg(e,dm),l=UC(),a=Qu(),i=(e=>{const{classes:t}=e;return Ng({root:["booleanCell"]},Zu,t)})({classes:a.classes}),g=Mu(l,zp)>0&&"group"===n.type&&!1===a.treeData,s=o.useMemo((()=>t?a.slots.booleanCellTrueIcon:a.slots.booleanCellFalseIcon),[a.slots.booleanCellFalseIcon,a.slots.booleanCellTrueIcon,t]);return g&&void 0===t?null:(0,ao.jsx)(s,Sg({fontSize:"small",className:i.root,titleAccess:l.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(t)},r))}const um=o.memo(Im);const Cm=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"];function pm(e){var t;const{id:n,value:r,field:l,className:a,hasFocus:i,onValueChange:g}=e,s=Wg(e,Cm),c=UC(),d=o.useRef(null),I=rA(),[u,C]=o.useState(r),p=Qu(),A=(e=>{const{classes:t}=e;return Ng({root:["editBooleanCell"]},Zu,t)})({classes:p.classes}),m=o.useCallback((async e=>{const t=e.target.checked;g&&await g(e,t),C(t),await c.current.setEditCellValue({id:n,field:l,value:t},e)}),[c,l,n,g]);return o.useEffect((()=>{C(r)}),[r]),up((()=>{i&&d.current.focus()}),[i]),(0,ao.jsx)("label",Sg({htmlFor:I,className:Vg(A.root,a)},s,{children:(0,ao.jsx)(p.slots.baseCheckbox,Sg({id:I,inputRef:d,checked:Boolean(u),onChange:m,size:"small"},null===(t=p.slotProps)||void 0===t?void 0:t.baseCheckbox))}))}const Am=["item","applyValue","apiRef","focusElementRef","isFilterActive","headerFilterMenu","clearButton","tabIndex","slotProps"];function mm(e){var t,n,r,l;const{item:a,applyValue:i,apiRef:g,focusElementRef:s,headerFilterMenu:c,clearButton:d,tabIndex:I,slotProps:u}=e,C=Wg(e,Am),[p,A]=o.useState(hm(a.value)),m=Qu(),h=rA(),b=rA(),f=(null===(t=m.slotProps)||void 0===t?void 0:t.baseSelect)||{},y=null!==(n=f.native)&&void 0!==n&&n,v=(null===(r=m.slotProps)||void 0===r?void 0:r.baseSelectOption)||{},Z=o.useCallback((e=>{const t=hm(e.target.value);A(t),i(Sg({},a,{value:t}))}),[i,a]);o.useEffect((()=>{A(hm(a.value))}),[a.value]);const G=null!==(l=null===u||void 0===u?void 0:u.root.label)&&void 0!==l?l:g.current.getLocaleText("filterPanelInputLabel"),S=null===u||void 0===u?void 0:u.root.slotProps;return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsxs)(m.slots.baseSelect,Sg({fullWidth:!0,labelId:h,id:b,label:G,value:void 0===p?"":String(p),onChange:Z,native:y,slotProps:{htmlInput:Sg({ref:s,tabIndex:I},null===S||void 0===S?void 0:S.htmlInput)}},f,C,null===u||void 0===u?void 0:u.root,{children:[(0,ao.jsx)(m.slots.baseSelectOption,Sg({},v,{native:y,value:"",children:g.current.getLocaleText("filterValueAny")})),(0,ao.jsx)(m.slots.baseSelectOption,Sg({},v,{native:y,value:"true",children:g.current.getLocaleText("filterValueTrue")})),(0,ao.jsx)(m.slots.baseSelectOption,Sg({},v,{native:y,value:"false",children:g.current.getLocaleText("filterValueFalse")}))]})),c,d]})}function hm(e){return"true"===String(e).toLowerCase()||"false"!==String(e).toLowerCase()&&void 0}const bm=Sg({},JA,{type:"boolean",display:"flex",align:"center",headerAlign:"center",renderCell:e=>e.field!==gm&&_A(e.rowNode)?"":(0,ao.jsx)(um,Sg({},e)),renderEditCell:e=>(0,ao.jsx)(pm,Sg({},e)),sortComparator:eA,valueFormatter:(e,t,n,o)=>e?o.current.getLocaleText("booleanCellTrueLabel"):o.current.getLocaleText("booleanCellFalseLabel"),filterOperators:[{value:"is",getApplyFilterFn:e=>{const t=hm(e.value);return void 0===t?null:e=>Boolean(e)===t},InputComponent:mm}],getApplyQuickFilterFn:()=>null,aggregable:!1,pastedValueParser:e=>(e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}})(e)});var fm=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}(fm||{}),ym=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(ym||{}),vm=function(e){return e.Cell="cell",e.Row="row",e}(vm||{}),Zm=function(e){return e.Edit="edit",e.View="view",e}(Zm||{}),Gm=function(e){return e.Edit="edit",e.View="view",e}(Gm||{});function Sm(e){return"singleSelect"===(null===e||void 0===e?void 0:e.type)}function Bm(e,t){if(e)return"function"===typeof e.valueOptions?e.valueOptions(Sg({field:e.field},t)):e.valueOptions}function wm(e,t,n){if(void 0===t)return;const o=t.find((t=>{const o=n(t);return String(o)===String(e)}));return n(o)}const Rm=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","slotProps"];function Wm(e){var t,n,r;const l=Qu(),{id:a,value:i,field:g,row:s,colDef:c,hasFocus:d,error:I,onValueChange:u,initialOpen:C=l.editMode===vm.Cell,slotProps:p}=e,A=Wg(e,Rm),m=UC(),h=o.useRef(null),b=o.useRef(null),[f,y]=o.useState(C),v=null!==(n=((null===(t=l.slotProps)||void 0===t?void 0:t.baseSelect)||{}).native)&&void 0!==n&&n;if(up((()=>{var e;d&&(null===(e=b.current)||void 0===e||e.focus())}),[d]),!Sm(c))return null;const Z=Bm(c,{id:a,row:s});if(!Z)return null;const G=c.getOptionValue,S=c.getOptionLabel;return Z&&c?(0,ao.jsx)(l.slots.baseSelect,Sg({ref:h,value:i,onChange:async e=>{if(!Sm(c)||!Z)return;y(!1);const t=wm(e.target.value,Z,G);u&&await u(e,t),await m.current.setEditCellValue({id:a,field:g,value:t},e)},open:f,onOpen:e=>{(function(e){return!!e.key})(e)&&"Enter"===e.key||y(!0)},onClose:(e,t)=>{if(l.editMode!==vm.Row){if("backdropClick"===t||"Escape"===e.key){const t=m.current.getCellParams(a,g);m.current.publishEvent("cellEditStop",Sg({},t,{reason:"Escape"===e.key?ym.escapeKeyDown:ym.cellFocusOut}))}}else y(!1)},error:I,native:v,fullWidth:!0,slotProps:{htmlInput:{ref:b}}},A,null===p||void 0===p?void 0:p.root,null===(r=l.slotProps)||void 0===r?void 0:r.baseSelect,{children:Z.map((e=>{var t;const n=G(e);return(0,o.createElement)(l.slots.baseSelectOption,Sg({},(null===(t=l.slotProps)||void 0===t?void 0:t.baseSelectOption)||{},{native:v,key:n,value:n}),S(e))}))})):null}const km=["item","applyValue","type","apiRef","focusElementRef","tabIndex","isFilterActive","clearButton","headerFilterMenu","slotProps"],Vm=e=>{let{column:t,OptionComponent:n,getOptionLabel:r,getOptionValue:l,isSelectNative:a,baseSelectOptionProps:i}=e;return["",...Bm(t)||[]].map((e=>{const t=l(e);let g=r(e);return""===g&&(g="\u2003"),(0,o.createElement)(n,Sg({},i,{native:a,key:t,value:t}),g)}))};function Xm(e){var t,n,r,l,a,i,g,s,c,d;const{item:I,applyValue:u,type:C,apiRef:p,focusElementRef:A,tabIndex:m,clearButton:h,headerFilterMenu:b,slotProps:f}=e,y=Wg(e,km),v=null!==(t=I.value)&&void 0!==t?t:"",Z=rA(),G=rA(),S=Qu(),B=null!==(n=null===(r=S.slotProps)||void 0===r||null===(r=r.baseSelect)||void 0===r?void 0:r.native)&&void 0!==n&&n;let w=null;if(I.field){const e=p.current.getColumn(I.field);Sm(e)&&(w=e)}const R=null===(l=w)||void 0===l?void 0:l.getOptionValue,W=null===(a=w)||void 0===a?void 0:a.getOptionLabel,k=o.useMemo((()=>Bm(w)),[w]),V=o.useCallback((e=>{let t=e.target.value;t=wm(t,k,R),u(Sg({},I,{value:t}))}),[k,R,u,I]);if(!Sm(w))return null;const X=null!==(i=null===f||void 0===f?void 0:f.root.label)&&void 0!==i?i:p.current.getLocaleText("filterPanelInputLabel");return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(S.slots.baseSelect,Sg({fullWidth:!0,id:Z,label:X,labelId:G,value:v,onChange:V,slotProps:{htmlInput:Sg({tabIndex:m,ref:A,type:C||"text",placeholder:null!==(g=null===f||void 0===f?void 0:f.root.placeholder)&&void 0!==g?g:p.current.getLocaleText("filterPanelInputPlaceholder")},null===f||void 0===f||null===(s=f.root.slotProps)||void 0===s?void 0:s.htmlInput)},native:B},null===(c=S.slotProps)||void 0===c?void 0:c.baseSelect,y,null===f||void 0===f?void 0:f.root,{children:Vm({column:w,OptionComponent:S.slots.baseSelectOption,getOptionLabel:W,getOptionValue:R,isSelectNative:B,baseSelectOptionProps:null===(d=S.slotProps)||void 0===d?void 0:d.baseSelectOption})})),b,h]})}const xm=["item","applyValue","type","apiRef","focusElementRef","slotProps"];function Jm(e){var t,n;const{item:r,applyValue:l,type:a,apiRef:i,focusElementRef:g,slotProps:s}=e,c=Wg(e,xm),d=rA(),I=Qu();let u=null;if(r.field){const e=i.current.getColumn(r.field);Sm(e)&&(u=e)}const C=null===(t=u)||void 0===t?void 0:t.getOptionValue,p=null===(n=u)||void 0===n?void 0:n.getOptionLabel,A=o.useCallback(((e,t)=>C(e)===C(t)),[C]),m=o.useMemo((()=>Bm(u)||[]),[u]),h=o.useMemo((()=>Array.isArray(r.value)?r.value.reduce(((e,t)=>{const n=m.find((e=>C(e)===t));return null!=n&&e.push(n),e}),[]):[]),[C,r.value,m]),b=o.useCallback(((e,t)=>{l(Sg({},r,{value:t.map(C)}))}),[l,r,C]),f=I.slots.baseAutocomplete;return(0,ao.jsx)(f,Sg({multiple:!0,options:m,isOptionEqualToValue:A,id:d,value:h,onChange:b,getOptionLabel:p,label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),slotProps:{textField:{type:a||"text",inputRef:g}}},c,null===s||void 0===s?void 0:s.root))}const Nm=e=>null!=e&&gA(e)?e.value:e,Hm=Sg({},JA,{type:"singleSelect",getOptionLabel:e=>gA(e)?e.label:String(e),getOptionValue:e=>gA(e)?e.value:e,valueFormatter(e,t,n,o){const r=rm(o,t);if(!Sm(n))return"";const l=Bm(n,{id:r,row:t});if(null==e)return"";if(!l)return e;if("object"!==typeof l[0])return n.getOptionLabel(e);const a=l.find((t=>n.getOptionValue(t)===e));return a?n.getOptionLabel(a):""},renderEditCell:e=>(0,ao.jsx)(Wm,Sg({},e)),filterOperators:[{value:"is",getApplyFilterFn:e=>null==e.value||""===e.value?null:t=>Nm(t)===Nm(e.value),InputComponent:Xm},{value:"not",getApplyFilterFn:e=>null==e.value||""===e.value?null:t=>Nm(t)!==Nm(e.value),InputComponent:Xm},{value:"isAnyOf",getApplyFilterFn:e=>{if(!Array.isArray(e.value)||0===e.value.length)return null;const t=e.value.map(Nm);return e=>t.includes(Nm(e))},InputComponent:Jm}],pastedValueParser:(e,t,n)=>{const o=n,r=Bm(o)||[],l=o.getOptionValue;if(r.find((t=>l(t)===e)))return e}}),Fm=o.createContext();const Ym=()=>{const e=o.useContext(Fm);return null!==e&&void 0!==e&&e},Km=["open","target","onClose","children","position","className","onExited"],Mm=mu(Wp,{name:"MuiDataGrid",slot:"Menu"})({zIndex:Ru.zIndex.menu,["& .".concat(Gu.menuList)]:{outline:0}});function Lm(e){var t;const{open:n,target:r,onClose:l,children:a,position:i,className:g,onExited:s}=e,c=Wg(e,Km),d=UC(),I=Qu(),u=(e=>{const{classes:t}=e;return Ng({root:["menu"]},Zu,t)})(I),C=$u(),p=o.useRef(null);up((()=>{var e,t;n?p.current=document.activeElement instanceof HTMLElement?document.activeElement:null:(null===(e=p.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e),p.current=null)}),[n]),o.useEffect((()=>{const e=n?"menuOpen":"menuClose";d.current.publishEvent(e,{target:r})}),[d,n,r]);return(0,ao.jsx)(Mm,Sg({as:I.slots.basePopper,className:Vg(u.root,g,C),ownerState:I,open:n,target:r,transition:!0,placement:i,onClickAway:e=>{e.target&&(r===e.target||null!==r&&void 0!==r&&r.contains(e.target))||l(e)},onExited:s,clickAwayMouseEvent:"onMouseDown"},c,null===(t=I.slotProps)||void 0===t?void 0:t.basePopper,{children:a}))}const Em=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"];function zm(e){var t;const{colDef:n,id:r,hasFocus:l,tabIndex:a,position:i="bottom-end",focusElementRef:g}=e,s=Wg(e,Em),[c,d]=o.useState(-1),[I,u]=o.useState(!1),C=UC(),p=o.useRef(null),A=o.useRef(null),m=o.useRef(!1),h=o.useRef({}),b=Ym(),f=rA(),y=rA(),v=Qu();if(!(e=>"function"===typeof e.getActions)(n))throw new Error("MUI X: Missing the `getActions` property in the `GridColDef`.");const Z=n.getActions(C.current.getRowParams(r)),G=Z.filter((e=>!e.props.showInMenu)),S=Z.filter((e=>e.props.showInMenu)),B=G.length+(S.length?1:0);o.useLayoutEffect((()=>{l||Object.entries(h.current).forEach((e=>{let[t,n]=e;null===n||void 0===n||n.stop({},(()=>{delete h.current[t]}))}))}),[l]),o.useEffect((()=>{if(c<0||!p.current)return;if(c>=p.current.children.length)return;p.current.children[c].focus({preventScroll:!0})}),[c]),o.useEffect((()=>{l||(d(-1),m.current=!1)}),[l]),o.useImperativeHandle(g,(()=>({focus(){if(!m.current){const e=Z.findIndex((e=>!e.props.disabled));d(e)}}})),[Z]),o.useEffect((()=>{c>=B&&d(B-1)}),[c,B]);const w=()=>{u(!1)},R=e=>t=>{h.current[e]=t},W=(e,t)=>n=>{d(e),m.current=!0,t&&t(n)};return(0,ao.jsxs)("div",Sg({role:"menu",ref:p,tabIndex:-1,className:Gu.actionsCell,onKeyDown:e=>{if(B<=1)return;const t=(e,n)=>{var o;if(e<0||e>Z.length)return e;const r=("left"===n?-1:1)*(b?-1:1);return null!==(o=Z[e+r])&&void 0!==o&&o.props.disabled?t(e+r,n):e+r};let n=c;"ArrowRight"===e.key?n=t(c,"right"):"ArrowLeft"===e.key&&(n=t(c,"left")),n<0||n>=B||n!==c&&(e.preventDefault(),e.stopPropagation(),d(n))}},s,{children:[G.map(((e,t)=>o.cloneElement(e,{key:t,touchRippleRef:R(t),onClick:W(t,e.props.onClick),tabIndex:c===t?a:-1}))),S.length>0&&y&&(0,ao.jsx)(v.slots.baseIconButton,Sg({ref:A,id:y,"aria-label":C.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":I,"aria-controls":I?f:void 0,role:"menuitem",size:"small",onClick:e=>{e.stopPropagation(),e.preventDefault(),I?w():(u(!0),d(B-1),m.current=!0)},touchRippleRef:R(y),tabIndex:c===G.length?a:-1},null===(t=v.slotProps)||void 0===t?void 0:t.baseIconButton,{children:(0,ao.jsx)(v.slots.moreActionsIcon,{fontSize:"small"})})),S.length>0&&(0,ao.jsx)(Lm,{open:I,target:A.current,position:i,onClose:w,children:(0,ao.jsx)(v.slots.baseMenuList,{id:f,className:Gu.menuList,onKeyDown:e=>{"Tab"===e.key&&e.preventDefault(),["Tab","Escape"].includes(e.key)&&w()},"aria-labelledby":y,autoFocusItem:!0,children:S.map(((e,t)=>o.cloneElement(e,{key:t,closeMenu:w})))})})]}))}const jm="actions",Dm=Sg({},JA,{sortable:!1,filterable:!1,aggregable:!1,width:100,display:"flex",align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:e=>(0,ao.jsx)(zm,Sg({},e)),getApplyQuickFilterFn:()=>null}),Tm=hC((e=>e.headerFiltering)),Pm=mC(Tm,(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.enabled)&&void 0!==t&&t})),Um=mC(Tm,(e=>e.editing)),Qm=mC(Tm,(e=>e.menuOpen)),Om=hC((e=>e.columnGrouping)),qm=bC(Om,(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.unwrappedGroupingModel)&&void 0!==t?t:{}})),_m=bC(Om,(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.lookup)&&void 0!==t?t:{}})),$m=bC(Om,(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.headerStructure)&&void 0!==t?t:[]})),eh=mC(Om,(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.maxDepth)&&void 0!==t?t:0})),th=["maxWidth","minWidth","width","flex"],nh={string:JA,number:HA,date:am,dateTime:im,boolean:bm,singleSelect:Hm,[jm]:Dm,custom:JA};const oh=(e,t)=>{const n={};let o=0,r=0;const l=[];e.orderedFields.forEach((t=>{let a=e.lookup[t],i=0,g=!1;!1!==e.columnVisibilityModel[t]&&(a.flex&&a.flex>0?(o+=a.flex,g=!0):i=cA(a.width||JA.width,a.minWidth||JA.minWidth,a.maxWidth||JA.maxWidth),r+=i),a.computedWidth!==i&&(a=Sg({},a,{computedWidth:i})),g&&l.push(a),n[t]=a}));const a=void 0===t?0:t.viewportOuterSize.width-(t.hasScrollY?t.scrollbarSize:0),i=Math.max(a-r,0);if(o>0&&a>0){const e=function(e){let{initialFreeSpace:t,totalFlexUnits:n,flexColumns:o}=e;const r=new Set(o.map((e=>e.field))),l={all:{},frozenFields:[],freeze:e=>{const t=l.all[e];t&&!0!==t.frozen&&(l.all[e].frozen=!0,l.frozenFields.push(e))}};return function e(){if(l.frozenFields.length===r.size)return;const a={min:{},max:{}};let i=t,g=n,s=0;l.frozenFields.forEach((e=>{i-=l.all[e].computedWidth,g-=l.all[e].flex}));for(let t=0;t<o.length;t+=1){const e=o[t];if(l.all[e.field]&&!0===l.all[e.field].frozen)continue;let n=i/g*e.flex;n<e.minWidth?(s+=e.minWidth-n,n=e.minWidth,a.min[e.field]=!0):n>e.maxWidth&&(s+=e.maxWidth-n,n=e.maxWidth,a.max[e.field]=!0),l.all[e.field]={frozen:!1,computedWidth:n,flex:e.flex}}s<0?Object.keys(a.max).forEach((e=>{l.freeze(e)})):s>0?Object.keys(a.min).forEach((e=>{l.freeze(e)})):o.forEach((e=>{let{field:t}=e;l.freeze(t)})),e()}(),l.all}({initialFreeSpace:i,totalFlexUnits:o,flexColumns:l});Object.keys(e).forEach((t=>{n[t].computedWidth=e[t].computedWidth}))}return Sg({},e,{lookup:n})};function rh(e){let t=nh.string;return e&&nh[e]&&(t=nh[e]),t}const lh=e=>{var t,n,o;let{apiRef:r,columnsToUpsert:l,initialState:a,columnVisibilityModel:i=xC(r),keepOnlyColumnsToUpsert:g=!1,updateInitialVisibilityModel:s=!1}=e;const c=!r.current.state.columns;let d;if(c)d={orderedFields:[],lookup:{},columnVisibilityModel:i,initialColumnVisibilityModel:i};else{const e=WC(r);d={orderedFields:g?[]:[...e.orderedFields],lookup:Sg({},e.lookup),columnVisibilityModel:i,initialColumnVisibilityModel:s?i:e.initialColumnVisibilityModel}}let I={};g&&!c&&(I=Object.keys(d.lookup).reduce(((e,t)=>Sg({},e,{[t]:!1})),{}));const u={};l.forEach((e=>{const{field:t}=e;u[t]=!0,I[t]=!0;let n=d.lookup[t];null==n?(n=Sg({},rh(e.type),{field:t,hasBeenResized:!1}),d.orderedFields.push(t)):g&&d.orderedFields.push(t),n&&n.type!==e.type&&(n=Sg({},rh(e.type),{field:t}));let o=n.hasBeenResized;th.forEach((t=>{void 0!==e[t]&&(o=!0,-1===e[t]&&(e[t]=1/0))})),d.lookup[t]=Rp(n,Sg({},rh(e.type),e,{hasBeenResized:o}))})),g&&!c&&Object.keys(d.lookup).forEach((e=>{I[e]||delete d.lookup[e]}));const C=((e,t)=>{if(!t)return e;const{orderedFields:n=[],dimensions:o={}}=t,r=Object.keys(o);if(0===r.length&&0===n.length)return e;const l={},a=[];for(let s=0;s<n.length;s+=1){const t=n[s];e.lookup[t]&&(l[t]=!0,a.push(t))}const i=0===a.length?e.orderedFields:[...a,...e.orderedFields.filter((e=>!l[e]))],g=Sg({},e.lookup);for(let s=0;s<r.length;s+=1){const e=r[s],t=Sg({},g[e],{hasBeenResized:!0});Object.entries(o[e]).forEach((e=>{let[n,o]=e;t[n]=-1===o?1/0:o})),g[e]=t}return Sg({},e,{orderedFields:i,lookup:g})})(r.current.unstable_applyPipeProcessors("hydrateColumns",d),a);return oh(C,null!==(t=null===(n=(o=r.current).getRootDimensions)||void 0===n?void 0:n.call(o))&&void 0!==t?t:void 0)};function ah(e,t){var n,o;if(t.listView)return 0;const r=vC(e),l=eh(e),a=Pm(e);return Math.floor(t.columnHeaderHeight*r)+Math.floor((null!==(n=t.columnGroupHeaderHeight)&&void 0!==n?n:t.columnHeaderHeight)*r)*l+(a?Math.floor((null!==(o=t.headerFilterHeight)&&void 0!==o?o:t.columnHeaderHeight)*r):0)}const ih=ep("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(e,t)=>[{["&.".concat(Gu["scrollArea--left"])]:t["scrollArea--left"]},{["&.".concat(Gu["scrollArea--right"])]:t["scrollArea--right"]},t.scrollArea]})((()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,["&.".concat(Gu["scrollArea--left"])]:{left:0},["&.".concat(Gu["scrollArea--right"])]:{right:0}}))),gh=mC(tp,((e,t)=>"left"===t?e.leftPinnedWidth:"right"===t?e.rightPinnedWidth+(e.hasScrollX?e.scrollbarSize:0):0));function sh(e){const{scrollDirection:t,scrollPosition:n}=e,r=o.useRef(null),l=UC(),a=wp(),i=Mu(l,vC),g=Mu(l,np),s=Mu(l,gh,t),c=()=>{const e=tp(l);if("left"===t)return n.current.left>0;if("right"===t){const t=g-e.viewportInnerSize.width;return n.current.left<t}return!1},[d,I]=o.useState(c),u=Qu(),C=Sg({},u,{scrollDirection:t}),p=(e=>{const{scrollDirection:t,classes:n}=e;return Ng({root:["scrollArea","scrollArea--".concat(t)]},Zu,n)})(C),A=ah(l,u),m=Math.floor(u.columnHeaderHeight*i),h={height:m,top:A-m};"left"===t?h.left=s:"right"===t&&(h.right=s);const b=Cp((e=>{let o;if(e.preventDefault(),"left"===t)o=e.clientX-r.current.getBoundingClientRect().right;else{if("right"!==t)throw new Error("MUI X: Wrong drag direction");o=Math.max(1,e.clientX-r.current.getBoundingClientRect().left)}o=1.5*(o-1)+1,a.start(0,(()=>{l.current.scroll({left:n.current.left+o,top:n.current.top})}))}));return fp(l,"scrollPositionChange",(()=>{I(c)})),d?(0,ao.jsx)(ih,{ref:r,className:p.root,ownerState:C,onDragOver:b,style:h}):null}const ch=Yg((function(e){const t=UC(),[n,r]=o.useState(!1);return fp(t,"columnHeaderDragStart",(()=>r(!0))),fp(t,"columnHeaderDragEnd",(()=>r(!1))),n?(0,ao.jsx)(sh,Sg({},e)):null})),dh=()=>{};function Ih(e){for(const t in e)return!1;return!0}const uh=hC((e=>e.sorting)),Ch=mC(uh,(e=>e.sortedRows)),ph=bC(Ch,Fp,Yp,((e,t,n)=>e.reduce(((e,o)=>{const r=t[o];if(r)e.push({id:o,model:r});else{const t=n[o];t&&_A(t)&&e.push({id:o,model:{[PA]:o}})}return e}),[]))),Ah=mC(uh,(e=>e.sortModel)),mh=bC(Ah,(e=>{const t=e.reduce(((t,n,o)=>(t[n.field]={sortDirection:n.sort,sortIndex:e.length>1?o+1:void 0},t)),{});return t})),hh=(bC(Ch,(e=>e.reduce(((e,t,n)=>(e[t]=n,e)),Object.create(null)))),hC((e=>e.filter))),bh=mC(hh,(e=>e.filterModel)),fh=mC(bh,(e=>e.quickFilterValues)),yh=hC((e=>e.visibleRowsLookup)),vh=mC(hh,(e=>e.filteredRowsLookup)),Zh=(mC(hh,(e=>e.filteredChildrenCountLookup)),mC(hh,(e=>e.filteredDescendantCountLookup)),bC(yh,ph,((e,t)=>Ih(e)?t:t.filter((t=>!1!==e[t.id]))))),Gh=bC(Zh,(e=>e.map((e=>e.id)))),Sh=bC(vh,ph,((e,t)=>Ih(e)?t:t.filter((t=>!1!==e[t.id])))),Bh=bC(Sh,(e=>e.map((e=>e.id)))),wh=(bC(Gh,Yp,((e,t)=>{const n={};let o=0;return e.reduce(((e,r)=>{const l=t[r];return n[l.depth]||(n[l.depth]=0),l.depth>o&&(n[l.depth]=0),o=l.depth,n[l.depth]+=1,e[r]=n[l.depth],e}),{})})),bC(Zh,Yp,zp,((e,t,n)=>n<2?e:e.filter((e=>{var n;return 0===(null===(n=t[e.id])||void 0===n?void 0:n.depth)}))))),Rh=mC(Zh,(e=>e.length)),Wh=mC(wh,(e=>e.length)),kh=mC(Sh,(e=>e.length)),Vh=(mC(kh,Wh,((e,t)=>e-t)),bC(bh,VC,((e,t)=>{var n;return null===(n=e.items)||void 0===n?void 0:n.filter((e=>{var n,o;if(!e.field)return!1;const r=t[e.field];if(null===r||void 0===r||!r.filterOperators||0===(null===r||void 0===r||null===(n=r.filterOperators)||void 0===n?void 0:n.length))return!1;const l=r.filterOperators.find((t=>t.value===e.operator));return!!l&&(!l.InputComponent||null!=e.value&&""!==(null===(o=e.value)||void 0===o?void 0:o.toString()))}))}))),Xh=bC(Vh,(e=>{const t=e.reduce(((e,t)=>(e[t.field]?e[t.field].push(t):e[t.field]=[t],e)),{});return t}));let xh=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e.DataGridPremium="DataGridPremium",e}({});const Jh=(e,t,n)=>t>0&&e>0?Math.ceil(e/t):-1===e?n+2:0,Nh=e=>({page:0,pageSize:e?0:100}),Hh=(e,t)=>{if(t===xh.DataGrid&&e>100)throw new Error(["MUI X: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"))},Fh=hC((e=>e.pagination)),Yh=mC(Fh,(e=>e.enabled&&"client"===e.paginationMode)),Kh=mC(Fh,(e=>e.paginationModel)),Mh=mC(Fh,(e=>e.rowCount)),Lh=mC(Fh,(e=>e.meta)),Eh=mC(Kh,(e=>e.page)),zh=mC(Kh,(e=>e.pageSize)),jh=mC(Kh,Mh,((e,t)=>Jh(t,e.pageSize,e.page))),Dh=bC(Yh,Kh,Yp,zp,Zh,wh,((e,t,n,o,r,l)=>{if(!e)return null;const a=l.length,i=Math.min(t.pageSize*t.page,a-1),g=-1===t.pageSize?a-1:Math.min(i+t.pageSize-1,a-1);if(-1===i||-1===g)return null;if(o<2)return{firstRowIndex:i,lastRowIndex:g};const s=l[i],c=g-i+1,d=r.findIndex((e=>e.id===s.id));let I=d,u=0;for(;I<r.length&&u<=c;){var C;const e=null===(C=n[r[I].id])||void 0===C?void 0:C.depth;void 0===e?I+=1:((u<c||e>0)&&(I+=1),0===e&&(u+=1))}return{firstRowIndex:d,lastRowIndex:I-1}})),Th=bC(Zh,Dh,((e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[])),Ph=bC(Gh,Dh,((e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[])),Uh=bC(Yh,Dh,Th,Zh,((e,t,n,o)=>e?{rows:n,range:t,rowIdToIndexMap:n.reduce(((e,t,n)=>(e.set(t.id,n),e)),new Map)}:{rows:o,range:0===o.length?null:{firstRowIndex:0,lastRowIndex:o.length-1},rowIdToIndexMap:o.reduce(((e,t,n)=>(e.set(t.id,n),e)),new Map)})),Qh=(e,t)=>Uh(e),Oh=(e,t)=>Mu(e,Uh),qh=("undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"empty").includes("firefox"),_h=hC((e=>e.rowsMeta)),$h=hC((e=>e.virtualization)),eb=(mC($h,(e=>e.enabled)),mC($h,(e=>e.enabledForColumns))),tb=mC($h,(e=>e.enabledForRows)),nb=mC($h,(e=>e.renderContext)),ob=bC((e=>e.current.state.virtualization.renderContext.firstColumnIndex),(e=>e.current.state.virtualization.renderContext.lastColumnIndex),((e,t)=>({firstColumnIndex:e,lastColumnIndex:t})));function rb(e,t,n){const r=o.useRef(!0);up((()=>{r.current=!1,e.current.register(n,t)}),[e,n,t]),r.current&&e.current.register(n,t)}const lb={firstRowIndex:0,lastRowIndex:0,firstColumnIndex:0,lastColumnIndex:0},ab=(e,t)=>{const{disableVirtualization:n,autoHeight:o}=t;return Sg({},e,{virtualization:{enabled:!n,enabledForColumns:!n,enabledForRows:!n&&!o,renderContext:lb}})};const ib=hC((e=>e.rowSpanning)),gb=mC(ib,(e=>e.hiddenCells)),sb=mC(ib,(e=>e.spannedCells)),cb=mC(ib,(e=>e.hiddenCellOriginMap)),db=hC((e=>e.listViewColumn)),Ib=hC((e=>e.focus)),ub=mC(Ib,(e=>e.cell)),Cb=mC(Ib,(e=>e.columnHeader)),pb=(mC(Ib,(e=>e.columnHeaderFilter)),mC(Ib,(e=>e.columnGroupHeader))),Ab=hC((e=>e.tabIndex)),mb=mC(Ab,(e=>e.cell)),hb=mC(Ab,(e=>e.columnHeader)),bb=(mC(Ab,(e=>e.columnHeaderFilter)),mC(Ab,(e=>e.columnGroupHeader))),fb=mC(ub,nb,Uh,NC,((e,t,n,o)=>{if(!e)return!1;const r=n.rowIdToIndexMap.get(e.id),l=o.slice(t.firstColumnIndex,t.lastColumnIndex).findIndex((t=>t.field===e.field));return!(void 0!==r&&-1!==l&&r>=t.firstRowIndex&&r<=t.lastRowIndex)})),yb=bC(fb,NC,Uh,ub,((e,t,n,o)=>{if(!e)return null;const r=n.rowIdToIndexMap.get(o.id);if(void 0===r)return null;const l=t.findIndex((e=>e.field===o.field));return-1===l?null:Sg({},o,{rowIndex:r,columnIndex:l})}));function vb(e,t){return Math.round(e*10**t)/10**t}const Zb="undefined"!==typeof window&&/jsdom|HappyDOM/.test(window.navigator.userAgent);class Gb{constructor(e){this.data=void 0,this.data=e.ids}has(e){return this.data.has(e)}select(e){this.data.add(e)}unselect(e){this.data.delete(e)}}class Sb{constructor(e){this.data=void 0,this.data=e.ids}has(e){return!this.data.has(e)}select(e){this.data.delete(e)}unselect(e){this.data.add(e)}}const Bb=e=>"include"===e.type?new Gb(e):new Sb(e),wb=hC((e=>e.rowSelection)),Rb=bC(wb,Bb),Wb=mC(wb,kh,((e,t)=>"include"===e.type?e.ids.size:t-e.ids.size)),kb=bC(wb,Fp,jp,((e,t,n)=>{const o=new Map;if("include"===e.type)for(const r of e.ids)o.set(r,t[r]);else for(let r=0;r<n.length;r+=1){const l=n[r];e.ids.has(l)||o.set(l,t[l])}return o}));var Vb=function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e}(Vb||{});const Xb={top:0,left:0},xb=Object.freeze(new Map),Jb=()=>{var e,t;const n=Eu(),r=Qu(),{listView:l}=r,i=Mu(n,(()=>l?[db(n)]:NC(n))),g=Mu(n,tb)&&!Zb,s=Mu(n,eb)&&!Zb,c=Mu(n,Tp),d=YC(n),I=l?wC:d,u=c.bottom.length>0,[C,p]=o.useState(xb),A=Ym(),m=Mu(n,Rb),h=Oh(n),b=n.current.mainElementRef,f=n.current.virtualScrollerRef,y=n.current.virtualScrollbarVerticalRef,v=n.current.virtualScrollbarHorizontalRef,Z=Mu(n,zC),G=o.useRef(!1),S=Mu(n,op),B=Mu(n,rp),w=Mu(n,np),R=Mu(n,Nb),W=Mu(n,dp),k=Mu(n,ip),V=o.useRef(null),X=o.useCallback((e=>{if(b.current=e,!e)return;const t=e.getBoundingClientRect();let o={width:vb(t.width,1),height:vb(t.height,1)};if((!V.current||o.width!==V.current.width&&o.height!==V.current.height)&&(V.current=o,n.current.publishEvent("resize",o)),"undefined"===typeof ResizeObserver)return;const r=new ResizeObserver((e=>{const t=e[0];if(!t)return;const r={width:vb(t.contentRect.width,1),height:vb(t.contentRect.height,1)};r.width===o.width&&r.height===o.height||(n.current.publishEvent("resize",r),o=r)}));return r.observe(e),wg>=19?()=>{b.current=null,r.disconnect()}:void 0}),[n,b]),x=o.useRef(null!==(e=null===(t=r.initialState)||void 0===t?void 0:t.scroll)&&void 0!==e?e:Xb),J=o.useRef(!1),N=o.useRef(Xb),H=o.useRef(lb),F=Mu(n,nb),Y=Mu(n,yb),K=wp(),M=o.useRef(void 0),L=Xu((()=>((e,t,n,o,r)=>({direction:Vb.NONE,buffer:zb(e,Vb.NONE,t,n,o,r)}))(A,r.rowBufferPx,r.columnBufferPx,15*S,300))).current,E=o.useCallback((e=>{if(Lb(e,n.current.state.virtualization.renderContext))return;const t=e.firstRowIndex!==H.current.firstRowIndex||e.lastRowIndex!==H.current.lastRowIndex;n.current.setState((t=>Sg({},t,{virtualization:Sg({},t.virtualization,{renderContext:e})})));tp(n).isReady&&t&&(H.current=e,n.current.publishEvent("renderedRowsIntervalChange",e)),N.current=x.current}),[n]),z=Cp((()=>{const e=f.current;if(!e)return;const t=tp(n),o=Math.ceil(t.minimumSize.height-t.viewportOuterSize.height),l=Math.ceil(t.minimumSize.width-t.viewportInnerSize.width),i={top:cA(e.scrollTop,0,o),left:A?cA(e.scrollLeft,-l,0):cA(e.scrollLeft,0,l)},c=i.left-x.current.left,d=i.top-x.current.top,I=0!==c||0!==d;x.current=i;const u=I?function(e,t){if(0===e&&0===t)return Vb.NONE;return Math.abs(t)>=Math.abs(e)?t>0?Vb.DOWN:Vb.UP:e>0?Vb.RIGHT:Vb.LEFT}(c,d):Vb.NONE,C=Math.abs(x.current.top-N.current.top),p=Math.abs(x.current.left-N.current.left),m=C>=S||p>=50,h=L.direction!==u;if(!(m||h))return F;if(h)switch(u){case Vb.NONE:case Vb.LEFT:case Vb.RIGHT:M.current=void 0;break;default:M.current=F}L.direction=u,L.buffer=zb(A,u,r.rowBufferPx,r.columnBufferPx,15*S,300);const b=Fb(Hb(n,r,g,s),x.current,L);return Lb(b,F)||(a.flushSync((()=>{E(b)})),K.start(1e3,z)),b})),j=()=>{if(!tp(n).isReady&&(g||s))return;const e=Fb(Hb(n,r,g,s),x.current,L);M.current=void 0,E(e)},D=Cp((()=>{if(J.current)return void(J.current=!1);const e=z();n.current.publishEvent("scrollPositionChange",{top:x.current.top,left:x.current.left,renderContext:e})})),T=Cp((e=>{n.current.publishEvent("virtualScrollerWheel",{},e)})),P=Cp((e=>{n.current.publishEvent("virtualScrollerTouchMove",{},e)})),U=o.useMemo((()=>({overflowX:!R||l?"hidden":void 0,overflowY:r.autoHeight?"hidden":void 0})),[R,r.autoHeight,l]),Q=o.useMemo((()=>{const e={width:R?w:"auto",flexBasis:B,flexShrink:0};return 0===e.flexBasis&&(e.flexBasis=tm),e}),[w,B,R]),O=o.useCallback((e=>{e&&n.current.publishEvent("virtualScrollerContentSizeChange",{columnsTotalWidth:w,contentHeight:B})}),[n,w,B]);return up((()=>{var e,t;G.current&&(null===(e=(t=n.current).updateRenderContext)||void 0===e||e.call(t))}),[n,s,g]),up((()=>{l&&(f.current.scrollLeft=0)}),[l,f]),((e,t)=>{const n=o.useRef(!1);up((()=>n.current||!e?dh:(n.current=!0,t())),[n.current||e])})(F!==lb,(()=>{var e;if(n.current.publishEvent("scrollPositionChange",{top:x.current.top,left:x.current.left,renderContext:F}),G.current=!0,null!==(e=r.initialState)&&void 0!==e&&e.scroll&&f.current){const e=f.current,{top:t,left:o}=r.initialState.scroll,l={top:!(t>0),left:!(o>0)};if(!l.left&&w&&(e.scrollLeft=o,J.current=!0,l.left=!0),!l.top&&B&&(e.scrollTop=t,J.current=!0,l.top=!0),!l.top||!l.left){const r=n.current.subscribeEvent("virtualScrollerContentSizeChange",(n=>{!l.left&&n.columnsTotalWidth&&(e.scrollLeft=o,J.current=!0,l.left=!0),!l.top&&n.contentHeight&&(e.scrollTop=t,J.current=!0,l.top=!0),l.left&&l.top&&r()}));return r}}})),n.current.register("private",{updateRenderContext:j}),vp(n,"sortedRowsSet",j),vp(n,"paginationModelChange",j),vp(n,"columnsChange",j),{renderContext:F,setPanels:p,getRows:function(){var e,t;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.rows&&!h.range)return[];const l=Yp(n);let a=F;o.renderContext&&(a=o.renderContext,a.firstColumnIndex=F.firstColumnIndex,a.lastColumnIndex=F.lastColumnIndex);const g=!u&&void 0===o.position||u&&"bottom"===o.position,s=void 0!==o.position;let d;switch(o.position){case"top":d=0;break;case"bottom":d=c.top.length+h.rows.length;break;case void 0:d=c.top.length}const p=null!==(e=o.rows)&&void 0!==e?e:h.rows,A=a.firstRowIndex,b=Math.min(a.lastRowIndex,p.length),f=o.rows?dA(0,o.rows.length):dA(A,b);let y=-1;!s&&Y&&(Y.rowIndex<A&&(f.unshift(Y.rowIndex),y=Y.rowIndex),Y.rowIndex>b&&(f.push(Y.rowIndex),y=Y.rowIndex));const v=[],G=null===(t=r.slotProps)||void 0===t?void 0:t.row,S=MC(n);return f.forEach((e=>{var t;const{id:c,model:u}=p[e];if(!l[c])return;const A=((null===h||void 0===h||null===(t=h.range)||void 0===t?void 0:t.firstRowIndex)||0)+d+e;if(Z){const e=I.left.length,t=i.length-I.right.length;n.current.calculateColSpan({rowId:c,minFirstColumn:e,maxLastColumn:t,columns:i}),I.left.length>0&&n.current.calculateColSpan({rowId:c,minFirstColumn:0,maxLastColumn:I.left.length,columns:i}),I.right.length>0&&n.current.calculateColSpan({rowId:c,minFirstColumn:i.length-I.right.length,maxLastColumn:i.length,columns:i})}const b=n.current.rowHasAutoHeight(c)?"auto":n.current.unstable_getRowHeight(c),f=m.has(c)&&n.current.isRowSelectable(c);let B=!1;void 0===o.position&&(B=0===e);let R=!1;const V=e===p.length-1;if(g)if(s)R=V;else{e===h.rows.length-1&&(R=!0)}let X=a;M.current&&e>=M.current.firstRowIndex&&e<M.current.lastRowIndex&&(X=M.current);const x=e===y,J=(null===Y||void 0===Y?void 0:Y.rowIndex)===A,N=Eb(S,X,I.left.length),H=V&&"top"===o.position,F=X.firstColumnIndex,K=X.lastColumnIndex;if(v.push((0,ao.jsx)(r.slots.row,Sg({row:u,rowId:c,index:A,selected:f,offsetLeft:N,columnsTotalWidth:w,rowHeight:b,pinnedColumns:I,visibleColumns:i,firstColumnIndex:F,lastColumnIndex:K,focusedColumnIndex:J?Y.columnIndex:void 0,isFirstVisible:B,isLastVisible:R,isNotVisible:x,showBottomBorder:H,scrollbarWidth:W,gridHasFiller:k},G),c)),x)return;const L=C.get(c);var E,z;(L&&v.push(L),void 0===o.position&&V)&&v.push(null===(E=(z=n.current).getInfiniteLoadingTriggerElement)||void 0===E?void 0:E.call(z,{lastRowId:c}))})),v},getContainerProps:()=>({ref:X}),getScrollerProps:()=>({ref:f,onScroll:D,onWheel:T,onTouchMove:P,style:U,role:"presentation",tabIndex:qh?-1:void 0}),getContentProps:()=>({style:Q,role:"presentation",ref:O}),getRenderZoneProps:()=>({role:"rowgroup"}),getScrollbarVerticalProps:()=>({ref:y,scrollPosition:x}),getScrollbarHorizontalProps:()=>({ref:v,scrollPosition:x}),getScrollAreaProps:()=>({scrollPosition:x})}};function Nb(e){return e.current.state.dimensions.viewportOuterSize.width>0&&e.current.state.dimensions.columnsTotalWidth>e.current.state.dimensions.viewportOuterSize.width}function Hb(e,t,n,o){var r,l;const a=tp(e),i=Qh(e),g=t.listView?[db(e)]:NC(e),s=cb(e),c=e.current.state.rows.dataRowIds.at(-1),d=g.at(-1);return{enabledForRows:n,enabledForColumns:o,apiRef:e,autoHeight:t.autoHeight,rowBufferPx:t.rowBufferPx,columnBufferPx:t.columnBufferPx,leftPinnedWidth:a.leftPinnedWidth,columnsTotalWidth:a.columnsTotalWidth,viewportInnerWidth:a.viewportInnerSize.width,viewportInnerHeight:a.viewportInnerSize.height,lastRowHeight:void 0!==c?e.current.unstable_getRowHeight(c):0,lastColumnWidth:null!==(r=null===d||void 0===d?void 0:d.computedWidth)&&void 0!==r?r:0,rowsMeta:_h(e),columnPositions:MC(e),rows:i.rows,range:i.range,pinnedColumns:YC(e),visibleColumns:g,hiddenCellsOriginMap:s,listView:null!==(l=t.listView)&&void 0!==l&&l,virtualizeColumnsWithAutoRowHeight:t.virtualizeColumnsWithAutoRowHeight}}function Fb(e,t,n){const o={firstRowIndex:0,lastRowIndex:e.rows.length,firstColumnIndex:0,lastColumnIndex:e.visibleColumns.length},{top:r,left:l}=t,a=Math.abs(l)+e.leftPinnedWidth;if(e.enabledForRows){let t=Math.min(Yb(e,r,{atStart:!0,lastPosition:e.rowsMeta.positions[e.rowsMeta.positions.length-1]+e.lastRowHeight}),e.rowsMeta.positions.length-1);const n=e.hiddenCellsOriginMap[t];if(n){const e=Math.min(...Object.values(n));t=Math.min(t,e)}const l=e.autoHeight?t+e.rows.length:Yb(e,r+e.viewportInnerHeight);o.firstRowIndex=t,o.lastRowIndex=l}if(e.listView)return Sg({},o,{lastColumnIndex:1});if(e.enabledForColumns){let t=0,r=e.columnPositions.length,l=!1;const[i,g]=Mb({firstIndex:o.firstRowIndex,lastIndex:o.lastRowIndex,minFirstIndex:0,maxLastIndex:e.rows.length,bufferBefore:n.buffer.rowBefore,bufferAfter:n.buffer.rowAfter,positions:e.rowsMeta.positions,lastSize:e.lastRowHeight});if(!e.virtualizeColumnsWithAutoRowHeight)for(let n=i;n<g&&!l;n+=1){const t=e.rows[n];l=e.apiRef.current.rowHasAutoHeight(t.id)}l&&!e.virtualizeColumnsWithAutoRowHeight||(t=Kb(a,e.columnPositions,{atStart:!0,lastPosition:e.columnsTotalWidth}),r=Kb(a+e.viewportInnerWidth,e.columnPositions)),o.firstColumnIndex=t,o.lastColumnIndex=r}const i=function(e,t,n){const[o,r]=Mb({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:e.rows.length,bufferBefore:n.buffer.rowBefore,bufferAfter:n.buffer.rowAfter,positions:e.rowsMeta.positions,lastSize:e.lastRowHeight}),[l,a]=Mb({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:e.pinnedColumns.left.length,maxLastIndex:e.visibleColumns.length-e.pinnedColumns.right.length,bufferBefore:n.buffer.columnBefore,bufferAfter:n.buffer.columnAfter,positions:e.columnPositions,lastSize:e.lastColumnWidth}),i=function(e){let{firstColumnToRender:t,apiRef:n,firstRowToRender:o,lastRowToRender:r,visibleRows:l}=e,a=t,i=!1;for(;!i&&a>=0;){i=!0;for(let e=o;e<r;e+=1)if(l[e]){const t=l[e].id,o=n.current.unstable_getCellColSpanInfo(t,a);if(o&&o.spannedByColSpan&&o.leftVisibleCellIndex<a){a=o.leftVisibleCellIndex,i=!1;break}}}return a}({firstColumnToRender:l,apiRef:e.apiRef,firstRowToRender:o,lastRowToRender:r,visibleRows:e.rows});return{firstRowIndex:o,lastRowIndex:r,firstColumnIndex:i,lastColumnIndex:a}}(e,o,n);return i}function Yb(e,t,n){var o,r;const l=e.apiRef.current.getLastMeasuredRowIndex();let a=l===1/0;null!==(o=e.range)&&void 0!==o&&o.lastRowIndex&&!a&&(a=l>=e.range.lastRowIndex);const i=cA(l-((null===(r=e.range)||void 0===r?void 0:r.firstRowIndex)||0),0,e.rowsMeta.positions.length);return a||e.rowsMeta.positions[i]>=t?Kb(t,e.rowsMeta.positions,n):function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=1;for(;n<t.length&&Math.abs(t[n])<e;)n+=r,r*=2;return Kb(e,t,o,Math.floor(n/2),Math.min(n,t.length))}(t,e.rowsMeta.positions,i,n)}function Kb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length;if(t.length<=0)return-1;if(o>=r)return o;const l=o+Math.floor((r-o)/2),a=t[l];let i;if(null!==n&&void 0!==n&&n.atStart){i=e-((l===t.length-1?n.lastPosition:t[l+1])-a)<a}else i=e<=a;return i?Kb(e,t,n,o,l):Kb(e,t,n,l+1,r)}function Mb(e){let{firstIndex:t,lastIndex:n,bufferBefore:o,bufferAfter:r,minFirstIndex:l,maxLastIndex:a,positions:i,lastSize:g}=e;const s=i[t]-o,c=i[n]+r,d=Kb(s,i,{atStart:!0,lastPosition:i[i.length-1]+g}),I=Kb(c,i);return[cA(d,l,a),cA(I,l,a)]}function Lb(e,t){return e===t||e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex}function Eb(e,t,n){var o,r;const l=(null!==(o=e[t.firstColumnIndex])&&void 0!==o?o:0)-(null!==(r=e[n])&&void 0!==r?r:0);return Math.abs(l)}function zb(e,t,n,o,r,l){if(e)switch(t){case Vb.LEFT:t=Vb.RIGHT;break;case Vb.RIGHT:t=Vb.LEFT}switch(t){case Vb.NONE:return{rowAfter:n,rowBefore:n,columnAfter:o,columnBefore:o};case Vb.LEFT:return{rowAfter:0,rowBefore:0,columnAfter:0,columnBefore:l};case Vb.RIGHT:return{rowAfter:0,rowBefore:0,columnAfter:l,columnBefore:0};case Vb.UP:return{rowAfter:0,rowBefore:r,columnAfter:0,columnBefore:0};case Vb.DOWN:return{rowAfter:r,rowBefore:0,columnAfter:0,columnBefore:0};default:throw new Error("unreachable")}}const jb=ep("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>"overlayType"!==e&&"loadingOverlayVariant"!==e&&"right"!==e})((e=>{let{overlayType:t,loadingOverlayVariant:n,right:o}=e;return"skeleton"!==n?{position:"sticky",top:"var(--DataGrid-headersTotalHeight)",left:0,right:"".concat(o,"px"),width:0,height:0,zIndex:"loadingOverlay"===t?5:4}:{}})),Db=ep("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>"overlayType"!==e&&"loadingOverlayVariant"!==e})({});function Tb(e){const t=UC(),n=Qu(),o=Mu(t,tp);let r=Math.max(o.viewportOuterSize.height-o.topContainerHeight-o.bottomContainerHeight-(o.hasScrollX?o.scrollbarSize:0),0);0===r&&(r=tm);const l=(e=>{const{classes:t}=e;return Ng({root:["overlayWrapper"],inner:["overlayWrapperInner"]},Zu,t)})(Sg({},e,{classes:n.classes}));return(0,ao.jsx)(jb,Sg({className:l.root},e,{right:o.columnsTotalWidth-o.viewportOuterSize.width,children:(0,ao.jsx)(Db,Sg({className:l.inner,style:{height:r,width:o.viewportOuterSize.width}},e))}))}const Pb=hC((e=>e.pivoting)),Ub=mC(Pb,(e=>null===e||void 0===e?void 0:e.active)),Qb=new Map,Ob=mC(Pb,(e=>(null===e||void 0===e?void 0:e.initialColumns)||Qb)),qb=(mC(Pb,(e=>null===e||void 0===e?void 0:e.panelOpen)),hC((e=>e.columnMenu)));const _b=Yg((function(){var e;const t=Eu(),n=Qu(),o=Mu(t,NC),r=Mu(t,Xh),l=Mu(t,mh),a=Mu(t,hb),i=Mu(t,(()=>null===mb(t))),g=Mu(t,bb),s=Mu(t,Cb),c=Mu(t,pb),d=Mu(t,eh),I=Mu(t,qb),u=Mu(t,xC),C=Mu(t,$m),p=!(null===g&&null===a&&i),A=t.current.columnHeadersContainerRef;return(0,ao.jsx)(n.slots.columnHeaders,Sg({ref:A,visibleColumns:o,filterColumnLookup:r,sortColumnLookup:l,columnHeaderTabIndexState:a,columnGroupHeaderTabIndexState:g,columnHeaderFocus:s,columnGroupHeaderFocus:c,headerGroupingMaxDepth:d,columnMenuState:I,columnVisibility:u,columnGroupsHeaderStructure:C,hasOtherElementInTabSequence:p},null===(e=n.slotProps)||void 0===e?void 0:e.columnHeaders))})),$b=ep("div")({position:"absolute",top:"var(--DataGrid-headersTotalHeight)",left:0,width:"calc(100% - (var(--DataGrid-hasScrollY) * var(--DataGrid-scrollbarSize)))"}),ef=ep("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>{const{ownerState:n,loadingOverlayVariant:o,overlayType:r}=e,l="skeleton"===o||"noColumnsOverlay"===r;return[t.main,n.hasPinnedRight&&t["main--hasPinnedRight"],l&&t["main--hiddenContent"]]}})({flexGrow:1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"}),tf=Rg(((e,t)=>{var n;const{ownerState:o}=e,r=Qu(),l=qu().hooks.useGridAriaAttributes();return(0,ao.jsxs)(ef,Sg({ownerState:o,className:e.className,tabIndex:-1},l,null===(n=r.slotProps)||void 0===n?void 0:n.main,{ref:t,children:[(0,ao.jsx)($b,{role:"presentation","data-id":"gridPanelAnchor"}),e.children]}))}));const nf=ep("div")({position:"sticky",zIndex:40,top:0});function of(e){const t=Ng({root:["topContainer"]},Zu,{});return(0,ao.jsx)(nf,Sg({},e,{className:Vg(t.root,Gu["container--top"]),role:"presentation"}))}const rf=ep("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.virtualScrollerContent,n.overflowedContent&&t["virtualScrollerContent--overflowed"]]}})({}),lf=Rg((function(e,t){var n;const o=Qu(),r=!o.autoHeight&&"auto"===(null===(n=e.style)||void 0===n?void 0:n.minHeight),l=((e,t)=>{const{classes:n}=e;return Ng({root:["virtualScrollerContent",t&&"virtualScrollerContent--overflowed"]},Zu,n)})(o,r),a={classes:o.classes,overflowedContent:r};return(0,ao.jsx)(rf,Sg({},e,{ownerState:a,className:Vg(l.root,e.className),ref:t}))}));const af=ep("div")({display:"flex",flexDirection:"row",width:"var(--DataGrid-rowWidth)",boxSizing:"border-box"}),gf=ep("div")({position:"sticky",height:"100%",boxSizing:"border-box",borderTop:"1px solid var(--rowBorderColor)",backgroundColor:Ru.cell.background.pinned}),sf=ep(gf)({left:0,borderRight:"1px solid var(--rowBorderColor)"}),cf=ep(gf)({right:0,borderLeft:"1px solid var(--rowBorderColor)"}),df=ep("div")({flexGrow:1,borderTop:"1px solid var(--rowBorderColor)"});const If=Yg((function(e){let{rowsLength:t}=e;const n=UC(),{viewportOuterSize:o,minimumSize:r,hasScrollX:l,hasScrollY:a,scrollbarSize:i,leftPinnedWidth:g,rightPinnedWidth:s}=Mu(n,tp),c=l?i:0,d=o.height-r.height>0;return 0!==c||d?(0,ao.jsxs)(af,{className:Gu.filler,role:"presentation",style:{height:c,"--rowBorderColor":0===t?"transparent":"var(--DataGrid-rowBorderColor)"},children:[g>0&&(0,ao.jsx)(sf,{className:Gu["filler--pinnedLeft"],style:{width:g}}),(0,ao.jsx)(df,{}),s>0&&(0,ao.jsx)(cf,{className:Gu["filler--pinnedRight"],style:{width:s+(a?i:0)}})]}):null})),uf=["className"],Cf=ep("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone"})({position:"absolute",display:"flex",flexDirection:"column"}),pf=Rg((function(e,t){const{className:n}=e,o=Wg(e,uf),r=UC(),l=Qu(),a=(e=>{const{classes:t}=e;return Ng({root:["virtualScrollerRenderZone"]},Zu,t)})(l),i=Mu(r,(()=>{var e;const t=nb(r);return null!==(e=_h(r).positions[t.firstRowIndex])&&void 0!==e?e:0}));return(0,ao.jsx)(Cf,Sg({className:Vg(a.root,n),ownerState:l,style:{transform:"translate3d(0, ".concat(i,"px, 0)")}},o,{ref:t}))}));const Af=ep("div")({position:"absolute",display:"inline-block",zIndex:60,"&:hover":{zIndex:70},"--size":"calc(max(var(--DataGrid-scrollbarSize), 14px))"}),mf=ep(Af)({width:"var(--size)",height:"calc(var(--DataGrid-hasScrollY) * (100% - var(--DataGrid-topContainerHeight) - var(--DataGrid-bottomContainerHeight) - var(--DataGrid-hasScrollX) * var(--DataGrid-scrollbarSize)))",overflowY:"auto",overflowX:"hidden",outline:0,"& > div":{width:"var(--size)"},top:"var(--DataGrid-topContainerHeight)",right:"0px"}),hf=ep(Af)({width:"100%",height:"var(--size)",overflowY:"hidden",overflowX:"auto",outline:0,"& > div":{height:"var(--size)"},bottom:"0px"}),bf=Rg((function(e,t){const n=Eu(),r=Qu(),l=o.useRef(!1),a=o.useRef(0),i=o.useRef(null),g=o.useRef(null),s=((e,t)=>{const{classes:n}=e;return Ng({root:["scrollbar","scrollbar--".concat(t)],content:["scrollbarContent"]},Zu,n)})(r,e.position),c=Mu(n,tp),d="vertical"===e.position?"height":"width",I="vertical"===e.position?"scrollTop":"scrollLeft",u="vertical"===e.position?"top":"left",C="vertical"===e.position?c.hasScrollX:c.hasScrollY,p=c.minimumSize[d]+(C?c.scrollbarSize:0),A=("vertical"===e.position?c.viewportInnerSize.height:c.viewportOuterSize.width)*(p/c.viewportOuterSize[d]),m=Cp((()=>{const t=i.current,n=e.scrollPosition.current;if(!t)return;if(n[u]===a.current)return;if(a.current=n[u],l.current)return void(l.current=!1);l.current=!0;const o=n[u]/p;t[I]=o*A})),h=Cp((()=>{const e=n.current.virtualScrollerRef.current,t=i.current;if(!t)return;if(l.current)return void(l.current=!1);l.current=!0;const o=t[I]/A;e[I]=o*p}));Sp((()=>{const e=n.current.virtualScrollerRef.current,t=i.current,o={passive:!0};return e.addEventListener("scroll",m,o),t.addEventListener("scroll",h,o),()=>{e.removeEventListener("scroll",m,o),t.removeEventListener("scroll",h,o)}})),o.useEffect((()=>{g.current.style.setProperty(d,"".concat(A,"px"))}),[A,d]);const b="vertical"===e.position?mf:hf;return(0,ao.jsx)(b,{ref:Xg(t,i),className:s.root,style:"vertical"===e.position&&r.listView?{height:"100%",top:0}:void 0,tabIndex:-1,"aria-hidden":"true",onFocus:e=>{e.target.blur()},children:(0,ao.jsx)("div",{ref:g,className:s.content})})}));const ff=ep("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.virtualScroller,n.hasScrollX&&t["virtualScroller--hasScrollX"]]}})({position:"relative",height:"100%",flexGrow:1,overflow:"scroll",scrollbarWidth:"none",display:"flex",flexDirection:"column","&::-webkit-scrollbar":{display:"none"},"@media print":{overflow:"hidden"},zIndex:0}),yf=e=>e.current.state.dimensions.rightPinnedWidth>0;function vf(e){const t=UC(),n=Qu(),o=Mu(t,ap),r=Mu(t,lp),l=Mu(t,yf),a=Mu(t,Ip),{getOverlay:i,overlaysProps:g}=(()=>{const e=UC(),t=Qu(),n=Mu(e,Jp),o=Mu(e,Rh),r=Mu(e,Pp),l=Mu(e,NC),a=0===n&&0===r,i=Mu(e,Np),g=Mu(e,Ub),s=!i&&a,c=!i&&n>0&&0===o,d=!i&&0===l.length;let I=null,u=null;var C,p;s&&(I="noRowsOverlay"),d&&(I="noColumnsOverlay"),s&&g&&(I="emptyPivotOverlay"),c&&(I="noResultsOverlay"),i&&(I="loadingOverlay",u=null!==(C=null===(p=t.slotProps)||void 0===p||null===(p=p.loadingOverlay)||void 0===p?void 0:p[a?"noRowsVariant":"variant"])&&void 0!==C?C:a?"skeleton":"linear-progress");const A={overlayType:I,loadingOverlayVariant:u};return{getOverlay:()=>{var e,n;if(!I)return null;const o=null===(e=t.slots)||void 0===e?void 0:e[I],r=null===(n=t.slotProps)||void 0===n?void 0:n[I];return(0,ao.jsx)(Tb,Sg({},A,{children:(0,ao.jsx)(o,Sg({},r))}))},overlaysProps:A}})(),s=Sg({classes:n.classes,hasScrollX:r,hasPinnedRight:l},g),c=(e=>{const{classes:t,hasScrollX:n,hasPinnedRight:o,loadingOverlayVariant:r,overlayType:l}=e;return Ng({root:["main",o&&"main--hasPinnedRight",("skeleton"===r||"noColumnsOverlay"===l)&&"main--hiddenContent"],scroller:["virtualScroller",n&&"virtualScroller--hasScrollX"]},Zu,t)})(s),d=Jb(),{getContainerProps:I,getScrollerProps:u,getContentProps:C,getRenderZoneProps:p,getScrollbarVerticalProps:A,getScrollbarHorizontalProps:m,getRows:h,getScrollAreaProps:b}=d,f=h();return(0,ao.jsxs)(tf,Sg({className:c.root},I(),{ownerState:s,children:[(0,ao.jsx)(ch,Sg({scrollDirection:"left"},b())),(0,ao.jsx)(ch,Sg({scrollDirection:"right"},b())),(0,ao.jsxs)(ff,Sg({className:c.scroller},u(),{ownerState:s,children:[(0,ao.jsxs)(of,{children:[!n.listView&&(0,ao.jsx)(_b,{}),(0,ao.jsx)(n.slots.pinnedRows,{position:"top",virtualScroller:d})]}),i(),(0,ao.jsx)(lf,Sg({},C(),{children:(0,ao.jsxs)(pf,Sg({},p(),{children:[f,(0,ao.jsx)(n.slots.detailPanels,{virtualScroller:d})]}))})),a&&(0,ao.jsx)(If,{rowsLength:f.length}),(0,ao.jsx)(n.slots.bottomContainer,{children:(0,ao.jsx)(n.slots.pinnedRows,{position:"bottom",virtualScroller:d})})]})),r&&!n.listView&&(0,ao.jsx)(bf,Sg({position:"horizontal"},m())),o&&(0,ao.jsx)(bf,Sg({position:"vertical"},A())),e.children]}))}function Zf(){var e;const t=Qu();return t.hideFooter?null:(0,ao.jsx)(t.slots.footer,Sg({},null===(e=t.slotProps)||void 0===e?void 0:e.footer))}const Gf=["className","children","sidePanel"],Sf=Rg((function(e,t){const n=Qu(),{className:r,children:l,sidePanel:a}=e,i=Wg(e,Gf),g=Eu(),s=Mu(g,yC),c=g.current.rootElementRef,d=o.useCallback((e=>{null!==e&&g.current.publishEvent("rootMount",e)}),[g]),I=Xg(c,t,d),u=n,C=((e,t)=>{const{autoHeight:n,classes:o,showCellVerticalBorder:r}=e;return Ng({root:["root",n&&"autoHeight","root--density".concat(Jg(t)),null===e.slots.toolbar&&"root--noToolbar","withBorderColor",r&&"withVerticalBorder"]},Zu,o)})(u,s),p=o.useContext(_u);return(0,ku.useSyncExternalStore)(ZC,GC,SC)?null:(0,ao.jsxs)(Du,Sg({className:Vg(C.root,r,p.className,a&&Gu.withSidePanel),ownerState:u},i,{ref:I,children:[(0,ao.jsxs)("div",{className:Gu.mainContent,role:"presentation",children:[(0,ao.jsx)($C,{}),(0,ao.jsx)(vf,{children:l}),(0,ao.jsx)(Zf,{})]}),a,p.tag]}))}));const Bf=Yg(Sf);function wf(e,t){const n=Yp(e),o=Ch(e),r=vh(e),l=n[t];if(!l||"group"!==l.type)return[];const a=[];for(let g=o.findIndex((e=>e===t))+1;g<o.length&&(null===(i=n[o[g]])||void 0===i?void 0:i.depth)>l.depth;g+=1){var i;const t=o[g];!1!==r[t]&&e.current.isRowSelectable(t)&&a.push(t)}return a}const Rf=mC(Yp,vh,Rb,((e,t,n,o)=>{let{groupId:r,autoSelectParents:l}=o;const a=e[r];if(!a||"group"!==a.type||n.has(r))return{isIndeterminate:!1,isChecked:n.has(r)};let i=!1,g=!1;const s=o=>{if(!1===t[o]||i&&g)return;const r=e[o];"group"===(null===r||void 0===r?void 0:r.type)&&r.children.forEach(s),n.has(o)?i=!0:g=!0};return s(r),{isIndeterminate:i&&g,isChecked:!!l&&(i&&!g)}}));function Wf(e){return e.signature===xh.DataGrid?e.checkboxSelection&&!0!==e.disableMultipleRowSelection:!e.disableMultipleRowSelection}const kf=function(e,t,n,o,r,l){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Rb(e);const i=vh(e),g=new Set([]);if((o||r)&&!1!==i[n]){if(o){const o=t[n];if("group"===(null===o||void 0===o?void 0:o.type)){wf(e,n).forEach((e=>{l(e),g.add(e)}))}}if(r){const o=e=>{if(!a.has(e)&&!g.has(e))return!1;const n=t[e];return!!n&&("group"!==n.type||n.children.every(o))},r=n=>{const a=((e,t,n)=>{const o=e[n];if(!o)return[];const r=o.parent;return null==r?[]:e[r].children.filter((e=>e!==n&&!1!==t[e]))})(t,i,n);if(0===a.length||a.every(o)){const o=t[n],a=null===o||void 0===o?void 0:o.parent;null!=a&&a!==TA&&e.current.isRowSelectable(a)&&(l(a),g.add(a),r(a))}};r(n)}}},Vf=(e,t,n,o,r,l)=>{const a=Rb(e);if(r||o){if(r){const e=((e,t)=>{const n=[];let o=t;for(;null!=o&&o!==TA;){const t=e[o];if(!t)return n;n.push(o),o=t.parent}return n})(t,n);e.forEach((e=>{a.has(e)&&l(e)}))}if(o){const o=t[n];if("group"===(null===o||void 0===o?void 0:o.type)){wf(e,n).forEach((e=>{l(e)}))}}}};function Xf(e){let{privateApiRef:t,configuration:n,props:r,children:l}=e;const a=o.useRef(t.current.getPublicApi());return(0,ao.jsx)(Ou.Provider,{value:n,children:(0,ao.jsx)(Uu.Provider,{value:r,children:(0,ao.jsx)(Lu.Provider,{value:t,children:(0,ao.jsx)(PC.Provider,{value:a,children:(0,ao.jsx)(qC,{children:(0,ao.jsx)(eC,{children:l})})})})})})}const xf=function(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(jr){return!1}}()&&null!=window.localStorage.getItem("DEBUG"),Jf=()=>{},Nf={debug:Jf,info:Jf,warn:Jf,error:Jf},Hf=["debug","info","warn","error"];function Ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;const o=Hf.indexOf(t);if(-1===o)throw new Error("MUI X: Log level ".concat(t," not recognized."));const r=Hf.reduce(((t,r,l)=>(t[r]=l>=o?function(){for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];const[a,...i]=o;n[r]("MUI X: ".concat(e," - ").concat(a),...i)}:Jf,t)),{});return r}let Yf=function(e){return e.DataSource="dataSource",e.RowTree="rowTree",e}({});const Kf="none",Mf={dataSourceRowsUpdate:Yf.DataSource,rowTreeCreation:Yf.RowTree,filtering:Yf.RowTree,sorting:Yf.RowTree,visibleRowsLookupCreation:Yf.RowTree},Lf=(e,t)=>Sg({},e,{props:{getRowId:t.getRowId}}),Ef=(e,t)=>{(e=>{const t=o.useRef(null),n=o.useRef(null),r=o.useRef(null),l=o.useRef(null),a=o.useRef(null),i=o.useRef(null);e.current.register("public",{rootElementRef:t}),e.current.register("private",{mainElementRef:n,virtualScrollerRef:r,virtualScrollbarVerticalRef:l,virtualScrollbarHorizontalRef:a,columnHeadersContainerRef:i})})(e),((e,t)=>{o.useEffect((()=>{e.current.setState((e=>Sg({},e,{props:{getRowId:t.getRowId}})))}),[e,t.getRowId])})(e,t),(e=>{const t=Ym();void 0===e.current.state.isRtl&&(e.current.state.isRtl=t);const n=o.useRef(!0);o.useEffect((()=>{n.current?n.current=!1:e.current.setState((e=>Sg({},e,{isRtl:t})))}),[e,t])})(e),((e,t)=>{rb(e,{getLogger:o.useCallback((e=>xf?Ff(e,"debug",t.logger):t.logLevel?Ff(e,t.logLevel.toString(),t.logger):Nf),[t.logLevel,t.logger])},"private")})(e,t),(e=>{const t=o.useRef({}),n=o.useCallback((e=>{t.current[e.stateId]=e}),[]),r=o.useCallback(((n,o)=>{let r;if(r="function"===typeof n?n(e.current.state):n,e.current.state===r)return!1;const l={current:{state:r}};let a=!1;const i=[];if(Object.keys(t.current).forEach((n=>{const o=t.current[n],r=o.stateSelector(e),g=o.stateSelector(l);g!==r&&(i.push({stateId:o.stateId,hasPropChanged:g!==o.propModel}),void 0!==o.propModel&&g!==o.propModel&&(a=!0))})),i.length>1)throw new Error("You're not allowed to update several sub-state in one transaction. You already updated ".concat(i[0].stateId,", therefore, you're not allowed to update ").concat(i.map((e=>e.stateId)).join(", ")," in the same transaction."));if(a||(e.current.state=r,e.current.publishEvent("stateChange",r),e.current.store.update(r)),1===i.length){const{stateId:n,hasPropChanged:r}=i[0],g=t.current[n],s=g.stateSelector(l);g.propOnChange&&r&&g.propOnChange(s,{reason:o,api:e.current}),a||e.current.publishEvent(g.changeEvent,s,{reason:o})}return!a}),[e]),l={updateControlState:o.useCallback(((t,n,o)=>e.current.setState((e=>Sg({},e,{[t]:n(e[t])})),o)),[e]),registerControlState:n};rb(e,{setState:r},"public"),rb(e,l,"private")})(e),(e=>{const t=o.useRef({}),n=o.useRef(!1),r=o.useCallback((e=>{!n.current&&e&&(n.current=!0,Object.values(e.appliers).forEach((e=>{e()})),n.current=!1)}),[]),l=o.useCallback(((e,n,o)=>{t.current[e]||(t.current[e]={processors:new Map,processorsAsArray:[],appliers:{}});const l=t.current[e];return l.processors.get(n)!==o&&(l.processors.set(n,o),l.processorsAsArray=Array.from(t.current[e].processors.values()).filter((e=>null!==e)),r(l)),()=>{t.current[e].processors.set(n,null),t.current[e].processorsAsArray=Array.from(t.current[e].processors.values()).filter((e=>null!==e))}}),[r]),a=o.useCallback(((e,n,o)=>(t.current[e]||(t.current[e]={processors:new Map,processorsAsArray:[],appliers:{}}),t.current[e].appliers[n]=o,()=>{const o=Wg(t.current[e].appliers,[n].map(GI.A));t.current[e].appliers=o})),[]),i=o.useCallback((e=>{r(t.current[e])}),[r]),g=o.useCallback((function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];const[r,l,a]=n;if(!t.current[r])return l;const i=t.current[r].processorsAsArray;let g=l;for(let t=0;t<i.length;t+=1)g=i[t](g,a);return g}),[]),s={unstable_applyPipeProcessors:g};rb(e,{registerPipeProcessor:l,registerPipeApplier:a,requestPipeProcessorsApplication:i},"private"),rb(e,s,"public")})(e),(e=>{const t=o.useRef(new Map),n=o.useRef({}),r=o.useCallback(((t,o,r)=>{const l=()=>{const e=Wg(n.current[o],[t].map(GI.A));n.current[o]=e};n.current[o]||(n.current[o]={});const a=n.current[o],i=a[t];return a[t]=r,i&&i!==r?(t===e.current.getActiveStrategy(Mf[o])&&e.current.publishEvent("activeStrategyProcessorChange",o),l):l}),[e]),l=o.useCallback(((t,o)=>{const r=e.current.getActiveStrategy(Mf[t]);if(null==r)throw new Error("Can't apply a strategy processor before defining an active strategy");const l=n.current[t];if(!l||!l[r])throw new Error('No processor found for processor "'.concat(t,'" on strategy "').concat(r,'"'));return(0,l[r])(o)}),[e]),a=o.useCallback((e=>{var n;const o=Array.from(t.current.entries()).find((t=>{let[,n]=t;return n.group===e&&n.isAvailable()}));return null!==(n=null===o||void 0===o?void 0:o[0])&&void 0!==n?n:Kf}),[]),i=o.useCallback(((n,o,r)=>{t.current.set(o,{group:n,isAvailable:r}),e.current.publishEvent("strategyAvailabilityChange")}),[e]);rb(e,{registerStrategyProcessor:r,applyStrategyProcessor:l,getActiveStrategy:a,setStrategyAvailability:i},"private")})(e),((e,t)=>{const n=o.useCallback((e=>{if(null==t.localeText[e])throw new Error("Missing translation for key ".concat(e,"."));return t.localeText[e]}),[t.localeText]);e.current.register("public",{getLocaleText:n})})(e,t),e.current.register("private",{rootProps:t})},zf=(e,t,n)=>{const r=o.useRef(!1);r.current||(t.current.state=e(t.current.state,n,t),r.current=!0)};function jf(e,t){const n=o.useRef(null);if(n.current)return n.current;const r=e.current.getLogger(t);return n.current=r,r}const Df=(e,t,n,o,r)=>{const l=jf(e,"useNativeEventListener");vp(e,"rootMount",(()=>{const e=t();if(e&&n)return l.debug("Binding native ".concat(n," event")),e.addEventListener(n,o,r),()=>{l.debug("Clearing native ".concat(n," event")),e.removeEventListener(n,o,r)}}))},Tf=["field","id","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],Pf=Rg((function(e,t){var n,r,l;const{field:a,id:i,rowNode:g,tabIndex:s}=e,c=Wg(e,Tf),d=UC(),I=Qu(),u=(e=>{const{classes:t}=e;return Ng({root:["checkboxInput"]},Zu,t)})({classes:I.classes});o.useLayoutEffect((()=>{if(0===s){const e=d.current.getCellElement(i,a);e&&(e.tabIndex=-1)}}),[d,s,i,a]);const C=o.useCallback((e=>{" "===e.key&&e.stopPropagation()}),[]),p=d.current.isRowSelectable(i),{isIndeterminate:A,isChecked:m}=Mu(d,Rf,{groupId:i,autoSelectParents:null!==(n=null===(r=I.rowSelectionPropagation)||void 0===r?void 0:r.parents)&&void 0!==n&&n});if("footer"===g.type||"pinnedRow"===g.type)return null;const h=d.current.getLocaleText(m&&!A?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return(0,ao.jsx)(I.slots.baseCheckbox,Sg({tabIndex:s,checked:m&&!A,onChange:e=>{const t={value:e.target.checked,id:i};d.current.publishEvent("rowSelectionCheckboxChange",t,e)},className:u.root,slotProps:{htmlInput:{"aria-label":h,name:"select_row"}},onKeyDown:C,indeterminate:A,disabled:!p},null===(l=I.slotProps)||void 0===l?void 0:l.baseCheckbox,c,{ref:t}))}));const Uf=Pf,Qf=["field","colDef"],Of=Rg((function(e,t){var n;const r=Wg(e,Qf),[,l]=o.useState(!1),a=UC(),i=Qu(),g=(e=>{const{classes:t}=e;return Ng({root:["checkboxInput"]},Zu,t)})({classes:i.classes}),s=Mu(a,hb),c=Mu(a,wb),d=Mu(a,Gh),I=Mu(a,Ph),u=o.useMemo((()=>{const e=i.isRowSelectable;if("function"!==typeof e)return c;if("exclude"===c.type)return c;const t={type:"include",ids:new Set};for(const n of c.ids)i.keepNonExistentRowsSelected&&t.ids.add(n),a.current.getRow(n)&&e(a.current.getRowParams(n))&&t.ids.add(n);return t}),[a,i.isRowSelectable,i.keepNonExistentRowsSelected,c]),C=o.useMemo((()=>{const e=i.pagination&&i.checkboxSelectionVisibleOnly&&"server"!==i.paginationMode?I:d,t=new Set;for(let n=0;n<e.length;n+=1){const o=e[n];a.current.getRow(o)&&(a.current.isRowSelectable(o)&&t.add(o))}return t}),[a,i.pagination,i.paginationMode,i.checkboxSelectionVisibleOnly,I,d]),p=o.useMemo((()=>{const e=Bb(u);let t=0;for(const n of C)e.has(n)&&(t+=1);return t}),[u,C]),A=o.useMemo((()=>{if(0===u.ids.size)return!1;const e=Bb(u);for(const t of C)if(!e.has(t))return!0;return!1}),[u,C]),m=p>0,h=null!==s&&s.field===e.field?0:-1;o.useLayoutEffect((()=>{const t=a.current.getColumnHeaderElement(e.field);0===h&&t&&(t.tabIndex=-1)}),[h,a,e.field]);const b=o.useCallback((e=>{" "===e.key&&a.current.publishEvent("headerSelectionCheckboxChange",{value:!m})}),[a,m]),f=o.useCallback((()=>{l((e=>!e))}),[]);o.useEffect((()=>a.current.subscribeEvent("rowSelectionChange",f)),[a,f]);const y=a.current.getLocaleText(m&&!A?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return(0,ao.jsx)(i.slots.baseCheckbox,Sg({indeterminate:A,checked:m&&!A,onChange:e=>{const t={value:e.target.checked};a.current.publishEvent("headerSelectionCheckboxChange",t)},className:g.root,slotProps:{htmlInput:{"aria-label":y,name:"select_all_rows"}},tabIndex:h,onKeyDown:b,disabled:!Wf(i)},null===(n=i.slotProps)||void 0===n?void 0:n.baseCheckbox,r,{ref:t}))}));const qf="__check__",_f=Sg({},bm,{type:"custom",field:qf,width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:()=>null,display:"flex",valueGetter:(e,t,n,o)=>{const r=rm(o,t);return o.current.isRowSelected(r)},renderHeader:e=>(0,ao.jsx)(Of,Sg({},e)),renderCell:e=>(0,ao.jsx)(Uf,Sg({},e))});function $f(e,t){if(null===e||void 0===e)return"";const n="string"===typeof e?e:"".concat(e);if(t.shouldAppendQuotes||t.escapeFormulas){const e=n.replace(/"/g,'""');return t.escapeFormulas&&["=","+","-","@","\t","\r"].includes(e[0])?"\"'".concat(e,'"'):[t.delimiter,"\n","\r",'"'].some((e=>n.includes(e)))?'"'.concat(e,'"'):e}return n}const ey=(e,t)=>{const{csvOptions:n,ignoreValueFormatter:o}=t;let r;if(o){var l;const t=e.colDef.type;if("number"===t)r=String(e.value);else if("date"===t||"dateTime"===t){var a;r=null===(a=e.value)||void 0===a?void 0:a.toISOString()}else r="function"===typeof(null===(l=e.value)||void 0===l?void 0:l.toString)?e.value.toString():e.value}else r=e.formattedValue;return $f(r,n)};class ty{constructor(e){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=e}addValue(e){this.isEmpty||(this.rowString+=this.options.csvOptions.delimiter),"function"===typeof this.options.sanitizeCellValue?this.rowString+=this.options.sanitizeCellValue(e,this.options.csvOptions):this.rowString+=e,this.isEmpty=!1}getRowString(){return this.rowString}}function ny(e){const{columns:t,rowIds:n,csvOptions:o,ignoreValueFormatter:r,apiRef:l}=e,a=n.reduce(((e,n)=>"".concat(e).concat((e=>{let{id:t,columns:n,getCellParams:o,csvOptions:r,ignoreValueFormatter:l}=e;const a=new ty({csvOptions:r});return n.forEach((e=>{const n=o(t,e.field);a.addValue(ey(n,{ignoreValueFormatter:l,csvOptions:r}))})),a.getRowString()})({id:n,columns:t,getCellParams:l.current.getCellParams,ignoreValueFormatter:r,csvOptions:o}),"\r\n")),"").trim();if(!o.includeHeaders)return a;const i=t.filter((e=>e.field!==_f.field)),g=[];if(o.includeColumnGroupsHeaders){const e=l.current.getAllGroupDetails();let t=0;const n=i.reduce(((e,n)=>{const o=l.current.getColumnGroupPath(n.field);return e[n.field]=o,t=Math.max(t,o.length),e}),{});for(let r=0;r<t;r+=1){const t=new ty({csvOptions:o,sanitizeCellValue:$f});g.push(t),i.forEach((o=>{const l=(n[o.field]||[])[r],a=e[l];t.addValue(a?a.headerName||a.groupId:"")}))}}const s=new ty({csvOptions:o,sanitizeCellValue:$f});i.forEach((e=>{s.addValue(e.headerName||e.field)})),g.push(s);const c="".concat(g.map((e=>e.getRowString())).join("\r\n"),"\r\n");return"".concat(c).concat(a).trim()}function oy(e){return 1===e.key.length&&!e.ctrlKey&&!e.metaKey}const ry=e=>0===e.indexOf("Arrow")||0===e.indexOf("Page")||" "===e||"Home"===e||"End"===e,ly=e=>"Tab"===e||"Escape"===e;function ay(e){return(e.ctrlKey||e.metaKey)&&"V"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey}function iy(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const n=document.createRange();n.selectNode(t);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}const gy=(e,t)=>{const n=t.ignoreValueFormatterDuringExport,r=("object"===typeof n?null===n||void 0===n?void 0:n.clipboardExport:n)||!1,l=t.clipboardCopyCellDelimiter,a=o.useCallback((t=>{if(!function(e){return(e.ctrlKey||e.metaKey)&&"C"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey}(t))return;if(function(e){var t;return!(null===(t=window.getSelection())||void 0===t||!t.toString())||!!(e&&(e.selectionEnd||0)-(e.selectionStart||0)>0)}(t.target))return;let n="";if(Wb(e)>0)n=e.current.getDataAsCsv({includeHeaders:!1,delimiter:l,shouldAppendQuotes:!1,escapeFormulas:!1});else{const t=ub(e);if(t){const o=e.current.getCellParams(t.id,t.field);n=ey(o,{csvOptions:{delimiter:l,shouldAppendQuotes:!1,escapeFormulas:!1},ignoreValueFormatter:r})}}n=e.current.unstable_applyPipeProcessors("clipboardCopy",n),n&&(!function(e){navigator.clipboard?navigator.clipboard.writeText(e).catch((()=>{iy(e)})):iy(e)}(n),e.current.publishEvent("clipboardCopy",n))}),[e,r,l]);Df(e,(()=>e.current.rootElementRef.current),"keydown",a),vp(e,"clipboardCopy",t.onClipboardCopy)},sy=e=>Sg({},e,{columnMenu:{open:!1}}),cy=e=>{const t=o.useRef(!0);t.current&&(t.current=!1,e())},dy=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const l=o.useRef(null),a=o.useRef("mui-".concat(Math.round(1e9*Math.random()))),i=o.useCallback((()=>{l.current=e.current.registerPipeProcessor(t,a.current,n)}),[e,n,t]);cy((()=>{r&&i()}));const g=o.useRef(!0);o.useEffect((()=>(g.current?g.current=!1:r&&i(),()=>{l.current&&(l.current(),l.current=null)})),[i,r])},Iy=(e,t,n)=>{const r=o.useRef(null),l=o.useRef("mui-".concat(Math.round(1e9*Math.random()))),a=o.useCallback((()=>{r.current=e.current.registerPipeApplier(t,l.current,n)}),[e,n,t]);cy((()=>{a()}));const i=o.useRef(!0);o.useEffect((()=>(i.current?i.current=!1:a(),()=>{r.current&&(r.current(),r.current=null)})),[a])},uy=(e,t,n)=>{var o,r,l,a,i;return Sg({},e,{columns:lh({apiRef:n,columnsToUpsert:t.columns,initialState:null===(o=t.initialState)||void 0===o?void 0:o.columns,columnVisibilityModel:null!==(r=null!==(l=t.columnVisibilityModel)&&void 0!==l?l:null===(a=t.initialState)||void 0===a||null===(a=a.columns)||void 0===a?void 0:a.columnVisibilityModel)&&void 0!==r?r:{},keepOnlyColumnsToUpsert:!0}),pinnedColumns:null!==(i=e.pinnedColumns)&&void 0!==i?i:wC})};function Cy(e){return t=>Sg({},t,{columns:e})}const py=(e,t)=>{var n,o,r;return Sg({},e,{density:null!==(n=null!==(o=null===(r=t.initialState)||void 0===r?void 0:r.density)&&void 0!==o?o:t.density)&&void 0!==n?n:"standard"})};const Ay=e=>{let{apiRef:t,options:n}=e;const o=XC(t);if(n.fields)return n.fields.reduce(((e,t)=>{const n=o.find((e=>e.field===t));return n&&e.push(n),e}),[]);return(n.allColumns?o:NC(t)).filter((e=>!e.disableExport))},my=e=>{var t,n;let{apiRef:o}=e;const r=Bh(o),l=Yp(o),a=Wb(o),i=r.filter((e=>"footer"!==l[e].type)),g=Tp(o),s=(null===g||void 0===g||null===(t=g.top)||void 0===t?void 0:t.map((e=>e.id)))||[],c=(null===g||void 0===g||null===(n=g.bottom)||void 0===n?void 0:n.map((e=>e.id)))||[];if(i.unshift(...s),i.push(...c),a>0){const e=kb(o);return i.filter((t=>e.has(t)))}return i},hy=Rg((function(e,t){var n,r;const{children:l,slotProps:a={}}=e,i=a.button||{},g=a.tooltip||{},s=UC(),c=Qu(),d=rA(),I=rA(),[u,C]=o.useState(!1),p=o.useRef(null),A=Xg(t,p),m=()=>C(!1);return null==l?null:(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(c.slots.baseTooltip,Sg({title:s.current.getLocaleText("toolbarExportLabel"),enterDelay:1e3},null===(n=c.slotProps)||void 0===n?void 0:n.baseTooltip,g,{children:(0,ao.jsx)(c.slots.baseButton,Sg({size:"small",startIcon:(0,ao.jsx)(c.slots.exportIcon,{}),"aria-expanded":u,"aria-label":s.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-controls":u?I:void 0,id:d},null===(r=c.slotProps)||void 0===r?void 0:r.baseButton,i,{onClick:e=>{var t;C((e=>!e)),null===(t=i.onClick)||void 0===t||t.call(i,e)},ref:A,children:s.current.getLocaleText("toolbarExport")}))})),(0,ao.jsx)(Lm,{open:u,target:p.current,onClose:m,position:"bottom-end",children:(0,ao.jsx)(c.slots.baseMenuList,{id:I,className:Gu.menuList,"aria-labelledby":d,onKeyDown:e=>{"Tab"===e.key&&e.preventDefault(),ly(e.key)&&m()},autoFocusItem:u,children:o.Children.map(l,(e=>o.isValidElement(e)?o.cloneElement(e,{hideMenu:m}):e))})})]})}));const by=["hideMenu","options"],fy=["hideMenu","options"],yy=["csvOptions","printOptions","excelOptions"];function vy(e){const t=UC(),n=Qu(),{hideMenu:o,options:r}=e,l=Wg(e,by);return(0,ao.jsx)(n.slots.baseMenuItem,Sg({onClick:()=>{t.current.exportDataAsCsv(r),null===o||void 0===o||o()}},l,{children:t.current.getLocaleText("toolbarExportCSV")}))}function Zy(e){const t=UC(),n=Qu(),{hideMenu:o,options:r}=e,l=Wg(e,fy);return(0,ao.jsx)(n.slots.baseMenuItem,Sg({onClick:()=>{t.current.exportDataAsPrint(r),null===o||void 0===o||o()}},l,{children:t.current.getLocaleText("toolbarExportPrint")}))}Rg((function(e,t){const n=e,{csvOptions:r={},printOptions:l={},excelOptions:a}=n,i=Wg(n,yy),g=UC().current.unstable_applyPipeProcessors("exportMenu",[],{excelOptions:a,csvOptions:r,printOptions:l}).sort(((e,t)=>e.componentName>t.componentName?1:-1));return 0===g.length?null:(0,ao.jsx)(hy,Sg({},i,{ref:t,children:g.map(((e,t)=>o.cloneElement(e.component,{key:t})))}))}));const Gy=(e,t)=>{const n=jf(e,"useGridCsvExport"),r=t.ignoreValueFormatterDuringExport,l=("object"===typeof r?null===r||void 0===r?void 0:r.csvExport:r)||!1,a=o.useCallback((function(){var t,o,r,a,i;let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.debug("Get data as CSV");return ny({columns:Ay({apiRef:e,options:g}),rowIds:(null!==(t=g.getRowsToExport)&&void 0!==t?t:my)({apiRef:e}),csvOptions:{delimiter:g.delimiter||",",shouldAppendQuotes:null===(o=g.shouldAppendQuotes)||void 0===o||o,includeHeaders:null===(r=g.includeHeaders)||void 0===r||r,includeColumnGroupsHeaders:null===(a=g.includeColumnGroupsHeaders)||void 0===a||a,escapeFormulas:null===(i=g.escapeFormulas)||void 0===i||i},ignoreValueFormatter:l,apiRef:e})}),[n,e,l]),i=o.useCallback((e=>{n.debug("Export data as CSV");const t=a(e);!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.title||"untitled";const o="".concat(n,".").concat(t);if("download"in HTMLAnchorElement.prototype){const t=URL.createObjectURL(e),n=document.createElement("a");return n.href=t,n.download=o,n.click(),void setTimeout((()=>{URL.revokeObjectURL(t)}))}throw new Error("MUI X: exportAs not supported.")}(new Blob([null!==e&&void 0!==e&&e.utf8WithBom?new Uint8Array([239,187,191]):"",t],{type:"text/csv"}),"csv",null===e||void 0===e?void 0:e.fileName)}),[n,a]);rb(e,{getDataAsCsv:a,exportDataAsCsv:i},"public");const g=o.useCallback(((e,t)=>{var n;return null!==(n=t.csvOptions)&&void 0!==n&&n.disableToolbarButton?e:[...e,{component:(0,ao.jsx)(vy,{options:t.csvOptions}),componentName:"csvExport"}]}),[]);dy(e,"exportMenu",g)};function Sy(e){return e&&e.ownerDocument||document}function By(e,t){if(e===t)return!0;if(e&&t&&"object"===typeof e&&"object"===typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const n=e.length;if(n!==t.length)return!1;for(let o=0;o<n;o+=1)if(!By(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const n=Array.from(e.entries());for(let e=0;e<n.length;e+=1)if(!t.has(n[e][0]))return!1;for(let e=0;e<n.length;e+=1){const o=n[e];if(!By(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const n=Array.from(e.entries());for(let e=0;e<n.length;e+=1)if(!t.has(n[e][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const n=e.length;if(n!==t.length)return!1;for(let o=0;o<n;o+=1)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),o=n.length;if(o!==Object.keys(t).length)return!1;for(let e=0;e<o;e+=1)if(!Object.prototype.hasOwnProperty.call(t,n[e]))return!1;for(let r=0;r<o;r+=1){const o=n[r];if(!By(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}const wy=(e,t,n)=>{var o,r;let l=e.paginationModel;const a=e.rowCount,i=null!==(o=null===n||void 0===n?void 0:n.pageSize)&&void 0!==o?o:l.pageSize,g=null!==(r=null===n||void 0===n?void 0:n.page)&&void 0!==r?r:l.page,s=Jh(a,i,g);!n||(null===n||void 0===n?void 0:n.page)===l.page&&(null===n||void 0===n?void 0:n.pageSize)===l.pageSize||(l=n);const c=-1===i?0:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t?e:Math.max(Math.min(e,t-1),0)}(l.page,s);return c!==l.page&&(l=Sg({},l,{page:c})),Hh(l.pageSize,t),l};const Ry=(e,t)=>{const n=null!==e.current.rootElementRef.current,r=jf(e,"useGridPrintExport"),l=o.useRef(null),a=o.useRef(null),i=o.useRef({}),g=o.useRef([]),s=o.useRef(null);o.useEffect((()=>{l.current=Sy(e.current.rootElementRef.current)}),[e,n]);const c=o.useCallback(((t,n,o)=>new Promise((r=>{const l=Ay({apiRef:e,options:{fields:t,allColumns:n}}).map((e=>e.field)),a=XC(e),i={};a.forEach((e=>{i[e.field]=l.includes(e.field)})),o&&(i[_f.field]=!0),e.current.setColumnVisibilityModel(i),r()}))),[e]),d=o.useCallback((t=>{const n=t({apiRef:e}).reduce(((t,n)=>{const o=e.current.getRow(n);return o[PA]||t.push(o),t}),[]);e.current.setRows(n)}),[e]),I=o.useCallback(((n,o)=>{var r,a;const i=Sg({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},o),g=n.contentDocument;if(!g)return;const s=_h(e),c=e.current.rootElementRef.current,d=c.cloneNode(!0);d.querySelector(".".concat(Gu.main)).style.overflow="visible",d.style.contain="size";let I=(null===(r=c.querySelector(".".concat(Gu.toolbarContainer)))||void 0===r?void 0:r.offsetHeight)||0,u=(null===(a=c.querySelector(".".concat(Gu.footerContainer)))||void 0===a?void 0:a.offsetHeight)||0;const C=d.querySelector(".".concat(Gu.footerContainer));var p;i.hideToolbar&&(null===(p=d.querySelector(".".concat(Gu.toolbarContainer)))||void 0===p||p.remove(),I=0);i.hideFooter&&C&&(C.remove(),u=0);const A=s.currentPageTotalHeight+ah(e,t)+I+u;d.style.height="".concat(A,"px"),d.style.boxSizing="content-box",!i.hideFooter&&C&&(C.style.position="absolute",C.style.width="100%",C.style.top="".concat(A-u,"px"));const m=document.createElement("div");m.appendChild(d),g.body.style.marginTop="0px",g.body.innerHTML=m.innerHTML;const h="function"===typeof i.pageStyle?i.pageStyle():i.pageStyle;if("string"===typeof h){const e=g.createElement("style");e.appendChild(g.createTextNode(h)),g.head.appendChild(e)}i.bodyClassName&&g.body.classList.add(...i.bodyClassName.split(" "));let b=[];if(i.copyStyles){const e=c.getRootNode();b=function(e,t){const n=[],o=t.querySelectorAll("style, link[rel='stylesheet']");for(let r=0;r<o.length;r+=1){const t=o[r];if("STYLE"===t.tagName){const n=e.createElement(t.tagName),o=t.sheet;if(o){let t="";for(let e=0;e<o.cssRules.length;e+=1)"string"===typeof o.cssRules[e].cssText&&(t+="".concat(o.cssRules[e].cssText,"\r\n"));n.appendChild(e.createTextNode(t)),e.head.appendChild(n)}}else if(t.getAttribute("href")){const o=e.createElement(t.tagName);for(let e=0;e<t.attributes.length;e+=1){const n=t.attributes[e];n&&o.setAttribute(n.nodeName,n.nodeValue||"")}n.push(new Promise((e=>{o.addEventListener("load",(()=>e()))}))),e.head.appendChild(o)}}return n}(g,"ShadowRoot"===e.constructor.name?e:l.current)}Promise.all(b).then((()=>{n.contentWindow.print()}))}),[e,l,t]),u=o.useCallback((t=>{var n;l.current.body.removeChild(t),e.current.restoreState(a.current||{}),null!==(n=a.current)&&void 0!==n&&null!==(n=n.columns)&&void 0!==n&&n.columnVisibilityModel||e.current.setColumnVisibilityModel(i.current),e.current.setState((e=>Sg({},e,{virtualization:s.current}))),e.current.setRows(g.current),a.current=null,i.current={},g.current=[]}),[e]),C=o.useCallback((async n=>{var o;if(r.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI X: No grid root element available.");if(a.current=e.current.exportState(),i.current=xC(e),g.current=e.current.getSortedRows().filter((e=>!e[PA])),t.pagination){const t={page:0,pageSize:Rh(e)};e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{paginationModel:wy(e.pagination,"DataGridPro",t)})})))}s.current=e.current.state.virtualization,e.current.setState((e=>Sg({},e,{virtualization:Sg({},e.virtualization,{enabled:!1,enabledForColumns:!1})}))),await c(null===n||void 0===n?void 0:n.fields,null===n||void 0===n?void 0:n.allColumns,null===n||void 0===n?void 0:n.includeCheckboxes),d(null!==(o=null===n||void 0===n?void 0:n.getRowsToExport)&&void 0!==o?o:my),await new Promise((e=>{requestAnimationFrame((()=>{e()}))}));const C=function(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}(null===n||void 0===n?void 0:n.fileName);C.onload=()=>{I(C,n);C.contentWindow.matchMedia("print").addEventListener("change",(e=>{!1===e.matches&&u(C)}))},l.current.body.appendChild(C)}),[t,r,e,I,u,c,d]);rb(e,{exportDataAsPrint:C},"public");const p=o.useCallback(((e,t)=>{var n;return null!==(n=t.printOptions)&&void 0!==n&&n.disableToolbarButton?e:[...e,{component:(0,ao.jsx)(Zy,{options:t.printOptions}),componentName:"printExport"}]}),[]);dy(e,"exportMenu",p)},Wy=(e,t,n,r)=>{const l=o.useCallback((()=>{e.current.registerStrategyProcessor(t,n,r)}),[e,r,n,t]);cy((()=>{l()}));const a=o.useRef(!0);o.useEffect((()=>{a.current?a.current=!1:l()}),[l])},ky=(e,t,n)=>{var o,r,l;const a=null!==(o=null!==(r=t.filterModel)&&void 0!==r?r:null===(l=t.initialState)||void 0===l||null===(l=l.filter)||void 0===l?void 0:l.filterModel)&&void 0!==o?o:mA();return Sg({},e,{filter:Sg({filterModel:yA(a,t.disableMultipleColumnsFiltering,n)},AA),visibleRowsLookup:{}})},Vy=e=>e.filteredRowsLookup;function Xy(e,t){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:t.rows.tree,filteredRowsLookup:t.filter.filteredRowsLookup})}function xy(){return iC(Object.values)}const Jy=e=>Sg({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}});function Ny(e,t){return e.closest(".".concat(t))}function Hy(e){return e.replace(/["\\]/g,"\\$&")}function Fy(e){return".".concat(Gu.row,'[data-id="').concat(Hy(String(e)),'"]')}function Yy(e){return 1===e.target.nodeType&&!e.currentTarget.contains(e.target)}function Ky(e,t){return e.rootElementRef.current.querySelector(".".concat(Gu[t]))}const My=e=>{let{api:t,colIndex:n,position:o,filterFn:r}=e;if(null===n)return[];const l=[];return Ey(t).forEach((e=>{e.getAttribute("data-id")&&e.querySelectorAll(".".concat(Gu["left"===o?"cell--pinnedLeft":"cell--pinnedRight"])).forEach((e=>{const t=zy(e);null!==t&&r(t)&&l.push(e)}))})),l};const Ly=e=>{var t;let{api:n,colIndex:o,position:r,filterFn:l}=e;if(null===(t=n.columnHeadersContainerRef)||void 0===t||!t.current)return[];if(null===o)return[];const a=[];return n.columnHeadersContainerRef.current.querySelectorAll(".".concat(Gu["left"===r?"columnHeader--pinnedLeft":"columnHeader--pinnedRight"])).forEach((e=>{const t=zy(e);null!==t&&l(t,e)&&a.push(e)})),a};function Ey(e){return e.virtualScrollerRef.current.querySelectorAll(":scope > div > div > .".concat(Gu.row))}function zy(e){const t=e.getAttribute("aria-colindex");return t?Number(t)-1:null}const jy=e=>{let{currentColIndex:t,firstColIndex:n,lastColIndex:o,isRtl:r}=e;if(r){if(t<o)return t+1}else if(!r&&t>n)return t-1;return null},Dy=e=>{let{currentColIndex:t,firstColIndex:n,lastColIndex:o,isRtl:r}=e;if(r){if(t>n)return t-1}else if(!r&&t<o)return t+1;return null};const Ty=bC(Uh,Tp,((e,t)=>(t.top||[]).concat(e.rows,t.bottom||[]))),Py=(e,t)=>{const n=jf(e,"useGridKeyboardNavigation"),r=Ym(),l=t.listView,a=o.useCallback((()=>Ty(e)),[e]),i="DataGrid"!==t.signature&&t.headerFilters,g=o.useCallback((function(t,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"up";const i=Zh(e),g=e.current.unstable_getCellColSpanInfo(o,t);g&&g.spannedByColSpan&&("left"===r?t=g.leftVisibleCellIndex:"right"===r&&(t=g.rightVisibleCellIndex));const s=l?db(e).field:HC(e)[t],c=function(e,t,n,o){var r;const l=gb(e);if(null===(r=l[t])||void 0===r||!r[n])return t;const a=Bh(e);let i=a.indexOf(t)+("down"===o?1:-1);for(;i>=0&&i<a.length;){var g;const e=a[i];if(null===(g=l[e])||void 0===g||!g[n])return e;i+="down"===o?1:-1}return t}(e,o,s,a),d=i.findIndex((e=>e.id===c));n.debug("Navigating to cell row ".concat(d,", col ").concat(t)),e.current.scrollToIndexes({colIndex:t,rowIndex:d}),e.current.setCellFocus(c,s)}),[e,n,l]),s=o.useCallback(((t,o)=>{n.debug("Navigating to header col ".concat(t)),e.current.scrollToIndexes({colIndex:t});const r=e.current.getVisibleColumns()[t].field;e.current.setColumnHeaderFocus(r,o)}),[e,n]),c=o.useCallback(((t,o)=>{n.debug("Navigating to header filter col ".concat(t)),e.current.scrollToIndexes({colIndex:t});const r=e.current.getVisibleColumns()[t].field;e.current.setColumnHeaderFilterFocus(r,o)}),[e,n]),d=o.useCallback(((t,o,r)=>{n.debug("Navigating to header col ".concat(t)),e.current.scrollToIndexes({colIndex:t});const{field:l}=e.current.getVisibleColumns()[t];e.current.setColumnGroupHeaderFocus(l,o,r)}),[e,n]),I=o.useCallback((e=>{var t;return null===(t=a()[e])||void 0===t?void 0:t.id}),[a]),u=o.useCallback(((t,n)=>{const o=n.currentTarget.querySelector(".".concat(Gu.columnHeaderTitleContainerContent));if(!!o&&o.contains(n.target)&&t.field!==_f.field)return;const l=a(),u=e.current.getViewportPageSize(),C=t.field?e.current.getColumnIndex(t.field):0,p=l.length>0?0:null,A=l.length-1,m=NC(e).length-1,h=eh(e);let b=!0;switch(n.key){case"ArrowDown":i?c(C,n):null!==p&&g(C,I(p));break;case"ArrowRight":{const e=Dy({currentColIndex:C,firstColIndex:0,lastColIndex:m,isRtl:r});null!==e&&s(e,n);break}case"ArrowLeft":{const e=jy({currentColIndex:C,firstColIndex:0,lastColIndex:m,isRtl:r});null!==e&&s(e,n);break}case"ArrowUp":h>0&&d(C,h-1,n);break;case"PageDown":null!==p&&null!==A&&g(C,I(Math.min(p+u,A)));break;case"Home":s(0,n);break;case"End":s(m,n);break;case"Enter":(n.ctrlKey||n.metaKey)&&e.current.toggleColumnMenu(t.field);break;case" ":break;default:b=!1}b&&n.preventDefault()}),[e,a,i,c,g,I,r,s,d]),C=o.useCallback(((t,n)=>{const o=Um(e)===t.field,l=Qm(e)===t.field;if(o||l||!ry(n.key))return;const i=a(),d=e.current.getViewportPageSize(),u=t.field?e.current.getColumnIndex(t.field):0,C=i.length-1,p=NC(e).length-1;let A=!0;switch(n.key){case"ArrowDown":{const e=I(0);null!=e&&g(u,e);break}case"ArrowRight":{const e=Dy({currentColIndex:u,firstColIndex:0,lastColIndex:p,isRtl:r});null!==e&&c(e,n);break}case"ArrowLeft":{const o=jy({currentColIndex:u,firstColIndex:0,lastColIndex:p,isRtl:r});null!==o?c(o,n):e.current.setColumnHeaderFilterFocus(t.field,n);break}case"ArrowUp":s(u,n);break;case"PageDown":null!==C&&g(u,I(Math.min(0+d,C)));break;case"Home":c(0,n);break;case"End":c(p,n);break;case" ":break;default:A=!1}A&&n.preventDefault()}),[e,a,c,r,s,g,I]),p=o.useCallback(((t,n)=>{const o=pb(e);if(null===o)return;const{field:r,depth:l}=o,{fields:i,depth:c,maxDepth:u}=t,C=a(),p=e.current.getViewportPageSize(),A=e.current.getColumnIndex(r),m=r?e.current.getColumnIndex(r):0,h=C.length-1,b=NC(e).length-1;let f=!0;switch(n.key){case"ArrowDown":c===u-1?s(A,n):d(A,l+1,n);break;case"ArrowUp":c>0&&d(A,l-1,n);break;case"ArrowRight":{const e=i.length-i.indexOf(r)-1;A+e+1<=b&&d(A+e+1,l,n);break}case"ArrowLeft":{const e=i.indexOf(r);A-e-1>=0&&d(A-e-1,l,n);break}case"PageDown":null!==h&&g(m,I(Math.min(0+p,h)));break;case"Home":d(0,l,n);break;case"End":d(b,l,n);break;case" ":break;default:f=!1}f&&n.preventDefault()}),[e,a,s,d,g,I]),A=o.useCallback(((t,n)=>{if(Yy(n))return;const o=e.current.getCellParams(t.id,t.field);if(o.cellMode===Zm.Edit||!ry(n.key))return;if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:n,cell:o}))return;const d=a();if(0===d.length)return;const u=e.current.getViewportPageSize(),C=l?()=>0:e.current.getColumnIndex,p=t.field?C(t.field):0,A=d.findIndex((e=>e.id===t.id)),m=d.length-1,h=(l?[db(e)]:NC(e)).length-1;let b=!0;switch(n.key){case"ArrowDown":A<m&&g(p,I(A+1),r?"right":"left","down");break;case"ArrowUp":A>0?g(p,I(A-1)):i?c(p,n):s(p,n);break;case"ArrowRight":{const e=Dy({currentColIndex:p,firstColIndex:0,lastColIndex:h,isRtl:r});null!==e&&g(e,I(A),r?"left":"right");break}case"ArrowLeft":{const e=jy({currentColIndex:p,firstColIndex:0,lastColIndex:h,isRtl:r});null!==e&&g(e,I(A),r?"right":"left");break}case"Tab":n.shiftKey&&p>0?g(p-1,I(A),"left"):!n.shiftKey&&p<h&&g(p+1,I(A),"right");break;case" ":{if(t.field===sm)break;const e=t.colDef;if(e&&("__tree_data_group__"===e.field||(e=>e===gm||null!==(e=>{const t=e.match(/^__row_group_by_columns_group_(.*)__$/);return t?t[1]:null})(e))(e.field)))break;!n.shiftKey&&A<m&&g(p,I(Math.min(A+u,m)));break}case"PageDown":A<m&&g(p,I(Math.min(A+u,m)));break;case"PageUp":{const e=Math.max(A-u,0);e!==A&&e>=0?g(p,I(e)):s(p,n);break}case"Home":n.ctrlKey||n.metaKey||n.shiftKey?g(0,I(0)):g(0,I(A));break;case"End":n.ctrlKey||n.metaKey||n.shiftKey?g(h,I(m)):g(h,I(A));break;default:b=!1}b&&n.preventDefault()}),[e,a,r,g,I,i,c,s,l]),m=o.useCallback(((e,t)=>{let{event:n}=t;return" "!==n.key&&e}),[]);dy(e,"canStartEditing",m),fp(e,"columnHeaderKeyDown",u),fp(e,"headerFilterKeyDown",C),fp(e,"columnGroupHeaderKeyDown",p),fp(e,"cellKeyDown",A)},Uy=(e,t)=>{var n,o,r,l,a,i,g,s,c;const d=Sg({},Nh(t.autoPageSize),null!==(n=t.paginationModel)&&void 0!==n?n:null===(o=t.initialState)||void 0===o||null===(o=o.pagination)||void 0===o?void 0:o.paginationModel);Hh(d.pageSize,t.signature);const I=null!==(r=null!==(l=t.rowCount)&&void 0!==l?l:null===(a=t.initialState)||void 0===a||null===(a=a.pagination)||void 0===a?void 0:a.rowCount)&&void 0!==r?r:"client"===t.paginationMode?null===(i=e.rows)||void 0===i?void 0:i.totalRowCount:void 0,u=null!==(g=null!==(s=t.paginationMeta)&&void 0!==s?s:null===(c=t.initialState)||void 0===c||null===(c=c.pagination)||void 0===c?void 0:c.meta)&&void 0!==g?g:{};return Sg({},e,{pagination:Sg({},e.pagination,{paginationModel:d,rowCount:I,meta:u,enabled:!0===t.pagination,paginationMode:t.paginationMode})})},Qy=(e,t)=>{((e,t)=>{var n;const r=jf(e,"useGridPaginationMeta"),l=Mu(e,Lh);e.current.registerControlState({stateId:"paginationMeta",propModel:t.paginationMeta,propOnChange:t.onPaginationMetaChange,stateSelector:Lh,changeEvent:"paginationMetaChange"});const a=o.useCallback((t=>{l!==t&&(r.debug("Setting 'paginationMeta' to",t),e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{meta:t})}))))}),[e,r,l]);rb(e,{setPaginationMeta:a},"public");const i=o.useCallback(((n,o)=>{var r;const l=Lh(e);return o.exportOnlyDirtyModels&&null==t.paginationMeta&&null==(null===(r=t.initialState)||void 0===r||null===(r=r.pagination)||void 0===r?void 0:r.meta)?n:Sg({},n,{pagination:Sg({},n.pagination,{meta:l})})}),[e,t.paginationMeta,null===(n=t.initialState)||void 0===n||null===(n=n.pagination)||void 0===n?void 0:n.meta]),g=o.useCallback(((t,n)=>{var o;const r=null!==(o=n.stateToRestore.pagination)&&void 0!==o&&o.meta?n.stateToRestore.pagination.meta:Lh(e);return e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{meta:r})}))),t}),[e]);dy(e,"exportState",i),dy(e,"restoreState",g),o.useEffect((()=>{t.paginationMeta&&e.current.setPaginationMeta(t.paginationMeta)}),[e,t.paginationMeta])})(e,t),((e,t)=>{var n;const r=jf(e,"useGridPaginationModel"),l=Mu(e,vC),a=o.useRef(bh(e)),i=Math.floor(t.rowHeight*l);e.current.registerControlState({stateId:"paginationModel",propModel:t.paginationModel,propOnChange:t.onPaginationModelChange,stateSelector:Kh,changeEvent:"paginationModelChange"});const g=o.useCallback((t=>{const n=Kh(e);t!==n.page&&(r.debug("Setting page to ".concat(t)),e.current.setPaginationModel({page:t,pageSize:n.pageSize}))}),[e,r]),s=o.useCallback((t=>{const n=Kh(e);t!==n.pageSize&&(r.debug("Setting page size to ".concat(t)),e.current.setPaginationModel({pageSize:t,page:n.page}))}),[e,r]),c=o.useCallback((n=>{const o=Kh(e);n!==o&&(r.debug("Setting 'paginationModel' to",n),e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{paginationModel:wy(e.pagination,t.signature,n)})})),"setPaginationModel"))}),[e,r,t.signature]);rb(e,{setPage:g,setPageSize:s,setPaginationModel:c},"public");const d=o.useCallback(((n,o)=>{var r;const l=Kh(e);return!o.exportOnlyDirtyModels||null!=t.paginationModel||null!=(null===(r=t.initialState)||void 0===r||null===(r=r.pagination)||void 0===r?void 0:r.paginationModel)||0!==l.page&&l.pageSize!==(t.autoPageSize?0:100)?Sg({},n,{pagination:Sg({},n.pagination,{paginationModel:l})}):n}),[e,t.paginationModel,null===(n=t.initialState)||void 0===n||null===(n=n.pagination)||void 0===n?void 0:n.paginationModel,t.autoPageSize]),I=o.useCallback(((n,o)=>{var r,l;const a=null!==(r=o.stateToRestore.pagination)&&void 0!==r&&r.paginationModel?Sg({},Nh(t.autoPageSize),null===(l=o.stateToRestore.pagination)||void 0===l?void 0:l.paginationModel):Kh(e);return e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{paginationModel:wy(e.pagination,t.signature,a)})})),"stateRestorePreProcessing"),n}),[e,t.autoPageSize,t.signature]);dy(e,"exportState",d),dy(e,"restoreState",I);const u=o.useCallback((()=>{if(!t.autoPageSize)return;const n=e.current.getRootDimensions(),o=Math.max(1,Math.floor(n.viewportInnerSize.height/i));e.current.setPageSize(o)}),[e,t.autoPageSize,i]),C=o.useCallback((t=>{if(null==t)return;const n=Kh(e);if(0===n.page)return;const o=jh(e);n.page>o-1&&e.current.setPage(Math.max(0,o-1))}),[e]),p=o.useCallback((()=>{0!==Kh(e).page&&e.current.setPage(0),0!==e.current.getScrollPosition().top&&e.current.scroll({top:0})}),[e]),A=o.useCallback((t=>{const n=Sg({},t,{items:Vh(e)});By(n,a.current)||(a.current=n,p())}),[e,p]);fp(e,"viewportInnerSizeChange",u),fp(e,"paginationModelChange",(()=>{var t;const n=Kh(e);null!==(t=e.current.virtualScrollerRef)&&void 0!==t&&t.current&&e.current.scrollToIndexes({rowIndex:n.page*n.pageSize})})),fp(e,"rowCountChange",C),fp(e,"sortModelChange",p),fp(e,"filterModelChange",A);const m=o.useRef(!0);o.useEffect((()=>{m.current?m.current=!1:t.pagination&&e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{paginationModel:wy(e.pagination,t.signature,t.paginationModel)})})))}),[e,t.paginationModel,t.signature,t.pagination]),o.useEffect((()=>{e.current.setState((e=>{const n=!0===t.pagination;return e.pagination.paginationMode===t.paginationMode||e.pagination.enabled===n?e:Sg({},e,{pagination:Sg({},e.pagination,{paginationMode:t.paginationMode,enabled:!0===t.pagination})})}))}),[e,t.paginationMode,t.pagination]),o.useEffect(u,[u])})(e,t),((e,t)=>{var n;const r=jf(e,"useGridRowCount"),l=Mu(e,Wh),a=Mu(e,Mh),i=Mu(e,Lh),g=Mu(e,Kh),s=Xu((()=>Kh(e).pageSize));e.current.registerControlState({stateId:"paginationRowCount",propModel:t.rowCount,propOnChange:t.onRowCountChange,stateSelector:Mh,changeEvent:"rowCountChange"});const c=o.useCallback((t=>{a!==t&&(r.debug("Setting 'rowCount' to",t),e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{rowCount:t})}))))}),[e,r,a]);rb(e,{setRowCount:c},"public");const d=o.useCallback(((n,o)=>{var r;const l=Mh(e);return o.exportOnlyDirtyModels&&null==t.rowCount&&null==(null===(r=t.initialState)||void 0===r||null===(r=r.pagination)||void 0===r?void 0:r.rowCount)?n:Sg({},n,{pagination:Sg({},n.pagination,{rowCount:l})})}),[e,t.rowCount,null===(n=t.initialState)||void 0===n||null===(n=n.pagination)||void 0===n?void 0:n.rowCount]),I=o.useCallback(((t,n)=>{var o;const r=null!==(o=n.stateToRestore.pagination)&&void 0!==o&&o.rowCount?n.stateToRestore.pagination.rowCount:Mh(e);return e.current.setState((e=>Sg({},e,{pagination:Sg({},e.pagination,{rowCount:r})}))),t}),[e]);dy(e,"exportState",d),dy(e,"restoreState",I);const u=o.useCallback((n=>{"client"!==t.paginationMode&&s.current&&n.pageSize!==s.current&&(s.current=n.pageSize,-1===a&&e.current.setPage(0))}),[t.paginationMode,s,a,e]);fp(e,"paginationModelChange",u),o.useEffect((()=>{"client"===t.paginationMode?e.current.setRowCount(l):null!=t.rowCount&&e.current.setRowCount(t.rowCount)}),[e,t.paginationMode,l,t.rowCount]);const C=!1===i.hasNextPage;o.useEffect((()=>{C&&-1===a&&e.current.setRowCount(g.pageSize*g.page+l)}),[e,l,C,a,g])})(e,t)},Oy=(e,t)=>{var n,o;return Sg({},e,{preferencePanel:null!==(n=null===(o=t.initialState)||void 0===o?void 0:o.preferencePanel)&&void 0!==n?n:{open:!1}})},qy=hC((e=>e.editRows)),_y=mC(qy,((e,t)=>{let{rowId:n,editMode:o}=t;return o===vm.Row&&Boolean(e[n])})),$y=mC(qy,((e,t)=>{var n,o;let{rowId:r,field:l}=t;return null!==(n=null===(o=e[r])||void 0===o?void 0:o[l])&&void 0!==n?n:null})),ev=e=>{switch(e.type){case"boolean":return!1;case"date":case"dateTime":case"number":return;case"singleSelect":return null;default:return""}},tv=["id","field"],nv=["id","field"];var ov=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(ov||{}),rv=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(rv||{});const lv=["id"],av=["id"],iv=e=>Sg({},e,{editRows:{}}),gv=(e,t)=>{((e,t)=>{const[n,r]=o.useState({}),l=o.useRef(n),a=o.useRef({}),{processRowUpdate:i,onProcessRowUpdateError:g,cellModesModel:s,onCellModesModelChange:c}=t,d=e=>function(){t.editMode===vm.Cell&&e(...arguments)},I=o.useCallback(((t,n)=>{const o=e.current.getCellParams(t,n);if(!e.current.isCellEditable(o))throw new Error("MUI X: The cell with id=".concat(t," and field=").concat(n," is not editable."))}),[e]),u=o.useCallback(((t,n,o)=>{if(e.current.getCellMode(t,n)!==o)throw new Error("MUI X: The cell with id=".concat(t," and field=").concat(n," is not in ").concat(o," mode."))}),[e]),C=o.useCallback(((t,n)=>{if(!t.isEditable)return;if(t.cellMode===Zm.Edit)return;const o=Sg({},t,{reason:fm.cellDoubleClick});e.current.publishEvent("cellEditStart",o,n)}),[e]),p=o.useCallback(((t,n)=>{if(t.cellMode===Zm.View)return;if(e.current.getCellMode(t.id,t.field)===Zm.View)return;const o=Sg({},t,{reason:ym.cellFocusOut});e.current.publishEvent("cellEditStop",o,n)}),[e]),A=o.useCallback(((t,n)=>{if(t.cellMode===Zm.Edit){if(229===n.which)return;let o;if("Escape"===n.key?o=ym.escapeKeyDown:"Enter"===n.key?o=ym.enterKeyDown:"Tab"===n.key&&(o=n.shiftKey?ym.shiftTabKeyDown:ym.tabKeyDown,n.preventDefault()),o){const r=Sg({},t,{reason:o});e.current.publishEvent("cellEditStop",r,n)}}else if(t.isEditable){let o;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:n,cellParams:t,editMode:"cell"}))return;if(oy(n)?o=fm.printableKeyDown:ay(n)?o=fm.pasteKeyDown:"Enter"===n.key?o=fm.enterKeyDown:"Backspace"!==n.key&&"Delete"!==n.key||(o=fm.deleteKeyDown),o){const r=Sg({},t,{reason:o,key:n.key});e.current.publishEvent("cellEditStart",r,n)}}}),[e]),m=o.useCallback((t=>{const{id:n,field:o,reason:r}=t,l={id:n,field:o};r!==fm.printableKeyDown&&r!==fm.deleteKeyDown&&r!==fm.pasteKeyDown||(l.deleteValue=!0),e.current.startCellEditMode(l)}),[e]),h=o.useCallback((t=>{const{id:n,field:o,reason:r}=t;let l;e.current.runPendingEditCellValueMutation(n,o),r===ym.enterKeyDown?l="below":r===ym.tabKeyDown?l="right":r===ym.shiftTabKeyDown&&(l="left");const a="escapeKeyDown"===r;e.current.stopCellEditMode({id:n,field:o,ignoreModifications:a,cellToFocusAfter:l})}),[e]);fp(e,"cellDoubleClick",d(C)),fp(e,"cellFocusOut",d(p)),fp(e,"cellKeyDown",d(A)),fp(e,"cellEditStart",d(m)),fp(e,"cellEditStop",d(h)),vp(e,"cellEditStart",t.onCellEditStart),vp(e,"cellEditStop",(t=>async function(){if(t){var n;const{id:o,field:r}=arguments.length<=0?void 0:arguments[0];(null===(n=e.current.state.editRows[o][r])||void 0===n?void 0:n.error)||t(...arguments)}})(t.onCellEditStop));const b=o.useCallback(((t,n)=>{const o=qy(e);return o[t]&&o[t][n]?Zm.Edit:Zm.View}),[e]),f=Cp((n=>{const o=n!==t.cellModesModel;c&&o&&c(n,{api:e.current}),t.cellModesModel&&o||(r(n),l.current=n,e.current.publishEvent("cellModesModelChange",n))})),y=o.useCallback(((e,t,n)=>{const o=Sg({},l.current);if(null!==n)o[e]=Sg({},o[e],{[t]:Sg({},n)});else{const n=Wg(o[e],[t].map(GI.A));o[e]=n,0===Object.keys(o[e]).length&&delete o[e]}f(o)}),[f]),v=o.useCallback(((t,n,o)=>{e.current.setState((e=>{const r=Sg({},e.editRows);return null!==o?r[t]=Sg({},r[t],{[n]:Sg({},o)}):(delete r[t][n],0===Object.keys(r[t]).length&&delete r[t]),Sg({},e,{editRows:r})}))}),[e]),Z=o.useCallback((e=>{const{id:t,field:n}=e,o=Wg(e,tv);I(t,n),u(t,n,Zm.View),y(t,n,Sg({mode:Zm.Edit},o))}),[I,u,y]),G=Cp((async t=>{const{id:n,field:o,deleteValue:r,initialValue:l}=t,a=e.current.getCellValue(n,o);let i=a;r?i=ev(e.current.getColumn(o)):l&&(i=l);const g=e.current.getColumn(o),s=!!g.preProcessEditCellProps&&r;let c={value:i,error:!1,isProcessingProps:s};if(v(n,o,c),e.current.setCellFocus(n,o),s&&(c=await Promise.resolve(g.preProcessEditCellProps({id:n,row:e.current.getRow(n),props:c,hasChanged:i!==a})),e.current.getCellMode(n,o)===Zm.Edit)){const t=qy(e);v(n,o,Sg({},c,{value:t[n][o].value,isProcessingProps:!1}))}})),S=o.useCallback((e=>{const{id:t,field:n}=e,o=Wg(e,nv);u(t,n,Zm.Edit),y(t,n,Sg({mode:Zm.View},o))}),[u,y]),B=Cp((async n=>{var o;const{id:r,field:l,ignoreModifications:s,cellToFocusAfter:c="none"}=n;u(r,l,Zm.Edit),e.current.runPendingEditCellValueMutation(r,l);const d=()=>{v(r,l,null),y(r,l,null),"none"!==c&&e.current.moveFocusToRelativeCell(r,l,c)};if(s)return void d();const I=qy(e),{error:C,isProcessingProps:p}=I[r][l],A=e.current.getRow(r);if(C||p)return a.current[r][l].mode=Zm.Edit,void y(r,l,{mode:Zm.Edit});const m=e.current.getRowWithUpdatedValuesFromCellEditing(r,l);if(null!==(o=t.dataSource)&&void 0!==o&&o.updateRow){if(By(A,m))return void d();const t=()=>{a.current[r][l].mode=Zm.Edit,y(r,l,{mode:Zm.Edit})},n={rowId:r,updatedRow:m,previousRow:A};try{await e.current.dataSource.editRow(n),d()}catch(h){t()}}else if(i){const t=e=>{a.current[r][l].mode=Zm.Edit,y(r,l,{mode:Zm.Edit}),g&&g(e)};try{Promise.resolve(i(m,A,{rowId:r})).then((t=>{e.current.updateRows([t]),d()})).catch(t)}catch(b){t(b)}}else e.current.updateRows([m]),d()})),w=o.useCallback((async t=>{var n;const{id:o,field:r,value:l,debounceMs:a,unstable_skipValueParser:i}=t;I(o,r),u(o,r,Zm.Edit);const g=e.current.getColumn(r),s=e.current.getRow(o);let c=l;g.valueParser&&!i&&(c=g.valueParser(l,s,g,e));let d=qy(e),C=Sg({},d[o][r],{value:c,changeReason:a?"debouncedSetEditCellValue":"setEditCellValue"});if(g.preProcessEditCellProps){const e=l!==d[o][r].value;C=Sg({},C,{isProcessingProps:!0}),v(o,r,C),C=await Promise.resolve(g.preProcessEditCellProps({id:o,row:s,props:C,hasChanged:e}))}return e.current.getCellMode(o,r)!==Zm.View&&(d=qy(e),C=Sg({},C,{isProcessingProps:!1}),C.value=g.preProcessEditCellProps?d[o][r].value:c,v(o,r,C),d=qy(e),!(null!==(n=d[o])&&void 0!==n&&null!==(n=n[r])&&void 0!==n&&n.error))}),[e,I,u,v]),R=o.useCallback(((t,n)=>{const o=e.current.getColumn(n),r=qy(e),l=e.current.getRow(t);if(!r[t]||!r[t][n])return e.current.getRow(t);const{value:a}=r[t][n];return o.valueSetter?o.valueSetter(a,l,o,e):Sg({},l,{[n]:a})}),[e]),W={setCellEditingEditCellValue:w,getRowWithUpdatedValuesFromCellEditing:R};rb(e,{getCellMode:b,startCellEditMode:Z,stopCellEditMode:S},"public"),rb(e,W,"private"),o.useEffect((()=>{s&&f(s)}),[s,f]),up((()=>{const t=Fp(e),o=a.current;a.current=IA(n),Object.entries(n).forEach((n=>{let[r,l]=n;Object.entries(l).forEach((n=>{var l;let[a,i]=n;const g=(null===(l=o[r])||void 0===l||null===(l=l[a])||void 0===l?void 0:l.mode)||Zm.View,s=t[r]?e.current.getRowId(t[r]):r;i.mode===Zm.Edit&&g===Zm.View?G(Sg({id:s,field:a},i)):i.mode===Zm.View&&g===Zm.Edit&&B(Sg({id:s,field:a},i))}))}))}),[e,n,G,B])})(e,t),((e,t)=>{const[n,r]=o.useState({}),l=o.useRef(n),a=o.useRef({}),i=o.useRef({}),g=o.useRef(void 0),s=o.useRef(null),{processRowUpdate:c,onProcessRowUpdateError:d,rowModesModel:I,onRowModesModelChange:u}=t,C=e=>function(){t.editMode===vm.Row&&e(...arguments)},p=o.useCallback(((t,n)=>{const o=e.current.getCellParams(t,n);if(!e.current.isCellEditable(o))throw new Error("MUI X: The cell with id=".concat(t," and field=").concat(n," is not editable."))}),[e]),A=o.useCallback(((t,n)=>{if(e.current.getRowMode(t)!==n)throw new Error("MUI X: The row with id=".concat(t," is not in ").concat(n," mode."))}),[e]),m=o.useCallback((t=>{const n=qy(e);return Object.values(n[t]).some((e=>e.error))}),[e]),h=o.useCallback(((t,n)=>{if(!t.isEditable)return;if(e.current.getRowMode(t.id)===Gm.Edit)return;const o=Sg({},e.current.getRowParams(t.id),{field:t.field,reason:ov.cellDoubleClick});e.current.publishEvent("rowEditStart",o,n)}),[e]),b=o.useCallback((e=>{s.current=e}),[]),f=o.useCallback(((t,n)=>{t.isEditable&&e.current.getRowMode(t.id)!==Gm.View&&(s.current=null,g.current=setTimeout((()=>{var o;if((null===(o=s.current)||void 0===o?void 0:o.id)!==t.id){if(!e.current.getRow(t.id))return;if(e.current.getRowMode(t.id)===Gm.View)return;if(m(t.id))return;const o=Sg({},e.current.getRowParams(t.id),{field:t.field,reason:rv.rowFocusOut});e.current.publishEvent("rowEditStop",o,n)}})))}),[e,m]);o.useEffect((()=>()=>{clearTimeout(g.current)}),[]);const y=o.useCallback(((t,n)=>{if(t.cellMode===Gm.Edit){if(229===n.which)return;let o;if("Escape"===n.key)o=rv.escapeKeyDown;else if("Enter"===n.key)o=rv.enterKeyDown;else if("Tab"===n.key){const r=HC(e).filter((n=>e.current.getColumn(n).type===jm||e.current.isCellEditable(e.current.getCellParams(t.id,n))));if(n.shiftKey?t.field===r[0]&&(o=rv.shiftTabKeyDown):t.field===r[r.length-1]&&(o=rv.tabKeyDown),n.preventDefault(),!o){const o=r.findIndex((e=>e===t.field)),l=r[n.shiftKey?o-1:o+1];e.current.setCellFocus(t.id,l)}}if(o){if(o!==rv.escapeKeyDown&&m(t.id))return;const r=Sg({},e.current.getRowParams(t.id),{reason:o,field:t.field});e.current.publishEvent("rowEditStop",r,n)}}else if(t.isEditable){let o;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:n,cellParams:t,editMode:"row"}))return;if(oy(n)||ay(n)?o=ov.printableKeyDown:"Enter"===n.key?o=ov.enterKeyDown:"Backspace"!==n.key&&"Delete"!==n.key||(o=ov.deleteKeyDown),o){const r=Sg({},e.current.getRowParams(t.id),{field:t.field,reason:o});e.current.publishEvent("rowEditStart",r,n)}}}),[e,m]),v=o.useCallback((t=>{const{id:n,field:o,reason:r}=t,l={id:n,fieldToFocus:o};r!==ov.printableKeyDown&&r!==ov.deleteKeyDown||(l.deleteValue=!!o),e.current.startRowEditMode(l)}),[e]),Z=o.useCallback((t=>{const{id:n,reason:o,field:r}=t;let l;e.current.runPendingEditCellValueMutation(n),o===rv.enterKeyDown?l="below":o===rv.tabKeyDown?l="right":o===rv.shiftTabKeyDown&&(l="left");const a="escapeKeyDown"===o;e.current.stopRowEditMode({id:n,ignoreModifications:a,field:r,cellToFocusAfter:l})}),[e]);fp(e,"cellDoubleClick",C(h)),fp(e,"cellFocusIn",C(b)),fp(e,"cellFocusOut",C(f)),fp(e,"cellKeyDown",C(y)),fp(e,"rowEditStart",C(v)),fp(e,"rowEditStop",C(Z)),vp(e,"rowEditStart",t.onRowEditStart),vp(e,"rowEditStop",t.onRowEditStop);const G=o.useCallback((n=>_y(e,{rowId:n,editMode:t.editMode})?Gm.Edit:Gm.View),[e,t.editMode]),S=Cp((n=>{const o=n!==t.rowModesModel;u&&o&&u(n,{api:e.current}),t.rowModesModel&&o||(r(n),l.current=n,e.current.publishEvent("rowModesModelChange",n))})),B=o.useCallback(((e,t)=>{const n=Sg({},l.current);null!==t?n[e]=Sg({},t):delete n[e],S(n)}),[S]),w=o.useCallback(((t,n)=>{e.current.setState((e=>{const o=Sg({},e.editRows);return null!==n?o[t]=n:delete o[t],Sg({},e,{editRows:o})}))}),[e]),R=o.useCallback(((t,n,o)=>{e.current.setState((e=>{const r=Sg({},e.editRows);return null!==o?r[t]=Sg({},r[t],{[n]:Sg({},o)}):(delete r[t][n],0===Object.keys(r[t]).length&&delete r[t]),Sg({},e,{editRows:r})}))}),[e]),W=o.useCallback((e=>{const{id:t}=e,n=Wg(e,lv);A(t,Gm.View),B(t,Sg({mode:Gm.Edit},n))}),[A,B]),k=Cp((t=>{const{id:n,fieldToFocus:o,deleteValue:r,initialValue:l}=t,a=e.current.getRow(n),g=XC(e),s=g.reduce(((t,a)=>{const i=a.field;if(!e.current.getCellParams(n,i).isEditable)return t;const g=e.current.getColumn(i);let s=e.current.getCellValue(n,i);return o===i&&(r||l)&&(r?s=ev(g):l&&(s=l)),t[i]={value:s,error:!1,isProcessingProps:g.editable&&!!g.preProcessEditCellProps&&r},t}),{});i.current[n]=a,w(n,s),o&&e.current.setCellFocus(n,o),g.filter((e=>e.editable&&!!e.preProcessEditCellProps&&r)).forEach((t=>{const o=t.field,i=e.current.getCellValue(n,o),g=r?ev(t):null!==l&&void 0!==l?l:i;Promise.resolve(t.preProcessEditCellProps({id:n,row:a,props:s[o],hasChanged:g!==i})).then((t=>{if(e.current.getRowMode(n)===Gm.Edit){const r=qy(e);R(n,o,Sg({},t,{value:r[n][o].value,isProcessingProps:!1}))}}))}))})),V=o.useCallback((e=>{const{id:t}=e,n=Wg(e,av);A(t,Gm.Edit),B(t,Sg({mode:Gm.View},n))}),[A,B]),X=Cp((async n=>{var o;const{id:r,ignoreModifications:l,field:g,cellToFocusAfter:s="none"}=n;e.current.runPendingEditCellValueMutation(r);const I=()=>{"none"!==s&&g&&e.current.moveFocusToRelativeCell(r,g,s),w(r,null),B(r,null),delete i.current[r]};if(l)return void I();const u=qy(e),C=i.current[r];if(Object.values(u[r]).some((e=>e.isProcessingProps)))return void(a.current[r].mode=Gm.Edit);if(m(r))return a.current[r].mode=Gm.Edit,void B(r,{mode:Gm.Edit});const p=e.current.getRowWithUpdatedValuesFromRowEditing(r);if(null!==(o=t.dataSource)&&void 0!==o&&o.updateRow){if(By(C,p))return void I();const t=()=>{a.current[r].mode=Gm.Edit,B(r,{mode:Gm.Edit})},n={rowId:r,updatedRow:p,previousRow:C};try{await e.current.dataSource.editRow(n),I()}catch(A){t()}}else if(c){const t=e=>{a.current[r]&&(a.current[r].mode=Gm.Edit,B(r,{mode:Gm.Edit})),d&&d(e)};try{Promise.resolve(c(p,C,{rowId:r})).then((t=>{e.current.updateRows([t]),I()})).catch(t)}catch(h){t(h)}}else e.current.updateRows([p]),I()})),x=o.useCallback((t=>{const{id:n,field:o,value:r,debounceMs:l,unstable_skipValueParser:a}=t;p(n,o);const i=e.current.getColumn(o),g=e.current.getRow(n);let s=r;i.valueParser&&!a&&(s=i.valueParser(r,g,i,e));let c=qy(e),d=Sg({},c[n][o],{value:s,changeReason:l?"debouncedSetEditCellValue":"setEditCellValue"});return i.preProcessEditCellProps||R(n,o,d),new Promise((t=>{const r=[];if(i.preProcessEditCellProps){const l=d.value!==c[n][o].value;d=Sg({},d,{isProcessingProps:!0}),R(n,o,d);const a=Wg(c[n],[o].map(GI.A)),I=Promise.resolve(i.preProcessEditCellProps({id:n,row:g,props:d,hasChanged:l,otherFieldsProps:a})).then((r=>{e.current.getRowMode(n)!==Gm.View?(c=qy(e),(r=Sg({},r,{isProcessingProps:!1})).value=i.preProcessEditCellProps?c[n][o].value:s,R(n,o,r)):t(!1)}));r.push(I)}Object.entries(c[n]).forEach((l=>{let[a,i]=l;if(a===o)return;const s=e.current.getColumn(a);if(!s.preProcessEditCellProps)return;i=Sg({},i,{isProcessingProps:!0}),R(n,a,i),c=qy(e);const d=Wg(c[n],[a].map(GI.A)),I=Promise.resolve(s.preProcessEditCellProps({id:n,row:g,props:i,hasChanged:!1,otherFieldsProps:d})).then((o=>{e.current.getRowMode(n)!==Gm.View?(o=Sg({},o,{isProcessingProps:!1}),R(n,a,o)):t(!1)}));r.push(I)})),Promise.all(r).then((()=>{e.current.getRowMode(n)===Gm.Edit?(c=qy(e),t(!c[n][o].error)):t(!1)}))}))}),[e,p,R]),J=o.useCallback((t=>{const n=qy(e),o=e.current.getRow(t);if(!n[t])return e.current.getRow(t);let r=Sg({},i.current[t],o);return Object.entries(n[t]).forEach((t=>{let[n,o]=t;const l=e.current.getColumn(n);null!==l&&void 0!==l&&l.valueSetter?r=l.valueSetter(o.value,r,l,e):r[n]=o.value})),r}),[e]),N={setRowEditingEditCellValue:x,getRowWithUpdatedValuesFromRowEditing:J};rb(e,{getRowMode:G,startRowEditMode:W,stopRowEditMode:V},"public"),rb(e,N,"private"),o.useEffect((()=>{I&&S(I)}),[I,S]),up((()=>{const t=Fp(e),o=a.current;a.current=IA(n);const r=new Set([...Object.keys(n),...Object.keys(o)]);Array.from(r).forEach((r=>{var l,a;const i=null!==(l=n[r])&&void 0!==l?l:{mode:Gm.View},g=(null===(a=o[r])||void 0===a?void 0:a.mode)||Gm.View,s=t[r]?e.current.getRowId(t[r]):r;i.mode===Gm.Edit&&g===Gm.View?k(Sg({id:s},i)):i.mode===Gm.View&&g===Gm.Edit&&X(Sg({id:s},i))}))}),[e,n,k,X])})(e,t);const n=o.useRef({}),{isCellEditable:r}=t,l=o.useCallback((e=>!_A(e.rowNode)&&(!!e.colDef.editable&&(!!e.colDef.renderEditCell&&(!r||r(e))))),[r]);o.useEffect((()=>{const e=n.current;return()=>{Object.entries(e).forEach((t=>{let[n,o]=t;Object.keys(o).forEach((t=>{const[o]=e[n][t];clearTimeout(o),delete e[n][t]}))}))}}),[]);const a=o.useCallback(((e,t)=>{if(n.current[e])if(t){if(n.current[e][t]){const[,o]=n.current[e][t];o()}}else Object.keys(n.current[e]).forEach((t=>{const[,o]=n.current[e][t];o()}))}),[]),i=o.useCallback((o=>{const{id:r,field:l,debounceMs:a}=o;return new Promise((i=>{((e,t,o,r)=>{if(!o)return void r();if(n.current[e]||(n.current[e]={}),n.current[e][t]){const[o]=n.current[e][t];clearTimeout(o)}const l=setTimeout((()=>{r(),delete n.current[e][t]}),o);n.current[e][t]=[l,()=>{const[o]=n.current[e][t];clearTimeout(o),r(),delete n.current[e][t]}]})(r,l,a,(async()=>{const n=t.editMode===vm.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(r,l)===Zm.Edit){const e=await n(o);i(e)}}))}))}),[e,t.editMode]),g=o.useCallback(((n,o)=>t.editMode===vm.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(n,o):e.current.getRowWithUpdatedValuesFromRowEditing(n)),[e,t.editMode]),s=o.useCallback(((t,n)=>{var o,r;return null!==(o=null===(r=qy(e)[t])||void 0===r?void 0:r[n])&&void 0!==o?o:null}),[e]),c={runPendingEditCellValueMutation:a};rb(e,{isCellEditable:l,setEditCellValue:i,getRowWithUpdatedValues:g,unstable_getEditCellMeta:s},"public"),rb(e,c,"private")},sv=(e,t,n)=>{const o=!!t.dataSource;return n.current.caches.rows=QA({rows:o?[]:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),Sg({},e,{rows:qA({apiRef:n,rowCountProp:t.rowCount,loadingProp:!!o||t.loading,previousTree:null,previousTreeDepths:null})})},cv=e=>"full"===e.updates.type?(e=>{const t={[TA]:Sg({},{type:"group",id:TA,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null},{children:e})};for(let n=0;n<e.length;n+=1){const o=e[n];t[o]={id:o,depth:0,parent:TA,type:"leaf",groupingKey:null}}return{groupingName:Kf,tree:t,treeDepths:{0:e.length},dataRowIds:e}})(e.updates.rows):(e=>{let{previousTree:t,actions:n}=e;const o=Sg({},t),r={};for(let i=0;i<n.remove.length;i+=1){const e=n.remove[i];r[e]=!0,delete o[e]}for(let i=0;i<n.insert.length;i+=1){const e=n.insert[i];o[e]={id:e,depth:0,parent:TA,type:"leaf",groupingKey:null}}const l=o[TA];let a=[...l.children,...n.insert];return Object.values(r).length&&(a=a.filter((e=>!r[e]))),o[TA]=Sg({},l,{children:a}),{groupingName:Kf,tree:o,treeDepths:{0:a.length},dataRowIds:a}})({previousTree:e.previousTree,actions:e.updates.actions});class dv extends Error{}function Iv(e,t){var n;const r=o.useCallback((t=>({field:t,colDef:e.current.getColumn(t)})),[e]),l=o.useCallback((t=>{const n=e.current.getRow(t);if(!n)throw new dv("No row with id #".concat(t," found"));return{id:t,columns:e.current.getAllColumns(),row:n}}),[e]),a=o.useCallback(((t,n,o,r)=>{let{cellMode:l,colDef:a,hasFocus:i,rowNode:g,tabIndex:s}=r;const c=o[n],d=null!==a&&void 0!==a&&a.valueGetter?a.valueGetter(c,o,a,e):c,I={id:t,field:n,row:o,rowNode:g,colDef:a,cellMode:l,hasFocus:i,tabIndex:s,value:d,formattedValue:d,isEditable:!1,api:e.current};return a&&a.valueFormatter&&(I.formattedValue=a.valueFormatter(d,o,a,e)),I.isEditable=a&&e.current.isCellEditable(I),I}),[e]),i=o.useCallback(((n,o)=>{var r;const l=e.current.getRow(n),a=Kp(e,n);if(!l||!a)throw new dv("No row with id #".concat(n," found"));const i=ub(e),g=mb(e),s=e.current.getCellMode(n,o);return e.current.getCellParamsForRow(n,o,l,{colDef:t.listView&&(null===(r=t.listViewColumn)||void 0===r?void 0:r.field)===o?db(e):e.current.getColumn(o),rowNode:a,hasFocus:null!==i&&i.field===o&&i.id===n,tabIndex:g&&g.field===o&&g.id===n?0:-1,cellMode:s})}),[e,t.listView,null===(n=t.listViewColumn)||void 0===n?void 0:n.field]),g=o.useCallback(((t,n)=>{const o=e.current.getColumn(n),r=e.current.getRow(t);if(!r)throw new dv("No row with id #".concat(t," found"));return o&&o.valueGetter?o.valueGetter(r[o.field],r,o,e):r[n]}),[e]),s=o.useCallback(((t,n)=>((e,t,n)=>{const o=t.field;if(!t||!t.valueGetter)return e[o];const r=e[t.field];return t.valueGetter(r,e,t,n)})(t,n,e)),[e]),c=o.useCallback(((t,n)=>{const o=s(t,n);return n&&n.valueFormatter?n.valueFormatter(o,t,n,e):o}),[e,s]),d=o.useCallback((t=>e.current.rootElementRef.current?function(e,t){return e.querySelector('[role="columnheader"][data-field="'.concat(Hy(t),'"]'))}(e.current.rootElementRef.current,t):null),[e]),I=o.useCallback((t=>e.current.rootElementRef.current?function(e,t){return e.querySelector(Fy(t))}(e.current.rootElementRef.current,t):null),[e]),u=o.useCallback(((t,n)=>e.current.rootElementRef.current?function(e,t){let{id:n,field:o}=t;const r=Fy(n),l=".".concat(Gu.cell,'[data-field="').concat(Hy(o),'"]'),a="".concat(r," ").concat(l);return e.querySelector(a)}(e.current.rootElementRef.current,{id:t,field:n}):null),[e]),C={getCellParamsForRow:a};rb(e,{getCellValue:g,getCellParams:i,getCellElement:u,getRowValue:s,getRowFormattedValue:c,getRowParams:l,getRowElement:I,getColumnHeaderParams:r,getColumnHeaderElement:d},"public"),rb(e,C,"private")}const uv={type:"include",ids:new Set},Cv=(e,t)=>{var n;return Sg({},e,{rowSelection:t.rowSelection&&null!==(n=t.rowSelectionModel)&&void 0!==n?n:uv})},pv=(e,t)=>{const n=(e=>{const{classes:t}=e;return o.useMemo((()=>Ng({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Zu,t)),[t])})({classes:t.classes}),r=o.useCallback((o=>{const r=Sg({},_f,{cellClassName:n.cellCheckbox,headerClassName:n.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),l=t.checkboxSelection,a=null!=o.lookup[qf];return l&&!a?(o.lookup[qf]=r,o.orderedFields=[qf,...o.orderedFields]):!l&&a?(delete o.lookup[qf],o.orderedFields=o.orderedFields.filter((e=>e!==qf))):l&&a&&(o.lookup[qf]=Sg({},r,o.lookup[qf]),t.columns.some((e=>e.field===qf))||(o.orderedFields=[qf,...o.orderedFields.filter((e=>e!==qf))])),o}),[e,n,t.columns,t.checkboxSelection]);dy(e,"hydrateColumns",r)},Av=(e,t)=>{var n,o,r;const l=null!==(n=null!==(o=t.sortModel)&&void 0!==o?o:null===(r=t.initialState)||void 0===r||null===(r=r.sorting)||void 0===r?void 0:r.sortModel)&&void 0!==n?n:[];return Sg({},e,{sorting:{sortModel:Up(l,t.disableMultipleColumnsSorting),sortedRows:[]}})};function mv(e){const{containerSize:t,scrollPosition:n,elementSize:o,elementOffset:r}=e,l=r+o;return o>t?r:l-t>n?l-t:r<n?r:void 0}const hv={autoHeight:!1,autoPageSize:!1,autosizeOnMount:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,clipboardCopyCellDelimiter:"\t",columnBufferPx:150,columnHeaderHeight:56,disableAutosize:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnReorder:!1,disableColumnResize:!1,disableColumnSelector:!1,disableColumnSorting:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleColumnsSorting:!1,disableMultipleRowSelection:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:vm.Cell,filterDebounceMs:150,filterMode:"client",hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,ignoreValueFormatterDuringExport:!1,keepColumnPositionIfDraggedOutside:!1,keepNonExistentRowsSelected:!1,loading:!1,logger:console,logLevel:"error",pageSizeOptions:[25,50,100],pagination:!1,paginationMode:"client",resizeThrottleMs:60,rowBufferPx:150,rowHeight:52,rows:[],rowSelection:!0,rowSpacingType:"margin",rowSpanning:!1,showCellVerticalBorder:!1,showColumnVerticalBorder:!1,showToolbar:!1,sortingMode:"client",sortingOrder:["asc","desc",null],throttleRowsMs:0,virtualizeColumnsWithAutoRowHeight:!1},bv={width:0,height:0},fv={isReady:!1,root:bv,viewportOuterSize:bv,viewportInnerSize:bv,contentSize:bv,minimumSize:bv,hasScrollX:!1,hasScrollY:!1,scrollbarSize:0,headerHeight:0,groupHeaderHeight:0,headerFilterHeight:0,rowWidth:0,rowHeight:0,columnsTotalWidth:0,leftPinnedWidth:0,rightPinnedWidth:0,headersTotalHeight:0,topContainerHeight:0,bottomContainerHeight:0},yv=(e,t,n)=>Sg({},e,{dimensions:Sg({},fv,Sv(t,n,vC(n),YC(n)))}),vv=mC(NC,MC,((e,t)=>{const n=e.length;return 0===n?0:vb(t[n-1]+e[n-1].computedWidth,1)}));function Zv(e,t){const n=jf(e,"useResizeContainer"),r=o.useRef(!1),l=o.useRef(bv),a=Mu(e,YC),i=Mu(e,vC),g=Mu(e,vv),s=o.useRef(!0),{rowHeight:c,headerHeight:d,groupHeaderHeight:I,headerFilterHeight:u,headersTotalHeight:C,leftPinnedWidth:p,rightPinnedWidth:A}=Sv(t,e,i,a),m=o.useCallback((()=>tp(e)),[e]),h=o.useCallback((t=>{e.current.setState((e=>Sg({},e,{dimensions:t}))),e.current.rootElementRef.current&&Gv(e.current.rootElementRef.current,tp(e))}),[e]),b=o.useCallback((()=>{const n=tp(e);if(!n.isReady)return 0;const o=Qh(e);if(t.getRowHeight){const t=nb(e),n=t.lastRowIndex-t.firstRowIndex;return Math.min(n-1,o.rows.length)}const r=Math.floor(n.viewportInnerSize.height/c);return Math.min(r,o.rows.length)}),[e,t.getRowHeight,c]),f=o.useCallback((()=>{var n,o;if(s.current)return;const r=function(e,t){if(void 0!==t)return t;if(null===e)return 0;const n=Bv.get(e);if(void 0!==n)return n;const o=Sy(e).createElement("div");o.style.width="99px",o.style.height="99px",o.style.position="absolute",o.style.overflow="scroll",o.className="scrollDiv",e.appendChild(o);const r=o.offsetWidth-o.clientWidth;return e.removeChild(o),Bv.set(e,r),r}(e.current.mainElementRef.current,t.scrollbarSize),a=_h(e),i=C+a.pinnedTopRowsTotalHeight,m=a.pinnedBottomRowsTotalHeight,b={width:g,height:vb(a.currentPageTotalHeight,1)};let f,y,v=!1,Z=!1;if(t.autoHeight)Z=!1,v=Math.round(g)>Math.round(l.current.width),f={width:l.current.width,height:i+m+b.height},y={width:Math.max(0,f.width-(Z?r:0)),height:Math.max(0,f.height-(v?r:0))};else{f={width:l.current.width,height:l.current.height},y={width:Math.max(0,f.width),height:Math.max(0,f.height-i-m)};const e=b,t=y,n=e.width>t.width,o=e.height>t.height;(n||o)&&(Z=o,v=e.width+(Z?r:0)>t.width,v&&(Z=e.height+r>t.height)),Z&&(y.width-=r),v&&(y.height-=r)}const G=Math.max(f.width,g+(Z?r:0)),S={width:g,height:i+b.height+m},B={isReady:!0,root:l.current,viewportOuterSize:f,viewportInnerSize:y,contentSize:b,minimumSize:S,hasScrollX:v,hasScrollY:Z,scrollbarSize:r,headerHeight:d,groupHeaderHeight:I,headerFilterHeight:u,rowWidth:G,rowHeight:c,columnsTotalWidth:g,leftPinnedWidth:p,rightPinnedWidth:A,headersTotalHeight:C,topContainerHeight:i,bottomContainerHeight:m},w=e.current.state.dimensions;By(w,B)||(h(B),function(e,t){return e.width===t.width&&e.height===t.height}(B.viewportInnerSize,w.viewportInnerSize)||e.current.publishEvent("viewportInnerSizeChange",B.viewportInnerSize),null===(n=(o=e.current).updateRenderContext)||void 0===n||n.call(o))}),[e,h,t.scrollbarSize,t.autoHeight,c,d,I,u,g,C,p,A]),y=Cp(f),v=o.useMemo((()=>t.resizeThrottleMs>0?function(e){let t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;const r=()=>{t=void 0,e(...n)};function l(){for(var e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];n=l,void 0===t&&(t=setTimeout(r,o))}return l.clear=()=>{clearTimeout(t),t=void 0},l}((()=>{y(),e.current.publishEvent("debouncedResize",l.current)}),t.resizeThrottleMs):void 0),[e,t.resizeThrottleMs,y]);o.useEffect((()=>null===v||void 0===v?void 0:v.clear),[v]);const Z={getRootDimensions:m},G={updateDimensions:f,getViewportPageSize:b};up(f,[f]),rb(e,Z,"public"),rb(e,G,"private");const S=o.useCallback((t=>{Gv(t,tp(e))}),[e]),B=o.useCallback((e=>{if(l.current=e,0!==e.height||r.current||t.autoHeight||Zb||(n.error(["The parent DOM element of the Data Grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),r.current=!0),0!==e.width||r.current||Zb||(n.error(["The parent DOM element of the Data Grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),r.current=!0),s.current||!v)return s.current=!1,void f();v()}),[f,t.autoHeight,v,n]);vp(e,"rootMount",S),vp(e,"resize",B),vp(e,"debouncedResize",t.onResize)}function Gv(e,t){const n=(t,n)=>e.style.setProperty(t,n);n("--DataGrid-hasScrollX","".concat(Number(t.hasScrollX))),n("--DataGrid-hasScrollY","".concat(Number(t.hasScrollY))),n("--DataGrid-scrollbarSize","".concat(t.scrollbarSize,"px")),n("--DataGrid-rowWidth","".concat(t.rowWidth,"px")),n("--DataGrid-columnsTotalWidth","".concat(t.columnsTotalWidth,"px")),n("--DataGrid-leftPinnedWidth","".concat(t.leftPinnedWidth,"px")),n("--DataGrid-rightPinnedWidth","".concat(t.rightPinnedWidth,"px")),n("--DataGrid-headerHeight","".concat(t.headerHeight,"px")),n("--DataGrid-headersTotalHeight","".concat(t.headersTotalHeight,"px")),n("--DataGrid-topContainerHeight","".concat(t.topContainerHeight,"px")),n("--DataGrid-bottomContainerHeight","".concat(t.bottomContainerHeight,"px")),n("--height","".concat(t.rowHeight,"px"))}function Sv(e,t,n,o){var r,l;const a=om(e.rowHeight,hv.rowHeight);return{rowHeight:Math.floor(a*n),headerHeight:Math.floor(e.columnHeaderHeight*n),groupHeaderHeight:Math.floor((null!==(r=e.columnGroupHeaderHeight)&&void 0!==r?r:e.columnHeaderHeight)*n),headerFilterHeight:Math.floor((null!==(l=e.headerFilterHeight)&&void 0!==l?l:e.columnHeaderHeight)*n),columnsTotalWidth:vv(t),headersTotalHeight:ah(t,e),leftPinnedWidth:o.left.reduce(((e,t)=>e+t.computedWidth),0),rightPinnedWidth:o.right.reduce(((e,t)=>e+t.computedWidth),0)}}const Bv=new WeakMap;const wv="undefined"!==typeof globalThis.ResizeObserver?globalThis.ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},Rv=(e,t,n)=>{n.current.caches.rowsMeta={heights:new Map};const o=op(n),r=Jp(n),l=Fh(n),a=Math.min(l.enabled?l.paginationModel.pageSize:r,r);return Sg({},e,{rowsMeta:{currentPageTotalHeight:a*o,positions:Array.from({length:a},((e,t)=>t*o)),pinnedTopRowsTotalHeight:0,pinnedBottomRowsTotalHeight:0}})};function Wv(e){const{apiRef:t,lookup:n,columnIndex:o,rowId:r,minFirstColumnIndex:l,maxLastColumnIndex:a,columns:i}=e,g=i.length,s=i[o],c=t.current.getRow(r),d=t.current.getRowValue(c,s),I="function"===typeof s.colSpan?s.colSpan(d,c,s,t):s.colSpan;if(!I||1===I)return kv(n,r,o,{spannedByColSpan:!1,cellProps:{colSpan:1,width:s.computedWidth}}),{colSpan:1};let u=s.computedWidth;for(let C=1;C<I;C+=1){const e=o+C;if(e>=l&&e<a){u+=i[e].computedWidth,kv(n,r,o+C,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(o+I,g-1),leftVisibleCellIndex:o})}kv(n,r,o,{spannedByColSpan:!1,cellProps:{colSpan:I,width:u}})}return{colSpan:I}}function kv(e,t,n,o){e[t]||(e[t]={}),e[t][n]=o}function Vv(e){return void 0!==e.field}const Xv=(e,t,n)=>{if(Vv(e)){if(void 0!==n[e.field])throw new Error(["MUI X: columnGroupingModel contains duplicated field","column field ".concat(e.field," occurs two times in the grouping model:"),"- ".concat(n[e.field].join(" > ")),"- ".concat(t.join(" > "))].join("\n"));return void(n[e.field]=t)}const{groupId:o,children:r}=e;r.forEach((e=>{Xv(e,[...t,o],n)}))},xv=e=>{if(!e)return{};const t={};return e.forEach((e=>{Xv(e,[],t)})),t},Jv=(e,t,n)=>{const o=e=>{var n;return null!==(n=t[e])&&void 0!==n?n:[]},r=[],l=Math.max(...e.map((e=>o(e).length))),a=(e,t,n)=>By(o(e).slice(0,n+1),o(t).slice(0,n+1));for(let i=0;i<l;i+=1){const t=e.reduce(((e,t)=>{var r;const l=null!==(r=o(t)[i])&&void 0!==r?r:null;if(0===e.length)return[{columnFields:[t],groupId:l}];const g=e[e.length-1],s=g.columnFields[g.columnFields.length-1];return g.groupId!==l||!a(s,t,i)||(c=s,d=t,null!==n&&void 0!==n&&n.left&&n.left.includes(c)&&!n.left.includes(d)||null!==n&&void 0!==n&&n.right&&!n.right.includes(c)&&n.right.includes(d))?[...e,{columnFields:[t],groupId:l}]:[...e.slice(0,e.length-1),{columnFields:[...g.columnFields,t],groupId:l}];var c,d}),[]);r.push(t)}return r},Nv=["groupId","children"],Hv=e=>{let t={};return e.forEach((e=>{if(Vv(e))return;const{groupId:n,children:o}=e,r=Wg(e,Nv);if(!n)throw new Error("MUI X: An element of the columnGroupingModel does not have either `field` or `groupId`.");const l=Sg({},r,{groupId:n}),a=Hv(o);if(void 0!==a[n]||void 0!==t[n])throw new Error("MUI X: The groupId ".concat(n," is used multiple times in the columnGroupingModel."));t=Sg({},t,a,{[n]:l})})),Sg({},t)},Fv=(e,t,n)=>{var o,r,l;if(!t.columnGroupingModel)return e;const a=kC(n),i=HC(n),g=Hv(null!==(o=t.columnGroupingModel)&&void 0!==o?o:[]),s=xv(null!==(r=t.columnGroupingModel)&&void 0!==r?r:[]),c=Jv(a,s,null!==(l=n.current.state.pinnedColumns)&&void 0!==l?l:{}),d=0===i.length?0:Math.max(...i.map((e=>{var t,n;return null!==(t=null===(n=s[e])||void 0===n?void 0:n.length)&&void 0!==t?t:0})));return Sg({},e,{columnGrouping:{lookup:g,unwrappedGroupingModel:s,headerStructure:c,maxDepth:d}})},Yv={includeHeaders:!0,includeOutliers:!1,outliersFactor:1.5,expand:!1,disableColumnVirtualization:!0};function Kv(e,t){if(void 0!==t&&e.changedTouches){for(let n=0;n<e.changedTouches.length;n+=1){const o=e.changedTouches[n];if(o.identifier===t)return{x:o.clientX,y:o.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Mv(e,t,n,o){let r=e;return r+="Right"===o?t-n.left:n.right-t,r}function Lv(e){e.preventDefault(),e.stopImmediatePropagation()}function Ev(e){const t=o.useRef(void 0),n=()=>eb(e),r=Mu(e,n);o.useEffect((()=>{t.current&&!1===r&&(t.current.resolve(),t.current=void 0)}));return()=>{if(!t.current){if(!1===n())return Promise.resolve();t.current=function(){let e,t;const n=new Promise(((n,o)=>{e=n,t=o}));return n.resolve=e,n.reject=t,n}()}return t.current}}function zv(e,t,n){const o={},r=e.current.rootElementRef.current;return r.classList.add(Gu.autosizing),n.forEach((n=>{const r=function(e,t){const n=e.virtualScrollerRef.current;return Array.from(n.querySelectorAll(':scope > div > div > div > [data-field="'.concat(Hy(t),'"][role="gridcell"]')))}(e.current,n.field),l=r.map((e=>{var t;return null!==(t=e.getBoundingClientRect().width)&&void 0!==t?t:0})),a=t.includeOutliers?l:function(e,t){if(e.length<4)return e;const n=e.slice();n.sort(((e,t)=>e-t));const o=n[Math.floor(.25*n.length)],r=n[Math.floor(.75*n.length)-1],l=r-o,a=l<5?5:l*t;return n.filter((e=>e>o-a&&e<r+a))}(l,t.outliersFactor);if(t.includeHeaders){const t=(s=e.current,c=n.field,s.columnHeadersContainerRef.current.querySelector(':scope > div > [data-field="'.concat(Hy(c),'"][role="columnheader"]')));if(t){var i,g;const e=t.querySelector(".".concat(Gu.columnHeaderTitle)),n=t.querySelector(".".concat(Gu.columnHeaderTitleContainerContent)),o=t.querySelector(".".concat(Gu.iconButtonContainer)),r=t.querySelector(".".concat(Gu.menuIcon)),l=null!==e&&void 0!==e?e:n,s=window.getComputedStyle(t,null),c=parseInt(s.paddingLeft,10)+parseInt(s.paddingRight,10),d=l.scrollWidth+1+c+(null!==(i=null===o||void 0===o?void 0:o.clientWidth)&&void 0!==i?i:0)+(null!==(g=null===r||void 0===r?void 0:r.clientWidth)&&void 0!==g?g:0);a.push(d)}}var s,c;const d=n.minWidth!==-1/0&&void 0!==n.minWidth,I=n.maxWidth!==1/0&&void 0!==n.maxWidth,u=d?n.minWidth:0,C=I?n.maxWidth:1/0,p=0===a.length?0:Math.max(...a);o[n.field]=cA(p,u,C)})),r.classList.remove(Gu.autosizing),o}const jv=e=>Sg({},e,{columnResize:{resizingColumnField:""}});function Dv(){return{colDef:void 0,initialColWidth:0,initialTotalWidth:0,previousMouseClickEvent:void 0,columnHeaderElement:void 0,headerFilterElement:void 0,groupHeaderElements:[],cellElements:[],leftPinnedCellsAfter:[],rightPinnedCellsBefore:[],fillerLeft:void 0,fillerRight:void 0,leftPinnedHeadersAfter:[],rightPinnedHeadersBefore:[]}}const Tv=(e,t)=>{const n=Ym(),r=jf(e,"useGridColumnResize"),l=Xu(Dv).current,a=o.useRef(null),i=o.useRef(null),g=wp(),s=o.useRef(void 0),c=t=>{r.debug("Updating width to ".concat(t," for col ").concat(l.colDef.field));const n=l.columnHeaderElement.offsetWidth,o=t-n,a=t-l.initialColWidth;if(a>0){var i;const t=l.initialTotalWidth+a;null===(i=e.current.rootElementRef)||void 0===i||null===(i=i.current)||void 0===i||i.style.setProperty("--DataGrid-rowWidth","".concat(t,"px"))}l.colDef.computedWidth=t,l.colDef.width=t,l.colDef.flex=0,l.columnHeaderElement.style.width="".concat(t,"px");const g=l.headerFilterElement;g&&(g.style.width="".concat(t,"px")),l.groupHeaderElements.forEach((e=>{const n=e;let r;r="1"===n.getAttribute("aria-colspan")?"".concat(t,"px"):"".concat(n.offsetWidth+o,"px"),n.style.width=r})),l.cellElements.forEach((e=>{const n=e;let r;r="1"===n.getAttribute("aria-colspan")?"".concat(t,"px"):"".concat(n.offsetWidth+o,"px"),n.style.setProperty("--width",r)}));const s=e.current.unstable_applyPipeProcessors("isColumnPinned",!1,l.colDef.field);s===BC.LEFT&&(Pv(l.fillerLeft,"width",o),l.leftPinnedCellsAfter.forEach((e=>{Pv(e,"left",o)})),l.leftPinnedHeadersAfter.forEach((e=>{Pv(e,"left",o)}))),s===BC.RIGHT&&(Pv(l.fillerRight,"width",o),l.rightPinnedCellsBefore.forEach((e=>{Pv(e,"right",o)})),l.rightPinnedHeadersBefore.forEach((e=>{Pv(e,"right",o)})))},d=t=>{if(h(),l.previousMouseClickEvent){const n=l.previousMouseClickEvent,o=n.timeStamp,r=n.clientX,a=n.clientY;if(t.timeStamp-o<300&&t.clientX===r&&t.clientY===a)return l.previousMouseClickEvent=void 0,void e.current.publishEvent("columnResizeStop",null,t)}if(l.colDef){e.current.setColumnWidth(l.colDef.field,l.colDef.width),r.debug("Updating col ".concat(l.colDef.field," with new width: ").concat(l.colDef.width));const t=WC(e);l.groupHeaderElements.forEach((e=>{const n=e,o=e.getAttribute("data-fields").slice(2,-2).split("-|-").reduce(((e,n)=>!1!==t.columnVisibilityModel[n]?e+t.lookup[n].computedWidth:e),0),r="".concat(o,"px");n.style.width=r}))}g.start(0,(()=>{e.current.publishEvent("columnResizeStop",null,t)}))},I=(t,o,r)=>{var g;const s=e.current.rootElementRef.current;var c,d;l.initialColWidth=t.computedWidth,l.initialTotalWidth=e.current.getRootDimensions().rowWidth,l.colDef=t,l.columnHeaderElement=(c=e.current.columnHeadersContainerRef.current,d=t.field,c.querySelector('[data-field="'.concat(Hy(d),'"]')));const I=s.querySelector(".".concat(Gu.headerFilterRow,' [data-field="').concat(Hy(t.field),'"]'));I&&(l.headerFilterElement=I),l.groupHeaderElements=function(e,t){var n;return Array.from(null!==(n=e.querySelectorAll('[data-fields*="|-'.concat(Hy(t),'-|"]')))&&void 0!==n?n:[])}(null===(g=e.current.columnHeadersContainerRef)||void 0===g?void 0:g.current,t.field),l.cellElements=function(e,t){var n;if(!Ny(e,Gu.root))throw new Error("MUI X: The root element is not found.");const o=e.getAttribute("aria-colindex");if(!o)return[];const r=Number(o)-1,l=[];return null!==(n=t.virtualScrollerRef)&&void 0!==n&&n.current?(Ey(t).forEach((e=>{const n=e.getAttribute("data-id");if(!n)return;let o=r;const a=t.unstable_getCellColSpanInfo(n,r);a&&a.spannedByColSpan&&(o=a.leftVisibleCellIndex);const i=e.querySelector('[data-colindex="'.concat(o,'"]'));i&&l.push(i)})),l):[]}(l.columnHeaderElement,e.current),l.fillerLeft=Ky(e.current,n?"filler--pinnedRight":"filler--pinnedLeft"),l.fillerRight=Ky(e.current,n?"filler--pinnedLeft":"filler--pinnedRight");const u=e.current.unstable_applyPipeProcessors("isColumnPinned",!1,l.colDef.field);l.leftPinnedCellsAfter=u!==BC.LEFT?[]:function(e,t,n){const o=zy(t);return My({api:e,colIndex:o,position:n?"right":"left",filterFn:e=>n?e<o:e>o})}(e.current,l.columnHeaderElement,n),l.rightPinnedCellsBefore=u!==BC.RIGHT?[]:function(e,t,n){const o=zy(t);return My({api:e,colIndex:o,position:n?"left":"right",filterFn:e=>n?e>o:e<o})}(e.current,l.columnHeaderElement,n),l.leftPinnedHeadersAfter=u!==BC.LEFT?[]:function(e,t,n){const o=zy(t);return Ly({api:e,position:n?"right":"left",colIndex:o,filterFn:e=>n?e<o:e>o})}(e.current,l.columnHeaderElement,n),l.rightPinnedHeadersBefore=u!==BC.RIGHT?[]:function(e,t,n){const o=zy(t);return Ly({api:e,position:n?"left":"right",colIndex:o,filterFn:(e,t)=>!t.classList.contains(Gu["columnHeader--last"])&&(n?e>o:e<o)})}(e.current,l.columnHeaderElement,n),i.current=function(e,t){const n=e.classList.contains(Gu["columnSeparator--sideRight"])?"Right":"Left";return t?function(e){return"Right"===e?"Left":"Right"}(n):n}(o,n),a.current=function(e,t,n){return"Left"===n?e-t.left:t.right-e}(r,l.columnHeaderElement.getBoundingClientRect(),i.current)},u=Cp(d),C=Cp((t=>{if(0===t.buttons)return void u(t);let n=Mv(a.current,t.clientX,l.columnHeaderElement.getBoundingClientRect(),i.current);n=cA(n,l.colDef.minWidth,l.colDef.maxWidth),c(n);const o={element:l.columnHeaderElement,colDef:l.colDef,width:n};e.current.publishEvent("columnResize",o,t)})),p=Cp((e=>{Kv(e,s.current)&&d(e)})),A=Cp((t=>{const n=Kv(t,s.current);if(!n)return;if("mousemove"===t.type&&0===t.buttons)return void p(t);let o=Mv(a.current,n.x,l.columnHeaderElement.getBoundingClientRect(),i.current);o=cA(o,l.colDef.minWidth,l.colDef.maxWidth),c(o);const r={element:l.columnHeaderElement,colDef:l.colDef,width:o};e.current.publishEvent("columnResize",r,t)})),m=Cp((t=>{const n=Ny(t.target,Gu["columnSeparator--resizable"]);if(!n)return;const o=t.changedTouches[0];null!=o&&(s.current=o.identifier);const l=Ny(t.target,Gu.columnHeader),a=l.getAttribute("data-field");const i=e.current.getColumn(a);r.debug("Start Resize on col ".concat(i.field)),e.current.publishEvent("columnResizeStart",{field:a},t),I(i,n,o.clientX);const g=Sy(t.currentTarget);g.addEventListener("touchmove",A),g.addEventListener("touchend",p)})),h=o.useCallback((()=>{const t=Sy(e.current.rootElementRef.current);t.body.style.removeProperty("cursor"),t.removeEventListener("mousemove",C),t.removeEventListener("mouseup",u),t.removeEventListener("touchmove",A),t.removeEventListener("touchend",p),setTimeout((()=>{t.removeEventListener("click",Lv,!0)}),100),l.columnHeaderElement&&(l.columnHeaderElement.style.pointerEvents="unset")}),[e,l,C,u,A,p]),b=o.useCallback((t=>{let{field:n}=t;e.current.setState((e=>Sg({},e,{columnResize:Sg({},e.columnResize,{resizingColumnField:n})})))}),[e]),f=o.useCallback((()=>{e.current.setState((e=>Sg({},e,{columnResize:Sg({},e.columnResize,{resizingColumnField:""})})))}),[e]),y=Cp(((t,n)=>{let{colDef:o}=t;if(0!==n.button)return;if(!n.currentTarget.classList.contains(Gu["columnSeparator--resizable"]))return;n.preventDefault(),r.debug("Start Resize on col ".concat(o.field)),e.current.publishEvent("columnResizeStart",{field:o.field},n),I(o,n.currentTarget,n.clientX);const a=Sy(e.current.rootElementRef.current);a.body.style.cursor="col-resize",l.previousMouseClickEvent=n.nativeEvent,a.addEventListener("mousemove",C),a.addEventListener("mouseup",u),a.addEventListener("click",Lv,!0)})),v=Cp(((n,o)=>{if(t.disableAutosize)return;if(0!==o.button)return;const r=e.current.state.columns.lookup[n.field];!1!==r.resizable&&e.current.autosizeColumns(Sg({},t.autosizeOptions,{disableColumnVirtualization:!1,columns:[r.field]}))})),Z=Ev(e),G=o.useRef(!1),S=o.useCallback((async n=>{var o,r;if(!(null===(o=e.current.rootElementRef)||void 0===o?void 0:o.current))return;if(G.current)return;G.current=!0;const l=WC(e),a=Sg({},Yv,n,{columns:null!==(r=null===n||void 0===n?void 0:n.columns)&&void 0!==r?r:l.orderedFields});a.columns=a.columns.filter((e=>!1!==l.columnVisibilityModel[e]));const i=a.columns.map((t=>e.current.state.columns.lookup[t]));try{!t.disableVirtualization&&a.disableColumnVirtualization&&(e.current.unstable_setColumnVirtualization(!1),await Z());const n=zv(e,a,i),o=i.map((e=>Sg({},e,{width:n[e.field],computedWidth:n[e.field],flex:0})));if(a.expand){const t=l.orderedFields.map((e=>l.lookup[e])).filter((e=>!1!==l.columnVisibilityModel[e.field])),r=t.reduce(((e,t)=>{var o,r;return e+(null!==(o=null!==(r=n[t.field])&&void 0!==r?r:t.computedWidth)&&void 0!==o?o:t.width)}),0),a=e.current.getRootDimensions(),i=a.viewportInnerSize.width-r;if(i>0){const e=i/(o.length||1);o.forEach((t=>{t.width+=e,t.computedWidth+=e}))}}e.current.updateColumns(o),o.forEach(((t,n)=>{if(t.width!==i[n].width){const n=t.width;e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(t.field),colDef:t,width:n})}}))}finally{t.disableVirtualization||e.current.unstable_setColumnVirtualization(!0),G.current=!1}}),[e,Z,t.disableVirtualization]);o.useEffect((()=>h),[h]),Sp((()=>{t.autosizeOnMount&&Promise.resolve().then((()=>{e.current.autosizeColumns(t.autosizeOptions)}))})),Df(e,(()=>{var t;return null===(t=e.current.columnHeadersContainerRef)||void 0===t?void 0:t.current}),"touchstart",m,{passive:!0}),rb(e,{autosizeColumns:S},"public"),fp(e,"columnResizeStop",f),fp(e,"columnResizeStart",b),fp(e,"columnSeparatorMouseDown",y),fp(e,"columnSeparatorDoubleClick",v),vp(e,"columnResize",t.onColumnResize),vp(e,"columnWidthChange",t.onColumnWidthChange)};function Pv(e,t,n){e&&(e.style[t]="".concat(parseInt(e.style[t],10)+n,"px"))}function Uv(e){return 0!==e.firstRowIndex||0!==e.lastRowIndex}const Qv=(e,t,n)=>{var o;if(!e)return null;let r=e[t.field];const l=null!==(o=t.rowSpanValueGetter)&&void 0!==o?o:t.valueGetter;return l&&(r=l(r,e,t,n)),r},Ov={spannedCells:{},hiddenCells:{},hiddenCellOriginMap:{}},qv={firstRowIndex:0,lastRowIndex:0},_v=new Set([qf,"__reorder__",sm]),$v=(e,t,n,o,r,l,a)=>{const i=l?{}:Sg({},e.current.state.rowSpanning.spannedCells),g=l?{}:Sg({},e.current.state.rowSpanning.hiddenCells),s=l?{}:Sg({},e.current.state.rowSpanning.hiddenCellOriginMap);return l&&(a=qv),t.forEach((t=>{if(!_v.has(t.field)){for(let a=r.firstRowIndex;a<r.lastRowIndex;a+=1){var l;const c=n[a];if(null!==(l=g[c.id])&&void 0!==l&&l[t.field])continue;const d=Qv(c.model,t,e);if(null==d)continue;let I=c.id,u=a,C=0;const p=[];if(a===r.firstRowIndex){let r=a-1,l=n[r];for(;r>=o.firstRowIndex&&l&&Qv(l.model,t,e)===d;){const e=n[r+1];g[e.id]?g[e.id][t.field]=!0:g[e.id]={[t.field]:!0},p.push(a),C+=1,I=l.id,u=r,r-=1,l=n[r]}}p.forEach((e=>{s[e]?s[e][t.field]=u:s[e]={[t.field]:u}}));let A=a+1;for(;A<=o.lastRowIndex&&n[A]&&Qv(n[A].model,t,e)===d;){const e=n[A];g[e.id]?g[e.id][t.field]=!0:g[e.id]={[t.field]:!0},s[A]?s[A][t.field]=u:s[A]={[t.field]:u},A+=1,C+=1}C>0&&(i[I]?i[I][t.field]=C+1:i[I]={[t.field]:C+1})}a={firstRowIndex:Math.min(a.firstRowIndex,r.firstRowIndex),lastRowIndex:Math.max(a.lastRowIndex,r.lastRowIndex)}}})),{spannedCells:i,hiddenCells:g,hiddenCellOriginMap:s,processedRange:a}},eZ=(e,t)=>{const n=jp(t).length;if(e.pagination){const e=zh(t);let o=20;return e>0&&(o=e-1),{firstRowIndex:0,lastRowIndex:Math.min(o,n)}}return{firstRowIndex:0,lastRowIndex:Math.min(20,n)}},tZ=(e,t,n)=>{var o;if(!t.rowSpanning)return Sg({},e,{rowSpanning:Ov});const r=e.rows.dataRowIds||[],l=e.columns.orderedFields||[],a=e.rows.dataRowIdToModelLookup,i=e.columns.lookup,g=Boolean(e.filter.filterModel.items.length)||Boolean(null===(o=e.filter.filterModel.quickFilterValues)||void 0===o?void 0:o.length);if(!r.length||!l.length||!a||!i||g)return Sg({},e,{rowSpanning:Ov});const s=eZ(t,n),c=r.map((e=>({id:e,model:a[e]}))),d=l.map((e=>i[e])),{spannedCells:I,hiddenCells:u,hiddenCellOriginMap:C}=$v(n,d,c,s,s,!0,qv);return Sg({},e,{rowSpanning:{spannedCells:I,hiddenCells:u,hiddenCellOriginMap:C}})};new Set;const nZ=(e,t,n)=>Sg({},e,{listViewColumn:t.listViewColumn?Sg({},t.listViewColumn,{computedWidth:oZ(n)}):void 0});function oZ(e){return tp(e).viewportInnerSize.width}function rZ(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function o(){for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];clearTimeout(t),t=setTimeout((()=>{e.apply(this,r)}),n)}return o.clear=()=>{clearTimeout(t)},o}const lZ=mC(bh,Ah,Kh,((e,t,n)=>({groupKeys:[],paginationModel:n,sortModel:t,filterModel:e,start:n.page*n.pageSize,end:n.page*n.pageSize+n.pageSize-1})));let aZ=function(e){return e.Default="set-new-rows",e.LazyLoading="replace-row-range",e}({});class iZ{constructor(e){this.chunkSize=void 0,this.getCacheKeys=e=>{if(this.chunkSize<1||"number"!==typeof e.start)return[e];const t=[];for(let n=e.start;n<e.end;n+=this.chunkSize){const o=Math.min(n+this.chunkSize-1,e.end);t.push(Sg({},e,{start:n,end:o}))}return t},this.splitResponse=(e,t)=>{const n=this.getCacheKeys(e),o=new Map;return n.forEach((n=>{var r,l,a,i;const g=n.end===e.end,s=Sg({},t,{pageInfo:Sg({},t.pageInfo,{hasNextPage:void 0!==(null===(r=t.pageInfo)||void 0===r?void 0:r.hasNextPage)&&!g||(null===(l=t.pageInfo)||void 0===l?void 0:l.hasNextPage),nextCursor:void 0===(null===(a=t.pageInfo)||void 0===a?void 0:a.nextCursor)||g?null===(i=t.pageInfo)||void 0===i?void 0:i.nextCursor:t.rows[n.end+1].id}),rows:"number"!==typeof n.start||"number"!==typeof e.start?t.rows:t.rows.slice(n.start-e.start,n.end-e.start+1)});o.set(n,s)})),o},this.chunkSize=e}}function gZ(e){return JSON.stringify([e.filterModel,e.sortModel,e.start,e.end])}iZ.mergeResponses=e=>1===e.length?e[0]:e.reduce(((e,t)=>({rows:[...e.rows,...t.rows],rowCount:t.rowCount,pageInfo:t.pageInfo})),{rows:[],rowCount:0,pageInfo:{}});class sZ{constructor(e){let{ttl:t=3e5,getKey:n=gZ}=e;this.cache=void 0,this.ttl=void 0,this.getKey=void 0,this.cache={},this.ttl=t,this.getKey=n}set(e,t){const n=this.getKey(e),o=Date.now()+this.ttl;this.cache[n]={value:t,expiry:o}}get(e){const t=this.getKey(e),n=this.cache[t];if(n){if(!(Date.now()>n.expiry))return n.value;delete this.cache[t]}}clear(){this.cache={}}}class cZ extends Error{constructor(e){super(e.message),this.params=void 0,this.cause=void 0,this.name="GridGetRowsError",this.params=e.params,this.cause=e.cause}}class dZ extends Error{constructor(e){super(e.message),this.params=void 0,this.cause=void 0,this.name="GridUpdateRowError",this.params=e.params,this.cause=e.cause}}const IZ={clear:()=>{},get:()=>{},set:()=>{}};function uZ(e){return null===e?IZ:null!==e&&void 0!==e?e:new sZ(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const CZ=(e,t)=>{const{api:n,strategyProcessor:r,events:l,setStrategyAvailability:a}=function(e,t){var n,r;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=o.useCallback((()=>{e.current.setStrategyAvailability(Yf.DataSource,aZ.Default,t.dataSource?()=>!0:()=>!1)}),[e,t.dataSource]),[i,g]=o.useState(!1),s=Mu(e,Kh),c=o.useRef(0),d=t.onDataSourceError,I=Xu((()=>{const e=t.pageSizeOptions.map((e=>"number"===typeof e?e:e.value)).sort(((e,t)=>e-t)),n=Math.min(s.pageSize,e[0]);return new iZ(n)})).current,[u,C]=o.useState((()=>uZ(t.dataSourceCache,l.cacheOptions))),p=o.useCallback((async(n,o)=>{var r,a;const g=null===(r=t.dataSource)||void 0===r?void 0:r.getRows;if(!g)return;var s;if(n&&n!==TA&&"DataGrid"!==t.signature)return void(null===(s=l.fetchRowChildren)||void 0===s||s.call(l,[n]));null===(a=l.clearDataSourceState)||void 0===a||a.call(l);const C=Sg({},lZ(e),e.current.unstable_applyPipeProcessors("getRowsParams",{}),o),p=I.getCacheKeys(C).map((e=>u.get(e)));if(p.every((e=>void 0!==e)))return void e.current.applyStrategyProcessor("dataSourceRowsUpdate",{response:iZ.mergeResponses(p),fetchParams:C});(i||0===e.current.getRowsCount())&&e.current.setLoading(!0);const A=c.current+1;c.current=A;try{const t=await g(C);I.splitResponse(C,t).forEach(((e,t)=>u.set(t,e))),c.current===A&&e.current.applyStrategyProcessor("dataSourceRowsUpdate",{response:t,fetchParams:C})}catch(m){c.current===A&&(e.current.applyStrategyProcessor("dataSourceRowsUpdate",{error:m,fetchParams:C}),"function"===typeof d&&d(new cZ({message:null===m||void 0===m?void 0:m.message,params:C,cause:m})))}finally{i&&c.current===A&&e.current.setLoading(!1)}}),[I,u,e,i,null===(n=t.dataSource)||void 0===n?void 0:n.getRows,d,l,t.signature]),A=o.useCallback((()=>{g(e.current.getActiveStrategy(Yf.DataSource)===aZ.Default)}),[e]),m=o.useCallback((t=>{if("error"in t)return void e.current.setRows([]);const{response:n}=t;void 0!==n.rowCount&&e.current.setRowCount(n.rowCount),e.current.setRows(n.rows),e.current.unstable_applyPipeProcessors("processDataSourceRows",{params:t.fetchParams,response:n},!0)}),[e]),h=null===(r=t.dataSource)||void 0===r?void 0:r.updateRow,b=l.handleEditRow,f=o.useCallback((async t=>{if(h)try{const n=await h(t);return"function"===typeof b?(b(t,n),n):(e.current.updateNestedRows([n],[]),n&&!By(n,t.previousRow)&&e.current.dataSource.cache.clear(),n)}catch(n){throw"function"===typeof d&&d(new dZ({message:null===n||void 0===n?void 0:n.message,params:t,cause:n})),n}}),[e,h,d,b]),y={dataSource:{fetchRows:p,cache:u,editRow:f}},v=o.useMemo((()=>rZ(p,0)),[p]),Z=o.useRef(!0);return o.useEffect((()=>{if(Z.current)return void(Z.current=!1);if(void 0===t.dataSourceCache)return;const e=uZ(t.dataSourceCache,l.cacheOptions);C((t=>t!==e?e:t))}),[t.dataSourceCache,l.cacheOptions]),o.useEffect((()=>{t.dataSource&&(e.current.dataSource.cache.clear(),e.current.dataSource.fetchRows())}),[e,t.dataSource]),{api:{public:y},debouncedFetchRows:v,strategyProcessor:{strategyName:aZ.Default,group:"dataSourceRowsUpdate",processor:m},setStrategyAvailability:a,cacheChunkManager:I,cache:u,events:{strategyAvailabilityChange:A,sortModelChange:uA(i,(()=>v())),filterModelChange:uA(i,(()=>v())),paginationModelChange:uA(i,(()=>v()))}}}(e,t);rb(e,n.public,"public"),Wy(e,r.strategyName,r.group,r.processor),Object.entries(l).forEach((t=>{let[n,o]=t;fp(e,n,o)})),o.useEffect((()=>{a()}),[a])},pZ=(e,t)=>{Ef(e,t),pv(e,t),(e=>{Wy(e,Kf,"rowTreeCreation",cv)})(e),zf(Lf,e,t),zf(Cv,e,t),zf(uy,e,t),zf(sv,e,t),zf(Uy,e,t),zf(iv,e,t),zf(Jy,e,t),zf(Av,e,t),zf(Oy,e,t),zf(ky,e,t),zf(tZ,e,t),zf(py,e,t),zf(jv,e,t),zf(sy,e,t),zf(Fv,e,t),zf(ab,e,t),zf(yv,e,t),zf(Rv,e,t),zf(nZ,e,t),Py(e,t),((e,t)=>{var n,r,l,a,i,g,s,c,d;const I=jf(e,"useGridSelection"),u=o.useCallback((e=>function(){t.rowSelection&&e(...arguments)}),[t.rowSelection]),C=t.signature!==xh.DataGrid&&((null===(n=t.rowSelectionPropagation)||void 0===n?void 0:n.parents)||(null===(r=t.rowSelectionPropagation)||void 0===r?void 0:r.descendants)),p=o.useMemo((()=>t.rowSelectionModel),[t.rowSelectionModel]),A=o.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:p,propOnChange:t.onRowSelectionModelChange,stateSelector:wb,changeEvent:"rowSelectionChange"});const{checkboxSelection:m,disableRowSelectionOnClick:h,isRowSelectable:b}=t,f=Wf(t),y=Mu(e,Yp),v=Mu(e,zp)>1,Z=o.useCallback((t=>{var n;let o=t;const r=null!==(n=A.current)&&void 0!==n?n:t,l=e.current.isRowSelected(t);if(l){const t=Gh(e),n=t.findIndex((e=>e===r)),l=t.findIndex((e=>e===o));if(n===l)return;o=n>l?t[l+1]:t[l-1]}A.current=t,e.current.selectRowRange({startId:r,endId:o},!l)}),[e]),G=Cp((()=>t.pagination&&t.checkboxSelectionVisibleOnly&&"client"===t.paginationMode?Ph(e):Gh(e))),S=o.useCallback(((n,o)=>{if(t.signature===xh.DataGrid&&!f&&("include"!==n.type||n.ids.size>1))throw new Error(["MUI X: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join("\n"));wb(e)!==n&&(I.debug("Setting selection model"),e.current.setState((e=>Sg({},e,{rowSelection:t.rowSelection?n:uv})),o))}),[e,I,t.rowSelection,t.signature,f]),B=o.useCallback((t=>Rb(e).has(t)),[e]),w=o.useCallback((n=>{if(!1===t.rowSelection)return!1;if(b&&!b(e.current.getRowParams(n)))return!1;const o=Kp(e,n);return"footer"!==(null===o||void 0===o?void 0:o.type)&&"pinnedRow"!==(null===o||void 0===o?void 0:o.type)}),[e,t.rowSelection,b]),R=o.useCallback((()=>kb(e)),[e]),W=o.useCallback((function(n){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.current.isRowSelectable(n))if(A.current=n,r){I.debug("Setting selection for row ".concat(n));const r={type:"include",ids:new Set},s=e=>{r.ids.add(e)};var l,a,i,g;o&&(s(n),C&&kf(e,y,n,null!==(l=null===(a=t.rowSelectionPropagation)||void 0===a?void 0:a.descendants)&&void 0!==l&&l,null!==(i=null===(g=t.rowSelectionPropagation)||void 0===g?void 0:g.parents)&&void 0!==i&&i,s)),e.current.setRowSelectionModel(r,"singleRowSelection")}else{I.debug("Toggling selection for row ".concat(n));const r=wb(e),l={type:r.type,ids:new Set(r.ids)},a=Bb(l);a.unselect(n);const i=e=>{a.select(e)},g=e=>{a.unselect(e)};var s,c,d,u;if(o)i(n),C&&kf(e,y,n,null!==(s=null===(c=t.rowSelectionPropagation)||void 0===c?void 0:c.descendants)&&void 0!==s&&s,null!==(d=null===(u=t.rowSelectionPropagation)||void 0===u?void 0:u.parents)&&void 0!==d&&d,i);else if(C){var p,m,h,b;Vf(e,y,n,null!==(p=null===(m=t.rowSelectionPropagation)||void 0===m?void 0:m.descendants)&&void 0!==p&&p,null!==(h=null===(b=t.rowSelectionPropagation)||void 0===b?void 0:b.parents)&&void 0!==h&&h,g)}("include"===l.type&&l.ids.size<2||f)&&e.current.setRowSelectionModel(l,"singleRowSelection")}}),[e,I,C,y,null===(l=t.rowSelectionPropagation)||void 0===l?void 0:l.descendants,null===(a=t.rowSelectionPropagation)||void 0===a?void 0:a.parents,f]),k=o.useCallback((function(n){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(I.debug("Setting selection for several rows"),!1===t.rowSelection)return;const l=new Set;for(let t=0;t<n.length;t+=1){const o=n[t];e.current.isRowSelectable(o)&&l.add(o)}const a=wb(e);let i;if(r){if(i={type:"include",ids:l},o){const n=Bb(i);if(C){const o=e=>{n.select(e)};for(const n of l){var g,s,c,d;kf(e,y,n,null!==(g=null===(s=t.rowSelectionPropagation)||void 0===s?void 0:s.descendants)&&void 0!==g&&g,null!==(c=null===(d=t.rowSelectionPropagation)||void 0===d?void 0:d.parents)&&void 0!==c&&c,o)}}}else i.ids=new Set;if(a.type===i.type&&i.ids.size===a.ids.size&&Array.from(i.ids).every((e=>a.ids.has(e))))return}else{i={type:a.type,ids:new Set(a.ids)};const n=Bb(i),r=e=>{n.select(e)},g=e=>{n.unselect(e)};for(const a of l){var u,p,A,m,h,b,v,Z;o?(n.select(a),C&&kf(e,y,a,null!==(u=null===(p=t.rowSelectionPropagation)||void 0===p?void 0:p.descendants)&&void 0!==u&&u,null!==(A=null===(m=t.rowSelectionPropagation)||void 0===m?void 0:m.parents)&&void 0!==A&&A,r)):(g(a),C&&Vf(e,y,a,null!==(h=null===(b=t.rowSelectionPropagation)||void 0===b?void 0:b.descendants)&&void 0!==h&&h,null!==(v=null===(Z=t.rowSelectionPropagation)||void 0===Z?void 0:Z.parents)&&void 0!==v&&v,g))}}("include"===i.type&&i.ids.size<2||f)&&e.current.setRowSelectionModel(i,"multipleRowsSelection")}),[I,C,f,e,y,null===(i=t.rowSelectionPropagation)||void 0===i?void 0:i.descendants,null===(g=t.rowSelectionPropagation)||void 0===g?void 0:g.parents,t.rowSelection]),V=o.useCallback((n=>{if(!v||!C||0===n.ids.size&&"include"===n.type)return n;const o={type:n.type,ids:new Set(n.ids)},r=Bb(o),l=e=>{r.select(e)};for(const c of n.ids){var a,i,g,s;kf(e,y,c,null!==(a=null===(i=t.rowSelectionPropagation)||void 0===i?void 0:i.descendants)&&void 0!==a&&a,null!==(g=null===(s=t.rowSelectionPropagation)||void 0===s?void 0:s.parents)&&void 0!==g&&g,l,r)}return o}),[e,y,null===(s=t.rowSelectionPropagation)||void 0===s?void 0:s.descendants,null===(c=t.rowSelectionPropagation)||void 0===c?void 0:c.parents,v,C]),X=o.useCallback((function(t){let{startId:n,endId:o}=t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.current.getRow(n)||!e.current.getRow(o))return;I.debug("Expanding selection from row ".concat(n," to row ").concat(o));const a=Gh(e),i=a.indexOf(n),g=a.indexOf(o),[s,c]=i>g?[g,i]:[i,g],d=a.slice(s,c+1);e.current.selectRows(d,r,l)}),[e,I]),x={selectRows:k,selectRowRange:X,getPropagatedRowSelectionModel:V};rb(e,{selectRow:W,setRowSelectionModel:S,getSelectedRows:R,isRowSelected:B,isRowSelectable:w},"public"),rb(e,x,t.signature===xh.DataGrid?"private":"public");const J=o.useRef(!0),N=o.useCallback((function(){var n;let o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(J.current)return;const r=wb(e),l=Fp(e),a=vh(e),i=e=>"server"===t.filterMode?!l[e]:!l[e]||!1===a[e],g={type:r.type,ids:new Set(r.ids)},s=Bb(g);let c=!1;for(const e of r.ids){var d;if(i(e)){if(t.keepNonExistentRowsSelected)continue;s.unselect(e),c=!0;continue}if(null===(d=t.rowSelectionPropagation)||void 0===d||!d.parents)continue;const n=y[e];if("group"===(null===n||void 0===n?void 0:n.type)){if(n.isAutoGenerated){s.unselect(e),c=!0;continue}n.children.every((e=>!1===a[e]))||(s.unselect(e),c=!0)}}const I=v&&(null===(n=t.rowSelectionPropagation)||void 0===n?void 0:n.parents)&&(g.ids.size>0||"exclude"===g.type);if(c||I&&!o)if(I)if("exclude"===g.type){const n=G(),o=[];for(let e=0;e<n.length;e+=1){const r=n[e];!t.keepNonExistentRowsSelected&&i(r)||!s.has(r)||o.push(r)}e.current.selectRows(o,!0,!0)}else e.current.selectRows(Array.from(g.ids),!0,!0);else e.current.setRowSelectionModel(g,"multipleRowsSelection")}),[e,v,null===(d=t.rowSelectionPropagation)||void 0===d?void 0:d.parents,t.keepNonExistentRowsSelected,t.filterMode,y,G]),H=o.useCallback(((t,n)=>{const o=n.metaKey||n.ctrlKey,r=!m&&!o&&!(e=>!!e.key)(n),l=!f||r,a=e.current.isRowSelected(t),i=Wb(e)>1&&l||!a;e.current.selectRow(t,i,l)}),[e,f,m]),F=o.useCallback(((t,n)=>{var o;if(h)return;const r=null===(o=n.target.closest(".".concat(Gu.cell)))||void 0===o?void 0:o.getAttribute("data-field");if(r!==_f.field&&r!==sm){if(r){const t=e.current.getColumn(r);if((null===t||void 0===t?void 0:t.type)===jm)return}"pinnedRow"!==Kp(e,t.id).type&&(n.shiftKey&&f?Z(t.id):H(t.id,n))}}),[h,f,e,Z,H]),Y=o.useCallback(((e,t)=>{var n;f&&t.shiftKey&&(null===(n=window.getSelection())||void 0===n||n.removeAllRanges())}),[f]),K=o.useCallback(((t,n)=>{f&&n.nativeEvent.shiftKey?Z(t.id):e.current.selectRow(t.id,t.value,!f)}),[e,Z,f]),M=o.useCallback((n=>{const o=bh(e),r=fh(e),l=o.items.length>0||(null===r||void 0===r?void 0:r.some((e=>e.length)));t.isRowSelectable||t.checkboxSelectionVisibleOnly||!C||l?e.current.selectRows(G(),n):e.current.setRowSelectionModel({type:n?"exclude":"include",ids:new Set})}),[e,C,G,t.checkboxSelectionVisibleOnly,t.isRowSelectable]),L=o.useCallback((e=>{M(e.value)}),[M]),E=o.useCallback(((t,n)=>{if(e.current.getCellMode(t.id,t.field)!==Zm.Edit&&!Yy(n)){if(ry(n.key)&&n.shiftKey){const o=ub(e);if(o&&o.id!==t.id){n.preventDefault();const r=e.current.isRowSelected(o.id);if(!f)return void e.current.selectRow(o.id,!r,!0);const l=e.current.getRowIndexRelativeToVisibleRows(o.id),a=e.current.getRowIndexRelativeToVisibleRows(t.id);let i,g;l>a?r?(i=a,g=l-1):(i=a,g=l):r?(i=l+1,g=a):(i=l,g=a);const s=Qh(e),c=[];for(let e=i;e<=g;e+=1)c.push(s.rows[e].id);return void e.current.selectRows(c,!r)}}if(" "===n.key&&n.shiftKey)return n.preventDefault(),void H(t.id,n);"A"===String.fromCharCode(n.keyCode)&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),M(!0))}}),[e,f,H,M]),z=Cp((()=>{if(!t.rowSelection)return void e.current.setRowSelectionModel(uv);if(void 0===p)return;if(!C||!v||"include"===p.type&&0===p.ids.size)return void e.current.setRowSelectionModel(p);const n=e.current.getPropagatedRowSelectionModel(p);n.type===p.type&&n.ids.size===p.ids.size&&Array.from(p.ids).every((e=>n.ids.has(e)))?e.current.setRowSelectionModel(p):e.current.setRowSelectionModel(n)}));fp(e,"sortedRowsSet",u((()=>N(!0)))),fp(e,"filteredRowsSet",u((()=>N()))),fp(e,"rowClick",u(F)),fp(e,"rowSelectionCheckboxChange",u(K)),fp(e,"headerSelectionCheckboxChange",L),fp(e,"cellMouseDown",u(Y)),fp(e,"cellKeyDown",u(E)),o.useEffect((()=>{z()}),[e,p,t.rowSelection,z]);const j=null!=p;o.useEffect((()=>{if(j||!t.rowSelection||"function"!==typeof w)return;const n=wb(e);if("include"!==n.type)return;const o=new Set;for(const e of n.ids)w(e)&&o.add(e);o.size<n.ids.size&&e.current.setRowSelectionModel({type:n.type,ids:o})}),[e,w,j,t.rowSelection]),o.useEffect((()=>{if(!t.rowSelection||j)return;const n=wb(e);!f&&("include"===n.type&&n.ids.size>1||"exclude"===n.type)&&e.current.setRowSelectionModel(uv)}),[e,f,m,j,t.rowSelection]),o.useEffect((()=>{u(N)}),[N,u]),o.useEffect((()=>{J.current&&(J.current=!1)}),[])})(e,t),function(e,t){var n,r;const l=jf(e,"useGridColumns"),a=o.useRef(t.columns);e.current.registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:xC,changeEvent:"columnVisibilityModelChange"});const i=o.useCallback((t=>{l.debug("Updating columns state."),e.current.setState(Cy(t)),e.current.publishEvent("columnsChange",t.orderedFields)}),[l,e]),g=o.useCallback((t=>VC(e)[t]),[e]),s=o.useCallback((()=>XC(e)),[e]),c=o.useCallback((()=>NC(e)),[e]),d=o.useCallback((function(t){return(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?XC(e):NC(e)).findIndex((e=>e.field===t))}),[e]),I=o.useCallback((t=>{const n=d(t);return MC(e)[n]}),[e,d]),u=o.useCallback((t=>{var n,o;xC(e)!==t&&(e.current.setState((n=>Sg({},n,{columns:lh({apiRef:e,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:t,keepOnlyColumnsToUpsert:!1})}))),null===(n=(o=e.current).updateRenderContext)||void 0===n||n.call(o))}),[e]),C=o.useCallback((t=>{if(Ub(e))return void e.current.updateNonPivotColumns(t);const n=lh({apiRef:e,columnsToUpsert:t,initialState:void 0,keepOnlyColumnsToUpsert:!1,updateInitialVisibilityModel:!0});i(n)}),[e,i]),p=o.useCallback(((t,n)=>{var o;const r=xC(e);if(n!==(null===(o=r[t])||void 0===o||o)){const o=Sg({},r,{[t]:n});e.current.setColumnVisibilityModel(o)}}),[e]),A=o.useCallback((t=>kC(e).findIndex((e=>e===t))),[e]),m=o.useCallback(((t,n)=>{const o=kC(e),r=A(t);if(r===n)return;l.debug("Moving column ".concat(t," to index ").concat(n));const a=[...o],g=a.splice(r,1)[0];a.splice(n,0,g),i(Sg({},WC(e),{orderedFields:a}));const s={column:e.current.getColumn(t),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(t),oldIndex:r};e.current.publishEvent("columnIndexChange",s)}),[e,l,i,A]),h=o.useCallback(((t,n)=>{l.debug("Updating column ".concat(t," width to ").concat(n));const o=WC(e),r=Sg({},o.lookup[t],{width:n,hasBeenResized:!0});i(oh(Sg({},o,{lookup:Sg({},o.lookup,{[t]:r})}),e.current.getRootDimensions())),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(t),colDef:r,width:n})}),[e,l,i]),b={setColumnIndex:m};rb(e,{getColumn:g,getAllColumns:s,getColumnIndex:d,getColumnPosition:I,getVisibleColumns:c,getColumnIndexRelativeToVisibleColumns:A,updateColumns:C,setColumnVisibilityModel:u,setColumnVisibility:p,setColumnWidth:h},"public"),rb(e,b,t.signature===xh.DataGrid?"private":"public");const f=o.useCallback(((n,o)=>{var r,l;const a={},i=xC(e);(!o.exportOnlyDirtyModels||null!=t.columnVisibilityModel||Object.keys(null!==(r=null===(l=t.initialState)||void 0===l||null===(l=l.columns)||void 0===l?void 0:l.columnVisibilityModel)&&void 0!==r?r:{}).length>0||Object.keys(i).length>0)&&(a.columnVisibilityModel=i),a.orderedFields=kC(e);const g=XC(e),s={};return g.forEach((e=>{if(e.hasBeenResized){const t={};th.forEach((n=>{let o=e[n];o===1/0&&(o=-1),t[n]=o})),s[e.field]=t}})),Object.keys(s).length>0&&(a.dimensions=s),Sg({},n,{columns:a})}),[e,t.columnVisibilityModel,null===(n=t.initialState)||void 0===n?void 0:n.columns]),y=o.useCallback(((t,n)=>{var o;const r=null===(o=n.stateToRestore.columns)||void 0===o?void 0:o.columnVisibilityModel,l=n.stateToRestore.columns;if(null==r&&null==l)return t;const a=lh({apiRef:e,columnsToUpsert:[],initialState:l,columnVisibilityModel:r,keepOnlyColumnsToUpsert:!1});return e.current.setState(Cy(a)),null!=l&&e.current.publishEvent("columnsChange",a.orderedFields),t}),[e]),v=o.useCallback(((e,n)=>{if(n===TC.columns){var o;const e=t.slots.columnsPanel;return(0,ao.jsx)(e,Sg({},null===(o=t.slotProps)||void 0===o?void 0:o.columnsPanel))}return e}),[t.slots.columnsPanel,null===(r=t.slotProps)||void 0===r?void 0:r.columnsPanel]),Z=o.useCallback((n=>{const o=Ub(e);return t.disableColumnSelector||o?n:[...n,"columnMenuColumnsItem"]}),[t.disableColumnSelector,e]);dy(e,"columnMenu",Z),dy(e,"exportState",f),dy(e,"restoreState",y),dy(e,"preferencePanel",v);const G=o.useRef(null);fp(e,"viewportInnerSizeChange",(t=>{if(G.current!==t.width){if(G.current=t.width,!NC(e).some((e=>e.flex&&e.flex>0)))return;i(oh(WC(e),e.current.getRootDimensions()))}}));const S=o.useCallback((()=>{l.info("Columns pipe processing have changed, regenerating the columns");const t=lh({apiRef:e,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});i(t)}),[e,l,i]);Iy(e,"hydrateColumns",S);const B=o.useRef(!0);o.useEffect((()=>{if(B.current)return void(B.current=!1);if(l.info("GridColumns have changed, new length ".concat(t.columns.length)),a.current===t.columns)return;const n=lh({apiRef:e,initialState:void 0,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0,updateInitialVisibilityModel:!0});a.current=t.columns,i(n)}),[l,e,i,t.columns]),o.useEffect((()=>{void 0!==t.columnVisibilityModel&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)}),[e,l,t.columnVisibilityModel])}(e,t),((e,t)=>{const n=jf(e,"useGridRows"),r=o.useRef(Date.now()),l=o.useRef(t.rowCount),a=wp(),i=o.useCallback((t=>{const n=Fp(e)[t];if(n)return n;const o=Kp(e,t);return o&&_A(o)?{[PA]:t}:null}),[e]),g=o.useCallback((t=>rm(e,t)),[e]),s=o.useCallback((n=>{let{cache:o,throttle:l}=n;const i=()=>{r.current=Date.now(),e.current.setState((n=>Sg({},n,{rows:qA({apiRef:e,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:Yp(e),previousTreeDepths:Ep(e),previousGroupsToFetch:Mp(e)})}))),e.current.publishEvent("rowsSet")};if(a.clear(),e.current.caches.rows=o,!l)return void i();const g=t.throttleRowsMs-(Date.now()-r.current);g>0?a.start(g,i):i()}),[t.throttleRowsMs,t.rowCount,t.loading,e,a]),c=o.useCallback((o=>{if(n.debug("Updating all rows, new length ".concat(o.length)),Ub(e))return void e.current.updateNonPivotRows(o,!1);const r=QA({rows:o,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),l=e.current.caches.rows;r.rowsBeforePartialUpdates=l.rowsBeforePartialUpdates,s({cache:r,throttle:!0})}),[n,t.getRowId,t.loading,t.rowCount,s,e]),d=o.useCallback((n=>{if(t.signature===xh.DataGrid&&n.length>1)throw new Error(["MUI X: You cannot update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(Ub(e))return void e.current.updateNonPivotRows(n);const o=nm(e,n,t.getRowId),r=em({updates:o,getRowId:t.getRowId,previousCache:e.current.caches.rows});s({cache:r,throttle:!0})}),[t.signature,t.getRowId,s,e]),I=o.useCallback(((n,o)=>{const r=nm(e,n,t.getRowId),l=em({updates:r,getRowId:t.getRowId,previousCache:e.current.caches.rows,groupKeys:null!==o&&void 0!==o?o:[]});s({cache:l,throttle:!1})}),[t.getRowId,s,e]),u=o.useCallback((t=>{n.debug("Setting loading to ".concat(t)),e.current.setState((e=>Sg({},e,{rows:Sg({},e.rows,{loading:t})}))),e.current.caches.rows.loadingPropBeforePartialUpdates=t}),[e,n]),C=o.useCallback((()=>{const t=jp(e),n=Fp(e);return new Map(t.map((e=>{var t;return[e,null!==(t=n[e])&&void 0!==t?t:{}]})))}),[e]),p=o.useCallback((()=>Jp(e)),[e]),A=o.useCallback((()=>jp(e)),[e]),m=o.useCallback((t=>{const{rowIdToIndexMap:n}=Qh(e);return n.get(t)}),[e]),h=o.useCallback(((t,n)=>{const o=Kp(e,t);if(!o)throw new Error("MUI X: No row with id #".concat(t," found."));if("group"!==o.type)throw new Error("MUI X: Only group nodes can be expanded or collapsed.");const r=Sg({},o,{childrenExpanded:n});e.current.setState((e=>Sg({},e,{rows:Sg({},e.rows,{tree:Sg({},e.rows.tree,{[t]:r})})}))),e.current.publishEvent("rowExpansionChange",r)}),[e]),b=o.useCallback((t=>{var n;return null!==(n=Kp(e,t))&&void 0!==n?n:null}),[e]),f=o.useCallback((t=>{let{skipAutoGeneratedRows:n=!0,groupId:o,applySorting:r,applyFiltering:l}=t;const a=Yp(e);let i;if(r){const t=a[o];if(!t)return[];const r=Ch(e);i=[];for(let e=r.findIndex((e=>e===o))+1;e<r.length&&a[r[e]].depth>t.depth;e+=1){const t=r[e];n&&_A(a[t])||i.push(t)}}else i=$A(a,o,n);if(l){const t=vh(e);i=Ih(t)?i:i.filter((e=>!1!==t[e]))}return i}),[e]),y=o.useCallback(((t,o)=>{const r=Kp(e,t);if(!r)throw new Error("MUI X: No row with id #".concat(t," found."));if(r.parent!==TA)throw new Error("MUI X: The row reordering do not support reordering of grouped rows yet.");if("leaf"!==r.type)throw new Error("MUI X: The row reordering do not support reordering of footer or grouping rows.");e.current.setState((r=>{const l=Yp(e)[TA],a=l.children,i=a.findIndex((e=>e===t));if(-1===i||i===o)return r;n.debug("Moving row ".concat(t," to index ").concat(o));const g=[...a];return g.splice(o,0,g.splice(i,1)[0]),Sg({},r,{rows:Sg({},r.rows,{tree:Sg({},r.rows.tree,{[TA]:Sg({},l,{children:g})})})})})),e.current.publishEvent("rowsSet")}),[e,n]),v=o.useCallback(((n,o)=>{if(t.signature===xh.DataGrid&&o.length>1)throw new Error(["MUI X: You cannot replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(0===o.length)return;if(zp(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const r=Sg({},Yp(e)),l=Sg({},Fp(e)),a=r[TA],i=[...a.children],g=new Set;for(let e=0;e<o.length;e+=1){const a=o[e],s=UA(a,t.getRowId,"A row was provided without id when calling replaceRows()."),[c]=i.splice(n+e,1,s);g.has(c)||(delete l[c],delete r[c]);const d={id:s,depth:0,parent:TA,type:"leaf",groupingKey:null};l[s]=a,r[s]=d,g.add(s)}r[TA]=Sg({},a,{children:i});const s=i.filter((e=>{var t;return"leaf"===(null===(t=r[e])||void 0===t?void 0:t.type)}));e.current.caches.rows.dataRowIdToModelLookup=l,e.current.setState((e=>Sg({},e,{rows:Sg({},e.rows,{loading:t.loading,totalRowCount:Math.max(t.rowCount||0,i.length),dataRowIdToModelLookup:l,dataRowIds:s,tree:r})}))),e.current.publishEvent("rowsSet")}),[e,t.signature,t.getRowId,t.loading,t.rowCount]),Z={getRow:i,setLoading:u,getRowId:g,getRowModels:C,getRowsCount:p,getAllRowIds:A,setRows:c,updateRows:d,getRowNode:b,getRowIndexRelativeToVisibleRows:m,unstable_replaceRows:v},G={setRowIndex:y,setRowChildrenExpansion:h,getRowGroupChildren:f},S={updateNestedRows:I},B=o.useCallback((()=>{let o;n.info("Row grouping pre-processing have changed, regenerating the row tree"),o=e.current.caches.rows.rowsBeforePartialUpdates===t.rows?Sg({},e.current.caches.rows,{updates:{type:"full",rows:jp(e)}}):QA({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),s({cache:o,throttle:!1})}),[n,e,t.rows,t.getRowId,t.loading,t.rowCount,s]),w=Xu((()=>t.dataSource)),R=o.useCallback((e=>{t.dataSource&&t.dataSource!==w.current?w.current=t.dataSource:"rowTreeCreation"===e&&B()}),[B,w,t.dataSource]),W=o.useCallback((()=>{e.current.getActiveStrategy(Yf.RowTree)!==Lp(e)&&B()}),[e,B]);fp(e,"activeStrategyProcessorChange",R),fp(e,"strategyAvailabilityChange",W);const k=o.useCallback((()=>{e.current.setState((n=>{const o=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:Yp(e),treeDepths:Ep(e),dataRowIds:jp(e),dataRowIdToModelLookup:Fp(e)});return Sg({},n,{rows:Sg({},n.rows,o,{totalTopLevelRowCount:OA({tree:o.tree,rowCountProp:t.rowCount})})})})),e.current.publishEvent("rowsSet")}),[e,t.rowCount]);Iy(e,"hydrateRows",k),rb(e,Z,"public"),rb(e,G,t.signature===xh.DataGrid?"private":"public"),rb(e,S,"private");const V=o.useRef(!0);o.useEffect((()=>{if(V.current)return void(V.current=!1);let o=!1;t.rowCount!==l.current&&(o=!0,l.current=t.rowCount);const r=t.dataSource?Dp(e):t.rows,a=e.current.caches.rows.rowsBeforePartialUpdates===r,i=e.current.caches.rows.loadingPropBeforePartialUpdates===t.loading,g=e.current.caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;a&&(i||(e.current.setState((e=>Sg({},e,{rows:Sg({},e.rows,{loading:t.loading})}))),e.current.caches.rows.loadingPropBeforePartialUpdates=t.loading),g||(e.current.setState((e=>Sg({},e,{rows:Sg({},e.rows,{totalRowCount:Math.max(t.rowCount||0,e.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,e.rows.totalTopLevelRowCount)})}))),e.current.caches.rows.rowCountPropBeforePartialUpdates=t.rowCount),!o)||(n.debug("Updating all rows, new length ".concat(null===r||void 0===r?void 0:r.length)),s({cache:QA({rows:r,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),throttle:!1}))}),[t.rows,t.rowCount,t.getRowId,t.loading,t.dataSource,n,s,e])})(e,t),((e,t)=>{const n=Xu((()=>e.current.state.rowSpanning!==Ov?eZ(t,e):qv)),r=o.useCallback((function(o){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{range:l,rows:a}=Qh(e,(t.pagination,t.paginationMode));if(null===l||!Uv(o))return;r&&(n.current=qv);const i=function(e,t){return e.firstRowIndex>=t.firstRowIndex&&e.lastRowIndex<=t.lastRowIndex?null:e.firstRowIndex>=t.firstRowIndex&&e.lastRowIndex>t.lastRowIndex?{firstRowIndex:t.lastRowIndex,lastRowIndex:e.lastRowIndex}:e.firstRowIndex<t.firstRowIndex&&e.lastRowIndex<=t.lastRowIndex?{firstRowIndex:e.firstRowIndex,lastRowIndex:t.firstRowIndex-1}:e}({firstRowIndex:o.firstRowIndex,lastRowIndex:Math.min(o.lastRowIndex,l.lastRowIndex+1)},n.current);if(null===i)return;const g=NC(e),{spannedCells:s,hiddenCells:c,hiddenCellOriginMap:d,processedRange:I}=$v(e,g,a,l,i,r,n.current);n.current=I;const u=Object.keys(s).length,C=Object.keys(c).length,p=Object.keys(e.current.state.rowSpanning.spannedCells).length,A=Object.keys(e.current.state.rowSpanning.hiddenCells).length;(r||u!==p||C!==A)&&(0!==u||0!==p)&&e.current.setState((e=>Sg({},e,{rowSpanning:{spannedCells:s,hiddenCells:c,hiddenCellOriginMap:d}})))}),[e,n,t.pagination,t.paginationMode]),l=o.useCallback((()=>{const t=nb(e);Uv(t)&&r(t,!0)}),[e,r]);fp(e,"renderedRowsIntervalChange",uA(t.rowSpanning,r)),fp(e,"sortedRowsSet",uA(t.rowSpanning,l)),fp(e,"paginationModelChange",uA(t.rowSpanning,l)),fp(e,"filteredRowsSet",uA(t.rowSpanning,l)),fp(e,"columnsChange",uA(t.rowSpanning,l)),o.useEffect((()=>{t.rowSpanning?e.current.state.rowSpanning===Ov&&l():e.current.state.rowSpanning!==Ov&&e.current.setState((e=>Sg({},e,{rowSpanning:Ov})))}),[e,l,t.rowSpanning])})(e,t),Iv(e,t),(e=>{const t=o.useRef({}),n=()=>{t.current={}},r=o.useCallback((n=>{let{rowId:o,minFirstColumn:r,maxLastColumn:l,columns:a}=n;for(let i=r;i<l;i+=1){const n=Wv({apiRef:e,lookup:t.current,columnIndex:i,rowId:o,minFirstColumnIndex:r,maxLastColumnIndex:l,columns:a});n.colSpan>1&&(i+=n.colSpan-1)}}),[e]),l={resetColSpan:n,calculateColSpan:r};rb(e,{unstable_getCellColSpanInfo:(e,n)=>{var o;return null===(o=t.current[e])||void 0===o?void 0:o[n]}},"public"),rb(e,l,"private"),fp(e,"columnOrderChange",n)})(e),((e,t)=>{const n=o.useCallback((t=>{var n;return null!==(n=qm(e)[t])&&void 0!==n?n:[]}),[e]),r=o.useCallback((()=>_m(e)),[e]);rb(e,{getColumnGroupPath:n,getAllGroupDetails:r},"public");const l=o.useCallback((()=>{var n;const o=xv(null!==(n=t.columnGroupingModel)&&void 0!==n?n:[]);e.current.setState((e=>{var t,n,r;const l=null!==(t=null===(n=e.columns)||void 0===n?void 0:n.orderedFields)&&void 0!==t?t:[],a=null!==(r=e.pinnedColumns)&&void 0!==r?r:{},i=Jv(l,o,a);return Sg({},e,{columnGrouping:Sg({},e.columnGrouping,{headerStructure:i})})}))}),[e,t.columnGroupingModel]),a=o.useCallback((t=>{var n,o,r;const l=null!==(n=null===(o=(r=e.current).getPinnedColumns)||void 0===o?void 0:o.call(r))&&void 0!==n?n:{},a=kC(e),i=HC(e),g=Hv(null!==t&&void 0!==t?t:[]),s=xv(null!==t&&void 0!==t?t:[]),c=Jv(a,s,l),d=0===i.length?0:Math.max(...i.map((e=>{var t,n;return null!==(t=null===(n=s[e])||void 0===n?void 0:n.length)&&void 0!==t?t:0})));e.current.setState((e=>Sg({},e,{columnGrouping:{lookup:g,unwrappedGroupingModel:s,headerStructure:c,maxDepth:d}})))}),[e]);fp(e,"columnIndexChange",l),fp(e,"columnsChange",(()=>{a(t.columnGroupingModel)})),fp(e,"columnVisibilityModelChange",(()=>{a(t.columnGroupingModel)})),o.useEffect((()=>{a(t.columnGroupingModel)}),[a,t.columnGroupingModel])})(e,t),gv(e,t),((e,t)=>{const n=jf(e,"useGridFocus"),r=o.useRef(null),l=null!==e.current.rootElementRef.current,a=o.useCallback(((t,n)=>{t&&e.current.getRow(t.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(t.id,t.field),n)}),[e]),i=o.useCallback(((t,o)=>{const r=ub(e);(null===r||void 0===r?void 0:r.id)===t&&(null===r||void 0===r?void 0:r.field)===o||(e.current.setState((e=>(n.debug("Focusing on cell with id=".concat(t," and field=").concat(o)),Sg({},e,{tabIndex:{cell:{id:t,field:o},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:t,field:o},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))),e.current.getRow(t)&&(r&&a(r,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(t,o))))}),[e,n,a]),g=o.useCallback((function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=ub(e);a(r,o),e.current.setState((e=>(n.debug("Focusing on column header with colIndex=".concat(t)),Sg({},e,{tabIndex:{columnHeader:{field:t},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:t},columnHeaderFilter:null,cell:null,columnGroupHeader:null}}))))}),[e,n,a]),s=o.useCallback((function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=ub(e);a(r,o),e.current.setState((e=>(n.debug("Focusing on column header filter with colIndex=".concat(t)),Sg({},e,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:t},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:t},cell:null,columnGroupHeader:null}}))))}),[e,n,a]),c=o.useCallback((function(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=ub(e);r&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(r.id,r.field),o),e.current.setState((e=>Sg({},e,{tabIndex:{columnGroupHeader:{field:t,depth:n},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:t,depth:n},columnHeader:null,columnHeaderFilter:null,cell:null}})))}),[e]),d=o.useCallback((()=>pb(e)),[e]),I=o.useCallback(((n,o,r)=>{let l=e.current.getColumnIndex(o);const a=NC(e),i=Qh(e,(t.pagination,t.paginationMode)),g=Tp(e),s=[].concat(g.top||[],i.rows,g.bottom||[]);let c=s.findIndex((e=>e.id===n));"right"===r?l+=1:"left"===r?l-=1:c+=1,l>=a.length?(c+=1,c<s.length&&(l=0)):l<0&&(c-=1,c>=0&&(l=a.length-1)),c=cA(c,0,s.length-1);const d=s[c];if(!d)return;const I=e.current.unstable_getCellColSpanInfo(d.id,l);I&&I.spannedByColSpan&&("left"===r||"below"===r?l=I.leftVisibleCellIndex:"right"===r&&(l=I.rightVisibleCellIndex)),l=cA(l,0,a.length-1);const u=a[l];e.current.setCellFocus(d.id,u.field)}),[e,t.pagination,t.paginationMode]),u=o.useCallback((t=>{let{id:n,field:o}=t;e.current.setCellFocus(n,o)}),[e]),C=o.useCallback(((t,n)=>{"Enter"===n.key||"Tab"===n.key||"Shift"===n.key||ry(n.key)||e.current.setCellFocus(t.id,t.field)}),[e]),p=o.useCallback(((t,n)=>{let{field:o}=t;n.target===n.currentTarget&&e.current.setColumnHeaderFocus(o,n)}),[e]),A=o.useCallback(((t,n)=>{let{fields:o,depth:r}=t;if(n.target!==n.currentTarget)return;const l=pb(e);null!==l&&l.depth===r&&o.includes(l.field)||e.current.setColumnGroupHeaderFocus(o[0],r,n)}),[e]),m=o.useCallback(((t,o)=>{var r;null!==(r=o.relatedTarget)&&void 0!==r&&null!==(r=r.getAttribute("class"))&&void 0!==r&&r.includes(Gu.columnHeader)||(n.debug("Clearing focus"),e.current.setState((e=>Sg({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))))}),[n,e]),h=o.useCallback((e=>{r.current=e}),[]),b=o.useCallback((t=>{const n=r.current;r.current=null;const o=ub(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:t,cell:n}))return;if(!o)return void(n&&e.current.setCellFocus(n.id,n.field));if((null===n||void 0===n?void 0:n.id)===o.id&&(null===n||void 0===n?void 0:n.field)===o.field)return;const l=e.current.getCellElement(o.id,o.field);null!==l&&void 0!==l&&l.contains(t.target)||(n?e.current.setCellFocus(n.id,n.field):(e.current.setState((e=>Sg({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),a(o,t)))}),[e,a]),f=o.useCallback((t=>{if("view"===t.cellMode)return;const n=ub(e);(null===n||void 0===n?void 0:n.id)===t.id&&(null===n||void 0===n?void 0:n.field)===t.field||e.current.setCellFocus(t.id,t.field)}),[e]),y=o.useCallback((()=>{const n=ub(e);if(n&&!e.current.getRow(n.id)){const r=n.id;let l=null;if("undefined"!==typeof r){var o;const n=e.current.getRowElement(r),a=null!==n&&void 0!==n&&n.dataset.rowindex?Number(null===n||void 0===n?void 0:n.dataset.rowindex):0,i=Qh(e,(t.pagination,t.paginationMode)),g=i.rows[cA(a,0,i.rows.length-1)];l=null!==(o=null===g||void 0===g?void 0:g.id)&&void 0!==o?o:null}e.current.setState((e=>Sg({},e,{focus:{cell:null===l?null:{id:l,field:n.field},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))}}),[e,t.pagination,t.paginationMode]),v=Cp((()=>{const n=ub(e);if(!n)return;const o=Qh(e,(t.pagination,t.paginationMode));if(o.rows.find((e=>e.id===n.id)))return;const r=NC(e);e.current.setState((e=>Sg({},e,{tabIndex:{cell:{id:o.rows[0].id,field:r[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}})))})),Z={moveFocusToRelativeCell:I,setColumnGroupHeaderFocus:c,getColumnGroupHeaderFocus:d};rb(e,{setCellFocus:i,setColumnHeaderFocus:g,setColumnHeaderFilterFocus:s},"public"),rb(e,Z,"private"),o.useEffect((()=>{const t=Sy(e.current.rootElementRef.current);return t.addEventListener("mouseup",b),()=>{t.removeEventListener("mouseup",b)}}),[e,l,b]),fp(e,"columnHeaderBlur",m),fp(e,"cellDoubleClick",u),fp(e,"cellMouseDown",h),fp(e,"cellKeyDown",C),fp(e,"cellModeChange",f),fp(e,"columnHeaderFocus",p),fp(e,"columnGroupHeaderFocus",A),fp(e,"rowsSet",y),fp(e,"paginationModelChange",v)})(e,t),((e,t)=>{var n;const r=jf(e,"useGridPreferencesPanel"),l=o.useCallback((()=>{e.current.setState((t=>{if(!t.preferencePanel.open)return t;r.debug("Hiding Preferences Panel");const n=jC(e);return e.current.publishEvent("preferencePanelClose",{openedPanelValue:n.openedPanelValue}),Sg({},t,{preferencePanel:{open:!1}})}))}),[e,r]),a=o.useCallback(((t,n,o)=>{r.debug("Opening Preferences Panel"),e.current.setState((e=>Sg({},e,{preferencePanel:Sg({},e.preferencePanel,{open:!0,openedPanelValue:t,panelId:n,labelId:o})}))),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:t})}),[r,e]);rb(e,{showPreferences:a,hidePreferences:l},"public");const i=o.useCallback(((n,o)=>{var r;const l=jC(e);return!o.exportOnlyDirtyModels||null!=(null===(r=t.initialState)||void 0===r?void 0:r.preferencePanel)||l.open?Sg({},n,{preferencePanel:l}):n}),[e,null===(n=t.initialState)||void 0===n?void 0:n.preferencePanel]),g=o.useCallback(((t,n)=>{const o=n.stateToRestore.preferencePanel;return null!=o&&e.current.setState((e=>Sg({},e,{preferencePanel:o}))),t}),[e]);dy(e,"exportState",i),dy(e,"restoreState",g)})(e,t),((e,t)=>{var n,r;const l=jf(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:bh,changeEvent:"filterModelChange"});const a=o.useCallback((()=>{e.current.setState((t=>{const n=bh(e),o=e.current.getFilterState(n),r=Sg({},t,{filter:Sg({},t.filter,o)});return Sg({},r,{visibleRowsLookup:Xy(e,r)})})),e.current.publishEvent("filteredRowsSet")}),[e]),i=o.useCallback(((e,n)=>null==n||!1===n.filterable||t.disableColumnFilter?e:[...e,"columnMenuFilterItem"]),[t.disableColumnFilter]),g=o.useCallback((t=>{const n=bh(e),o=[...n.items],r=o.findIndex((e=>e.id===t.id));-1===r?o.push(t):o[r]=t,e.current.setFilterModel(Sg({},n,{items:o}),"upsertFilterItem")}),[e]),s=o.useCallback((t=>{const n=bh(e),o=[...n.items];t.forEach((e=>{const t=o.findIndex((t=>t.id===e.id));-1===t?o.push(e):o[t]=e})),e.current.setFilterModel(Sg({},n,{items:o}),"upsertFilterItems")}),[e]),c=o.useCallback((t=>{const n=bh(e),o=n.items.filter((e=>e.id!==t.id));o.length!==n.items.length&&e.current.setFilterModel(Sg({},n,{items:o}),"deleteFilterItem")}),[e]),d=o.useCallback(((n,o,r)=>{if(l.debug("Displaying filter panel"),n){const o=bh(e),r=o.items.filter((t=>{var n;if(void 0!==t.value)return!Array.isArray(t.value)||0!==t.value.length;const o=null===(n=e.current.getColumn(t.field).filterOperators)||void 0===n?void 0:n.find((e=>e.value===t.operator));return!("undefined"===typeof(null===o||void 0===o?void 0:o.requiresFilterValue)||(null===o||void 0===o?void 0:o.requiresFilterValue))}));let l;const a=r.find((e=>e.field===n)),i=e.current.getColumn(n);l=a?r:t.disableMultipleColumnsFiltering?[fA({field:n,operator:i.filterOperators[0].value},e)]:[...r,fA({field:n,operator:i.filterOperators[0].value},e)],e.current.setFilterModel(Sg({},o,{items:l}))}e.current.showPreferences(TC.filters,o,r)}),[e,l,t.disableMultipleColumnsFiltering]),I=o.useCallback((()=>{l.debug("Hiding filter panel"),e.current.hidePreferences()}),[e,l]),u=o.useCallback((t=>{const n=bh(e);n.logicOperator!==t&&e.current.setFilterModel(Sg({},n,{logicOperator:t}),"changeLogicOperator")}),[e]),C=o.useCallback((t=>{const n=bh(e);By(n.quickFilterValues,t)||e.current.setFilterModel(Sg({},n,{quickFilterValues:[...t]}))}),[e]),p=o.useCallback(((n,o)=>{bh(e)!==n&&(l.debug("Setting filter model"),e.current.updateControlState("filter",vA(n,t.disableMultipleColumnsFiltering,e),o),e.current.unstable_applyFilters())}),[e,l,t.disableMultipleColumnsFiltering]),A=o.useCallback((n=>{const o=yA(n,t.disableMultipleColumnsFiltering,e),r="client"===t.filterMode?RA(o,e,t.disableEval):null;return Sg({},e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:r,filterModel:null!==o&&void 0!==o?o:mA()}),{filterModel:o})}),[t.disableMultipleColumnsFiltering,t.filterMode,t.disableEval,e]),m={setFilterLogicOperator:u,unstable_applyFilters:a,deleteFilterItem:c,upsertFilterItem:g,upsertFilterItems:s,setFilterModel:p,showFilterPanel:d,hideFilterPanel:I,setQuickFilterValues:C,ignoreDiacritics:t.ignoreDiacritics,getFilterState:A};rb(e,m,"public");const h=o.useCallback(((n,o)=>{var r;const l=bh(e);return l.items.forEach((e=>{delete e.fromInput})),o.exportOnlyDirtyModels&&null==t.filterModel&&null==(null===(r=t.initialState)||void 0===r||null===(r=r.filter)||void 0===r?void 0:r.filterModel)&&By(l,mA())?n:Sg({},n,{filter:{filterModel:l}})}),[e,t.filterModel,null===(n=t.initialState)||void 0===n||null===(n=n.filter)||void 0===n?void 0:n.filterModel]),b=o.useCallback(((n,o)=>{var r;const l=null===(r=o.stateToRestore.filter)||void 0===r?void 0:r.filterModel;return null==l?n:(e.current.updateControlState("filter",vA(l,t.disableMultipleColumnsFiltering,e),"restoreState"),Sg({},n,{callbacks:[...n.callbacks,e.current.unstable_applyFilters]}))}),[e,t.disableMultipleColumnsFiltering]),f=o.useCallback(((e,n)=>{if(n===TC.filters){var o;const e=t.slots.filterPanel;return(0,ao.jsx)(e,Sg({},null===(o=t.slotProps)||void 0===o?void 0:o.filterPanel))}return e}),[t.slots.filterPanel,null===(r=t.slotProps)||void 0===r?void 0:r.filterPanel]),{getRowId:y}=t,v=Xu(xy),Z=o.useCallback((n=>{var o;if("client"!==t.filterMode||!n.isRowMatchingFilters||!n.filterModel.items.length&&(null===(o=n.filterModel.quickFilterValues)||void 0===o||!o.length))return AA;const r=Fp(e),l={},{isRowMatchingFilters:a}=n,i={},g={passingFilterItems:null,passingQuickFilterValues:null},s=v.current(e.current.state.rows.dataRowIdToModelLookup);for(let t=0;t<s.length;t+=1){const o=s[t],r=y?y(o):o.id;a(o,void 0,g);const c=kA([g.passingFilterItems],[g.passingQuickFilterValues],n.filterModel,e,i);c||(l[r]=c)}const c="auto-generated-group-footer-root";return r[c]&&(l[c]=!0),{filteredRowsLookup:l,filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}}}),[e,t.filterMode,y,v]);dy(e,"columnMenu",i),dy(e,"exportState",h),dy(e,"restoreState",b),dy(e,"preferencePanel",f),Wy(e,Kf,"filtering",Z),Wy(e,Kf,"visibleRowsLookupCreation",Vy);const G=o.useCallback((()=>{l.debug("onColUpdated - GridColumns changed, applying filters");const t=bh(e),n=VC(e),o=t.items.filter((e=>e.field&&n[e.field]));o.length<t.items.length&&e.current.setFilterModel(Sg({},t,{items:o}))}),[e,l]),S=o.useCallback((t=>{"filtering"===t&&e.current.unstable_applyFilters()}),[e]),B=o.useCallback((()=>{e.current.setState((t=>Sg({},t,{visibleRowsLookup:Xy(e,t)})))}),[e]);fp(e,"rowsSet",a),fp(e,"columnsChange",G),fp(e,"activeStrategyProcessorChange",S),fp(e,"rowExpansionChange",B),fp(e,"columnVisibilityModelChange",(()=>{const t=bh(e);t.quickFilterValues&&wA(t)&&e.current.unstable_applyFilters()})),cy((()=>{e.current.unstable_applyFilters()})),up((()=>{void 0!==t.filterModel&&e.current.setFilterModel(t.filterModel)}),[e,l,t.filterModel])})(e,t),((e,t)=>{var n;const r=jf(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:Ah,changeEvent:"sortModelChange"});const l=o.useCallback(((t,n)=>{const o=Ah(e),r=o.findIndex((e=>e.field===t));let l=[...o];return r>-1?null==(null===n||void 0===n?void 0:n.sort)?l.splice(r,1):l.splice(r,1,n):l=[...o,n],l}),[e]),a=o.useCallback(((n,o)=>{var r;const l=Ah(e).find((e=>e.field===n.field));if(l){var a;const e=void 0===o?qp(null!==(a=n.sortingOrder)&&void 0!==a?a:t.sortingOrder,l.sort):o;return void 0===e?void 0:Sg({},l,{sort:e})}return{field:n.field,sort:void 0===o?qp(null!==(r=n.sortingOrder)&&void 0!==r?r:t.sortingOrder):o}}),[e,t.sortingOrder]),i=o.useCallback(((e,n)=>null==n||!1===n.sortable||t.disableColumnSorting?e:(n.sortingOrder||t.sortingOrder).some((e=>!!e))?[...e,"columnMenuSortItem"]:e),[t.sortingOrder,t.disableColumnSorting]),g=o.useCallback((()=>{e.current.setState((n=>{if("server"===t.sortingMode)return r.debug("Skipping sorting rows as sortingMode = server"),Sg({},n,{sorting:Sg({},n.sorting,{sortedRows:$A(Yp(e),TA,!1)})});const o=Ah(e),l=Op(o,e),a=e.current.applyStrategyProcessor("sorting",{sortRowList:l});return Sg({},n,{sorting:Sg({},n.sorting,{sortedRows:a})})})),e.current.publishEvent("sortedRowsSet")}),[e,r,t.sortingMode]),s=o.useCallback((n=>{Ah(e)!==n&&(r.debug("Setting sort model"),e.current.setState(Qp(n,t.disableMultipleColumnsSorting)),e.current.applySorting())}),[e,r,t.disableMultipleColumnsSorting]),c=o.useCallback(((n,o,r)=>{const i=e.current.getColumn(n),g=a(i,o);let s;s=!r||t.disableMultipleColumnsSorting?null==(null===g||void 0===g?void 0:g.sort)?[]:[g]:l(i.field,g),e.current.setSortModel(s)}),[e,l,a,t.disableMultipleColumnsSorting]),d=o.useCallback((()=>Ah(e)),[e]),I=o.useCallback((()=>ph(e).map((e=>e.model))),[e]),u=o.useCallback((()=>Ch(e)),[e]),C=o.useCallback((t=>e.current.getSortedRowIds()[t]),[e]);rb(e,{getSortModel:d,getSortedRows:I,getSortedRowIds:u,getRowIdFromRowIndex:C,setSortModel:s,sortColumn:c,applySorting:g},"public");const p=o.useCallback(((n,o)=>{var r;const l=Ah(e);return!o.exportOnlyDirtyModels||null!=t.sortModel||null!=(null===(r=t.initialState)||void 0===r||null===(r=r.sorting)||void 0===r?void 0:r.sortModel)||l.length>0?Sg({},n,{sorting:{sortModel:l}}):n}),[e,t.sortModel,null===(n=t.initialState)||void 0===n||null===(n=n.sorting)||void 0===n?void 0:n.sortModel]),A=o.useCallback(((n,o)=>{var r;const l=null===(r=o.stateToRestore.sorting)||void 0===r?void 0:r.sortModel;return null==l?n:(e.current.setState(Qp(l,t.disableMultipleColumnsSorting)),Sg({},n,{callbacks:[...n.callbacks,e.current.applySorting]}))}),[e,t.disableMultipleColumnsSorting]),m=o.useCallback((t=>{const n=Yp(e),o=n[TA],r=t.sortRowList?t.sortRowList(o.children.map((e=>n[e]))):[...o.children];return null!=o.footerId&&r.push(o.footerId),r}),[e]);dy(e,"exportState",p),dy(e,"restoreState",A),Wy(e,Kf,"sorting",m);const h=o.useCallback(((e,n)=>{let{field:o,colDef:r}=e;if(!r.sortable||t.disableColumnSorting)return;const l="always"===t.multipleColumnsSortingMode||n.shiftKey||n.metaKey||n.ctrlKey;c(o,void 0,l)}),[c,t.disableColumnSorting,t.multipleColumnsSortingMode]),b=o.useCallback(((e,n)=>{let{field:o,colDef:r}=e;r.sortable&&!t.disableColumnSorting&&("Enter"!==n.key||n.ctrlKey||n.metaKey||c(o,void 0,"always"===t.multipleColumnsSortingMode||n.shiftKey))}),[c,t.disableColumnSorting,t.multipleColumnsSortingMode]),f=o.useCallback((()=>{const t=Ah(e),n=VC(e);if(t.length>0){const o=t.filter((e=>n[e.field]));o.length<t.length&&e.current.setSortModel(o)}}),[e]),y=o.useCallback((t=>{"sorting"===t&&e.current.applySorting()}),[e]);dy(e,"columnMenu",i),fp(e,"columnHeaderClick",h),fp(e,"columnHeaderKeyDown",b),fp(e,"rowsSet",e.current.applySorting),fp(e,"columnsChange",f),fp(e,"activeStrategyProcessorChange",y),cy((()=>{e.current.applySorting()})),up((()=>{void 0!==t.sortModel&&e.current.setSortModel(t.sortModel)}),[e,t.sortModel])})(e,t),((e,t)=>{var n;const r=jf(e,"useDensity");e.current.registerControlState({stateId:"density",propModel:t.density,propOnChange:t.onDensityChange,stateSelector:yC,changeEvent:"densityChange"});const l=Cp((t=>{yC(e)!==t&&(r.debug("Set grid density to ".concat(t)),e.current.setState((e=>Sg({},e,{density:t}))))}));rb(e,{setDensity:l},"public");const a=o.useCallback(((n,o)=>{var r;const l=yC(e);return o.exportOnlyDirtyModels&&null==t.density&&null==(null===(r=t.initialState)||void 0===r?void 0:r.density)?n:Sg({},n,{density:l})}),[e,t.density,null===(n=t.initialState)||void 0===n?void 0:n.density]),i=o.useCallback(((t,n)=>{var o;const r=null!==(o=n.stateToRestore)&&void 0!==o&&o.density?n.stateToRestore.density:yC(e);return e.current.setState((e=>Sg({},e,{density:r}))),t}),[e]);dy(e,"exportState",a),dy(e,"restoreState",i),o.useEffect((()=>{t.density&&e.current.setDensity(t.density)}),[e,t.density])})(e,t),Tv(e,t),Qy(e,t),((e,t)=>{const{getRowHeight:n,getRowSpacing:r,getEstimatedRowHeight:l}=t,a=e.current.caches.rowsMeta.heights,i=o.useRef(-1),g=o.useRef(!1),s=o.useRef(!1),c=Mu(e,vC),d=Oh(e),I=Mu(e,Tp),u=Mu(e,op),C=o.useCallback((t=>{const o=tp(e).rowHeight,a=e.current.getRowHeightEntry(t.id);if(n){const e=n(Sg({},t,{densityFactor:c}));if("auto"===e){if(a.needsFirstMeasurement){const e=l?l(Sg({},t,{densityFactor:c})):o;a.content=null!==e&&void 0!==e?e:o}g.current=!0,a.autoHeight=!0}else a.content=om(e,o),a.needsFirstMeasurement=!1,a.autoHeight=!1}else a.content=o,a.needsFirstMeasurement=!1;if(r){var i,s;const n=e.current.getRowIndexRelativeToVisibleRows(t.id),o=r(Sg({},t,{isFirstVisible:0===n,isLastVisible:n===d.rows.length-1,indexRelativeToCurrentPage:n}));a.spacingTop=null!==(i=o.top)&&void 0!==i?i:0,a.spacingBottom=null!==(s=o.bottom)&&void 0!==s?s:0}else a.spacingTop=0,a.spacingBottom=0;return e.current.unstable_applyPipeProcessors("rowHeight",a,t),a}),[e,d.rows,n,l,u,r,c]),p=o.useCallback((()=>{g.current=!1;const t=I.top.reduce(((e,t)=>{const n=C(t);return e+n.content+n.spacingTop+n.spacingBottom+n.detail}),0),n=I.bottom.reduce(((e,t)=>{const n=C(t);return e+n.content+n.spacingTop+n.spacingBottom+n.detail}),0),o=[],r=d.rows.reduce(((e,t)=>{o.push(e);const n=C(t);return e+(n.content+n.spacingTop+n.spacingBottom+n.detail)}),0);g.current||(i.current=1/0);const l=t!==e.current.state.rowsMeta.pinnedTopRowsTotalHeight||n!==e.current.state.rowsMeta.pinnedBottomRowsTotalHeight||r!==e.current.state.rowsMeta.currentPageTotalHeight,a={currentPageTotalHeight:r,positions:o,pinnedTopRowsTotalHeight:t,pinnedBottomRowsTotalHeight:n};e.current.setState((e=>Sg({},e,{rowsMeta:a}))),l&&e.current.updateDimensions(),s.current=!0}),[e,I,d.rows,C]),A=Xu((()=>new wv((t=>{for(let o=0;o<t.length;o+=1){var n;const r=t[o],l=r.borderBoxSize&&r.borderBoxSize.length>0?r.borderBoxSize[0].blockSize:r.contentRect.height,a=r.target.__mui_id;if((null===(n=yb(e))||void 0===n?void 0:n.id)===a&&0===l)return;e.current.unstable_storeRowHeightMeasurement(a,l)}s.current||requestAnimationFrame((()=>{e.current.requestPipeProcessorsApplication("rowHeight")}))})))).current;Iy(e,"rowHeight",p),up((()=>{p()}),[p]);const m={unstable_getRowHeight:e=>{var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.content)&&void 0!==t?t:u},unstable_setLastMeasuredRowIndex:e=>{g.current&&e>i.current&&(i.current=e)},unstable_storeRowHeightMeasurement:(t,n)=>{const o=e.current.getRowHeightEntry(t),r=o.content!==n;o.needsFirstMeasurement=!1,o.content=n,s.current&&(s.current=!r)},resetRowHeights:()=>{a.clear(),p()}},h={hydrateRowsMeta:p,observeRowHeight:(e,t)=>(e.__mui_id=t,A.observe(e),()=>A.unobserve(e)),rowHasAutoHeight:e=>{var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.autoHeight)&&void 0!==t&&t},getRowHeightEntry:e=>{let t=a.get(e);return void 0===t&&(t={content:u,spacingTop:0,spacingBottom:0,detail:0,autoHeight:!1,needsFirstMeasurement:!0},a.set(e,t)),t},getLastMeasuredRowIndex:()=>i.current};rb(e,m,"public"),rb(e,h,"private")})(e,t),((e,t)=>{const n=Ym(),r=jf(e,"useGridScroll"),l=e.current.columnHeadersContainerRef,a=e.current.virtualScrollerRef,i=Mu(e,Zh),g=o.useCallback((n=>{const o=tp(e),l=Jp(e),g=t.listView?[db(e)]:NC(e);if(null!=n.rowIndex&&0===l||0===g.length)return!1;r.debug("Scrolling to cell at row ".concat(n.rowIndex,", col: ").concat(n.colIndex," "));let s={};if(void 0!==n.colIndex){const t=MC(e);let r;if("undefined"!==typeof n.rowIndex){var c;const t=null===(c=i[n.rowIndex])||void 0===c?void 0:c.id,o=e.current.unstable_getCellColSpanInfo(t,n.colIndex);o&&!o.spannedByColSpan&&(r=o.cellProps.width)}"undefined"===typeof r&&(r=g[n.colIndex].computedWidth),s.left=mv({containerSize:o.viewportOuterSize.width,scrollPosition:Math.abs(a.current.scrollLeft),elementSize:r,elementOffset:t[n.colIndex]})}if(void 0!==n.rowIndex){const r=_h(e),l=Eh(e),i=zh(e),g=t.pagination?n.rowIndex-l*i:n.rowIndex,c=r.positions[g+1]?r.positions[g+1]-r.positions[g]:r.currentPageTotalHeight-r.positions[g];s.top=mv({containerSize:o.viewportInnerSize.height,scrollPosition:a.current.scrollTop,elementSize:c,elementOffset:r.positions[g]})}return s=e.current.unstable_applyPipeProcessors("scrollToIndexes",s,n),(void 0!==typeof s.left||void 0!==typeof s.top)&&(e.current.scroll(s),!0)}),[r,e,a,t.pagination,i,t.listView]),s=o.useCallback((e=>{if(a.current&&void 0!==e.left&&l.current){const t=n?-1:1;l.current.scrollLeft=e.left,a.current.scrollLeft=t*e.left,r.debug("Scrolling left: ".concat(e.left))}a.current&&void 0!==e.top&&(a.current.scrollTop=e.top,r.debug("Scrolling top: ".concat(e.top))),r.debug("Scrolling, updating container, and viewport")}),[a,n,l,r]),c=o.useCallback((()=>null!==a&&void 0!==a&&a.current?{top:a.current.scrollTop,left:a.current.scrollLeft}:{top:0,left:0}),[a]);rb(e,{scroll:s,scrollToIndexes:g,getScrollPosition:c},"public")})(e,t),(e=>{const t=jf(e,"useGridColumnMenu"),n=o.useCallback((n=>{const o=qb(e),r=n;(!0!==o.open||r!==o.field)&&(e.current.setState((e=>e.columnMenu.open&&e.columnMenu.field===n?e:(t.debug("Opening Column Menu"),Sg({},e,{columnMenu:{open:!0,field:n}})))),e.current.hidePreferences())}),[e,t]),r=o.useCallback((()=>{const n=qb(e);if(n.field){const t=VC(e),o=xC(e),r=kC(e);let l=n.field;if(t[l]||(l=r[0]),!1===o[l]){const e=r.filter((e=>e===l||!1!==o[e])),t=e.indexOf(l);l=e[t+1]||e[t-1]}e.current.setColumnHeaderFocus(l)}const o={open:!1,field:void 0};(o.open!==n.open||o.field!==n.field)&&e.current.setState((e=>(t.debug("Hiding Column Menu"),Sg({},e,{columnMenu:o}))))}),[e,t]),l=o.useCallback((o=>{t.debug("Toggle Column Menu");const l=qb(e);l.open&&l.field===o?r():n(o)}),[e,t,n,r]);rb(e,{showColumnMenu:n,hideColumnMenu:r,toggleColumnMenu:l},"public"),fp(e,"columnResizeStart",r),fp(e,"virtualScrollerWheel",e.current.hideColumnMenu),fp(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)})(e),Gy(e,t),Ry(e,t),gy(e,t),Zv(e,t),function(e,t){vp(e,"columnHeaderClick",t.onColumnHeaderClick),vp(e,"columnHeaderContextMenu",t.onColumnHeaderContextMenu),vp(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),vp(e,"columnHeaderOver",t.onColumnHeaderOver),vp(e,"columnHeaderOut",t.onColumnHeaderOut),vp(e,"columnHeaderEnter",t.onColumnHeaderEnter),vp(e,"columnHeaderLeave",t.onColumnHeaderLeave),vp(e,"cellClick",t.onCellClick),vp(e,"cellDoubleClick",t.onCellDoubleClick),vp(e,"cellKeyDown",t.onCellKeyDown),vp(e,"preferencePanelClose",t.onPreferencePanelClose),vp(e,"preferencePanelOpen",t.onPreferencePanelOpen),vp(e,"menuOpen",t.onMenuOpen),vp(e,"menuClose",t.onMenuClose),vp(e,"rowDoubleClick",t.onRowDoubleClick),vp(e,"rowClick",t.onRowClick),vp(e,"stateChange",t.onStateChange)}(e,t),(e=>{const t=o.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.current.unstable_applyPipeProcessors("exportState",{},t)}),[e]),n=o.useCallback((t=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:t}).callbacks.forEach((e=>{e()}))}),[e]);rb(e,{exportState:t,restoreState:n},"public")})(e),function(e,t){const n=n=>{e.current.setState((e=>Sg({},e,{virtualization:Sg({},e.virtualization,{enabled:n,enabledForColumns:n,enabledForRows:n&&!t.autoHeight})})))},r={unstable_setVirtualization:n,unstable_setColumnVirtualization:t=>{e.current.setState((e=>Sg({},e,{virtualization:Sg({},e.virtualization,{enabledForColumns:t})})))}};rb(e,r,"public"),o.useEffect((()=>{n(!t.disableVirtualization)}),[t.disableVirtualization,t.autoHeight])}(e,t),function(e,t){const n=()=>{e.current.setState((t=>t.listViewColumn?Sg({},t,{listViewColumn:Sg({},t.listViewColumn,{computedWidth:oZ(e)})}):t))},r=o.useRef(null);fp(e,"viewportInnerSizeChange",(e=>{r.current!==e.width&&(r.current=e.width,n())})),fp(e,"columnVisibilityModelChange",n),up((()=>{const n=t.listViewColumn;n&&e.current.setState((t=>Sg({},t,{listViewColumn:Sg({},n,{computedWidth:oZ(e)})})))}),[e,t.listViewColumn]),o.useEffect((()=>{t.listView&&t.listViewColumn}),[t.listView,t.listViewColumn])}(e,t),CZ(e,t)};const AZ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=o.useContext(sc);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},mZ=Hd();const hZ=function(){return AZ(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mZ)};function bZ(){const e=hZ(uu);return e[Cu]||e}function fZ(e){const{theme:t,name:n,props:o}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Rp(t.components[n].defaultProps,o):o}const yZ={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",noColumnsOverlayLabel:"No columns",noColumnsOverlayManageColumns:"Manage columns",emptyPivotOverlayLabel:"Add fields to rows, columns, and values to create a pivot table",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>"".concat(e,1!==e?" active filters":" active filter"),toolbarQuickFilterPlaceholder:"Search\u2026",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",toolbarPivot:"Pivot",toolbarAssistant:"AI Assistant",columnsManagementSearchTitle:"Search",columnsManagementNoColumns:"No columns",columnsManagementShowHideAllText:"Show/Hide All",columnsManagementReset:"Reset",columnsManagementDeleteIconLabel:"Clear",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorDoesNotContain:"does not contain",filterOperatorEquals:"equals",filterOperatorDoesNotEqual:"does not equal",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorDoesNotContain:"Does not contain",headerFilterOperatorEquals:"Equals",headerFilterOperatorDoesNotEqual:"Does not equal",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",headerFilterClear:"Clear filter",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuAriaLabel:e=>"".concat(e," column menu"),columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnMenuManagePivot:"Manage pivot",columnHeaderFiltersTooltipActive:e=>"".concat(e,1!==e?" active filters":" active filter"),columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>"".concat(e.toLocaleString(),1!==e?" rows selected":" row selected"),footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>"".concat(e.toLocaleString()," of ").concat(t.toLocaleString()),checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>"Group by ".concat(e),unGroupColumn:e=>"Stop grouping by ".concat(e),detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",paginationRowsPerPage:"Rows per page:",paginationDisplayedRows:e=>{let{from:t,to:n,count:o,estimated:r}=e;if(!r)return"".concat(t,"\u2013").concat(n," of ").concat(-1!==o?o:"more than ".concat(n));const l=r&&r>n?"around ".concat(r):"more than ".concat(n);return"".concat(t,"\u2013").concat(n," of ").concat(-1!==o?o:l)},paginationItemAriaLabel:e=>"first"===e?"Go to first page":"last"===e?"Go to last page":"next"===e?"Go to next page":"Go to previous page",rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size",pivotToggleLabel:"Pivot",pivotRows:"Rows",pivotColumns:"Columns",pivotValues:"Values",pivotCloseButton:"Close pivot settings",pivotSearchButton:"Search fields",pivotSearchControlPlaceholder:"Search fields",pivotSearchControlLabel:"Search fields",pivotSearchControlClear:"Clear search",pivotNoFields:"No fields",pivotMenuMoveUp:"Move up",pivotMenuMoveDown:"Move down",pivotMenuMoveToTop:"Move to top",pivotMenuMoveToBottom:"Move to bottom",pivotMenuRows:"Rows",pivotMenuColumns:"Columns",pivotMenuValues:"Values",pivotMenuOptions:"Field options",pivotMenuAddToRows:"Add to Rows",pivotMenuAddToColumns:"Add to Columns",pivotMenuAddToValues:"Add to Values",pivotMenuRemove:"Remove",pivotDragToRows:"Drag here to create rows",pivotDragToColumns:"Drag here to create columns",pivotDragToValues:"Drag here to create values",pivotYearColumnHeaderName:"(Year)",pivotQuarterColumnHeaderName:"(Quarter)",aiAssistantPanelTitle:"AI Assistant",aiAssistantPanelClose:"Close AI Assistant",aiAssistantPanelNewConversation:"New conversation",aiAssistantPanelConversationHistory:"Conversation history",aiAssistantPanelEmptyConversation:"No prompt history",aiAssistantSuggestions:"Suggestions",promptFieldLabel:"Prompt",promptFieldPlaceholder:"Type a prompt\u2026",promptFieldPlaceholderWithRecording:"Type or record a prompt\u2026",promptFieldPlaceholderListening:"Listening for prompt\u2026",promptFieldSpeechRecognitionNotSupported:"Speech recognition is not supported in this browser",promptFieldSend:"Send",promptFieldRecord:"Record",promptFieldStopRecording:"Stop recording",promptRerun:"Run again",promptProcessing:"Processing\u2026",promptAppliedChanges:"Applied changes",promptChangeGroupDescription:e=>"Group by ".concat(e),promptChangeAggregationLabel:(e,t)=>"".concat(e," (").concat(t,")"),promptChangeAggregationDescription:(e,t)=>"Aggregate ".concat(e," (").concat(t,")"),promptChangeFilterLabel:(e,t,n)=>"is any of"===t?"".concat(e," is any of: ").concat(n):"".concat(e," ").concat(t," ").concat(n),promptChangeFilterDescription:(e,t,n)=>"is any of"===t?"Filter where ".concat(e," is any of: ").concat(n):"Filter where ".concat(e," ").concat(t," ").concat(n),promptChangeSortDescription:(e,t)=>"Sort by ".concat(e," (").concat(t,")"),promptChangePivotEnableLabel:"Pivot",promptChangePivotEnableDescription:"Enable pivot",promptChangePivotColumnsLabel:e=>"Columns (".concat(e,")"),promptChangePivotColumnsDescription:(e,t)=>"".concat(e).concat(t?" (".concat(t,")"):""),promptChangePivotRowsLabel:e=>"Rows (".concat(e,")"),promptChangePivotValuesLabel:e=>"Values (".concat(e,")"),promptChangePivotValuesDescription:(e,t)=>"".concat(e," (").concat(t,")")},vZ=["field","type","align","width","height","empty","style","className"],ZZ="1.3em",GZ=[40,80],SZ={number:[40,60],string:[40,80],date:[40,60],dateTime:[60,80],singleSelect:[40,80]},BZ=function(e){const t=function(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}}(e);return(e,n)=>e+(n-e)*t()}(12345);const wZ=Yg((function(e){const{field:t,type:n,align:r,width:l,height:a,empty:i=!1,style:g,className:s}=e,c=Wg(e,vZ),d=Qu(),I=(e=>{const{align:t,classes:n,empty:o}=e;return Ng({root:["cell","cellSkeleton","cell--text".concat(t?Jg(t):"Left"),o&&"cellEmpty"]},Zu,n)})({classes:d.classes,align:r,empty:i}),u=o.useMemo((()=>{var e;if("boolean"===n||"actions"===n)return{variant:"circular",width:ZZ,height:ZZ};const[t,o]=n&&null!==(e=SZ[n])&&void 0!==e?e:GZ;return{variant:"text",width:"".concat(Math.round(BZ(t,o)),"%"),height:"1.2em"}}),[n]);return(0,ao.jsx)("div",Sg({"data-field":t,className:Vg(I.root,s),style:Sg({height:a,maxWidth:l,minWidth:l},g)},c,{children:!i&&(0,ao.jsx)(d.slots.baseSkeleton,Sg({},u))}))})),RZ=["className"],WZ=ep("div",{name:"MuiDataGrid",slot:"IconButtonContainer"})((()=>({display:"flex",visibility:"hidden",width:0}))),kZ=Rg((function(e,t){const{className:n}=e,o=Wg(e,RZ),r=Qu(),l=(e=>{const{classes:t}=e;return Ng({root:["iconButtonContainer"]},Zu,t)})(r);return(0,ao.jsx)(WZ,Sg({className:Vg(l.root,n),ownerState:r},o,{ref:t}))}));function VZ(e){var t,n;const{counter:r,field:l,onClick:a}=e,i=UC(),g=Qu(),s=(e=>{const{classes:t}=e;return Ng({icon:["filterIcon"]},Zu,t)})(Sg({},e,{classes:g.classes})),c=rA(),d=Mu(i,DC,c),I=rA(),u=o.useCallback((e=>{e.preventDefault(),e.stopPropagation();const{open:t,openedPanelValue:n}=jC(i);t&&n===TC.filters?i.current.hideFilterPanel():i.current.showFilterPanel(void 0,I,c),a&&a(i.current.getColumnHeaderParams(l),e)}),[i,l,a,I,c]);if(!r)return null;const C=(0,ao.jsx)(g.slots.baseIconButton,Sg({id:c,onClick:u,"aria-label":i.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":d,"aria-controls":d?I:void 0},null===(t=g.slotProps)||void 0===t?void 0:t.baseIconButton,{children:(0,ao.jsx)(g.slots.columnFilteredIcon,{className:s.icon,fontSize:"small"})}));return(0,ao.jsx)(g.slots.baseTooltip,Sg({title:i.current.getLocaleText("columnHeaderFiltersTooltipActive")(r),enterDelay:1e3},null===(n=g.slotProps)||void 0===n?void 0:n.baseTooltip,{children:(0,ao.jsxs)(kZ,{children:[r>1&&(0,ao.jsx)(g.slots.baseBadge,{badgeContent:r,color:"default",children:C}),1===r&&C]})}))}const XZ=["sortingOrder"],xZ=o.memo((function(e){const{sortingOrder:t}=e,n=Wg(e,XZ),o=Qu(),[r]=t,l="asc"===r?o.slots.columnSortedAscendingIcon:o.slots.columnSortedDescendingIcon;return l?(0,ao.jsx)(l,Sg({},n)):null}));const JZ=["direction","index","sortingOrder","disabled","className"],NZ=ep(Wp,{name:"MuiDataGrid",slot:"SortButton"})({transition:Ru.transition(["opacity"],{duration:Ru.transitions.duration.short,easing:Ru.transitions.easing.easeInOut})});function HZ(e){var t;const{direction:n,index:r,sortingOrder:l,disabled:a,className:i}=e,g=Wg(e,JZ),s=UC(),c=Qu(),d=Sg({},e,{classes:c.classes}),I=(e=>{const{classes:t}=e;return Ng({root:["sortButton"],icon:["sortIcon"]},Zu,t)})(d),u=function(e,t,n,o){let r;const l={};return"asc"===t?r=e.columnSortedAscendingIcon:"desc"===t?r=e.columnSortedDescendingIcon:(r=xZ,l.sortingOrder=o),r?(0,ao.jsx)(r,Sg({fontSize:"small",className:n},l)):null}(c.slots,n,I.icon,l);if(!u)return null;const C=(0,ao.jsx)(NZ,Sg({as:c.slots.baseIconButton,ownerState:d,"aria-label":s.current.getLocaleText("columnHeaderSortIconLabel"),title:s.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",disabled:a,className:Vg(I.root,i)},null===(t=c.slotProps)||void 0===t?void 0:t.baseIconButton,g,{children:u}));return(0,ao.jsxs)(o.Fragment,{children:[null!=r&&(0,ao.jsx)(c.slots.baseBadge,{badgeContent:r,color:"default",overlap:"circular",children:C}),null==r&&C]})}function FZ(e){return(0,ao.jsx)(kZ,{children:(0,ao.jsx)(HZ,Sg({},e,{tabIndex:-1}))})}const YZ=o.memo(FZ);const KZ=["className","selectedRowCount"],MZ=ep("div",{name:"MuiDataGrid",slot:"SelectedRowCount"})({alignItems:"center",display:"flex",margin:Ru.spacing(0,2),visibility:"hidden",width:0,height:0,[Ru.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}}),LZ=Rg((function(e,t){const{className:n,selectedRowCount:o}=e,r=Wg(e,KZ),l=UC(),a=Qu(),i=(e=>{const{classes:t}=e;return Ng({root:["selectedRowCount"]},Zu,t)})(a),g=l.current.getLocaleText("footerRowSelected")(o);return(0,ao.jsx)(MZ,Sg({className:Vg(i.root,n),ownerState:a},r,{ref:t,children:g}))}));const EZ=["className"],zZ=ep("div",{name:"MuiDataGrid",slot:"FooterContainer"})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),jZ=Rg((function(e,t){const{className:n}=e,o=Wg(e,EZ),r=Qu(),l=(e=>{const{classes:t}=e;return Ng({root:["footerContainer","withBorderColor"]},Zu,t)})(r);return(0,ao.jsx)(zZ,Sg({className:Vg(l.root,n),ownerState:r},o,{ref:t}))}));const DZ=Rg((function(e,t){var n;const o=UC(),r=Qu(),l=Mu(o,Hp),a=Mu(o,Wb),i=Mu(o,Wh),g=!r.hideFooterSelectedRowCount&&a>0?(0,ao.jsx)(LZ,{selectedRowCount:a}):(0,ao.jsx)("div",{}),s=r.hideFooterRowCount||r.pagination?null:(0,ao.jsx)(r.slots.footerRowCount,Sg({},null===(n=r.slotProps)||void 0===n?void 0:n.footerRowCount,{rowCount:l,visibleRowCount:i})),c=r.pagination&&!r.hideFooterPagination&&r.slots.pagination&&(0,ao.jsx)(r.slots.pagination,{});return(0,ao.jsxs)(jZ,Sg({},e,{ref:t,children:[g,s,c]}))}));const TZ=["className","rowCount","visibleRowCount"],PZ=ep("div",{name:"MuiDataGrid",slot:"RowCount"})({alignItems:"center",display:"flex",margin:Ru.spacing(0,2)}),UZ=Rg((function(e,t){const{className:n,rowCount:o,visibleRowCount:r}=e,l=Wg(e,TZ),a=UC(),i=Qu(),g=(e=>{const{classes:t}=e;return Ng({root:["rowCount"]},Zu,t)})(i);if(0===o)return null;const s=r<o?a.current.getLocaleText("footerTotalVisibleRows")(r,o):o.toLocaleString();return(0,ao.jsxs)(PZ,Sg({className:Vg(g.root,n),ownerState:i},l,{ref:t,children:[a.current.getLocaleText("footerTotalRows")," ",s]}))}));const QZ=["className"],OZ=ep("div",{name:"MuiDataGrid",slot:"Overlay"})({width:"100%",height:"100%",display:"flex",gap:Ru.spacing(1),flexDirection:"column",alignSelf:"center",alignItems:"center",justifyContent:"center",textAlign:"center",textWrap:"balance",backgroundColor:Ru.colors.background.backdrop}),qZ=Rg((function(e,t){const{className:n}=e,o=Wg(e,QZ),r=Qu(),l=(e=>{const{classes:t}=e;return Ng({root:["overlay"]},Zu,t)})(r);return(0,ao.jsx)(OZ,Sg({className:Vg(l.root,n),ownerState:r},o,{ref:t}))}));const _Z=(e,t,n,o,r,l)=>{let a;switch(e){case cm.LEFT:a=o[n];break;case cm.RIGHT:a=r-o[n]-t+l;break;default:a=void 0}return a},$Z=(e,t,n,o,r)=>{const l=t===n-1;return!(e!==cm.LEFT||!l)||!!o&&(e===cm.LEFT||(e===cm.RIGHT?!l:!l||r))},eG=(e,t)=>e===cm.RIGHT&&0===t,tG={root:Gu.scrollbarFiller,header:Gu["scrollbarFiller--header"],borderTop:Gu["scrollbarFiller--borderTop"],borderBottom:Gu["scrollbarFiller--borderBottom"],pinnedRight:Gu["scrollbarFiller--pinnedRight"]};function nG(e){let{header:t,borderTop:n=!0,borderBottom:o,pinnedRight:r}=e;return(0,ao.jsx)("div",{role:"presentation",className:Vg(tG.root,t&&tG.header,n&&tG.borderTop,o&&tG.borderBottom,r&&tG.pinnedRight)})}const oG=(e,t)=>{if(e)if(t){if(e===cm.LEFT)return"right";if(e===cm.RIGHT)return"left"}else{if(e===cm.LEFT)return"left";if(e===cm.RIGHT)return"right"}};function rG(e,t,n,o){const r=oG(n,t);return r&&void 0!==o?(e[r]=o,e):e}const lG=["skeletonRowsCount","visibleColumns","showFirstRowBorder"],aG=ep("div",{name:"MuiDataGrid",slot:"SkeletonLoadingOverlay"})({minWidth:"100%",width:"max-content",height:"100%",overflow:"clip"}),iG=e=>parseInt(e.getAttribute("data-colindex"),10),gG=Rg((function(e,t){const n=Qu(),{slots:r}=n,l=Ym(),a=(e=>{const{classes:t}=e;return Ng({root:["skeletonLoadingOverlay"]},Zu,t)})({classes:n.classes}),i=o.useRef(null),g=Xg(i,t),s=UC(),c=Mu(s,tp),d=Mu(s,np),I=Mu(s,MC),u=o.useMemo((()=>I.filter((e=>e<=d)).length),[d,I]),{skeletonRowsCount:C,visibleColumns:p,showFirstRowBorder:A}=e,m=Wg(e,lG),h=Mu(s,NC),b=o.useMemo((()=>h.slice(0,u)),[h,u]),f=Mu(s,YC),y=o.useCallback((e=>-1!==f.left.findIndex((t=>t.field===e))?cm.LEFT:-1!==f.right.findIndex((t=>t.field===e))?cm.RIGHT:void 0),[f.left,f.right]),v=o.useMemo((()=>{const e=[];for(let t=0;t<C;t+=1){const o=[];for(let e=0;e<b.length;e+=1){const a=b[e],i=y(a.field),g=i===cm.LEFT,s=i===cm.RIGHT,d=oG(i,l),u=d?f[d].length:b.length-f.left.length-f.right.length,C=d?f[d].findIndex((e=>e.field===a.field)):e-f.left.length,A=c.hasScrollY?c.scrollbarSize:0,m=rG({},l,i,_Z(i,a.computedWidth,e,I,c.columnsTotalWidth,A)),h=c.columnsTotalWidth<c.viewportOuterSize.width,v=$Z(i,C,u,n.showCellVerticalBorder,h),Z=eG(i,C),G=e===b.length-1,S=s&&0===C,B=S&&h,w=G&&!S&&h,R=c.viewportOuterSize.width-c.columnsTotalWidth,W=Math.max(0,R),k=(0,ao.jsx)(r.skeletonCell,{width:W,empty:!0},"skeleton-filler-column-".concat(t)),V=G&&0!==A;B&&o.push(k),o.push((0,ao.jsx)(r.skeletonCell,{field:a.field,type:a.type,align:a.align,width:"var(--width)",height:c.rowHeight,"data-colindex":e,empty:p&&!p.has(a.field),className:Vg(g&&Gu["cell--pinnedLeft"],s&&Gu["cell--pinnedRight"],v&&Gu["cell--withRightBorder"],Z&&Gu["cell--withLeftBorder"]),style:Sg({"--width":"".concat(a.computedWidth,"px")},m)},"skeleton-column-".concat(t,"-").concat(a.field))),w&&o.push(k),V&&o.push((0,ao.jsx)(nG,{pinnedRight:f.right.length>0},"skeleton-scrollbar-filler-".concat(t)))}e.push((0,ao.jsx)("div",{className:Vg(Gu.row,Gu.rowSkeleton,0===t&&!A&&Gu["row--firstVisible"]),children:o},"skeleton-row-".concat(t)))}return e}),[C,b,y,l,f,c.hasScrollY,c.scrollbarSize,c.columnsTotalWidth,c.viewportOuterSize.width,c.rowHeight,I,n.showCellVerticalBorder,r,p,A]);return fp(s,"columnResize",(e=>{var t;const{colDef:n,width:o}=e,r=null===(t=i.current)||void 0===t?void 0:t.querySelectorAll('[data-field="'.concat(Hy(n.field),'"]'));if(!r)throw new Error("MUI X: Expected skeleton cells to be defined with `data-field` attribute.");const l=b.findIndex((e=>e.field===n.field)),a=y(n.field),g=a===cm.LEFT,s=a===cm.RIGHT,c=getComputedStyle(r[0]).getPropertyValue("--width"),d=parseInt(c,10)-o;if(r&&r.forEach((e=>{e.style.setProperty("--width","".concat(o,"px"))})),g){var I;const e=null===(I=i.current)||void 0===I?void 0:I.querySelectorAll(".".concat(Gu["cell--pinnedLeft"]));null===e||void 0===e||e.forEach((e=>{iG(e)>l&&(e.style.left="".concat(parseInt(getComputedStyle(e).left,10)-d,"px"))}))}if(s){var u;const e=null===(u=i.current)||void 0===u?void 0:u.querySelectorAll(".".concat(Gu["cell--pinnedRight"]));null===e||void 0===e||e.forEach((e=>{iG(e)<l&&(e.style.right="".concat(parseInt(getComputedStyle(e).right,10)+d,"px"))}))}})),(0,ao.jsx)(aG,Sg({className:a.root},m,{ref:g,children:v}))}));const sG=Rg((function(e,t){var n;const o=UC(),r=Mu(o,tp),l=null!==(n=null===r||void 0===r?void 0:r.viewportInnerSize.height)&&void 0!==n?n:0,a=Math.ceil(l/r.rowHeight);return(0,ao.jsx)(gG,Sg({},e,{skeletonRowsCount:a,ref:t}))}));const cG=["variant","noRowsVariant","style"],dG={"circular-progress":{component:e=>e.slots.baseCircularProgress,style:{}},"linear-progress":{component:e=>e.slots.baseLinearProgress,style:{display:"block"}},skeleton:{component:()=>sG,style:{display:"block"}}},IG=Rg((function(e,t){const{variant:n="linear-progress",noRowsVariant:o="skeleton",style:r}=e,l=Wg(e,cG),a=UC(),i=Qu(),g=Mu(a,Jp),s=dG[0===g?o:n],c=s.component(i);return(0,ao.jsx)(qZ,Sg({style:Sg({},s.style,r)},l,{ref:t,children:(0,ao.jsx)(c,{})}))}));const uG=Rg((function(e,t){const n=UC().current.getLocaleText("noRowsLabel");return(0,ao.jsx)(qZ,Sg({},e,{ref:t,children:n}))}));const CG=Rg((function(e,t){var n;const o=Qu(),r=UC(),l=Mu(r,kC),a=!o.disableColumnSelector&&l.length>0;return(0,ao.jsxs)(qZ,Sg({},e,{ref:t,children:[r.current.getLocaleText("noColumnsOverlayLabel"),a&&(0,ao.jsx)(o.slots.baseButton,Sg({size:"small"},null===(n=o.slotProps)||void 0===n?void 0:n.baseButton,{onClick:()=>{r.current.showPreferences(TC.columns)},children:r.current.getLocaleText("noColumnsOverlayManageColumns")}))]}))}));const pG=mu(Wp)({maxHeight:"calc(100% + 1px)",flexGrow:1});const AG=["className"],mG=ep("div",{name:"MuiDataGrid",slot:"PanelContent"})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400,padding:Ru.spacing(2.5,1.5,2,1),gap:Ru.spacing(2.5)});function hG(e){const{className:t}=e,n=Wg(e,AG),o=Qu(),r=(e=>{const{classes:t}=e;return Ng({root:["panelContent"]},Zu,t)})(o);return(0,ao.jsx)(mG,Sg({className:Vg(r.root,t),ownerState:o},n))}const bG=["className"],fG=mu("div",{name:"MuiDataGrid",slot:"PanelFooter"})({padding:Ru.spacing(1),display:"flex",justifyContent:"space-between",borderTop:"1px solid ".concat(Ru.colors.border.base)});function yG(e){const{className:t}=e,n=Wg(e,bG),o=Qu(),r=(e=>{const{classes:t}=e;return Ng({root:["panelFooter"]},Zu,t)})(o);return(0,ao.jsx)(fG,Sg({className:Vg(r.root,t),ownerState:o},n))}const vG=["className"],ZG=mu("div",{name:"MuiDataGrid",slot:"PanelWrapper"})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),GG=Rg((function(e,t){const{className:n}=e,o=Wg(e,vG),r=Qu(),l=(e=>{const{classes:t}=e;return Ng({root:["panelWrapper"]},Zu,t)})(r);return(0,ao.jsx)(ZG,Sg({tabIndex:-1,className:Vg(l.root,n),ownerState:r},o,{ref:t}))}));const SG=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","readOnly","children"],BG=["InputComponentProps"],wG=mu("div",{name:"MuiDataGrid",slot:"FilterForm"})({display:"flex",gap:Ru.spacing(1.5)}),RG=mu("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon"})({flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center"}),WG=mu("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput"})({minWidth:75,justifyContent:"end"}),kG=mu("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput"})({width:150}),VG=mu("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput"})({width:150}),XG=mu("div",{name:"MuiDataGrid",slot:"FilterFormValueInput"})({width:190}),xG=e=>e.headerName||e.field,JG=new Intl.Collator,NG=Rg((function(e,t){var n,r,l,a,i,g,s,c,d;const{item:I,hasMultipleFilters:u,deleteFilter:C,applyFilterChanges:p,showMultiFilterOperators:A,disableMultiFilterOperator:m,applyMultiFilterOperatorChanges:h,focusElementRef:b,logicOperators:f=[pA.And,pA.Or],columnsSort:y,filterColumns:v,deleteIconProps:Z={},logicOperatorInputProps:G={},operatorInputProps:S={},columnInputProps:B={},valueInputProps:w={},readOnly:R}=e,W=Wg(e,SG),k=UC(),V=Mu(k,VC),X=Mu(k,LC),x=Mu(k,bh),J=rA(),N=rA(),H=rA(),F=rA(),Y=Qu(),K=(e=>{const{classes:t}=e;return Ng({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Zu,t)})(Y),M=o.useRef(null),L=o.useRef(null),E=null!==(n=x.logicOperator)&&void 0!==n?n:pA.And,z=u&&f.length>0,j=null!==(l=((null===(r=Y.slotProps)||void 0===r?void 0:r.baseSelect)||{}).native)&&void 0!==l&&l,D=(null===(a=Y.slotProps)||void 0===a?void 0:a.baseSelectOption)||{},{InputComponentProps:T}=w,P=Wg(w,BG),U=Mu(k,Ub),Q=Mu(k,Ob),{filteredColumns:O,selectedField:q}=o.useMemo((()=>{let e=I.field;const t=!1===V[I.field].filterable?V[I.field]:null;if(t)return{filteredColumns:[t],selectedField:e};if(U)return{filteredColumns:X.filter((e=>void 0!==Q.get(e.field))),selectedField:e};if(void 0===v||"function"!==typeof v)return{filteredColumns:X,selectedField:e};const n=v({field:I.field,columns:X,currentFilters:(null===x||void 0===x?void 0:x.items)||[]});return{filteredColumns:X.filter((t=>{const o=n.includes(t.field);return t.field!==I.field||o||(e=void 0),o})),selectedField:e}}),[I.field,V,U,v,X,null===x||void 0===x?void 0:x.items,Q]),_=o.useMemo((()=>{switch(y){case"asc":return O.sort(((e,t)=>JG.compare(xG(e),xG(t))));case"desc":return O.sort(((e,t)=>-JG.compare(xG(e),xG(t))));default:return O}}),[O,y]),$=I.field?k.current.getColumn(I.field):null,ee=o.useMemo((()=>{var e;return I.operator&&$?null===(e=$.filterOperators)||void 0===e?void 0:e.find((e=>e.value===I.operator)):null}),[I,$]),te=o.useCallback((e=>{const t=e.target.value,n=k.current.getColumn(t);if(n.field===$.field)return;const o=n.filterOperators.find((e=>e.value===I.operator))||n.filterOperators[0];let r=!o.InputComponent||o.InputComponent!==(null===ee||void 0===ee?void 0:ee.InputComponent)||n.type!==$.type?void 0:I.value;if("singleSelect"===n.type&&void 0!==r){const e=n,t=Bm(e);Array.isArray(r)?r=r.filter((n=>void 0!==wm(n,t,null===e||void 0===e?void 0:e.getOptionValue))):void 0===wm(I.value,t,null===e||void 0===e?void 0:e.getOptionValue)&&(r=void 0)}p(Sg({},I,{field:t,operator:o.value,value:r}))}),[k,p,I,$,ee]),ne=o.useCallback((e=>{const t=e.target.value,n=null===$||void 0===$?void 0:$.filterOperators.find((e=>e.value===t)),o=!(null!==n&&void 0!==n&&n.InputComponent)||(null===n||void 0===n?void 0:n.InputComponent)!==(null===ee||void 0===ee?void 0:ee.InputComponent);p(Sg({},I,{operator:t,value:o?void 0:I.value}))}),[p,I,$,ee]),oe=o.useCallback((e=>{const t=e.target.value===pA.And.toString()?pA.And:pA.Or;h(t)}),[h]);return o.useImperativeHandle(b,(()=>({focus:()=>{var e;null!==ee&&void 0!==ee&&ee.InputComponent?null===M||void 0===M||null===(e=M.current)||void 0===e||e.focus():L.current.focus()}})),[ee]),(0,ao.jsxs)(wG,Sg({className:K.root,"data-id":I.id,ownerState:Y},W,{ref:t,children:[(0,ao.jsx)(RG,Sg({},Z,{className:Vg(K.deleteIcon,Z.className),ownerState:Y,children:(0,ao.jsx)(Y.slots.baseIconButton,Sg({"aria-label":k.current.getLocaleText("filterPanelDeleteIconLabel"),title:k.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:()=>{C(I)},size:"small",disabled:R},null===(i=Y.slotProps)||void 0===i?void 0:i.baseIconButton,{children:(0,ao.jsx)(Y.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),(0,ao.jsx)(WG,Sg({as:Y.slots.baseSelect,sx:[z?{display:"flex"}:{display:"none"},A?{visibility:"visible"}:{visibility:"hidden"},G.sx],className:Vg(K.logicOperatorInput,G.className),ownerState:Y},G,{size:"small",slotProps:{htmlInput:{"aria-label":k.current.getLocaleText("filterPanelLogicOperator")}},value:null!==E&&void 0!==E?E:"",onChange:oe,disabled:!!m||1===f.length,native:j},null===(g=Y.slotProps)||void 0===g?void 0:g.baseSelect,{children:f.map((e=>(0,o.createElement)(Y.slots.baseSelectOption,Sg({},D,{native:j,key:e.toString(),value:e.toString()}),k.current.getLocaleText((e=>{switch(e){case pA.And:return"filterPanelOperatorAnd";case pA.Or:return"filterPanelOperatorOr";default:throw new Error("MUI X: Invalid `logicOperator` property in the `GridFilterPanel`.")}})(e)))))})),(0,ao.jsx)(kG,Sg({as:Y.slots.baseSelect},B,{className:Vg(K.columnInput,B.className),ownerState:Y,size:"small",labelId:N,id:J,label:k.current.getLocaleText("filterPanelColumns"),value:null!==q&&void 0!==q?q:"",onChange:te,native:j,disabled:R},null===(s=Y.slotProps)||void 0===s?void 0:s.baseSelect,{children:_.map((e=>(0,o.createElement)(Y.slots.baseSelectOption,Sg({},D,{native:j,key:e.field,value:e.field}),xG(e))))})),(0,ao.jsx)(VG,Sg({as:Y.slots.baseSelect,size:"small"},S,{className:Vg(K.operatorInput,S.className),ownerState:Y,labelId:F,label:k.current.getLocaleText("filterPanelOperator"),id:H,value:I.operator,onChange:ne,native:j,inputRef:L,disabled:R},null===(c=Y.slotProps)||void 0===c?void 0:c.baseSelect,{children:null===$||void 0===$||null===(d=$.filterOperators)||void 0===d?void 0:d.map((e=>(0,o.createElement)(Y.slots.baseSelectOption,Sg({},D,{native:j,key:e.value,value:e.value}),e.label||k.current.getLocaleText("filterOperator".concat(Jg(e.value))))))})),(0,ao.jsx)(XG,Sg({},P,{className:Vg(K.valueInput,P.className),ownerState:Y,children:null!==ee&&void 0!==ee&&ee.InputComponent?(0,ao.jsx)(ee.InputComponent,Sg({apiRef:k,item:I,applyValue:p,focusElementRef:M,disabled:R,slotProps:{root:{size:"small"}}},ee.InputComponentProps,T),I.field):null}))]}))}));const HG=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],FG=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}),YG=Rg((function(e,t){var n,r;const l=UC(),a=Qu(),i=Mu(l,bh),g=Mu(l,LC),s=Mu(l,EC),c=o.useRef(null),d=o.useRef(null),{logicOperators:I=[pA.And,pA.Or],columnsSort:u,filterFormProps:C,getColumnForNewFilter:p,disableAddFilterButton:A=!1,disableRemoveAllButton:m=!1}=e,h=Wg(e,HG),b=l.current.upsertFilterItem,f=o.useCallback((e=>{l.current.setFilterLogicOperator(e)}),[l]),y=o.useCallback((()=>{let e;if(p&&"function"===typeof p){const t=p({currentFilters:(null===i||void 0===i?void 0:i.items)||[],columns:g});if(null===t)return null;e=g.find((e=>{let{field:n}=e;return n===t}))}else e=g.find((e=>{var t;return null===(t=e.filterOperators)||void 0===t?void 0:t.length}));return e?FG(e):null}),[null===i||void 0===i?void 0:i.items,g,p]),v=o.useCallback((()=>{if(void 0===p||"function"!==typeof p)return y();const e=i.items.length?i.items:[y()].filter(Boolean),t=p({currentFilters:e,columns:g});if(null===t)return null;const n=g.find((e=>{let{field:n}=e;return n===t}));return n?FG(n):null}),[i.items,g,p,y]),Z=o.useMemo((()=>i.items.length?i.items:(d.current||(d.current=y()),d.current?[d.current]:[])),[i.items,y]),G=Z.length>1,{readOnlyFilters:S,validFilters:B}=o.useMemo((()=>Z.reduce(((e,t)=>(s[t.field]?e.validFilters.push(t):e.readOnlyFilters.push(t),e)),{readOnlyFilters:[],validFilters:[]})),[Z,s]),w=o.useCallback((()=>{const e=v();e&&l.current.upsertFilterItems([...Z,e])}),[l,v,Z]),R=o.useCallback((e=>{const t=1===B.length;l.current.deleteFilterItem(e),t&&l.current.hideFilterPanel()}),[l,B.length]),W=o.useCallback((()=>1===B.length&&void 0===B[0].value?(l.current.deleteFilterItem(B[0]),l.current.hideFilterPanel()):l.current.setFilterModel(Sg({},i,{items:S}),"removeAllFilterItems")),[l,S,i,B]);return o.useEffect((()=>{I.length>0&&i.logicOperator&&!I.includes(i.logicOperator)&&f(I[0])}),[I,f,i.logicOperator]),o.useEffect((()=>{B.length>0&&c.current.focus()}),[B.length]),(0,ao.jsxs)(GG,Sg({},h,{ref:t,children:[(0,ao.jsxs)(hG,{children:[S.map(((e,t)=>(0,ao.jsx)(NG,Sg({item:e,applyFilterChanges:b,deleteFilter:R,hasMultipleFilters:G,showMultiFilterOperators:t>0,disableMultiFilterOperator:1!==t,applyMultiFilterOperatorChanges:f,focusElementRef:null,readOnly:!0,logicOperators:I,columnsSort:u},C),null==e.id?t:e.id))),B.map(((e,t)=>(0,ao.jsx)(NG,Sg({item:e,applyFilterChanges:b,deleteFilter:R,hasMultipleFilters:G,showMultiFilterOperators:S.length+t>0,disableMultiFilterOperator:S.length+t!==1,applyMultiFilterOperatorChanges:f,focusElementRef:t===B.length-1?c:null,logicOperators:I,columnsSort:u},C),null==e.id?t+S.length:e.id)))]}),a.disableMultipleColumnsFiltering||A&&m?null:(0,ao.jsxs)(yG,{children:[A?(0,ao.jsx)("span",{}):(0,ao.jsx)(a.slots.baseButton,Sg({onClick:w,startIcon:(0,ao.jsx)(a.slots.filterPanelAddIcon,{})},null===(n=a.slotProps)||void 0===n?void 0:n.baseButton,{children:l.current.getLocaleText("filterPanelAddFilter")})),!m&&B.length>0?(0,ao.jsx)(a.slots.baseButton,Sg({onClick:W,startIcon:(0,ao.jsx)(a.slots.filterPanelRemoveAllIcon,{})},null===(r=a.slotProps)||void 0===r?void 0:r.baseButton,{children:l.current.getLocaleText("filterPanelRemoveAll")})):null]})]}))}));function KG(e){return yu("MuiInputBase",e)}const MG=vu("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),LG=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1;function EG(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n(219);var zG=function(e,t){var n=arguments;if(null==t||!cc.call(t,"css"))return o.createElement.apply(void 0,n);var r=n.length,l=new Array(r);l[0]=Cc,l[1]=function(e,t){var n={};for(var o in t)cc.call(t,o)&&(n[o]=t[o]);return n[dc]=e,n}(e,t);for(var a=2;a<r;a++)l[a]=n[a];return o.createElement.apply(null,l)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(zG||(zG={}));var jG=gc((function(e,t){var n=oc([e.styles],void 0,o.useContext(sc)),r=o.useRef();return ac((function(){var e=t.key+"-global",o=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),null!==a&&(l=!0,a.setAttribute("data-emotion",e),o.hydrate([a])),r.current=[o,l],function(){o.flush()}}),[t]),ac((function(){var e=r.current,o=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&Ds(t,n.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}t.insert("",n,o,!1)}}),[t,n.name]),null}));function DG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oc(t)}function TG(){var e=DG.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var PG;const UG=["children"],QG=TG({from:{opacity:0},to:{opacity:1}}),OG=TG({"from, to":{"--scrollable":'" "'}}),qG=ep("div",{name:"MuiDataGrid",slot:"ShadowScrollArea"})(PG||(PG=EG(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  animation: ",";\n  animation-timeline: --scroll-timeline;\n  animation-fill-mode: none;\n  box-sizing: border-box;\n  overflow: auto;\n  scrollbar-width: thin;\n  scroll-timeline: --scroll-timeline block;\n\n  &::before,\n  &::after {\n    content: '';\n    flex-shrink: 0;\n    display: block;\n    position: sticky;\n    left: 0;\n    width: 100%;\n    height: 4px;\n    animation: "," linear both;\n    animation-timeline: --scroll-timeline;\n\n    // Custom property toggle trick:\n    // - Detects if the element is scrollable\n    // - https://css-tricks.com/the-css-custom-property-toggle-trick/\n    --visibility-scrollable: var(--scrollable) visible;\n    --visibility-not-scrollable: hidden;\n    visibility: var(--visibility-scrollable, var(--visibility-not-scrollable));\n  }\n\n  &::before {\n    top: 0;\n    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.05) 0, transparent 100%);\n    animation-range: 0 4px;\n  }\n\n  &::after {\n    bottom: 0;\n    background: linear-gradient(to top, rgba(0, 0, 0, 0.05) 0, transparent 100%);\n    animation-direction: reverse;\n    animation-range: calc(100% - 4px) 100%;\n  }\n"])),OG,QG),_G=Rg((function(e,t){const{children:n}=e,o=Wg(e,UG);return(0,ao.jsx)(qG,Sg({},o,{ref:t,children:n}))}));const $G=new Intl.Collator;const eS=mu("div",{name:"MuiDataGrid",slot:"ColumnsManagement"})({display:"flex",flexDirection:"column",padding:Ru.spacing(.5,1.5)}),tS=mu(_G,{name:"MuiDataGrid",slot:"ColumnsManagementScrollArea"})({maxHeight:300}),nS=mu("div",{name:"MuiDataGrid",slot:"ColumnsManagementHeader"})({padding:Ru.spacing(1.5,2),borderBottom:"1px solid ".concat(Ru.colors.border.base)}),oS=mu(Wp,{name:"MuiDataGrid",slot:"ColumnsManagementSearchInput"})({["& .".concat(MG.input,"::-webkit-search-decoration,\n      & .").concat(MG.input,"::-webkit-search-cancel-button,\n      & .").concat(MG.input,"::-webkit-search-results-button,\n      & .").concat(MG.input,"::-webkit-search-results-decoration")]:{display:"none"}}),rS=mu("div",{name:"MuiDataGrid",slot:"ColumnsManagementFooter"})({padding:Ru.spacing(1,1,1,1.5),display:"flex",justifyContent:"space-between",borderTop:"1px solid ".concat(Ru.colors.border.base)}),lS=mu("div",{name:"MuiDataGrid",slot:"ColumnsManagementEmptyText"})({padding:Ru.spacing(1,0),alignSelf:"center",font:Ru.typography.font.body}),aS=["children","className","classes","onClose"],iS=vu("MuiDataGrid",["panel","paper"]),gS=mu(Wp,{name:"MuiDataGrid",slot:"panel"})({zIndex:Ru.zIndex.panel}),sS=mu("div",{name:"MuiDataGrid",slot:"panelContent"})({backgroundColor:Ru.colors.background.overlay,borderRadius:Ru.radius.base,boxShadow:Ru.shadows.overlay,display:"flex",maxWidth:"calc(100vw - ".concat(Ru.spacing(2),")"),overflow:"auto"}),cS=Rg(((e,t)=>{var n,r;const{children:l,className:a,onClose:i}=e,g=Wg(e,aS),s=UC(),c=Qu(),d=iS,[I,u]=o.useState(!1),C=$u(),p=Cp((()=>u(!0))),A=Cp((()=>u(!1))),m=Cp((()=>{null===i||void 0===i||i()})),h=Cp((e=>{"Escape"===e.key&&(null===i||void 0===i||i())})),[b,f]=o.useState(null);return o.useEffect((()=>{var e;const t=null===(e=s.current.rootElementRef)||void 0===e||null===(e=e.current)||void 0===e?void 0:e.querySelector('[data-id="gridPanelAnchor"]');t&&f(t)}),[s]),b?(0,ao.jsx)(gS,Sg({as:c.slots.basePopper,ownerState:c,placement:"bottom-end",className:Vg(d.panel,a,C),flip:!0,onDidShow:p,onDidHide:A,onClickAway:m,clickAwayMouseEvent:"onPointerUp",clickAwayTouchEvent:!1,focusTrap:!0},g,null===(n=c.slotProps)||void 0===n?void 0:n.basePopper,{target:null!==(r=e.target)&&void 0!==r?r:b,ref:t,children:(0,ao.jsx)(sS,{className:d.paper,ownerState:c,onKeyDown:h,children:I&&l})})):null}));const dS=["selected","rowId","row","index","style","rowHeight","className","visibleColumns","pinnedColumns","offsetLeft","columnsTotalWidth","firstColumnIndex","lastColumnIndex","focusedColumnIndex","isFirstVisible","isLastVisible","isNotVisible","showBottomBorder","scrollbarWidth","gridHasFiller","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"],IS=mC(qy,((e,t)=>{if(!t)return!1;return!!Ih(e)})),uS=Rg((function(e,t){const{selected:n,rowId:r,row:l,index:a,style:i,rowHeight:g,className:s,visibleColumns:c,pinnedColumns:d,offsetLeft:I,columnsTotalWidth:u,firstColumnIndex:C,lastColumnIndex:p,focusedColumnIndex:A,isFirstVisible:m,isLastVisible:h,isNotVisible:b,showBottomBorder:f,scrollbarWidth:y,gridHasFiller:v,onClick:Z,onDoubleClick:G,onMouseEnter:S,onMouseLeave:B,onMouseOut:w,onMouseOver:R}=e,W=Wg(e,dS),k=Eu(),V=qu(),X=o.useRef(null),x=Qu(),J=Oh(k),N=Mu(k,Ah),H=Mu(k,zp),F=Mu(k,MC),Y=x.rowReordering,K=Mu(k,IS,Y),M=Xg(X,t),L=Kp(k,r),E=Mu(k,_y,{rowId:r,editMode:x.editMode}),z=x.editMode===vm.Row,j=void 0!==A,D=j&&A>=d.left.length&&A<C,T=j&&A<c.length-d.right.length&&A>=p,P=function(e,t){return Ng(t,Zu,e)}(x.classes,{root:["row",n&&"selected",z&&"row--editable",E&&"row--editing",m&&"row--firstVisible",h&&"row--lastVisible",f&&"row--borderBottom","auto"===g&&"row--dynamicHeight"]}),U=V.hooks.useGridRowAriaAttributes();o.useLayoutEffect((()=>{if(J.range){const e=k.current.getRowIndexRelativeToVisibleRows(r);void 0!==e&&k.current.unstable_setLastMeasuredRowIndex(e)}if(X.current&&"auto"===g)return k.current.observeRowHeight(X.current,r)}),[k,J.range,g,r]);const Q=o.useCallback(((e,t)=>n=>{Yy(n)||k.current.getRow(r)&&(k.current.publishEvent(e,k.current.getRowParams(r),n),t&&t(n))}),[k,r]),O=o.useCallback((e=>{const t=Ny(e.target,Gu.cell),n=null===t||void 0===t?void 0:t.getAttribute("data-field");if(n){if(n===_f.field)return;if(n===sm)return;if("__reorder__"===n)return;if(k.current.getCellMode(r,n)===Zm.Edit)return;const e=k.current.getColumn(n);if((null===e||void 0===e?void 0:e.type)===jm)return}Q("rowClick",Z)(e)}),[k,Z,Q,r]),{slots:q,slotProps:_,disableColumnReorder:$}=x,ee=Mu(k,(()=>Sg({},k.current.getRowHeightEntry(r))),void 0,Ju),te=o.useMemo((()=>{if(b)return{opacity:0,width:0,height:0};const e=Sg({},i,{maxHeight:"auto"===g?"none":g,minHeight:g,"--height":"number"===typeof g?"".concat(g,"px"):g});if(ee.spacingTop){e["border"===x.rowSpacingType?"borderTopWidth":"marginTop"]=ee.spacingTop}if(ee.spacingBottom){const t="border"===x.rowSpacingType?"borderBottomWidth":"marginBottom";let n=e[t];"number"!==typeof n&&(n=parseInt(n||"0",10)),n+=ee.spacingBottom,e[t]=n}return e}),[b,g,i,ee,x.rowSpacingType]),ne=k.current.unstable_applyPipeProcessors("rowClassName",[],r),oe=U(L,a);if("function"===typeof x.getRowClassName){var re;const e=a-((null===(re=J.range)||void 0===re?void 0:re.firstRowIndex)||0),t=Sg({},k.current.getRowParams(r),{isFirstVisible:0===e,isLastVisible:e===J.rows.length-1,indexRelativeToCurrentPage:e});ne.push(x.getRowClassName(t))}const le=function(e,t,n,o){var a,i;let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cm.NONE;const c=k.current.unstable_getCellColSpanInfo(r,n);if(null!==c&&void 0!==c&&c.spannedByColSpan)return null;const d=null!==(a=null===c||void 0===c?void 0:c.cellProps.width)&&void 0!==a?a:e.computedWidth,I=null!==(i=null===c||void 0===c?void 0:c.cellProps.colSpan)&&void 0!==i?i:1,C=_Z(s,e.computedWidth,n,F,u,y);if("skeletonRow"===L.type)return(0,ao.jsx)(q.skeletonCell,{type:e.type,width:d,height:g,field:e.field,align:e.align},e.field);const p="__reorder__"===e.field,A=!($||e.disableReorder),m=K&&!N.length&&H<=1,h=!(A||p&&m),b=s===cm.VIRTUAL,f=eG(s,t),Z=$Z(s,t,o,x.showCellVerticalBorder,v);return(0,ao.jsx)(q.cell,Sg({column:e,width:d,rowId:r,align:e.align||"left",colIndex:n,colSpan:I,disableDragEvents:h,isNotVisible:b,pinnedOffset:C,pinnedPosition:s,showLeftBorder:f,showRightBorder:Z,row:l,rowNode:L},null===_||void 0===_?void 0:_.cell),e.field)};const ae=d.left.map(((e,t)=>le(e,t,t,d.left.length,cm.LEFT))),ie=d.right.map(((e,t)=>{const n=c.length-d.right.length+t;return le(e,t,n,d.right.length,cm.RIGHT)})),ge=c.length-d.left.length-d.right.length,se=[];D&&se.push(le(c[A],A-d.left.length,A,ge,cm.VIRTUAL));for(let o=C;o<p;o+=1){const e=c[o],t=o-d.left.length;e&&se.push(le(e,t,o,ge))}T&&se.push(le(c[A],A-d.left.length,A,ge,cm.VIRTUAL));const ce=l?{onClick:O,onDoubleClick:Q("rowDoubleClick",G),onMouseEnter:Q("rowMouseEnter",S),onMouseLeave:Q("rowMouseLeave",B),onMouseOut:Q("rowMouseOut",w),onMouseOver:Q("rowMouseOver",R)}:null;return(0,ao.jsxs)("div",Sg({"data-id":r,"data-rowindex":a,role:"row",className:Vg(...ne,P.root,s),style:te},oe,ce,W,{ref:M,children:[ae,(0,ao.jsx)("div",{role:"presentation",className:Gu.cellOffsetLeft,style:{width:I}}),se,(0,ao.jsx)("div",{role:"presentation",className:Vg(Gu.cell,Gu.cellEmpty)}),ie,0!==y&&(0,ao.jsx)(nG,{pinnedRight:d.right.length>0,borderTop:!m})]}))}));const CS=Yg(uS);let pS;const AS=["column","row","rowId","rowNode","align","children","colIndex","width","className","style","colSpan","disableDragEvents","isNotVisible","pinnedOffset","pinnedPosition","showRightBorder","showLeftBorder","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver"],mS=["changeReason","unstable_updateValueOnRender"];cm.LEFT,BC.LEFT,cm.RIGHT,BC.RIGHT,cm.NONE,cm.VIRTUAL;const hS=Rg((function(e,t){var n,r,l,a,i,g,s;const{column:c,row:d,rowId:I,rowNode:u,align:C,colIndex:p,width:A,className:m,style:h,colSpan:b,disableDragEvents:f,isNotVisible:y,pinnedOffset:v,pinnedPosition:Z,showRightBorder:G,showLeftBorder:S,onClick:B,onDoubleClick:w,onMouseDown:R,onMouseUp:W,onMouseOver:k,onKeyDown:V,onKeyUp:X,onDragEnter:x,onDragOver:J}=e,N=Wg(e,AS),H=Eu(),F=Qu(),Y=Ym(),K=c.field,M=Mu(H,$y,{rowId:I,field:K}),L=qu().hooks.useCellAggregationResult(I,K),E=M?Zm.Edit:Zm.View,z=H.current.getCellParamsForRow(I,K,d,{colDef:c,cellMode:E,rowNode:u,tabIndex:Mu(H,(()=>{const e=mb(H);return e&&e.field===K&&e.id===I?0:-1})),hasFocus:Mu(H,(()=>{const e=ub(H);return(null===e||void 0===e?void 0:e.id)===I&&e.field===K}))});z.api=H.current,L&&(z.value=L.value,z.formattedValue=c.valueFormatter?c.valueFormatter(z.value,d,c,H):z.value);const j=Mu(H,(()=>H.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:I,field:K}))),D=Mu(H,gb),T=Mu(H,sb),{hasFocus:P,isEditable:U=!1,value:Q}=z,O="actions"===c.type&&(null===(n=c.getActions)||void 0===n?void 0:n.call(c,H.current.getRowParams(I)).some((e=>!e.props.disabled))),q="view"!==E&&U||O?-1:z.tabIndex,{classes:_,getCellClassName:$}=F,ee=[Mu(H,(()=>H.current.unstable_applyPipeProcessors("cellClassName",[],{id:I,field:K}).filter(Boolean).join(" ")))];c.cellClassName&&ee.push("function"===typeof c.cellClassName?c.cellClassName(z):c.cellClassName),"flex"===c.display&&ee.push(Gu["cell--flex"]),$&&ee.push($(z));const te=null!==(r=z.formattedValue)&&void 0!==r?r:Q,ne=o.useRef(null),oe=Xg(t,ne),re=o.useRef(null),le=null!==(l=F.cellSelection)&&void 0!==l&&l,ae=(e=>{const{align:t,showLeftBorder:n,showRightBorder:o,pinnedPosition:r,isEditable:l,isSelected:a,isSelectionMode:i,classes:g}=e;return Ng({root:["cell","cell--text".concat(Jg(t)),a&&"selected",l&&"cell--editable",n&&"cell--withLeftBorder",o&&"cell--withRightBorder",r===cm.LEFT&&"cell--pinnedLeft",r===cm.RIGHT&&"cell--pinnedRight",i&&!l&&"cell--selectionMode"]},Zu,g)})({align:C,showLeftBorder:S,showRightBorder:G,isEditable:U,classes:F.classes,pinnedPosition:Z,isSelected:j,isSelectionMode:le}),ie=o.useCallback((e=>t=>{const n=H.current.getCellParams(I,K||"");H.current.publishEvent(e,n,t),W&&W(t)}),[H,K,W,I]),ge=o.useCallback((e=>t=>{const n=H.current.getCellParams(I,K||"");H.current.publishEvent(e,n,t),R&&R(t)}),[H,K,R,I]),se=o.useCallback(((e,t)=>n=>{if(!H.current.getRow(I))return;const o=H.current.getCellParams(I,K||"");H.current.publishEvent(e,o,n),t&&t(n)}),[H,K,I]),ce=null!==(a=null===(i=D[I])||void 0===i?void 0:i[K])&&void 0!==a&&a,de=null!==(g=null===(s=T[I])||void 0===s?void 0:s[K])&&void 0!==g?g:1,Ie=o.useMemo((()=>{if(y)return{padding:0,opacity:0,width:0,height:0,border:0};const e=rG(Sg({"--width":"".concat(A,"px")},h),Y,Z,v),t=Z===cm.LEFT,n=Z===cm.RIGHT;return de>1&&(e.height="calc(var(--height) * ".concat(de,")"),e.zIndex=10,(t||n)&&(e.zIndex=40)),e}),[A,y,h,v,Z,Y,de]);if(o.useEffect((()=>{if(!P||E===Zm.Edit)return;const e=Sy(H.current.rootElementRef.current);if(ne.current&&!ne.current.contains(e.activeElement)){const e=ne.current.querySelector('[tabindex="0"]'),t=re.current||e||ne.current;if(void 0===pS&&document.createElement("div").focus({get preventScroll(){return pS=!0,!1}}),pS)t.focus({preventScroll:!0});else{const e=H.current.getScrollPosition();t.focus(),H.current.scroll(e)}}}),[P,E,H]),ce)return(0,ao.jsx)("div",{"data-colindex":p,role:"presentation",style:Sg({width:"var(--width)"},Ie)});let ue,Ce,pe=N.onFocus;if(null===M&&c.renderCell&&(ue=c.renderCell(z)),null!==M&&c.renderEditCell){const e=H.current.getRowWithUpdatedValues(I,c.field),t=Wg(M,mS),n=Sg({},z,{row:e,formattedValue:c.valueFormatter?c.valueFormatter(M.value,e,c,H):z.formattedValue},t);ue=c.renderEditCell(n),ee.push(Gu["cell--editing"]),ee.push(null===_||void 0===_?void 0:_["cell--editing"])}if(void 0===ue){const e=null===te||void 0===te?void 0:te.toString();ue=e,Ce=e}o.isValidElement(ue)&&O&&(ue=o.cloneElement(ue,{focusElementRef:re}));const Ae=f?null:{onDragEnter:se("cellDragEnter",x),onDragOver:se("cellDragOver",J)};return(0,ao.jsx)("div",Sg({className:Vg(ae.root,ee,m),role:"gridcell","data-field":K,"data-colindex":p,"aria-colindex":p+1,"aria-colspan":b,"aria-rowspan":de,style:Ie,title:Ce,tabIndex:q,onClick:se("cellClick",B),onDoubleClick:se("cellDoubleClick",w),onMouseOver:se("cellMouseOver",k),onMouseDown:ge("cellMouseDown"),onMouseUp:ie("cellMouseUp"),onKeyDown:se("cellKeyDown",V),onKeyUp:se("cellKeyUp",X)},Ae,N,{onFocus:pe,ref:oe,children:ue}))}));const bS=Yg(hS),fS=o.memo((e=>{var t,n,r;const{colDef:l,open:a,columnMenuId:i,columnMenuButtonId:g,iconButtonRef:s}=e,c=UC(),d=Qu(),I=(e=>{const{classes:t,open:n}=e;return Ng({root:["menuIcon",n&&"menuOpen"],button:["menuIconButton"]},Zu,t)})(Sg({},e,{classes:d.classes})),u=o.useCallback((e=>{e.preventDefault(),e.stopPropagation(),c.current.toggleColumnMenu(l.field)}),[c,l.field]),C=null!==(t=l.headerName)&&void 0!==t?t:l.field;return(0,ao.jsx)("div",{className:I.root,children:(0,ao.jsx)(d.slots.baseTooltip,Sg({title:c.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},null===(n=d.slotProps)||void 0===n?void 0:n.baseTooltip,{children:(0,ao.jsx)(d.slots.baseIconButton,Sg({ref:s,tabIndex:-1,className:I.button,"aria-label":c.current.getLocaleText("columnMenuAriaLabel")(C),size:"small",onClick:u,"aria-haspopup":"menu","aria-expanded":a,"aria-controls":a?i:void 0,id:g},null===(r=d.slotProps)||void 0===r?void 0:r.baseIconButton,{children:(0,ao.jsx)(d.slots.columnMenuIcon,{fontSize:"inherit"})}))}))})}));function yS(e){let{columnMenuId:t,columnMenuButtonId:n,ContentComponent:o,contentComponentProps:r,field:l,open:a,target:i,onExited:g}=e;const s=UC(),c=s.current.getColumn(l),d=Cp((e=>{e&&(e.stopPropagation(),null!==i&&void 0!==i&&i.contains(e.target))||s.current.hideColumnMenu()}));return i&&c?(0,ao.jsx)(Lm,{position:"bottom-".concat("right"===c.align?"start":"end"),open:a,target:i,onClose:d,onExited:g,children:(0,ao.jsx)(o,Sg({colDef:c,hideMenu:d,open:a,id:t,labelledby:n},r))}):null}const vS=["className","aria-label"],ZS=ep("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)",lineHeight:"normal"}),GS=Rg((function(e,t){const{className:n}=e,o=Wg(e,vS),r=Qu(),l=(e=>{const{classes:t}=e;return Ng({root:["columnHeaderTitle"]},Zu,t)})(r);return(0,ao.jsx)(ZS,Sg({className:Vg(l.root,n),ownerState:r},o,{ref:t}))}));function SS(e){var t;const{label:n,description:r}=e,l=Qu(),a=o.useRef(null),[i,g]=o.useState(""),s=o.useCallback((()=>{if(!r&&null!==a&&void 0!==a&&a.current){const t=(e=a.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;g(t?n:"")}var e}),[r,n]);return(0,ao.jsx)(l.slots.baseTooltip,Sg({title:r||i},null===(t=l.slotProps)||void 0===t?void 0:t.baseTooltip,{children:(0,ao.jsx)(GS,{onMouseOver:s,ref:a,children:n})}))}const BS=["resizable","resizing","height","side"];var wS=function(e){return e.Left="left",e.Right="right",e}(wS||{});function RS(e){const{height:t,side:n=wS.Right}=e,r=Wg(e,BS),l=Qu(),a=(e=>{const{resizable:t,resizing:n,classes:o,side:r}=e;return Ng({root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",r&&"columnSeparator--side".concat(Jg(r))],icon:["iconSeparator"]},Zu,o)})(Sg({},e,{side:n,classes:l.classes})),i=o.useCallback((e=>{e.preventDefault(),e.stopPropagation()}),[]);return(0,ao.jsx)("div",Sg({className:a.root,style:{minHeight:t}},r,{onClick:i,children:(0,ao.jsx)(l.slots.columnResizeIcon,{className:a.icon})}))}const WS=o.memo(RS);const kS=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","style"],VS=Rg((function(e,t){const{classes:n,colIndex:r,height:l,isResizing:a,sortDirection:i,hasFocus:g,tabIndex:s,separatorSide:c,isDraggable:d,headerComponent:I,description:u,width:C,columnMenuIconButton:p=null,columnMenu:A=null,columnTitleIconButtons:m=null,headerClassName:h,label:b,resizable:f,draggableContainerProps:y,columnHeaderSeparatorProps:v,style:Z}=e,G=Wg(e,kS),S=Eu(),B=Qu(),w=o.useRef(null),R=Xg(w,t);let W="none";return null!=i&&(W="asc"===i?"ascending":"descending"),o.useLayoutEffect((()=>{const e=S.current.state.columnMenu;if(g&&!e.open){var t;const e=w.current.querySelector('[tabindex="0"]')||w.current;null===e||void 0===e||e.focus(),null!==(t=S.current.columnHeadersContainerRef)&&void 0!==t&&t.current&&(S.current.columnHeadersContainerRef.current.scrollLeft=0)}}),[S,g]),(0,ao.jsxs)("div",Sg({className:Vg(n.root,h),style:Sg({},Z,{width:C}),role:"columnheader",tabIndex:s,"aria-colindex":r+1,"aria-sort":W},G,{ref:R,children:[(0,ao.jsxs)("div",Sg({className:n.draggableContainer,draggable:d,role:"presentation"},y,{children:[(0,ao.jsxs)("div",{className:n.titleContainer,role:"presentation",children:[(0,ao.jsx)("div",{className:n.titleContainerContent,children:void 0!==I?I:(0,ao.jsx)(SS,{label:b,description:u,columnWidth:C})}),m]}),p]})),(0,ao.jsx)(WS,Sg({resizable:!B.disableColumnResize&&!!f,resizing:a,height:l,side:c},v)),A]}))}));const XS=Yg((function(e){var t,n,r,l,a;const{colDef:i,columnMenuOpen:g,colIndex:s,headerHeight:c,isResizing:d,isLast:I,sortDirection:u,sortIndex:C,filterItemsCounter:p,hasFocus:A,tabIndex:m,disableReorder:h,separatorSide:b,showLeftBorder:f,showRightBorder:y,pinnedPosition:v,pinnedOffset:Z}=e,G=Eu(),S=Qu(),B=Ym(),w=o.useRef(null),R=rA(),W=rA(),k=o.useRef(null),[V,X]=o.useState(g),x=o.useMemo((()=>!S.disableColumnReorder&&!h&&!i.disableReorder),[S.disableColumnReorder,h,i.disableReorder]);let J;i.renderHeader&&(J=i.renderHeader(G.current.getColumnHeaderParams(i.field)));const N=(e=>{const{colDef:t,classes:n,isDragging:o,sortDirection:r,showRightBorder:l,showLeftBorder:a,filterItemsCounter:i,pinnedPosition:g,isLastUnpinned:s,isSiblingFocused:c}=e,d=null!=r,I=null!=i&&i>0,u="number"===t.type;return Ng({root:["columnHeader","left"===t.headerAlign&&"columnHeader--alignLeft","center"===t.headerAlign&&"columnHeader--alignCenter","right"===t.headerAlign&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",o&&"columnHeader--moving",d&&"columnHeader--sorted",I&&"columnHeader--filtered",u&&"columnHeader--numeric","withBorderColor",l&&"columnHeader--withRightBorder",a&&"columnHeader--withLeftBorder",g===cm.LEFT&&"columnHeader--pinnedLeft",g===cm.RIGHT&&"columnHeader--pinnedRight",s&&"columnHeader--lastUnpinned",c&&"columnHeader--siblingFocused"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]},Zu,n)})(Sg({},e,{classes:S.classes,showRightBorder:y,showLeftBorder:f})),H=o.useCallback((e=>t=>{Yy(t)||G.current.publishEvent(e,G.current.getColumnHeaderParams(i.field),t)}),[G,i.field]),F=o.useMemo((()=>({onClick:H("columnHeaderClick"),onContextMenu:H("columnHeaderContextMenu"),onDoubleClick:H("columnHeaderDoubleClick"),onMouseOver:H("columnHeaderOver"),onMouseOut:H("columnHeaderOut"),onMouseEnter:H("columnHeaderEnter"),onMouseLeave:H("columnHeaderLeave"),onKeyDown:H("columnHeaderKeyDown"),onFocus:H("columnHeaderFocus"),onBlur:H("columnHeaderBlur")})),[H]),Y=o.useMemo((()=>x?{onDragStart:H("columnHeaderDragStart"),onDragEnter:H("columnHeaderDragEnter"),onDragOver:H("columnHeaderDragOver"),onDragEndCapture:H("columnHeaderDragEnd")}:{}),[x,H]),K=o.useMemo((()=>({onMouseDown:H("columnSeparatorMouseDown"),onDoubleClick:H("columnSeparatorDoubleClick")})),[H]);o.useEffect((()=>{V||X(g)}),[V,g]);const M=o.useCallback((()=>{X(!1)}),[]),L=!S.disableColumnMenu&&!i.disableColumnMenu&&(0,ao.jsx)(fS,{colDef:i,columnMenuId:R,columnMenuButtonId:W,open:V,iconButtonRef:k}),E=(0,ao.jsx)(yS,{columnMenuId:R,columnMenuButtonId:W,field:i.field,open:g,target:k.current,ContentComponent:S.slots.columnMenu,contentComponentProps:null===(t=S.slotProps)||void 0===t?void 0:t.columnMenu,onExited:M}),z=null!==(n=i.sortingOrder)&&void 0!==n?n:S.sortingOrder,j=(i.sortable||null!=u)&&!i.hideSortIcons&&!S.disableColumnSorting,D=(0,ao.jsxs)(o.Fragment,{children:[!S.disableColumnFilter&&(0,ao.jsx)(S.slots.columnHeaderFilterIconButton,Sg({field:i.field,counter:p},null===(r=S.slotProps)||void 0===r?void 0:r.columnHeaderFilterIconButton)),j&&(0,ao.jsx)(S.slots.columnHeaderSortIcon,Sg({field:i.field,direction:u,index:C,sortingOrder:z,disabled:!i.sortable},null===(l=S.slotProps)||void 0===l?void 0:l.columnHeaderSortIcon))]});o.useLayoutEffect((()=>{const e=G.current.state.columnMenu;if(A&&!e.open){var t;const e=w.current.querySelector('[tabindex="0"]')||w.current;null===e||void 0===e||e.focus(),null!==(t=G.current.columnHeadersContainerRef)&&void 0!==t&&t.current&&(G.current.columnHeadersContainerRef.current.scrollLeft=0)}}),[G,A]);const T="function"===typeof i.headerClassName?i.headerClassName({field:i.field,colDef:i}):i.headerClassName,P=null!==(a=i.headerName)&&void 0!==a?a:i.field,U=o.useMemo((()=>rG(Sg({},e.style),B,v,Z)),[v,Z,e.style,B]);return(0,ao.jsx)(VS,Sg({ref:w,classes:N,columnMenuOpen:g,colIndex:s,height:c,isResizing:d,sortDirection:u,hasFocus:A,tabIndex:m,separatorSide:b,isDraggable:x,headerComponent:J,description:i.description,elementId:i.field,width:i.computedWidth,columnMenuIconButton:L,columnTitleIconButtons:D,headerClassName:Vg(T,I&&Gu["columnHeader--last"]),label:P,resizable:!S.disableColumnResize&&!!i.resizable,"data-field":i.field,columnMenu:E,draggableContainerProps:Y,columnHeaderSeparatorProps:K,style:U},F))}));function xS(e){var t;const{groupId:n,width:r,depth:l,maxDepth:a,fields:i,height:g,colIndex:s,hasFocus:c,tabIndex:d,isLastColumn:I,pinnedPosition:u,pinnedOffset:C}=e,p=Qu(),A=Ym(),m=o.useRef(null),h=UC(),b=Mu(h,_m),f=n?b[n]:{},{headerName:y=(null!==n&&void 0!==n?n:""),description:v="",headerAlign:Z}=f;let G;const S=n&&(null===(t=b[n])||void 0===t?void 0:t.renderHeaderGroup),B=o.useMemo((()=>({groupId:n,headerName:y,description:v,depth:l,maxDepth:a,fields:i,colIndex:s,isLastColumn:I})),[n,y,v,l,a,i,s,I]);n&&S&&(G=S(B));const w=Sg({},e,{classes:p.classes,headerAlign:Z,depth:l,isDragging:!1}),R=null!==y&&void 0!==y?y:n,W=rA(),k=null===n?"empty-group-cell-".concat(W):n,V=(e=>{const{classes:t,headerAlign:n,isDragging:o,isLastColumn:r,showLeftBorder:l,showRightBorder:a,groupId:i,pinnedPosition:g}=e;return Ng({root:["columnHeader","left"===n&&"columnHeader--alignLeft","center"===n&&"columnHeader--alignCenter","right"===n&&"columnHeader--alignRight",o&&"columnHeader--moving",a&&"columnHeader--withRightBorder",l&&"columnHeader--withLeftBorder","withBorderColor",null===i?"columnHeader--emptyGroup":"columnHeader--filledGroup",g===cm.LEFT&&"columnHeader--pinnedLeft",g===cm.RIGHT&&"columnHeader--pinnedRight",r&&"columnHeader--last"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},Zu,t)})(w);o.useLayoutEffect((()=>{if(c){const e=m.current.querySelector('[tabindex="0"]')||m.current;null===e||void 0===e||e.focus()}}),[h,c]);const X=o.useCallback((e=>t=>{Yy(t)||h.current.publishEvent(e,B,t)}),[h,B]),x=o.useMemo((()=>({onKeyDown:X("columnGroupHeaderKeyDown"),onFocus:X("columnGroupHeaderFocus"),onBlur:X("columnGroupHeaderBlur")})),[X]),J="function"===typeof f.headerClassName?f.headerClassName(B):f.headerClassName,N=o.useMemo((()=>rG(Sg({},e.style),A,u,C)),[u,C,e.style,A]);return(0,ao.jsx)(VS,Sg({ref:m,classes:V,columnMenuOpen:!1,colIndex:s,height:g,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:d,isDraggable:!1,headerComponent:G,headerClassName:J,description:v,elementId:k,width:r,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:R,"aria-colspan":i.length,"data-fields":"|-".concat(i.join("-|-"),"-|"),style:N},x))}const JS=mu("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow"})({display:"flex"}),NS=["className"],HS=ep("div",{name:"MuiDataGrid",slot:"ColumnHeaders"})({display:"flex",flexDirection:"column",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),FS=Rg((function(e,t){const{className:n}=e,o=Wg(e,NS),r=Qu(),l=(e=>{const{classes:t}=e;return Ng({root:["columnHeaders"]},Zu,t)})(r);return(0,ao.jsx)(HS,Sg({className:Vg(l.root,n),ownerState:r},o,{role:"presentation",ref:t}))}));const YS=["className","visibleColumns","sortColumnLookup","filterColumnLookup","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],KS=Rg((function(e,t){const{visibleColumns:n,sortColumnLookup:r,filterColumnLookup:l,columnHeaderTabIndexState:a,columnGroupHeaderTabIndexState:i,columnHeaderFocus:g,columnGroupHeaderFocus:s,headerGroupingMaxDepth:c,columnMenuState:d,columnVisibility:I,columnGroupsHeaderStructure:u,hasOtherElementInTabSequence:C}=e,p=Wg(e,YS),{getInnerProps:A,getColumnHeadersRow:m,getColumnGroupHeadersRows:h}=(e=>{const{visibleColumns:t,sortColumnLookup:n,filterColumnLookup:r,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:a,columnHeaderFocus:i,columnGroupHeaderFocus:g,headerGroupingMaxDepth:s,columnMenuState:c,columnVisibility:d,columnGroupsHeaderStructure:I,hasOtherElementInTabSequence:u}=e,[C,p]=o.useState(""),[A,m]=o.useState(""),h=Eu(),b=Qu(),f=Mu(h,qm),y=Mu(h,MC),v=Mu(h,ob),Z=Mu(h,YC),G=Mu(h,VC),S=Eb(y,v,Z.left.length),B=Mu(h,np),w=Mu(h,ip),R=Mu(h,gp),W=Mu(h,sp),k=Mu(h,dp),V=o.useCallback((e=>m(e.field)),[]),X=o.useCallback((()=>m("")),[]),x=o.useCallback((e=>p(e.field)),[]),J=o.useCallback((()=>p("")),[]),N=o.useMemo((()=>Z.left.length?{firstColumnIndex:0,lastColumnIndex:Z.left.length}:null),[Z.left.length]),H=o.useMemo((()=>Z.right.length?{firstColumnIndex:t.length-Z.right.length,lastColumnIndex:t.length}:null),[Z.right.length,t.length]);fp(h,"columnResizeStart",V),fp(h,"columnResizeStop",X),fp(h,"columnHeaderDragStart",x),fp(h,"columnHeaderDragEndNative",J);const F=e=>{const{renderContext:n=v}=e||{},o=n.firstColumnIndex,r=n.lastColumnIndex;return{renderedColumns:t.slice(o,r),firstColumnToRender:o,lastColumnToRender:r}},Y=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l=(null===e||void 0===e?void 0:e.position)===cm.RIGHT,a=void 0===(null===e||void 0===e?void 0:e.position),i=Z.right.length>0&&l||0===Z.right.length&&a,g=S-n;return(0,ao.jsxs)(o.Fragment,{children:[a&&(0,ao.jsx)("div",{role:"presentation",style:{width:g}}),t,a&&(0,ao.jsx)("div",{role:"presentation",className:Vg(Gu.filler,r&&Gu["filler--borderBottom"])}),i&&(0,ao.jsx)(nG,{header:!0,pinnedRight:l,borderBottom:r,borderTop:!1})]})},K=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{renderedColumns:o,firstColumnToRender:a}=F(e),g=[];for(let s=0;s<o.length;s+=1){const d=o[s],I=a+s,p=0===I,m=null!==l&&l.field===d.field||p&&!u?0:-1,h=null!==i&&i.field===d.field,f=c.open&&c.field===d.field,v=null===e||void 0===e?void 0:e.position,G=_Z(v,d.computedWidth,I,y,B,k),S=v===cm.RIGHT?o[s-1]:o[s+1],W=!!S&&null!==i&&i.field===S.field,V=I+1===y.length-Z.right.length,X=s,x=o.length,J=eG(v,X),N=$Z(v,X,x,b.showColumnVerticalBorder,w);g.push((0,ao.jsx)(XS,Sg({},n[d.field],{columnMenuOpen:f,filterItemsCounter:r[d.field]&&r[d.field].length,headerHeight:R,isDragging:d.field===C,colDef:d,colIndex:I,isResizing:A===d.field,isLast:I===y.length-1,hasFocus:h,tabIndex:m,pinnedPosition:v,pinnedOffset:G,isLastUnpinned:V,isSiblingFocused:W,showLeftBorder:J,showRightBorder:N},t),d.field))}return Y(e,g,0)},M=e=>{var n,o,r,l;let{depth:i,params:c}=e;const u=F(c);if(0===u.renderedColumns.length)return null;const{firstColumnToRender:C,lastColumnToRender:p}=u,A=I[i],m=t[C].field,h=null!==(n=null===(o=f[m])||void 0===o?void 0:o[i])&&void 0!==n?n:null,v=A.findIndex((e=>{let{groupId:t,columnFields:n}=e;return t===h&&n.includes(m)})),Z=t[p-1].field,S=null!==(r=null===(l=f[Z])||void 0===l?void 0:l[i])&&void 0!==r?r:null,R=A.findIndex((e=>{let{groupId:t,columnFields:n}=e;return t===S&&n.includes(Z)})),V=A.slice(v,R+1).map((e=>Sg({},e,{columnFields:e.columnFields.filter((e=>!1!==d[e]))}))).filter((e=>e.columnFields.length>0)),X=V[0].columnFields.indexOf(m),x=V[0].columnFields.slice(0,X).reduce(((e,t)=>{var n;return e+(null!==(n=G[t].computedWidth)&&void 0!==n?n:0)}),0);let J=C;const N=V.map(((e,t)=>{let{groupId:n,columnFields:o}=e;const r=null!==g&&g.depth===i&&o.includes(g.field),l=null!==a&&a.depth===i&&o.includes(a.field)?0:-1,d={groupId:n,width:o.reduce(((e,t)=>e+G[t].computedWidth),0),fields:o,colIndex:J,hasFocus:r,tabIndex:l},I=c.position,u=_Z(I,d.width,J,y,B,k);J+=o.length;let C=t;return I===cm.LEFT&&(C=J-1),(0,ao.jsx)(xS,{groupId:n,width:d.width,fields:d.fields,colIndex:d.colIndex,depth:i,isLastColumn:t===V.length-1,maxDepth:s,height:W,hasFocus:r,tabIndex:l,pinnedPosition:I,pinnedOffset:u,showLeftBorder:eG(I,C),showRightBorder:$Z(I,C,V.length,b.showColumnVerticalBorder,w)},t)}));return Y(c,N,x)};return{renderContext:v,leftRenderContext:N,rightRenderContext:H,pinnedColumns:Z,visibleColumns:t,columnPositions:y,getFillers:Y,getColumnHeadersRow:()=>(0,ao.jsxs)(JS,{role:"row","aria-rowindex":s+1,ownerState:b,className:Gu["row--borderBottom"],style:{height:R},children:[N&&K({position:cm.LEFT,renderContext:N},{disableReorder:!0}),K({renderContext:v}),H&&K({position:cm.RIGHT,renderContext:H},{disableReorder:!0,separatorSide:wS.Left})]}),getColumnsToRender:F,getColumnGroupHeadersRows:()=>{if(0===s)return null;const e=[];for(let t=0;t<s;t+=1)e.push((0,ao.jsxs)(JS,{role:"row","aria-rowindex":t+1,ownerState:b,style:{height:W},children:[N&&M({depth:t,params:{position:cm.LEFT,renderContext:N,maxLastColumn:N.lastColumnIndex}}),M({depth:t,params:{renderContext:v}}),H&&M({depth:t,params:{position:cm.RIGHT,renderContext:H,maxLastColumn:H.lastColumnIndex}})]},t));return e},getPinnedCellOffset:_Z,isDragging:!!C,getInnerProps:()=>({role:"rowgroup"})}})({visibleColumns:n,sortColumnLookup:r,filterColumnLookup:l,columnHeaderTabIndexState:a,columnGroupHeaderTabIndexState:i,columnHeaderFocus:g,columnGroupHeaderFocus:s,headerGroupingMaxDepth:c,columnMenuState:d,columnVisibility:I,columnGroupsHeaderStructure:u,hasOtherElementInTabSequence:C});return(0,ao.jsxs)(FS,Sg({},p,A(),{ref:t,children:[h(),m()]}))}));const MS=Yg(KS),LS=["displayOrder"],ES=["hideMenu","colDef","id","labelledby","className","children","open"],zS=mu(Wp)((()=>({minWidth:248}))),jS=Rg((function(e,t){const{hideMenu:n,id:r,labelledby:l,className:a,children:i,open:g}=e,s=Wg(e,ES),c=Qu(),d=o.useCallback((e=>{"Tab"===e.key&&e.preventDefault(),ly(e.key)&&n(e)}),[n]);return(0,ao.jsx)(zS,Sg({as:c.slots.baseMenuList,id:r,className:Vg(Gu.menuList,a),"aria-labelledby":l,onKeyDown:d,autoFocus:g},s,{ref:t,children:i}))}));function DS(e){const{colDef:t,onClick:n}=e,r=UC(),l=Qu(),a=1===NC(r).filter((e=>!0!==e.disableColumnMenu)).length,i=o.useCallback((e=>{a||(r.current.setColumnVisibility(t.field,!1),n(e))}),[r,t.field,n,a]);return l.disableColumnSelector||!1===t.hideable?null:(0,ao.jsx)(l.slots.baseMenuItem,{onClick:i,disabled:a,iconStart:(0,ao.jsx)(l.slots.columnMenuHideIcon,{fontSize:"small"}),children:r.current.getLocaleText("columnMenuHideColumn")})}function TS(e){const{onClick:t}=e,n=UC(),r=Qu(),l=o.useCallback((e=>{t(e),n.current.showPreferences(TC.columns)}),[n,t]);return r.disableColumnSelector?null:(0,ao.jsx)(r.slots.baseMenuItem,{onClick:l,iconStart:(0,ao.jsx)(r.slots.columnMenuManageColumnsIcon,{fontSize:"small"}),children:n.current.getLocaleText("columnMenuManageColumns")})}const PS=["defaultSlots","defaultSlotProps","slots","slotProps"],US={columnMenuSortItem:function(e){var t;const{colDef:n,onClick:r}=e,l=UC(),a=Mu(l,Ah),i=Qu(),g=o.useMemo((()=>{if(!n)return null;const e=a.find((e=>e.field===n.field));return null===e||void 0===e?void 0:e.sort}),[n,a]),s=null!==(t=n.sortingOrder)&&void 0!==t?t:i.sortingOrder,c=o.useCallback((e=>{r(e);const t=e.currentTarget.getAttribute("data-value")||null;l.current.sortColumn(n.field,t===g?null:t)}),[l,n,r,g]);if(i.disableColumnSorting||!n||!n.sortable||!s.some((e=>!!e)))return null;const d=e=>{const t=l.current.getLocaleText(e);return"function"===typeof t?t(n):t};return(0,ao.jsxs)(o.Fragment,{children:[s.includes("asc")&&"asc"!==g?(0,ao.jsx)(i.slots.baseMenuItem,{onClick:c,"data-value":"asc",iconStart:(0,ao.jsx)(i.slots.columnMenuSortAscendingIcon,{fontSize:"small"}),children:d("columnMenuSortAsc")}):null,s.includes("desc")&&"desc"!==g?(0,ao.jsx)(i.slots.baseMenuItem,{onClick:c,"data-value":"desc",iconStart:(0,ao.jsx)(i.slots.columnMenuSortDescendingIcon,{fontSize:"small"}),children:d("columnMenuSortDesc")}):null,s.includes(null)&&null!=g?(0,ao.jsx)(i.slots.baseMenuItem,{onClick:c,iconStart:i.slots.columnMenuUnsortIcon?(0,ao.jsx)(i.slots.columnMenuUnsortIcon,{fontSize:"small"}):(0,ao.jsx)("span",{}),children:l.current.getLocaleText("columnMenuUnsort")}):null]})},columnMenuFilterItem:function(e){const{colDef:t,onClick:n}=e,r=UC(),l=Qu(),a=o.useCallback((e=>{n(e),r.current.showFilterPanel(t.field)}),[r,t.field,n]);return l.disableColumnFilter||!t.filterable?null:(0,ao.jsx)(l.slots.baseMenuItem,{onClick:a,iconStart:(0,ao.jsx)(l.slots.columnMenuFilterIcon,{fontSize:"small"}),children:r.current.getLocaleText("columnMenuFilter")})},columnMenuColumnsItem:function(e){return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(DS,Sg({},e)),(0,ao.jsx)(TS,Sg({},e))]})}},QS={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},OS=Rg((function(e,t){const{defaultSlots:n,defaultSlotProps:r,slots:l,slotProps:a}=e,i=Wg(e,PS),g=(e=>{const t=Eu(),n=Qu(),{defaultSlots:r,defaultSlotProps:l,slots:a={},slotProps:i={},hideMenu:g,colDef:s,addDividers:c=!0}=e,d=o.useMemo((()=>Sg({},r,a)),[r,a]),I=o.useMemo((()=>{if(!i||0===Object.keys(i).length)return l;const e=Sg({},i);return Object.entries(l).forEach((t=>{let[n,o]=t;e[n]=Sg({},o,i[n]||{})})),e}),[l,i]),u=t.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),C=o.useMemo((()=>{const e=Object.keys(r);return Object.keys(a).filter((t=>!e.includes(t)))}),[a,r]);return o.useMemo((()=>{const e=Array.from(new Set([...u,...C])).filter((e=>null!=d[e])).sort(((e,t)=>{const n=I[e],o=I[t];return(Number.isFinite(null===n||void 0===n?void 0:n.displayOrder)?n.displayOrder:100)-(Number.isFinite(null===o||void 0===o?void 0:o.displayOrder)?o.displayOrder:100)}));return e.reduce(((t,o,r)=>{let l={colDef:s,onClick:g};const a=I[o];return a&&(l=Sg({},l,Wg(a,LS))),c&&r!==e.length-1?[...t,[d[o],l],[n.slots.baseDivider,{}]]:[...t,[d[o],l]]}),[])}),[c,s,u,g,d,I,C,n.slots.baseDivider])})(Sg({},i,{defaultSlots:n,defaultSlotProps:r,slots:l,slotProps:a}));return(0,ao.jsx)(jS,Sg({},i,{ref:t,children:g.map(((e,t)=>{let[n,o]=e;return(0,ao.jsx)(n,Sg({},o),t)}))}))}));const qS=Rg((function(e,t){return(0,ao.jsx)(OS,Sg({},e,{ref:t,defaultSlots:US,defaultSlotProps:QS}))}));const _S=Rg((function(e,t){const n=UC().current.getLocaleText("noResultsOverlayLabel");return(0,ao.jsx)(qZ,Sg({},e,{ref:t,children:n}))}));function $S(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function eB(e){const{controlled:t,default:n,name:r,state:l="value"}=e,{current:a}=o.useRef(void 0!==t),[i,g]=o.useState(n);return[a?t:i,o.useCallback((e=>{a||g(e)}),[])]}const tB=e=>{const t=o.useRef({});return o.useEffect((()=>{t.current=e})),t.current};function nB(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const oB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:o,matchFrom:r="any",stringify:l,trim:a=!1}=e;return(e,i)=>{let{inputValue:g,getOptionLabel:s}=i,c=a?g.trim():g;n&&(c=c.toLowerCase()),t&&(c=nB(c));const d=c?e.filter((e=>{let o=(l||s)(e);return n&&(o=o.toLowerCase()),t&&(o=nB(o)),"start"===r?o.startsWith(c):o.includes(c)})):e;return"number"===typeof o?d.slice(0,o):d}}(),rB=e=>{var t;return null!==e.current&&(null===(t=e.current.parentElement)||void 0===t?void 0:t.contains(document.activeElement))},lB=[];function aB(e,t,n,o){if(t||null==e||o)return"";const r=n(e);return"string"===typeof r?r:""}const iB=function(e){const{unstable_isActiveElementInListbox:t=rB,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:l=!1,autoSelect:a=!1,blurOnSelect:i=!1,clearOnBlur:g=!e.freeSolo,clearOnEscape:s=!1,componentName:c="useAutocomplete",defaultValue:d=(e.multiple?lB:null),disableClearable:I=!1,disableCloseOnSelect:u=!1,disabled:C,disabledItemsFocusable:p=!1,disableListWrap:A=!1,filterOptions:m=oB,filterSelectedOptions:h=!1,freeSolo:b=!1,getOptionDisabled:f,getOptionKey:y,getOptionLabel:v=e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e},groupBy:Z,handleHomeEndKeys:G=!e.freeSolo,id:S,includeInputInList:B=!1,inputValue:w,isOptionEqualToValue:R=(e,t)=>e===t,multiple:W=!1,onChange:k,onClose:V,onHighlightChange:X,onInputChange:x,onOpen:J,open:N,openOnFocus:H=!1,options:F,readOnly:Y=!1,renderValue:K,selectOnFocus:M=!e.freeSolo,value:L}=e,E=rA(S);let z=v;z=e=>{const t=v(e);return"string"!==typeof t?String(t):t};const j=o.useRef(!1),D=o.useRef(!0),T=o.useRef(null),P=o.useRef(null),[U,Q]=o.useState(null),[O,q]=o.useState(-1),_=l?0:-1,$=o.useRef(_),ee=o.useRef(aB(null!==d&&void 0!==d?d:L,W,z)).current,[te,ne]=eB({controlled:L,default:d,name:c}),[oe,re]=eB({controlled:w,default:ee,name:c,state:"inputValue"}),[le,ae]=o.useState(!1),ie=o.useCallback(((e,t,n)=>{if(!(W?te.length<t.length:null!==t)&&!g)return;const o=aB(t,W,z,K);oe!==o&&(re(o),x&&x(e,o,n))}),[z,oe,W,x,re,g,te,K]),[ge,se]=eB({controlled:N,default:!1,name:c,state:"open"}),[ce,de]=o.useState(!0),Ie=!W&&null!=te&&oe===z(te),ue=ge&&!Y,Ce=ue?m(F.filter((e=>!h||!(W?te:[te]).some((t=>null!==t&&R(e,t))))),{inputValue:Ie&&ce?"":oe,getOptionLabel:z}):[],pe=tB({filteredOptions:Ce,value:te,inputValue:oe});o.useEffect((()=>{const e=te!==pe.value;le&&!e||b&&!e||ie(null,te,"reset")}),[te,ie,le,pe.value,b]);const Ae=ge&&Ce.length>0&&!Y,me=Cp((e=>{if(-1===e)T.current.focus();else{const t=K?"data-item-index":"data-tag-index";U.querySelector("[".concat(t,'="').concat(e,'"]')).focus()}}));o.useEffect((()=>{W&&O>te.length-1&&(q(-1),me(-1))}),[te,W,O,me]);const he=Cp((e=>{let{event:t,index:o,reason:r}=e;if($.current=o,-1===o?T.current.removeAttribute("aria-activedescendant"):T.current.setAttribute("aria-activedescendant","".concat(E,"-option-").concat(o)),X&&["mouse","keyboard","touch"].includes(r)&&X(t,-1===o?null:Ce[o],r),!P.current)return;const l=P.current.querySelector('[role="option"].'.concat(n,"-focused"));l&&(l.classList.remove("".concat(n,"-focused")),l.classList.remove("".concat(n,"-focusVisible")));let a=P.current;if("listbox"!==P.current.getAttribute("role")&&(a=P.current.parentElement.querySelector('[role="listbox"]')),!a)return;if(-1===o)return void(a.scrollTop=0);const i=P.current.querySelector('[data-option-index="'.concat(o,'"]'));if(i&&(i.classList.add("".concat(n,"-focused")),"keyboard"===r&&i.classList.add("".concat(n,"-focusVisible")),a.scrollHeight>a.clientHeight&&"mouse"!==r&&"touch"!==r)){const e=i,t=a.clientHeight+a.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?a.scrollTop=n-a.clientHeight:e.offsetTop-e.offsetHeight*(Z?1.3:0)<a.scrollTop&&(a.scrollTop=e.offsetTop-e.offsetHeight*(Z?1.3:0))}})),be=Cp((e=>{let{event:t,diff:n,direction:o="next",reason:l}=e;if(!ue)return;const a=function(e,t){if(!P.current||e<0||e>=Ce.length)return-1;let n=e;for(;;){const o=P.current.querySelector('[data-option-index="'.concat(n,'"]')),r=!p&&(!o||o.disabled||"true"===o.getAttribute("aria-disabled"));if(o&&o.hasAttribute("tabindex")&&!r)return n;if(n="next"===t?(n+1)%Ce.length:(n-1+Ce.length)%Ce.length,n===e)return-1}}((()=>{const e=Ce.length-1;if("reset"===n)return _;if("start"===n)return 0;if("end"===n)return e;const t=$.current+n;return t<0?-1===t&&B?-1:A&&-1!==$.current||Math.abs(n)>1?0:e:t>e?t===e+1&&B?-1:A||Math.abs(n)>1?e:0:t})(),o);if(he({index:a,reason:l,event:t}),r&&"reset"!==n)if(-1===a)T.current.value=oe;else{const e=z(Ce[a]);T.current.value=e;0===e.toLowerCase().indexOf(oe.toLowerCase())&&oe.length>0&&T.current.setSelectionRange(oe.length,e.length)}})),fe=o.useCallback((()=>{if(!ue)return;const e=(()=>{if(-1!==$.current&&pe.filteredOptions&&pe.filteredOptions.length!==Ce.length&&pe.inputValue===oe&&(W?te.length===pe.value.length&&pe.value.every(((e,t)=>z(te[t])===z(e))):(e=pe.value,t=te,(e?z(e):"")===(t?z(t):"")))){const e=pe.filteredOptions[$.current];if(e)return Ce.findIndex((t=>z(t)===z(e)))}var e,t;return-1})();if(-1!==e)return void($.current=e);const t=W?te[0]:te;if(0!==Ce.length&&null!=t){if(P.current)if(null==t)$.current>=Ce.length-1?he({index:Ce.length-1}):he({index:$.current});else{const e=Ce[$.current];if(W&&e&&-1!==te.findIndex((t=>R(e,t))))return;const n=Ce.findIndex((e=>R(e,t)));-1===n?be({diff:"reset"}):he({index:n})}}else be({diff:"reset"})}),[Ce.length,!W&&te,h,be,he,ue,oe,W]),ye=Cp((e=>{$S(P,e),e&&fe()}));o.useEffect((()=>{fe()}),[fe]);const ve=e=>{ge||(se(!0),de(!0),J&&J(e))},Ze=(e,t)=>{ge&&(se(!1),V&&V(e,t))},Ge=(e,t,n,o)=>{if(W){if(te.length===t.length&&te.every(((e,n)=>e===t[n])))return}else if(te===t)return;k&&k(e,t,n,o),ne(t)},Se=o.useRef(!1),Be=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=t;if(W){r=Array.isArray(te)?te.slice():[];const e=r.findIndex((e=>R(t,e)));-1===e?r.push(t):"freeSolo"!==n&&(r.splice(e,1),o="removeOption")}ie(e,r,o),Ge(e,r,o,{option:t}),u||e&&(e.ctrlKey||e.metaKey)||Ze(e,o),(!0===i||"touch"===i&&Se.current||"mouse"===i&&!Se.current)&&T.current.blur()},we=(e,t)=>{if(!W)return;""===oe&&Ze(e,"toggleInput");let n=O;-1===O?""===oe&&"previous"===t&&(n=te.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===te.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===te.length||"previous"===t&&-1===n)return-1;const e=K?"data-item-index":"data-tag-index",o=U.querySelector("[".concat(e,'="').concat(n,'"]'));if(o&&o.hasAttribute("tabindex")&&!o.disabled&&"true"!==o.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),q(n),me(n)},Re=e=>{j.current=!0,re(""),x&&x(e,"","clear"),Ge(e,W?[]:null,"clear")},We=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1===O||["ArrowLeft","ArrowRight"].includes(t.key)||(q(-1),me(-1)),229!==t.which))switch(t.key){case"Home":ue&&G&&(t.preventDefault(),be({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":ue&&G&&(t.preventDefault(),be({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),be({diff:-5,direction:"previous",reason:"keyboard",event:t}),ve(t);break;case"PageDown":t.preventDefault(),be({diff:5,direction:"next",reason:"keyboard",event:t}),ve(t);break;case"ArrowDown":t.preventDefault(),be({diff:1,direction:"next",reason:"keyboard",event:t}),ve(t);break;case"ArrowUp":t.preventDefault(),be({diff:-1,direction:"previous",reason:"keyboard",event:t}),ve(t);break;case"ArrowLeft":!W&&K?me(0):we(t,"previous");break;case"ArrowRight":!W&&K?me(-1):we(t,"next");break;case"Enter":if(-1!==$.current&&ue){const e=Ce[$.current],n=!!f&&f(e);if(t.preventDefault(),n)return;Be(t,e,"selectOption"),r&&T.current.setSelectionRange(T.current.value.length,T.current.value.length)}else b&&""!==oe&&!1===Ie&&(W&&t.preventDefault(),Be(t,oe,"createOption","freeSolo"));break;case"Escape":ue?(t.preventDefault(),t.stopPropagation(),Ze(t,"escape")):s&&(""!==oe||W&&te.length>0||K)&&(t.preventDefault(),t.stopPropagation(),Re(t));break;case"Backspace":if(W&&!Y&&""===oe&&te.length>0){const e=-1===O?te.length-1:O,n=te.slice();n.splice(e,1),Ge(t,n,"removeOption",{option:te[e]})}W||!K||Y||(ne(null),me(-1));break;case"Delete":if(W&&!Y&&""===oe&&te.length>0&&-1!==O){const e=O,n=te.slice();n.splice(e,1),Ge(t,n,"removeOption",{option:te[e]})}W||!K||Y||(ne(null),me(-1))}},ke=e=>{ae(!0),H&&!j.current&&ve(e)},Ve=e=>{t(P)?T.current.focus():(ae(!1),D.current=!0,j.current=!1,a&&-1!==$.current&&ue?Be(e,Ce[$.current],"blur"):a&&b&&""!==oe?Be(e,oe,"blur","freeSolo"):g&&ie(e,te,"blur"),Ze(e,"blur"))},xe=e=>{const t=e.target.value;oe!==t&&(re(t),de(!1),x&&x(e,t,"input")),""===t?I||W||Ge(e,null,"clear"):ve(e)},Je=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));$.current!==t&&he({event:e,index:t,reason:"mouse"})},Ne=e=>{he({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Se.current=!0},He=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Be(e,Ce[t],"selectOption"),Se.current=!1},Fe=e=>t=>{const n=te.slice();n.splice(e,1),Ge(t,n,"removeOption",{option:te[e]})},Ye=e=>{Ge(e,null,"removeOption",{option:te})},Ke=e=>{ge?Ze(e,"toggleInput"):ve(e)},Me=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==E&&e.preventDefault()},Le=e=>{e.currentTarget.contains(e.target)&&(T.current.focus(),M&&D.current&&T.current.selectionEnd-T.current.selectionStart===0&&T.current.select(),D.current=!1)},Ee=e=>{C||""!==oe&&ge||Ke(e)};let ze=b&&oe.length>0;ze=ze||(W?te.length>0:null!==te);let je=Ce;if(Z){new Map;je=Ce.reduce(((e,t,n)=>{const o=Z(t);return e.length>0&&e[e.length-1].group===o?e[e.length-1].options.push(t):e.push({key:n,index:n,group:o,options:[t]}),e}),[])}return C&&le&&Ve(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xe(Xe({},e),{},{onKeyDown:We(e),onMouseDown:Me,onClick:Le})},getInputLabelProps:()=>({id:"".concat(E,"-label"),htmlFor:E}),getInputProps:()=>({id:E,value:oe,onBlur:Ve,onFocus:ke,onChange:xe,onMouseDown:Ee,"aria-activedescendant":ue?"":null,"aria-autocomplete":r?"both":"list","aria-controls":Ae?"".concat(E,"-listbox"):void 0,"aria-expanded":Ae,autoComplete:"off",ref:T,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:C}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Re}),getItemProps:function(){let{index:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xe(Xe(Xe({},W&&{key:e}),K?{"data-item-index":e}:{"data-tag-index":e}),{},{tabIndex:-1},!Y&&{onDelete:W?Fe(e):Ye})},getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ke}),getTagProps:e=>{let{index:t}=e;return Xe({key:t,"data-tag-index":t,tabIndex:-1},!Y&&{onDelete:Fe(t)})},getListboxProps:()=>({role:"listbox",id:"".concat(E,"-listbox"),"aria-labelledby":"".concat(E,"-label"),ref:ye,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{var t;let{index:n,option:o}=e;const r=(W?te:[te]).some((e=>null!=e&&R(o,e))),l=!!f&&f(o);return{key:null!==(t=null===y||void 0===y?void 0:y(o))&&void 0!==t?t:z(o),tabIndex:-1,role:"option",id:"".concat(E,"-option-").concat(n),onMouseMove:Je,onClick:He,onTouchStart:Ne,"data-option-index":n,"aria-disabled":l,"aria-selected":r}},id:E,inputValue:oe,value:te,dirty:ze,expanded:ue&&U,popupOpen:ue,focused:le||-1!==O,anchorEl:U,setAnchorEl:Q,focusedItem:O,focusedTag:O,groupedOptions:je}};function gB(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function sB(e){return e instanceof gB(e).Element||e instanceof Element}function cB(e){return e instanceof gB(e).HTMLElement||e instanceof HTMLElement}function dB(e){return"undefined"!==typeof ShadowRoot&&(e instanceof gB(e).ShadowRoot||e instanceof ShadowRoot)}var IB=Math.max,uB=Math.min,CB=Math.round;function pB(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function AB(){return!/^((?!chrome|android).)*safari/i.test(pB())}function mB(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),r=1,l=1;t&&cB(e)&&(r=e.offsetWidth>0&&CB(o.width)/e.offsetWidth||1,l=e.offsetHeight>0&&CB(o.height)/e.offsetHeight||1);var a=(sB(e)?gB(e):window).visualViewport,i=!AB()&&n,g=(o.left+(i&&a?a.offsetLeft:0))/r,s=(o.top+(i&&a?a.offsetTop:0))/l,c=o.width/r,d=o.height/l;return{width:c,height:d,top:s,right:g+c,bottom:s+d,left:g,x:g,y:s}}function hB(e){var t=gB(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bB(e){return e?(e.nodeName||"").toLowerCase():null}function fB(e){return((sB(e)?e.ownerDocument:e.document)||window.document).documentElement}function yB(e){return mB(fB(e)).left+hB(e).scrollLeft}function vB(e){return gB(e).getComputedStyle(e)}function ZB(e){var t=vB(e),n=t.overflow,o=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function GB(e,t,n){void 0===n&&(n=!1);var o=cB(t),r=cB(t)&&function(e){var t=e.getBoundingClientRect(),n=CB(t.width)/e.offsetWidth||1,o=CB(t.height)/e.offsetHeight||1;return 1!==n||1!==o}(t),l=fB(t),a=mB(e,r,n),i={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(o||!o&&!n)&&(("body"!==bB(t)||ZB(l))&&(i=function(e){return e!==gB(e)&&cB(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:hB(e);var t}(t)),cB(t)?((g=mB(t,!0)).x+=t.clientLeft,g.y+=t.clientTop):l&&(g.x=yB(l))),{x:a.left+i.scrollLeft-g.x,y:a.top+i.scrollTop-g.y,width:a.width,height:a.height}}function SB(e){var t=mB(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function BB(e){return"html"===bB(e)?e:e.assignedSlot||e.parentNode||(dB(e)?e.host:null)||fB(e)}function wB(e){return["html","body","#document"].indexOf(bB(e))>=0?e.ownerDocument.body:cB(e)&&ZB(e)?e:wB(BB(e))}function RB(e,t){var n;void 0===t&&(t=[]);var o=wB(e),r=o===(null==(n=e.ownerDocument)?void 0:n.body),l=gB(o),a=r?[l].concat(l.visualViewport||[],ZB(o)?o:[]):o,i=t.concat(a);return r?i:i.concat(RB(BB(a)))}function WB(e){return["table","td","th"].indexOf(bB(e))>=0}function kB(e){return cB(e)&&"fixed"!==vB(e).position?e.offsetParent:null}function VB(e){for(var t=gB(e),n=kB(e);n&&WB(n)&&"static"===vB(n).position;)n=kB(n);return n&&("html"===bB(n)||"body"===bB(n)&&"static"===vB(n).position)?t:n||function(e){var t=/firefox/i.test(pB());if(/Trident/i.test(pB())&&cB(e)&&"fixed"===vB(e).position)return null;var n=BB(e);for(dB(n)&&(n=n.host);cB(n)&&["html","body"].indexOf(bB(n))<0;){var o=vB(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e)||t}var XB="top",xB="bottom",JB="right",NB="left",HB="auto",FB=[XB,xB,JB,NB],YB="start",KB="end",MB="viewport",LB="popper",EB=FB.reduce((function(e,t){return e.concat([t+"-"+YB,t+"-"+KB])}),[]),zB=[].concat(FB,[HB]).reduce((function(e,t){return e.concat([t,t+"-"+YB,t+"-"+KB])}),[]),jB=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function DB(e){var t=new Map,n=new Set,o=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var o=t.get(e);o&&r(o)}})),o.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),o}function TB(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var PB={placement:"bottom",modifiers:[],strategy:"absolute"};function UB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function QB(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,r=t.defaultOptions,l=void 0===r?PB:r;return function(e,t,n){void 0===n&&(n=l);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},PB,l),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],i=!1,g={state:r,setOptions:function(n){var i="function"===typeof n?n(r.options):n;s(),r.options=Object.assign({},l,r.options,i),r.scrollParents={reference:sB(e)?RB(e):e.contextElement?RB(e.contextElement):[],popper:RB(t)};var c=function(e){var t=DB(e);return jB.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(o,r.options.modifiers)));return r.orderedModifiers=c.filter((function(e){return e.enabled})),r.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,o=void 0===n?{}:n,l=e.effect;if("function"===typeof l){var i=l({state:r,name:t,instance:g,options:o}),s=function(){};a.push(i||s)}})),g.update()},forceUpdate:function(){if(!i){var e=r.elements,t=e.reference,n=e.popper;if(UB(t,n)){r.rects={reference:GB(t,VB(n),"fixed"===r.options.strategy),popper:SB(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(e){return r.modifiersData[e.name]=Object.assign({},e.data)}));for(var o=0;o<r.orderedModifiers.length;o++)if(!0!==r.reset){var l=r.orderedModifiers[o],a=l.fn,s=l.options,c=void 0===s?{}:s,d=l.name;"function"===typeof a&&(r=a({state:r,options:c,name:d,instance:g})||r)}else r.reset=!1,o=-1}}},update:TB((function(){return new Promise((function(e){g.forceUpdate(),e(r)}))})),destroy:function(){s(),i=!0}};if(!UB(e,t))return g;function s(){a.forEach((function(e){return e()})),a=[]}return g.setOptions(n).then((function(e){!i&&n.onFirstUpdate&&n.onFirstUpdate(e)})),g}}var OB={passive:!0};function qB(e){return e.split("-")[0]}function _B(e){return e.split("-")[1]}function $B(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ew(e){var t,n=e.reference,o=e.element,r=e.placement,l=r?qB(r):null,a=r?_B(r):null,i=n.x+n.width/2-o.width/2,g=n.y+n.height/2-o.height/2;switch(l){case XB:t={x:i,y:n.y-o.height};break;case xB:t={x:i,y:n.y+n.height};break;case JB:t={x:n.x+n.width,y:g};break;case NB:t={x:n.x-o.width,y:g};break;default:t={x:n.x,y:n.y}}var s=l?$B(l):null;if(null!=s){var c="y"===s?"height":"width";switch(a){case YB:t[s]=t[s]-(n[c]/2-o[c]/2);break;case KB:t[s]=t[s]+(n[c]/2-o[c]/2)}}return t}var tw={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nw(e){var t,n=e.popper,o=e.popperRect,r=e.placement,l=e.variation,a=e.offsets,i=e.position,g=e.gpuAcceleration,s=e.adaptive,c=e.roundOffsets,d=e.isFixed,I=a.x,u=void 0===I?0:I,C=a.y,p=void 0===C?0:C,A="function"===typeof c?c({x:u,y:p}):{x:u,y:p};u=A.x,p=A.y;var m=a.hasOwnProperty("x"),h=a.hasOwnProperty("y"),b=NB,f=XB,y=window;if(s){var v=VB(n),Z="clientHeight",G="clientWidth";if(v===gB(n)&&"static"!==vB(v=fB(n)).position&&"absolute"===i&&(Z="scrollHeight",G="scrollWidth"),r===XB||(r===NB||r===JB)&&l===KB)f=xB,p-=(d&&v===y&&y.visualViewport?y.visualViewport.height:v[Z])-o.height,p*=g?1:-1;if(r===NB||(r===XB||r===xB)&&l===KB)b=JB,u-=(d&&v===y&&y.visualViewport?y.visualViewport.width:v[G])-o.width,u*=g?1:-1}var S,B=Object.assign({position:i},s&&tw),w=!0===c?function(e,t){var n=e.x,o=e.y,r=t.devicePixelRatio||1;return{x:CB(n*r)/r||0,y:CB(o*r)/r||0}}({x:u,y:p},gB(n)):{x:u,y:p};return u=w.x,p=w.y,g?Object.assign({},B,((S={})[f]=h?"0":"",S[b]=m?"0":"",S.transform=(y.devicePixelRatio||1)<=1?"translate("+u+"px, "+p+"px)":"translate3d("+u+"px, "+p+"px, 0)",S)):Object.assign({},B,((t={})[f]=h?p+"px":"",t[b]=m?u+"px":"",t.transform="",t))}const ow={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},r=t.elements[e];cB(r)&&bB(r)&&(Object.assign(r.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],r=t.attributes[e]||{},l=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});cB(o)&&bB(o)&&(Object.assign(o.style,l),Object.keys(r).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]};const rw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,r=n.offset,l=void 0===r?[0,0]:r,a=zB.reduce((function(e,n){return e[n]=function(e,t,n){var o=qB(e),r=[NB,XB].indexOf(o)>=0?-1:1,l="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=l[0],i=l[1];return a=a||0,i=(i||0)*r,[NB,JB].indexOf(o)>=0?{x:i,y:a}:{x:a,y:i}}(n,t.rects,l),e}),{}),i=a[t.placement],g=i.x,s=i.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=g,t.modifiersData.popperOffsets.y+=s),t.modifiersData[o]=a}};var lw={left:"right",right:"left",bottom:"top",top:"bottom"};function aw(e){return e.replace(/left|right|bottom|top/g,(function(e){return lw[e]}))}var iw={start:"end",end:"start"};function gw(e){return e.replace(/start|end/g,(function(e){return iw[e]}))}function sw(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&dB(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function cw(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function dw(e,t,n){return t===MB?cw(function(e,t){var n=gB(e),o=fB(e),r=n.visualViewport,l=o.clientWidth,a=o.clientHeight,i=0,g=0;if(r){l=r.width,a=r.height;var s=AB();(s||!s&&"fixed"===t)&&(i=r.offsetLeft,g=r.offsetTop)}return{width:l,height:a,x:i+yB(e),y:g}}(e,n)):sB(t)?function(e,t){var n=mB(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):cw(function(e){var t,n=fB(e),o=hB(e),r=null==(t=e.ownerDocument)?void 0:t.body,l=IB(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=IB(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),i=-o.scrollLeft+yB(e),g=-o.scrollTop;return"rtl"===vB(r||n).direction&&(i+=IB(n.clientWidth,r?r.clientWidth:0)-l),{width:l,height:a,x:i,y:g}}(fB(e)))}function Iw(e,t,n,o){var r="clippingParents"===t?function(e){var t=RB(BB(e)),n=["absolute","fixed"].indexOf(vB(e).position)>=0&&cB(e)?VB(e):e;return sB(n)?t.filter((function(e){return sB(e)&&sw(e,n)&&"body"!==bB(e)})):[]}(e):[].concat(t),l=[].concat(r,[n]),a=l[0],i=l.reduce((function(t,n){var r=dw(e,n,o);return t.top=IB(r.top,t.top),t.right=uB(r.right,t.right),t.bottom=uB(r.bottom,t.bottom),t.left=IB(r.left,t.left),t}),dw(e,a,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function uw(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Cw(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function pw(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=void 0===o?e.placement:o,l=n.strategy,a=void 0===l?e.strategy:l,i=n.boundary,g=void 0===i?"clippingParents":i,s=n.rootBoundary,c=void 0===s?MB:s,d=n.elementContext,I=void 0===d?LB:d,u=n.altBoundary,C=void 0!==u&&u,p=n.padding,A=void 0===p?0:p,m=uw("number"!==typeof A?A:Cw(A,FB)),h=I===LB?"reference":LB,b=e.rects.popper,f=e.elements[C?h:I],y=Iw(sB(f)?f:f.contextElement||fB(e.elements.popper),g,c,a),v=mB(e.elements.reference),Z=ew({reference:v,element:b,strategy:"absolute",placement:r}),G=cw(Object.assign({},b,Z)),S=I===LB?G:v,B={top:y.top-S.top+m.top,bottom:S.bottom-y.bottom+m.bottom,left:y.left-S.left+m.left,right:S.right-y.right+m.right},w=e.modifiersData.offset;if(I===LB&&w){var R=w[r];Object.keys(B).forEach((function(e){var t=[JB,xB].indexOf(e)>=0?1:-1,n=[XB,xB].indexOf(e)>=0?"y":"x";B[e]+=R[n]*t}))}return B}const Aw={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var r=n.mainAxis,l=void 0===r||r,a=n.altAxis,i=void 0===a||a,g=n.fallbackPlacements,s=n.padding,c=n.boundary,d=n.rootBoundary,I=n.altBoundary,u=n.flipVariations,C=void 0===u||u,p=n.allowedAutoPlacements,A=t.options.placement,m=qB(A),h=g||(m===A||!C?[aw(A)]:function(e){if(qB(e)===HB)return[];var t=aw(e);return[gw(e),t,gw(t)]}(A)),b=[A].concat(h).reduce((function(e,n){return e.concat(qB(n)===HB?function(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=n.boundary,l=n.rootBoundary,a=n.padding,i=n.flipVariations,g=n.allowedAutoPlacements,s=void 0===g?zB:g,c=_B(o),d=c?i?EB:EB.filter((function(e){return _B(e)===c})):FB,I=d.filter((function(e){return s.indexOf(e)>=0}));0===I.length&&(I=d);var u=I.reduce((function(t,n){return t[n]=pw(e,{placement:n,boundary:r,rootBoundary:l,padding:a})[qB(n)],t}),{});return Object.keys(u).sort((function(e,t){return u[e]-u[t]}))}(t,{placement:n,boundary:c,rootBoundary:d,padding:s,flipVariations:C,allowedAutoPlacements:p}):n)}),[]),f=t.rects.reference,y=t.rects.popper,v=new Map,Z=!0,G=b[0],S=0;S<b.length;S++){var B=b[S],w=qB(B),R=_B(B)===YB,W=[XB,xB].indexOf(w)>=0,k=W?"width":"height",V=pw(t,{placement:B,boundary:c,rootBoundary:d,altBoundary:I,padding:s}),X=W?R?JB:NB:R?xB:XB;f[k]>y[k]&&(X=aw(X));var x=aw(X),J=[];if(l&&J.push(V[w]<=0),i&&J.push(V[X]<=0,V[x]<=0),J.every((function(e){return e}))){G=B,Z=!1;break}v.set(B,J)}if(Z)for(var N=function(e){var t=b.find((function(t){var n=v.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return G=t,"break"},H=C?3:1;H>0;H--){if("break"===N(H))break}t.placement!==G&&(t.modifiersData[o]._skip=!0,t.placement=G,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function mw(e,t,n){return IB(e,uB(t,n))}const hw={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name,r=n.mainAxis,l=void 0===r||r,a=n.altAxis,i=void 0!==a&&a,g=n.boundary,s=n.rootBoundary,c=n.altBoundary,d=n.padding,I=n.tether,u=void 0===I||I,C=n.tetherOffset,p=void 0===C?0:C,A=pw(t,{boundary:g,rootBoundary:s,padding:d,altBoundary:c}),m=qB(t.placement),h=_B(t.placement),b=!h,f=$B(m),y="x"===f?"y":"x",v=t.modifiersData.popperOffsets,Z=t.rects.reference,G=t.rects.popper,S="function"===typeof p?p(Object.assign({},t.rects,{placement:t.placement})):p,B="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),w=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(v){if(l){var W,k="y"===f?XB:NB,V="y"===f?xB:JB,X="y"===f?"height":"width",x=v[f],J=x+A[k],N=x-A[V],H=u?-G[X]/2:0,F=h===YB?Z[X]:G[X],Y=h===YB?-G[X]:-Z[X],K=t.elements.arrow,M=u&&K?SB(K):{width:0,height:0},L=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},E=L[k],z=L[V],j=mw(0,Z[X],M[X]),D=b?Z[X]/2-H-j-E-B.mainAxis:F-j-E-B.mainAxis,T=b?-Z[X]/2+H+j+z+B.mainAxis:Y+j+z+B.mainAxis,P=t.elements.arrow&&VB(t.elements.arrow),U=P?"y"===f?P.clientTop||0:P.clientLeft||0:0,Q=null!=(W=null==w?void 0:w[f])?W:0,O=x+T-Q,q=mw(u?uB(J,x+D-Q-U):J,x,u?IB(N,O):N);v[f]=q,R[f]=q-x}if(i){var _,$="x"===f?XB:NB,ee="x"===f?xB:JB,te=v[y],ne="y"===y?"height":"width",oe=te+A[$],re=te-A[ee],le=-1!==[XB,NB].indexOf(m),ae=null!=(_=null==w?void 0:w[y])?_:0,ie=le?oe:te-Z[ne]-G[ne]-ae+B.altAxis,ge=le?te+Z[ne]+G[ne]-ae-B.altAxis:re,se=u&&le?function(e,t,n){var o=mw(e,t,n);return o>n?n:o}(ie,te,ge):mw(u?ie:oe,te,u?ge:re);v[y]=se,R[y]=se-te}t.modifiersData[o]=R}},requiresIfExists:["offset"]};const bw={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,o=e.name,r=e.options,l=n.elements.arrow,a=n.modifiersData.popperOffsets,i=qB(n.placement),g=$B(i),s=[NB,JB].indexOf(i)>=0?"height":"width";if(l&&a){var c=function(e,t){return uw("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Cw(e,FB))}(r.padding,n),d=SB(l),I="y"===g?XB:NB,u="y"===g?xB:JB,C=n.rects.reference[s]+n.rects.reference[g]-a[g]-n.rects.popper[s],p=a[g]-n.rects.reference[g],A=VB(l),m=A?"y"===g?A.clientHeight||0:A.clientWidth||0:0,h=C/2-p/2,b=c[I],f=m-d[s]-c[u],y=m/2-d[s]/2+h,v=mw(b,y,f),Z=g;n.modifiersData[o]=((t={})[Z]=v,t.centerOffset=v-y,t)}},effect:function(e){var t=e.state,n=e.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!==typeof o||(o=t.elements.popper.querySelector(o)))&&sw(t.elements.popper,o)&&(t.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fw(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function yw(e){return[XB,JB,xB,NB].some((function(t){return e[t]>=0}))}var vw=QB({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,l=void 0===r||r,a=o.resize,i=void 0===a||a,g=gB(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&s.forEach((function(e){e.addEventListener("scroll",n.update,OB)})),i&&g.addEventListener("resize",n.update,OB),function(){l&&s.forEach((function(e){e.removeEventListener("scroll",n.update,OB)})),i&&g.removeEventListener("resize",n.update,OB)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ew({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,o=n.gpuAcceleration,r=void 0===o||o,l=n.adaptive,a=void 0===l||l,i=n.roundOffsets,g=void 0===i||i,s={placement:qB(t.placement),variation:_B(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,nw(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:g})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,nw(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:g})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},ow,rw,Aw,hw,bw,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,o=t.rects.reference,r=t.rects.popper,l=t.modifiersData.preventOverflow,a=pw(t,{elementContext:"reference"}),i=pw(t,{altBoundary:!0}),g=fw(a,o),s=fw(i,r,l),c=yw(g),d=yw(s);t.modifiersData[n]={referenceClippingOffsets:g,popperEscapeOffsets:s,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}}]});const Zw=function(e){return"string"===typeof e};const Gw=function(e,t,n){return void 0===e||Zw(e)?t:Xe(Xe({},t),{},{ownerState:Xe(Xe({},t.ownerState),n)})};const Sw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const Bw=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const ww=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:r,className:l}=e;if(!t){const e=Vg(null===n||void 0===n?void 0:n.className,l,null===r||void 0===r?void 0:r.className,null===o||void 0===o?void 0:o.className),t=Xe(Xe(Xe({},null===n||void 0===n?void 0:n.style),null===r||void 0===r?void 0:r.style),null===o||void 0===o?void 0:o.style),a=Xe(Xe(Xe({},n),r),o);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=Sw(Xe(Xe({},r),o)),i=Bw(o),g=Bw(r),s=t(a),c=Vg(null===s||void 0===s?void 0:s.className,null===n||void 0===n?void 0:n.className,l,null===r||void 0===r?void 0:r.className,null===o||void 0===o?void 0:o.className),d=Xe(Xe(Xe(Xe({},null===s||void 0===s?void 0:s.style),null===n||void 0===n?void 0:n.style),null===r||void 0===r?void 0:r.style),null===o||void 0===o?void 0:o.style),I=Xe(Xe(Xe(Xe({},s),n),g),i);return c.length>0&&(I.className=c),Object.keys(d).length>0&&(I.style=d),{props:I,internalRef:s.ref}};const Rw=function(e,t,n){return"function"===typeof e?e(t,n):e},Ww=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const kw=function(e){var t;const{elementType:n,externalSlotProps:o,ownerState:r,skipResolvingSlotProps:l=!1}=e,a=Kg(e,Ww),i=l?{}:Rw(o,r),{props:g,internalRef:s}=ww(Xe(Xe({},a),{},{externalSlotProps:i})),c=Xg(s,null===i||void 0===i?void 0:i.ref,null===(t=e.additionalProps)||void 0===t?void 0:t.ref);return Gw(n,Xe(Xe({},g),{},{ref:c}),r)};function Vw(e){var t;return parseInt(o.version,10)>=19?(null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.ref)||null:(null===e||void 0===e?void 0:e.ref)||null}const Xw=o.forwardRef((function(e,t){const{children:n,container:r,disablePortal:l=!1}=e,[i,g]=o.useState(null),s=Xg(o.isValidElement(n)?Vw(n):null,t);if(up((()=>{l||g(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,l]),up((()=>{if(i&&!l)return $S(t,i),()=>{$S(t,null)}}),[t,i,l]),l){if(o.isValidElement(n)){const e={ref:s};return o.cloneElement(n,e)}return n}return i?a.createPortal(n,i):i}));function xw(e){return yu("MuiPopper",e)}vu("MuiPopper",["root"]);const Jw=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Nw=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Hw(e){return"function"===typeof e?e():e}function Fw(e){return void 0!==e.nodeType}const Yw={},Kw=o.forwardRef((function(e,t){var n;const{anchorEl:r,children:l,direction:a,disablePortal:i,modifiers:g,open:s,placement:c,popperOptions:d,popperRef:I,slotProps:u={},slots:C={},TransitionProps:p,ownerState:A}=e,m=Kg(e,Jw),h=o.useRef(null),b=Xg(h,t),f=o.useRef(null),y=Xg(f,I),v=o.useRef(y);up((()=>{v.current=y}),[y]),o.useImperativeHandle(I,(()=>f.current),[]);const Z=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(c,a),[G,S]=o.useState(Z),[B,w]=o.useState(Hw(r));o.useEffect((()=>{f.current&&f.current.forceUpdate()})),o.useEffect((()=>{r&&w(Hw(r))}),[r]),up((()=>{if(!B||!s)return;let e=[{name:"preventOverflow",options:{altBoundary:i}},{name:"flip",options:{altBoundary:i}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{S(e.placement)})(t)}}];null!=g&&(e=e.concat(g)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=vw(B,h.current,Xe(Xe({placement:Z},d),{},{modifiers:e}));return v.current(t),()=>{t.destroy(),v.current(null)}}),[B,i,g,s,d,Z]);const R={placement:G};null!==p&&(R.TransitionProps=p);const W=(e=>{const{classes:t}=e;return Ng({root:["root"]},xw,t)})(e),k=null!==(n=C.root)&&void 0!==n?n:"div",V=kw({elementType:k,externalSlotProps:u.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:b},ownerState:e,className:W.root});return(0,ao.jsx)(k,Xe(Xe({},V),{},{children:"function"===typeof l?l(R):l}))})),Mw=o.forwardRef((function(e,t){const{anchorEl:n,children:r,container:l,direction:a="ltr",disablePortal:i=!1,keepMounted:g=!1,modifiers:s,open:c,placement:d="bottom",popperOptions:I=Yw,popperRef:u,style:C,transition:p=!1,slotProps:A={},slots:m={}}=e,h=Kg(e,Nw),[b,f]=o.useState(!0);if(!g&&!c&&(!p||b))return null;let y;if(l)y=l;else if(n){const e=Hw(n);y=e&&Fw(e)?Sy(e).body:Sy(null).body}const v=c||!g||p&&!b?void 0:"none",Z=p?{in:c,onEnter:()=>{f(!1)},onExited:()=>{f(!0)}}:void 0;return(0,ao.jsx)(Xw,{disablePortal:i,container:y,children:(0,ao.jsx)(Kw,Xe(Xe({anchorEl:n,direction:a,disablePortal:i,modifiers:s,ref:t,open:p?!b:c,placement:d,popperOptions:I,popperRef:u,slotProps:A,slots:m},h),{},{style:Xe({position:"fixed",top:0,left:0,display:v},C),TransitionProps:Z,children:r}))})})),Lw=Mw,Ew=o.createContext(void 0);function zw(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:o}=e;if(!t||!t.components||!t.components[n])return o;const r=t.components[n];return r.defaultProps?Rp(r.defaultProps,o):r.styleOverrides||r.variants?o:Rp(r,o)}({props:t,name:n,theme:{components:o.useContext(Ew)}})}function jw(e){return zw(e)}const Dw=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Tw=mu(Lw,{name:"MuiPopper",slot:"Root"})({}),Pw=o.forwardRef((function(e,t){var n;const o=Ym(),r=jw({props:e,name:"MuiPopper"}),{anchorEl:l,component:a,components:i,componentsProps:g,container:s,disablePortal:c,keepMounted:d,modifiers:I,open:u,placement:C,popperOptions:p,popperRef:A,transition:m,slots:h,slotProps:b}=r,f=Kg(r,Dw),y=null!==(n=null===h||void 0===h?void 0:h.root)&&void 0!==n?n:null===i||void 0===i?void 0:i.Root,v=Xe({anchorEl:l,container:s,disablePortal:c,keepMounted:d,modifiers:I,open:u,placement:C,popperOptions:p,popperRef:A,transition:m},f);return(0,ao.jsx)(Tw,Xe(Xe({as:a,direction:o?"rtl":"ltr",slots:{root:y},slotProps:null!==b&&void 0!==b?b:g},v),{},{ref:t}))})),Uw=Pw,Qw={theme:void 0};const Ow=function(e){let t,n;return function(o){let r=t;return void 0!==r&&o.theme===n||(Qw.theme=o.theme,r=Yd(e(Qw)),t=r,n=o.theme),r}},qw=Jg;function _w(e){return yu("MuiListSubheader",e)}vu("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const $w=["className","color","component","disableGutters","disableSticky","inset"],eR=mu("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat(qw(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(Ow((e=>{let{theme:t}=e;return{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:72}},{props:e=>{let{ownerState:t}=e;return!t.disableSticky},style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}}))),tR=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiListSubheader"}),{className:o,color:r="default",component:l="li",disableGutters:a=!1,disableSticky:i=!1,inset:g=!1}=n,s=Kg(n,$w),c=Xe(Xe({},n),{},{color:r,component:l,disableGutters:a,disableSticky:i,inset:g}),d=(e=>{const{classes:t,color:n,disableGutters:o,inset:r,disableSticky:l}=e;return Ng({root:["root","default"!==n&&"color".concat(qw(n)),!o&&"gutters",r&&"inset",!l&&"sticky"]},_w,t)})(c);return(0,ao.jsx)(eR,Xe({as:l,className:Vg(d.root,o),ref:t,ownerState:c},s))}));tR&&(tR.muiSkipListHighlight=!0);const nR=tR;function oR(e){return yu("MuiPaper",e)}vu("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rR=["className","component","elevation","square","variant"],lR=mu("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})(Ow((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:"1px solid ".concat((t.vars||t).palette.divider)}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),aR=o.forwardRef((function(e,t){var n;const o=jw({props:e,name:"MuiPaper"}),r=bZ(),{className:l,component:a="div",elevation:i=1,square:g=!1,variant:s="elevation"}=o,c=Kg(o,rR),d=Xe(Xe({},o),{},{component:a,elevation:i,square:g,variant:s}),I=(e=>{const{square:t,elevation:n,variant:o,classes:r}=e;return Ng({root:["root",o,!t&&"rounded","elevation"===o&&"elevation".concat(n)]},oR,r)})(d);return(0,ao.jsx)(lR,Xe(Xe({as:a,ownerState:d,className:Vg(I.root,l),ref:t},c),{},{style:Xe(Xe({},"elevation"===s&&Xe(Xe({"--Paper-shadow":(r.vars||r).shadows[i]},r.vars&&{"--Paper-overlay":null===(n=r.vars.overlays)||void 0===n?void 0:n[i]}),!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":"linear-gradient(".concat(nI("#fff",UI(i)),", ").concat(nI("#fff",UI(i)),")")})),c.style)}))})),iR=aR,gR=rA;function sR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function cR(e){try{return e.matches(":focus-visible")}catch(sE){0}return!1}const dR=Xg,IR=Cp;class uR{static create(){return new uR}static use(){const e=Xu(uR.create).current,[t,n]=o.useState(!1);return e.shouldMount=t,e.setShouldMount=n,o.useEffect(e.mountEffect,[t]),e}constructor(){(0,ke.A)(this,"mountEffect",(()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())})),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,o)=>{e=n,t=o}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.start(...t)}))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.stop(...t)}))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.pulsate(...t)}))}}function CR(e,t){return CR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},CR(e,t)}function pR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,CR(e,t)}const AR=o.createContext(null);function mR(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,o.isValidElement)(e)?t(e):e}(e)})),n}function hR(e,t,n){return null!=n[t]?n[t]:e.props[t]}function bR(e,t,n){var r=mR(e.children),l=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var o,r=Object.create(null),l=[];for(var a in e)a in t?l.length&&(r[a]=l,l=[]):l.push(a);var i={};for(var g in t){if(r[g])for(o=0;o<r[g].length;o++){var s=r[g][o];i[r[g][o]]=n(s)}i[g]=n(g)}for(o=0;o<l.length;o++)i[l[o]]=n(l[o]);return i}(t,r);return Object.keys(l).forEach((function(a){var i=l[a];if((0,o.isValidElement)(i)){var g=a in t,s=a in r,c=t[a],d=(0,o.isValidElement)(c)&&!c.props.in;!s||g&&!d?s||!g||d?s&&g&&(0,o.isValidElement)(c)&&(l[a]=(0,o.cloneElement)(i,{onExited:n.bind(null,i),in:c.props.in,exit:hR(i,"exit",e),enter:hR(i,"enter",e)})):l[a]=(0,o.cloneElement)(i,{in:!1}):l[a]=(0,o.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:hR(i,"exit",e),enter:hR(i,"enter",e)})}})),l}var fR=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},yR=function(e){function t(t,n){var o,r=(o=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o));return o.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},o}pR(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,l=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,mR(n.children,(function(e){return(0,o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:hR(e,"appear",n),enter:hR(e,"enter",n),exit:hR(e,"exit",n)})}))):bR(e,l,a),firstRender:!1}},n.handleExited=function(e,t){var n=mR(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Sg({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Wg(e,["component","childFactory"]),l=this.state.contextValue,a=fR(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o.createElement(AR.Provider,{value:l},a):o.createElement(AR.Provider,{value:l},o.createElement(t,r,a))},t}(o.Component);yR.propTypes={},yR.defaultProps={component:"div",childFactory:function(e){return e}};const vR=yR;const ZR=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:l,rippleY:a,rippleSize:i,in:g,onExited:s,timeout:c}=e,[d,I]=o.useState(!1),u=Vg(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),C={width:i,height:i,top:-i/2+a,left:-i/2+l},p=Vg(n.child,d&&n.childLeaving,r&&n.childPulsate);return g||d||I(!0),o.useEffect((()=>{if(!g&&null!=s){const e=setTimeout(s,c);return()=>{clearTimeout(e)}}}),[s,g,c]),(0,ao.jsx)("span",{className:u,style:C,children:(0,ao.jsx)("span",{className:p})})};const GR=vu("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),SR=["center","classes","className"];var BR,wR,RR,WR;const kR=TG(BR||(BR=EG(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))),VR=TG(wR||(wR=EG(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))),XR=TG(RR||(RR=EG(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))),xR=mu("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),JR=mu(ZR,{name:"MuiTouchRipple",slot:"Ripple"})(WR||(WR=EG(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),GR.rippleVisible,kR,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),GR.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),GR.child,GR.childLeaving,VR,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),GR.childPulsate,XR,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),NR=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:l={},className:a}=n,i=Kg(n,SR),[g,s]=o.useState([]),c=o.useRef(0),d=o.useRef(null);o.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[g]);const I=o.useRef(!1),u=wp(),C=o.useRef(null),p=o.useRef(null),A=o.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:o,rippleSize:r,cb:a}=e;s((e=>[...e,(0,ao.jsx)(JR,{classes:{ripple:Vg(l.ripple,GR.ripple),rippleVisible:Vg(l.rippleVisible,GR.rippleVisible),ripplePulsate:Vg(l.ripplePulsate,GR.ripplePulsate),child:Vg(l.child,GR.child),childLeaving:Vg(l.childLeaving,GR.childLeaving),childPulsate:Vg(l.childPulsate,GR.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:o,rippleSize:r},c.current)])),c.current+=1,d.current=a}),[l]),m=o.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:o=!1,center:l=r||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null===e||void 0===e?void 0:e.type)&&I.current)return void(I.current=!1);"touchstart"===(null===e||void 0===e?void 0:e.type)&&(I.current=!0);const i=a?null:p.current,g=i?i.getBoundingClientRect():{width:0,height:0,left:0,top:0};let s,c,d;if(l||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)s=Math.round(g.width/2),c=Math.round(g.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;s=Math.round(t-g.left),c=Math.round(n-g.top)}if(l)d=Math.sqrt((2*g.width**2+g.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((i?i.clientWidth:0)-s),s)+2,t=2*Math.max(Math.abs((i?i.clientHeight:0)-c),c)+2;d=Math.sqrt(e**2+t**2)}null!==e&&void 0!==e&&e.touches?null===C.current&&(C.current=()=>{A({pulsate:o,rippleX:s,rippleY:c,rippleSize:d,cb:n})},u.start(80,(()=>{C.current&&(C.current(),C.current=null)}))):A({pulsate:o,rippleX:s,rippleY:c,rippleSize:d,cb:n})}),[r,A,u]),h=o.useCallback((()=>{m({},{pulsate:!0})}),[m]),b=o.useCallback(((e,t)=>{if(u.clear(),"touchend"===(null===e||void 0===e?void 0:e.type)&&C.current)return C.current(),C.current=null,void u.start(0,(()=>{b(e,t)}));C.current=null,s((e=>e.length>0?e.slice(1):e)),d.current=t}),[u]);return o.useImperativeHandle(t,(()=>({pulsate:h,start:m,stop:b})),[h,m,b]),(0,ao.jsx)(xR,Xe(Xe({className:Vg(GR.root,l.root,a),ref:p},i),{},{children:(0,ao.jsx)(vR,{component:null,exit:!0,children:g})}))})),HR=NR;function FR(e){return yu("MuiButtonBase",e)}const YR=vu("MuiButtonBase",["root","disabled","focusVisible"]),KR=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],MR=mu("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(YR.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),LR=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:l=!1,children:a,className:i,component:g="button",disabled:s=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:I=!1,focusVisibleClassName:u,LinkComponent:C="a",onBlur:p,onClick:A,onContextMenu:m,onDragLeave:h,onFocus:b,onFocusVisible:f,onKeyDown:y,onKeyUp:v,onMouseDown:Z,onMouseLeave:G,onMouseUp:S,onTouchEnd:B,onTouchMove:w,onTouchStart:R,tabIndex:W=0,TouchRippleProps:k,touchRippleRef:V,type:X}=n,x=Kg(n,KR),J=o.useRef(null),N=uR.use(),H=dR(N.ref,V),[F,Y]=o.useState(!1);s&&F&&Y(!1),o.useImperativeHandle(r,(()=>({focusVisible:()=>{Y(!0),J.current.focus()}})),[]);const K=N.shouldMount&&!c&&!s;o.useEffect((()=>{F&&I&&!c&&N.pulsate()}),[c,I,F,N]);const M=ER(N,"start",Z,d),L=ER(N,"stop",m,d),E=ER(N,"stop",h,d),z=ER(N,"stop",S,d),j=ER(N,"stop",(e=>{F&&e.preventDefault(),G&&G(e)}),d),D=ER(N,"start",R,d),T=ER(N,"stop",B,d),P=ER(N,"stop",w,d),U=ER(N,"stop",(e=>{cR(e.target)||Y(!1),p&&p(e)}),!1),Q=IR((e=>{J.current||(J.current=e.currentTarget),cR(e.target)&&(Y(!0),f&&f(e)),b&&b(e)})),O=()=>{const e=J.current;return g&&"button"!==g&&!("A"===e.tagName&&e.href)},q=IR((e=>{I&&!e.repeat&&F&&" "===e.key&&N.stop(e,(()=>{N.start(e)})),e.target===e.currentTarget&&O()&&" "===e.key&&e.preventDefault(),y&&y(e),e.target===e.currentTarget&&O()&&"Enter"===e.key&&!s&&(e.preventDefault(),A&&A(e))})),_=IR((e=>{I&&" "===e.key&&F&&!e.defaultPrevented&&N.stop(e,(()=>{N.pulsate(e)})),v&&v(e),A&&e.target===e.currentTarget&&O()&&" "===e.key&&!e.defaultPrevented&&A(e)}));let $=g;"button"===$&&(x.href||x.to)&&($=C);const ee={};"button"===$?(ee.type=void 0===X?"button":X,ee.disabled=s):(x.href||x.to||(ee.role="button"),s&&(ee["aria-disabled"]=s));const te=dR(t,J),ne=Xe(Xe({},n),{},{centerRipple:l,component:g,disabled:s,disableRipple:c,disableTouchRipple:d,focusRipple:I,tabIndex:W,focusVisible:F}),oe=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:o,classes:r}=e,l=Ng({root:["root",t&&"disabled",n&&"focusVisible"]},FR,r);return n&&o&&(l.root+=" ".concat(o)),l})(ne);return(0,ao.jsxs)(MR,Xe(Xe(Xe({as:$,className:Vg(oe.root,i),ownerState:ne,onBlur:U,onClick:A,onContextMenu:L,onFocus:Q,onKeyDown:q,onKeyUp:_,onMouseDown:M,onMouseLeave:j,onMouseUp:z,onDragLeave:E,onTouchEnd:T,onTouchMove:P,onTouchStart:D,ref:te,tabIndex:s?-1:W,type:X},ee),x),{},{children:[a,K?(0,ao.jsx)(HR,Xe({ref:H,center:l},k)):null]}))}));function ER(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return IR((r=>(n&&n(r),o||e[t](r),!0)))}const zR=LR;function jR(e){return yu("MuiCircularProgress",e)}vu("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const DR=["className","color","disableShrink","size","style","thickness","value","variant"];var TR,PR,UR,QR;const OR=44,qR=TG(TR||(TR=EG(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),_R=TG(PR||(PR=EG(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: -126px;\n  }\n"]))),$R="string"!==typeof qR?DG(UR||(UR=EG(["\n        animation: "," 1.4s linear infinite;\n      "])),qR):null,eW="string"!==typeof _R?DG(QR||(QR=EG(["\n        animation: "," 1.4s ease-in-out infinite;\n      "])),_R):null,tW=mu("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["color".concat(qw(n.color))]]}})(Ow((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:$R||{animation:"".concat(qR," 1.4s linear infinite")}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),nW=mu("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),oW=mu("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t["circle".concat(qw(n.variant))],n.disableShrink&&t.circleDisableShrink]}})(Ow((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:eW||{animation:"".concat(_R," 1.4s ease-in-out infinite")}}]}}))),rW=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiCircularProgress"}),{className:o,color:r="primary",disableShrink:l=!1,size:a=40,style:i,thickness:g=3.6,value:s=0,variant:c="indeterminate"}=n,d=Kg(n,DR),I=Xe(Xe({},n),{},{color:r,disableShrink:l,size:a,thickness:g,value:s,variant:c}),u=(e=>{const{classes:t,variant:n,color:o,disableShrink:r}=e;return Ng({root:["root",n,"color".concat(qw(o))],svg:["svg"],circle:["circle","circle".concat(qw(n)),r&&"circleDisableShrink"]},jR,t)})(I),C={},p={},A={};if("determinate"===c){const e=2*Math.PI*((OR-g)/2);C.strokeDasharray=e.toFixed(3),A["aria-valuenow"]=Math.round(s),C.strokeDashoffset="".concat(((100-s)/100*e).toFixed(3),"px"),p.transform="rotate(-90deg)"}return(0,ao.jsx)(tW,Xe(Xe(Xe({className:Vg(u.root,o),style:Xe(Xe({width:a,height:a},p),i),ownerState:I,ref:t,role:"progressbar"},A),d),{},{children:(0,ao.jsx)(nW,{className:u.svg,ownerState:I,viewBox:"".concat(22," ").concat(22," ").concat(OR," ").concat(OR),children:(0,ao.jsx)(oW,{className:u.circle,style:C,ownerState:I,cx:OR,cy:OR,r:(OR-g)/2,fill:"none",strokeWidth:g})})}))})),lW=rW;function aW(e){return yu("MuiIconButton",e)}const iW=vu("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),gW=["edge","children","className","color","disabled","disableFocusRipple","size","id","loading","loadingIndicator"],sW=mu(zR,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,"default"!==n.color&&t["color".concat(qw(n.color))],n.edge&&t["edge".concat(qw(n.edge))],t["size".concat(qw(n.size))]]}})(Ow((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),Ow((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{"--IconButton-hoverBg":t.vars?"rgba(".concat((t.vars||t).palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],["&.".concat(iW.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},["&.".concat(iW.loading)]:{color:"transparent"}}}))),cW=mu("span",{name:"MuiIconButton",slot:"LoadingIndicator"})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]}})),dW=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiIconButton"}),{edge:o=!1,children:r,className:l,color:a="default",disabled:i=!1,disableFocusRipple:g=!1,size:s="medium",id:c,loading:d=null,loadingIndicator:I}=n,u=Kg(n,gW),C=gR(c),p=null!==I&&void 0!==I?I:(0,ao.jsx)(lW,{"aria-labelledby":C,color:"inherit",size:16}),A=Xe(Xe({},n),{},{edge:o,color:a,disabled:i,disableFocusRipple:g,loading:d,loadingIndicator:p,size:s}),m=(e=>{const{classes:t,disabled:n,color:o,edge:r,size:l,loading:a}=e;return Ng({root:["root",a&&"loading",n&&"disabled","default"!==o&&"color".concat(qw(o)),r&&"edge".concat(qw(r)),"size".concat(qw(l))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},aW,t)})(A);return(0,ao.jsxs)(sW,Xe(Xe({id:d?C:c,className:Vg(m.root,l),centerRipple:!0,focusRipple:!g,disabled:i||d,ref:t},u),{},{ownerState:A,children:["boolean"===typeof d&&(0,ao.jsx)("span",{className:m.loadingWrapper,style:{display:"contents"},children:(0,ao.jsx)(cW,{className:m.loadingIndicator,ownerState:A,children:d&&p})}),r]}))})),IW=dW;function uW(e){return yu("MuiSvgIcon",e)}vu("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const CW=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],pW=mu("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(qw(n.color))],t["fontSize".concat(qw(n.fontSize))]]}})(Ow((e=>{var t,n,o,r,l,a,i,g,s,c,d,I,u,C,p;let{theme:A}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=A.transitions)||void 0===t||null===(n=t.create)||void 0===n?void 0:n.call(t,"fill",{duration:null===(o=(null!==(r=A.vars)&&void 0!==r?r:A).transitions)||void 0===o||null===(o=o.duration)||void 0===o?void 0:o.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(l=A.typography)||void 0===l||null===(a=l.pxToRem)||void 0===a?void 0:a.call(l,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(i=A.typography)||void 0===i||null===(g=i.pxToRem)||void 0===g?void 0:g.call(i,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(s=A.typography)||void 0===s||null===(c=s.pxToRem)||void 0===c?void 0:c.call(s,35))||"2.1875rem"}},...Object.entries((null!==(d=A.vars)&&void 0!==d?d:A).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{var t,n;let[o]=e;return{props:{color:o},style:{color:null===(t=(null!==(n=A.vars)&&void 0!==n?n:A).palette)||void 0===t||null===(t=t[o])||void 0===t?void 0:t.main}}})),{props:{color:"action"},style:{color:null===(I=(null!==(u=A.vars)&&void 0!==u?u:A).palette)||void 0===I||null===(I=I.action)||void 0===I?void 0:I.active}},{props:{color:"disabled"},style:{color:null===(C=(null!==(p=A.vars)&&void 0!==p?p:A).palette)||void 0===C||null===(C=C.action)||void 0===C?void 0:C.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),AW=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiSvgIcon"}),{children:r,className:l,color:a="inherit",component:i="svg",fontSize:g="medium",htmlColor:s,inheritViewBox:c=!1,titleAccess:d,viewBox:I="0 0 24 24"}=n,u=Kg(n,CW),C=o.isValidElement(r)&&"svg"===r.type,p=Xe(Xe({},n),{},{color:a,component:i,fontSize:g,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:I,hasSvgAsChild:C}),A={};c||(A.viewBox=I);const m=(e=>{const{color:t,fontSize:n,classes:o}=e;return Ng({root:["root","inherit"!==t&&"color".concat(qw(t)),"fontSize".concat(qw(n))]},uW,o)})(p);return(0,ao.jsxs)(pW,Xe(Xe(Xe(Xe({as:i,className:Vg(m.root,l),focusable:"false",color:s,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:t},A),u),C&&r.props),{},{ownerState:p,children:[C?r.props.children:r,d?(0,ao.jsx)("title",{children:d}):null]}))}));AW.muiName="SvgIcon";const mW=AW;function hW(e,t){function n(t,n){return(0,ao.jsx)(mW,Xe(Xe({"data-testid":void 0,ref:n},t),{},{children:e}))}return n.muiName=mW.muiName,o.memo(o.forwardRef(n))}const bW=hW((0,ao.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function fW(e){return yu("MuiChip",e)}const yW=vu("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),vW=["className","elementType","ownerState","externalForwardedProps","internalForwardedProps","shouldForwardComponentProp"],ZW=["component","slots","slotProps"],GW=["component"];function SW(e,t){const{className:n,elementType:o,ownerState:r,externalForwardedProps:l,internalForwardedProps:a,shouldForwardComponentProp:i=!1}=t,g=Kg(t,vW),{component:s,slots:c={[e]:void 0},slotProps:d={[e]:void 0}}=l,I=Kg(l,ZW),u=c[e]||o,C=Rw(d[e],r),p=ww(Xe(Xe({className:n},g),{},{externalForwardedProps:"root"===e?I:void 0,externalSlotProps:C})),{props:{component:A},internalRef:m}=p,h=Kg(p.props,GW),b=Xg(m,null===C||void 0===C?void 0:C.ref,t.ref),f="root"===e?A||s:A;return[u,Gw(u,Xe(Xe(Xe(Xe(Xe(Xe({},"root"===e&&!s&&!c[e]&&a),"root"!==e&&!c[e]&&a),h),f&&!i&&{as:f}),f&&i&&{component:f}),{},{ref:b}),r)]}const BW=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled","slots","slotProps"],wW=mu("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:o,iconColor:r,clickable:l,onDelete:a,size:i,variant:g}=n;return[{["& .".concat(yW.avatar)]:t.avatar},{["& .".concat(yW.avatar)]:t["avatar".concat(qw(i))]},{["& .".concat(yW.avatar)]:t["avatarColor".concat(qw(o))]},{["& .".concat(yW.icon)]:t.icon},{["& .".concat(yW.icon)]:t["icon".concat(qw(i))]},{["& .".concat(yW.icon)]:t["iconColor".concat(qw(r))]},{["& .".concat(yW.deleteIcon)]:t.deleteIcon},{["& .".concat(yW.deleteIcon)]:t["deleteIcon".concat(qw(i))]},{["& .".concat(yW.deleteIcon)]:t["deleteIconColor".concat(qw(o))]},{["& .".concat(yW.deleteIcon)]:t["deleteIcon".concat(qw(g),"Color").concat(qw(o))]},t.root,t["size".concat(qw(i))],t["color".concat(qw(o))],l&&t.clickable,l&&"default"!==o&&t["clickableColor".concat(qw(o),")")],a&&t.deletable,a&&"default"!==o&&t["deletableColor".concat(qw(o))],t[g],t["".concat(g).concat(qw(o))]]}})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(yW.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(yW.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},["& .".concat(yW.avatarColorPrimary)]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},["& .".concat(yW.avatarColorSecondary)]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},["& .".concat(yW.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},["& .".concat(yW.icon)]:{marginLeft:5,marginRight:-6},["& .".concat(yW.deleteIcon)]:{WebkitTapHighlightColor:"transparent",color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.26)"):nI(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):nI(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,["& .".concat(yW.icon)]:{fontSize:18,marginLeft:4,marginRight:-4},["& .".concat(yW.deleteIcon)]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(sR(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,["& .".concat(yW.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n].contrastTextChannel," / 0.7)"):nI(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}}})),{props:e=>e.iconColor===e.color,style:{["& .".concat(yW.icon)]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:n}}},{props:e=>e.iconColor===e.color&&"default"!==e.color,style:{["& .".concat(yW.icon)]:{color:"inherit"}}},{props:{onDelete:!0},style:{["&.".concat(yW.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):nI(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(sR(["dark"])).map((e=>{let[n]=e;return{props:{color:n,onDelete:!0},style:{["&.".concat(yW.focusVisible)]:{background:(t.vars||t).palette[n].dark}}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):nI(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},["&.".concat(yW.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):nI(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(sR(["dark"])).map((e=>{let[n]=e;return{props:{color:n,clickable:!0},style:{["&:hover, &.".concat(yW.focusVisible)]:{backgroundColor:(t.vars||t).palette[n].dark}}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?"1px solid ".concat(t.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]),["&.".concat(yW.clickable,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(yW.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["& .".concat(yW.avatar)]:{marginLeft:4},["& .".concat(yW.avatarSmall)]:{marginLeft:2},["& .".concat(yW.icon)]:{marginLeft:4},["& .".concat(yW.iconSmall)]:{marginLeft:2},["& .".concat(yW.deleteIcon)]:{marginRight:5},["& .".concat(yW.deleteIconSmall)]:{marginRight:3}}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.7)"):nI(t.palette[n].main,.7)),["&.".concat(yW.clickable,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette[n].main,t.palette.action.hoverOpacity)},["&.".concat(yW.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.focusOpacity,")"):nI(t.palette[n].main,t.palette.action.focusOpacity)},["& .".concat(yW.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.7)"):nI(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}}))]}}))),RW=mu("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:o}=n;return[t.label,t["label".concat(qw(o))]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function WW(e){return"Backspace"===e.key||"Delete"===e.key}const kW=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiChip"}),{avatar:r,className:l,clickable:a,color:i="default",component:g,deleteIcon:s,disabled:c=!1,icon:d,label:I,onClick:u,onDelete:C,onKeyDown:p,onKeyUp:A,size:m="medium",variant:h="filled",tabIndex:b,skipFocusWhenDisabled:f=!1,slots:y={},slotProps:v={}}=n,Z=Kg(n,BW),G=o.useRef(null),S=dR(G,t),B=e=>{e.stopPropagation(),C&&C(e)},w=!(!1===a||!u)||a,R=w||C?zR:g||"div",W=Xe(Xe({},n),{},{component:R,disabled:c,size:m,color:i,iconColor:o.isValidElement(d)&&d.props.color||i,onDelete:!!C,clickable:w,variant:h}),k=(e=>{const{classes:t,disabled:n,size:o,color:r,iconColor:l,onDelete:a,clickable:i,variant:g}=e;return Ng({root:["root",g,n&&"disabled","size".concat(qw(o)),"color".concat(qw(r)),i&&"clickable",i&&"clickableColor".concat(qw(r)),a&&"deletable",a&&"deletableColor".concat(qw(r)),"".concat(g).concat(qw(r))],label:["label","label".concat(qw(o))],avatar:["avatar","avatar".concat(qw(o)),"avatarColor".concat(qw(r))],icon:["icon","icon".concat(qw(o)),"iconColor".concat(qw(l))],deleteIcon:["deleteIcon","deleteIcon".concat(qw(o)),"deleteIconColor".concat(qw(r)),"deleteIcon".concat(qw(g),"Color").concat(qw(r))]},fW,t)})(W),V=R===zR?Xe({component:g||"div",focusVisibleClassName:k.focusVisible},C&&{disableRipple:!0}):{};let X=null;C&&(X=s&&o.isValidElement(s)?o.cloneElement(s,{className:Vg(s.props.className,k.deleteIcon),onClick:B}):(0,ao.jsx)(bW,{className:k.deleteIcon,onClick:B}));let x=null;r&&o.isValidElement(r)&&(x=o.cloneElement(r,{className:Vg(k.avatar,r.props.className)}));let J=null;d&&o.isValidElement(d)&&(J=o.cloneElement(d,{className:Vg(k.icon,d.props.className)}));const N={slots:y,slotProps:v},[H,F]=SW("root",{elementType:wW,externalForwardedProps:Xe(Xe({},N),Z),ownerState:W,shouldForwardComponentProp:!0,ref:S,className:Vg(k.root,l),additionalProps:Xe({disabled:!(!w||!c)||void 0,tabIndex:f&&c?-1:b},V),getSlotProps:e=>Xe(Xe({},e),{},{onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),u(t)},onKeyDown:t=>{var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),(e=>{e.currentTarget===e.target&&WW(e)&&e.preventDefault(),p&&p(e)})(t)},onKeyUp:t=>{var n;null===(n=e.onKeyUp)||void 0===n||n.call(e,t),(e=>{e.currentTarget===e.target&&C&&WW(e)&&C(e),A&&A(e)})(t)}})}),[Y,K]=SW("label",{elementType:RW,externalForwardedProps:N,ownerState:W,className:k.label});return(0,ao.jsxs)(H,Xe(Xe({as:R},F),{},{children:[x||J,(0,ao.jsx)(Y,Xe(Xe({},K),{},{children:I})),X]}))})),VW=kW;function XW(e){return yu("MuiInput",e)}const xW=Xe(Xe({},MG),vu("MuiInput",["root","underline","input"]));function JW(e){return yu("MuiOutlinedInput",e)}const NW=Xe(Xe({},MG),vu("MuiOutlinedInput",["root","notchedOutline","input"]));function HW(e){return yu("MuiFilledInput",e)}const FW=Xe(Xe({},MG),vu("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])),YW=hW((0,ao.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),KW=hW((0,ao.jsx)("path",{d:"M7 10l5 5 5-5z"}));function MW(e){return yu("MuiAutocomplete",e)}const LW=vu("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),EW=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","renderValue","selectOnFocus","size","slots","slotProps","value"],zW=["ref"],jW=["key"],DW=["key"];var TW,PW;const UW=mu("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:o,hasClearIcon:r,hasPopupIcon:l,inputFocused:a,size:i}=n;return[{["& .".concat(LW.tag)]:t.tag},{["& .".concat(LW.tag)]:t["tagSize".concat(qw(i))]},{["& .".concat(LW.inputRoot)]:t.inputRoot},{["& .".concat(LW.input)]:t.input},{["& .".concat(LW.input)]:a&&t.inputFocused},t.root,o&&t.fullWidth,l&&t.hasPopupIcon,r&&t.hasClearIcon]}})({["&.".concat(LW.focused," .").concat(LW.clearIndicator)]:{visibility:"visible"},"@media (pointer: fine)":{["&:hover .".concat(LW.clearIndicator)]:{visibility:"visible"}},["& .".concat(LW.tag)]:{margin:3,maxWidth:"calc(100% - 6px)"},["& .".concat(LW.inputRoot)]:{[".".concat(LW.hasPopupIcon,"&, .").concat(LW.hasClearIcon,"&")]:{paddingRight:30},[".".concat(LW.hasPopupIcon,".").concat(LW.hasClearIcon,"&")]:{paddingRight:56},["& .".concat(LW.input)]:{width:0,minWidth:30}},["& .".concat(xW.root)]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},["& .".concat(xW.root,".").concat(MG.sizeSmall)]:{["& .".concat(xW.input)]:{padding:"2px 4px 3px 0"}},["& .".concat(NW.root)]:{padding:9,[".".concat(LW.hasPopupIcon,"&, .").concat(LW.hasClearIcon,"&")]:{paddingRight:39},[".".concat(LW.hasPopupIcon,".").concat(LW.hasClearIcon,"&")]:{paddingRight:65},["& .".concat(LW.input)]:{padding:"7.5px 4px 7.5px 5px"},["& .".concat(LW.endAdornment)]:{right:9}},["& .".concat(NW.root,".").concat(MG.sizeSmall)]:{paddingTop:6,paddingBottom:6,paddingLeft:6,["& .".concat(LW.input)]:{padding:"2.5px 4px 2.5px 8px"}},["& .".concat(FW.root)]:{paddingTop:19,paddingLeft:8,[".".concat(LW.hasPopupIcon,"&, .").concat(LW.hasClearIcon,"&")]:{paddingRight:39},[".".concat(LW.hasPopupIcon,".").concat(LW.hasClearIcon,"&")]:{paddingRight:65},["& .".concat(FW.input)]:{padding:"7px 4px"},["& .".concat(LW.endAdornment)]:{right:9}},["& .".concat(FW.root,".").concat(MG.sizeSmall)]:{paddingBottom:1,["& .".concat(FW.input)]:{padding:"2.5px 4px"}},["& .".concat(MG.hiddenLabel)]:{paddingTop:8},["& .".concat(FW.root,".").concat(MG.hiddenLabel)]:{paddingTop:0,paddingBottom:0,["& .".concat(LW.input)]:{paddingTop:16,paddingBottom:17}},["& .".concat(FW.root,".").concat(MG.hiddenLabel,".").concat(MG.sizeSmall)]:{["& .".concat(LW.input)]:{paddingTop:8,paddingBottom:9}},["& .".concat(LW.input)]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{["& .".concat(LW.tag)]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{["& .".concat(LW.input)]:{opacity:1}}},{props:{multiple:!0},style:{["& .".concat(LW.inputRoot)]:{flexWrap:"wrap"}}}]}),QW=mu("div",{name:"MuiAutocomplete",slot:"EndAdornment"})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),OW=mu(IW,{name:"MuiAutocomplete",slot:"ClearIndicator"})({marginRight:-2,padding:4,visibility:"hidden"}),qW=mu(IW,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),_W=mu(Uw,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(LW.option)]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(Ow((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}}))),$W=mu(iR,{name:"MuiAutocomplete",slot:"Paper"})(Ow((e=>{let{theme:t}=e;return Xe(Xe({},t.typography.body1),{},{overflow:"auto"})}))),ek=mu("div",{name:"MuiAutocomplete",slot:"Loading"})(Ow((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}}))),tk=mu("div",{name:"MuiAutocomplete",slot:"NoOptions"})(Ow((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}}))),nk=mu("ul",{name:"MuiAutocomplete",slot:"Listbox"})(Ow((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",["& .".concat(LW.option)]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},["&.".concat(LW.focused)]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["&.".concat(LW.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):nI(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(LW.focused)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):nI(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},["&.".concat(LW.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):nI(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}}))),ok=mu(nR,{name:"MuiAutocomplete",slot:"GroupLabel"})(Ow((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}}))),rk=mu("ul",{name:"MuiAutocomplete",slot:"GroupUl"})({padding:0,["& .".concat(LW.option)]:{paddingLeft:24}}),lk=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiAutocomplete"}),{autoComplete:r=!1,autoHighlight:l=!1,autoSelect:a=!1,blurOnSelect:i=!1,ChipProps:g,className:s,clearIcon:c=TW||(TW=(0,ao.jsx)(YW,{fontSize:"small"})),clearOnBlur:d=!n.freeSolo,clearOnEscape:I=!1,clearText:u="Clear",closeText:C="Close",componentsProps:p,defaultValue:A=(n.multiple?[]:null),disableClearable:m=!1,disableCloseOnSelect:h=!1,disabled:b=!1,disabledItemsFocusable:f=!1,disableListWrap:y=!1,disablePortal:v=!1,filterOptions:Z,filterSelectedOptions:G=!1,forcePopupIcon:S="auto",freeSolo:B=!1,fullWidth:w=!1,getLimitTagsText:R=e=>"+".concat(e),getOptionDisabled:W,getOptionKey:k,getOptionLabel:V,isOptionEqualToValue:X,groupBy:x,handleHomeEndKeys:J=!n.freeSolo,id:N,includeInputInList:H=!1,inputValue:F,limitTags:Y=-1,ListboxComponent:K,ListboxProps:M,loading:L=!1,loadingText:E="Loading\u2026",multiple:z=!1,noOptionsText:j="No options",onChange:D,onClose:T,onHighlightChange:P,onInputChange:U,onOpen:Q,open:O,openOnFocus:q=!1,openText:_="Open",options:$,PaperComponent:ee,PopperComponent:te,popupIcon:ne=PW||(PW=(0,ao.jsx)(KW,{})),readOnly:oe=!1,renderGroup:re,renderInput:le,renderOption:ae,renderTags:ie,renderValue:ge,selectOnFocus:se=!n.freeSolo,size:ce="medium",slots:de={},slotProps:Ie={},value:ue}=n,Ce=Kg(n,EW),{getRootProps:pe,getInputProps:Ae,getInputLabelProps:me,getPopupIndicatorProps:he,getClearProps:be,getItemProps:fe,getListboxProps:ye,getOptionProps:ve,value:Ze,dirty:Ge,expanded:Se,id:Be,popupOpen:we,focused:Re,focusedItem:We,anchorEl:ke,setAnchorEl:Ve,inputValue:xe,groupedOptions:Je}=iB(Xe(Xe({},n),{},{componentName:"Autocomplete"})),Ne=!m&&!b&&Ge&&!oe,He=(!B||!0===S)&&!1!==S,{onMouseDown:Fe}=Ae(),Ye=ye(),{ref:Ke}=Ye,Me=Kg(Ye,zW),Le=V||(e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e}),Ee=Xe(Xe({},n),{},{disablePortal:v,expanded:Se,focused:Re,fullWidth:w,getOptionLabel:Le,hasClearIcon:Ne,hasPopupIcon:He,inputFocused:-1===We,popupOpen:we,size:ce}),ze=(e=>{const{classes:t,disablePortal:n,expanded:o,focused:r,fullWidth:l,hasClearIcon:a,hasPopupIcon:i,inputFocused:g,popupOpen:s,size:c}=e;return Ng({root:["root",o&&"expanded",r&&"focused",l&&"fullWidth",a&&"hasClearIcon",i&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",g&&"inputFocused"],tag:["tag","tagSize".concat(qw(c))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",s&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]},MW,t)})(Ee),je={slots:Xe({paper:ee,popper:te},de),slotProps:Xe(Xe({chip:g,listbox:M},p),Ie)},[De,Te]=SW("listbox",{elementType:nk,externalForwardedProps:je,ownerState:Ee,className:ze.listbox,additionalProps:Me,ref:Ke}),[Pe,Ue]=SW("paper",{elementType:iR,externalForwardedProps:je,ownerState:Ee,className:ze.paper}),[Qe,Oe]=SW("popper",{elementType:Uw,externalForwardedProps:je,ownerState:Ee,className:ze.popper,additionalProps:{disablePortal:v,style:{width:ke?ke.clientWidth:null},role:"presentation",anchorEl:ke,open:we}});let qe;const _e=e=>Xe({className:ze.tag,disabled:b},fe(e));if(z?Ze.length>0&&(qe=ie?ie(Ze,_e,Ee):ge?ge(Ze,_e,Ee):Ze.map(((e,t)=>{const n=_e({index:t}),{key:o}=n,r=Kg(n,jW);return(0,ao.jsx)(VW,Xe(Xe({label:Le(e),size:ce},r),je.slotProps.chip),o)}))):ge&&null!=Ze&&(qe=ge(Ze,_e,Ee)),Y>-1&&Array.isArray(qe)){const e=qe.length-Y;!Re&&e>0&&(qe=qe.splice(0,Y),qe.push((0,ao.jsx)("span",{className:ze.tag,children:R(e)},qe.length)))}const $e=re||(e=>(0,ao.jsxs)("li",{children:[(0,ao.jsx)(ok,{className:ze.groupLabel,ownerState:Ee,component:"div",children:e.group}),(0,ao.jsx)(rk,{className:ze.groupUl,ownerState:Ee,children:e.children})]},e.key)),et=ae||((e,t)=>{const{key:n}=e,o=Kg(e,DW);return(0,ao.jsx)("li",Xe(Xe({},o),{},{children:Le(t)}),n)}),tt=(e,t)=>{const n=ve({option:e,index:t});return et(Xe(Xe({},n),{},{className:ze.option}),e,{selected:n["aria-selected"],index:t,inputValue:xe},Ee)},nt=je.slotProps.clearIndicator,ot=je.slotProps.popupIndicator;return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(UW,Xe(Xe({ref:t,className:Vg(ze.root,s),ownerState:Ee},pe(Ce)),{},{children:le({id:Be,disabled:b,fullWidth:!0,size:"small"===ce?"small":void 0,InputLabelProps:me(),InputProps:Xe({ref:Ve,className:ze.inputRoot,startAdornment:qe,onMouseDown:e=>{e.target===e.currentTarget&&Fe(e)}},(Ne||He)&&{endAdornment:(0,ao.jsxs)(QW,{className:ze.endAdornment,ownerState:Ee,children:[Ne?(0,ao.jsx)(OW,Xe(Xe(Xe({},be()),{},{"aria-label":u,title:u,ownerState:Ee},nt),{},{className:Vg(ze.clearIndicator,null===nt||void 0===nt?void 0:nt.className),children:c})):null,He?(0,ao.jsx)(qW,Xe(Xe(Xe({},he()),{},{disabled:b,"aria-label":we?C:_,title:we?C:_,ownerState:Ee},ot),{},{className:Vg(ze.popupIndicator,null===ot||void 0===ot?void 0:ot.className),children:ne})):null]})}),inputProps:Xe({className:ze.input,disabled:b,readOnly:oe},Ae())})})),ke?(0,ao.jsx)(_W,Xe(Xe({as:Qe},Oe),{},{children:(0,ao.jsxs)($W,Xe(Xe({as:Pe},Ue),{},{children:[L&&0===Je.length?(0,ao.jsx)(ek,{className:ze.loading,ownerState:Ee,children:E}):null,0!==Je.length||B||L?null:(0,ao.jsx)(tk,{className:ze.noOptions,ownerState:Ee,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:j}),Je.length>0?(0,ao.jsx)(De,Xe(Xe({as:K},Te),{},{children:Je.map(((e,t)=>x?$e({key:e.key,group:e.group,children:e.options.map(((t,n)=>tt(t,e.index+n)))}):tt(e,t)))})):null]}))})):null]})})),ak=lk;const ik=function(e){const{badgeContent:t,invisible:n=!1,max:o=99,showZero:r=!1}=e,l=tB({badgeContent:t,max:o});let a=n;!1!==n||0!==t||r||(a=!0);const{badgeContent:i,max:g=o}=a?l:e;return{badgeContent:i,invisible:a,max:g,displayValue:i&&Number(i)>g?"".concat(g,"+"):i}};function gk(e){return yu("MuiBadge",e)}const sk=vu("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ck=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],dk=mu("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Ik=mu("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t["anchorOrigin".concat(qw(n.anchorOrigin.vertical)).concat(qw(n.anchorOrigin.horizontal)).concat(qw(n.overlap))],"default"!==n.color&&t["color".concat(qw(n.color))],n.invisible&&t.invisible]}})(Ow((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(sR(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}}})),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(sk.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})));function uk(e){var t,n;return{vertical:null!==(t=null===e||void 0===e?void 0:e.vertical)&&void 0!==t?t:"top",horizontal:null!==(n=null===e||void 0===e?void 0:e.horizontal)&&void 0!==n?n:"right"}}const Ck=o.forwardRef((function(e,t){var n,o,r,l;const a=jw({props:e,name:"MuiBadge"}),{anchorOrigin:i,className:g,classes:s,component:c,components:d={},componentsProps:I={},children:u,overlap:C="rectangular",color:p="default",invisible:A=!1,max:m=99,badgeContent:h,slots:b,slotProps:f,showZero:y=!1,variant:v="standard"}=a,Z=Kg(a,ck),{badgeContent:G,invisible:S,max:B,displayValue:w}=ik({max:m,invisible:A,badgeContent:h,showZero:y}),R=tB({anchorOrigin:uk(i),color:p,overlap:C,variant:v,badgeContent:h}),W=S||null==G&&"dot"!==v,{color:k=p,overlap:V=C,anchorOrigin:X,variant:x=v}=W?R:a,J=uk(X),N="dot"!==x?w:void 0,H=Xe(Xe({},a),{},{badgeContent:G,invisible:W,max:B,displayValue:N,showZero:y,anchorOrigin:J,color:k,overlap:V,variant:x}),F=(e=>{const{color:t,anchorOrigin:n,invisible:o,overlap:r,variant:l,classes:a={}}=e;return Ng({root:["root"],badge:["badge",l,o&&"invisible","anchorOrigin".concat(qw(n.vertical)).concat(qw(n.horizontal)),"anchorOrigin".concat(qw(n.vertical)).concat(qw(n.horizontal)).concat(qw(r)),"overlap".concat(qw(r)),"default"!==t&&"color".concat(qw(t))]},gk,a)})(H),Y={slots:{root:null!==(n=null===b||void 0===b?void 0:b.root)&&void 0!==n?n:d.Root,badge:null!==(o=null===b||void 0===b?void 0:b.badge)&&void 0!==o?o:d.Badge},slotProps:{root:null!==(r=null===f||void 0===f?void 0:f.root)&&void 0!==r?r:I.root,badge:null!==(l=null===f||void 0===f?void 0:f.badge)&&void 0!==l?l:I.badge}},[K,M]=SW("root",{elementType:dk,externalForwardedProps:Xe(Xe({},Y),Z),ownerState:H,className:Vg(F.root,g),ref:t,additionalProps:{as:c}}),[L,E]=SW("badge",{elementType:Ik,externalForwardedProps:Y,ownerState:H,className:F.badge});return(0,ao.jsxs)(K,Xe(Xe({},M),{},{children:[u,(0,ao.jsx)(L,Xe(Xe({},E),{},{children:N}))]}))})),pk=Ck,Ak=eB;const mk=o.createContext(void 0);function hk(){return o.useContext(mk)}function bk(e){return yu("PrivateSwitchBase",e)}vu("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const fk=["autoFocus","checked","checkedIcon","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value","slots","slotProps"],yk=mu(zR)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:e=>{let{edge:t,ownerState:n}=e;return"start"===t&&"small"!==n.size},style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:e=>{let{edge:t,ownerState:n}=e;return"end"===t&&"small"!==n.size},style:{marginRight:-12}}]}),vk=mu("input",{shouldForwardProp:Au})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Zk=o.forwardRef((function(e,t){const{autoFocus:n,checked:o,checkedIcon:r,defaultChecked:l,disabled:a,disableFocusRipple:i=!1,edge:g=!1,icon:s,id:c,inputProps:d,inputRef:I,name:u,onBlur:C,onChange:p,onFocus:A,readOnly:m,required:h=!1,tabIndex:b,type:f,value:y,slots:v={},slotProps:Z={}}=e,G=Kg(e,fk),[S,B]=Ak({controlled:o,default:Boolean(l),name:"SwitchBase",state:"checked"}),w=hk();let R=a;w&&"undefined"===typeof R&&(R=w.disabled);const W="checkbox"===f||"radio"===f,k=Xe(Xe({},e),{},{checked:S,disabled:R,disableFocusRipple:i,edge:g}),V=(e=>{const{classes:t,checked:n,disabled:o,edge:r}=e;return Ng({root:["root",n&&"checked",o&&"disabled",r&&"edge".concat(qw(r))],input:["input"]},bk,t)})(k),X={slots:v,slotProps:Xe({input:d},Z)},[x,J]=SW("root",{ref:t,elementType:yk,className:V.root,shouldForwardComponentProp:!0,externalForwardedProps:Xe(Xe({},X),{},{component:"span"},G),getSlotProps:e=>Xe(Xe({},e),{},{onFocus:t=>{var n;null===(n=e.onFocus)||void 0===n||n.call(e,t),(e=>{A&&A(e),w&&w.onFocus&&w.onFocus(e)})(t)},onBlur:t=>{var n;null===(n=e.onBlur)||void 0===n||n.call(e,t),(e=>{C&&C(e),w&&w.onBlur&&w.onBlur(e)})(t)}}),ownerState:k,additionalProps:{centerRipple:!0,focusRipple:!i,disabled:R,role:void 0,tabIndex:null}}),[N,H]=SW("input",{ref:I,elementType:vk,className:V.input,externalForwardedProps:X,getSlotProps:e=>Xe(Xe({},e),{},{onChange:t=>{var n;null===(n=e.onChange)||void 0===n||n.call(e,t),(e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;B(t),p&&p(e,t)})(t)}}),ownerState:k,additionalProps:Xe({autoFocus:n,checked:o,defaultChecked:l,disabled:R,id:W?c:void 0,name:u,readOnly:m,required:h,tabIndex:b,type:f},"checkbox"===f&&void 0===y?{}:{value:y})});return(0,ao.jsxs)(x,Xe(Xe({},J),{},{children:[(0,ao.jsx)(N,Xe({},H)),S?r:s]}))})),Gk=Zk,Sk=hW((0,ao.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Bk=hW((0,ao.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),wk=hW((0,ao.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Rk(e){return yu("MuiCheckbox",e)}const Wk=vu("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);function kk(e,t){if(!e)return t;function n(e,t){const n={};return Object.keys(t).forEach((o=>{(function(e,t){const n=e.charCodeAt(2);return"o"===e[0]&&"n"===e[1]&&n>=65&&n<=90&&"function"===typeof t})(o,t[o])&&"function"===typeof e[o]&&(n[o]=function(){e[o](...arguments),t[o](...arguments)})})),n}if("function"===typeof e||"function"===typeof t)return o=>{const r="function"===typeof t?t(o):t,l="function"===typeof e?e(Xe(Xe({},o),r)):e,a=Vg(null===o||void 0===o?void 0:o.className,null===r||void 0===r?void 0:r.className,null===l||void 0===l?void 0:l.className),i=n(l,r);return Xe(Xe(Xe(Xe(Xe(Xe({},r),l),i),!!a&&{className:a}),(null===r||void 0===r?void 0:r.style)&&(null===l||void 0===l?void 0:l.style)&&{style:Xe(Xe({},r.style),l.style)}),(null===r||void 0===r?void 0:r.sx)&&(null===l||void 0===l?void 0:l.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]})};const o=t,r=n(e,o),l=Vg(null===o||void 0===o?void 0:o.className,null===e||void 0===e?void 0:e.className);return Xe(Xe(Xe(Xe(Xe(Xe({},t),e),r),!!l&&{className:l}),(null===o||void 0===o?void 0:o.style)&&(null===e||void 0===e?void 0:e.style)&&{style:Xe(Xe({},o.style),e.style)}),(null===o||void 0===o?void 0:o.sx)&&(null===e||void 0===e?void 0:e.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]})}const Vk=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","disableRipple","className","slots","slotProps"],Xk=mu(Gk,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat(qw(n.size))],"default"!==n.color&&t["color".concat(qw(n.color))]]}})(Ow((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette[n].main,t.palette.action.hoverOpacity)}}}})),...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(Wk.checked,", &.").concat(Wk.indeterminate)]:{color:(t.vars||t).palette[n].main},["&.".concat(Wk.disabled)]:{color:(t.vars||t).palette.action.disabled}}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}}))),xk=(0,ao.jsx)(Bk,{}),Jk=(0,ao.jsx)(Sk,{}),Nk=(0,ao.jsx)(wk,{}),Hk=o.forwardRef((function(e,t){var n,r,l;const a=jw({props:e,name:"MuiCheckbox"}),{checkedIcon:i=xk,color:g="primary",icon:s=Jk,indeterminate:c=!1,indeterminateIcon:d=Nk,inputProps:I,size:u="medium",disableRipple:C=!1,className:p,slots:A={},slotProps:m={}}=a,h=Kg(a,Vk),b=c?d:s,f=c?d:i,y=Xe(Xe({},a),{},{disableRipple:C,color:g,indeterminate:c,size:u}),v=(e=>{const{classes:t,indeterminate:n,color:o,size:r}=e,l=Ng({root:["root",n&&"indeterminate","color".concat(qw(o)),"size".concat(qw(r))]},Rk,t);return Xe(Xe({},t),l)})(y),Z=null!==(n=m.input)&&void 0!==n?n:I,[G,S]=SW("root",{ref:t,elementType:Xk,className:Vg(v.root,p),shouldForwardComponentProp:!0,externalForwardedProps:Xe({slots:A,slotProps:m},h),ownerState:y,additionalProps:{type:"checkbox",icon:o.cloneElement(b,{fontSize:null!==(r=b.props.fontSize)&&void 0!==r?r:u}),checkedIcon:o.cloneElement(f,{fontSize:null!==(l=f.props.fontSize)&&void 0!==l?l:u}),disableRipple:C,slots:A,slotProps:{input:kk("function"===typeof Z?Z(y):Z,{"data-indeterminate":c})}}});return(0,ao.jsx)(G,Xe(Xe({},S),{},{classes:v}))})),Fk=Hk;function Yk(e){return yu("MuiDivider",e)}const Kk=vu("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Mk=["absolute","children","className","orientation","component","flexItem","light","role","textAlign","variant"],Lk=mu("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})(Ow((e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):nI(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),Ek=mu("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})(Ow((e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}}))),zk=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiDivider"}),{absolute:o=!1,children:r,className:l,orientation:a="horizontal",component:i=(r||"vertical"===a?"div":"hr"),flexItem:g=!1,light:s=!1,role:c=("hr"!==i?"separator":void 0),textAlign:d="center",variant:I="fullWidth"}=n,u=Kg(n,Mk),C=Xe(Xe({},n),{},{absolute:o,component:i,flexItem:g,light:s,orientation:a,role:c,textAlign:d,variant:I}),p=(e=>{const{absolute:t,children:n,classes:o,flexItem:r,light:l,orientation:a,textAlign:i,variant:g}=e;return Ng({root:["root",t&&"absolute",g,l&&"light","vertical"===a&&"vertical",r&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===i&&"vertical"!==a&&"textAlignRight","left"===i&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]},Yk,o)})(C);return(0,ao.jsx)(Lk,Xe(Xe({as:i,className:Vg(p.root,l),role:c,ref:t,ownerState:C,"aria-orientation":"separator"!==c||"hr"===i&&"vertical"!==a?void 0:a},u),{},{children:r?(0,ao.jsx)(Ek,{className:p.wrapper,ownerState:C,children:r}):null}))}));zk&&(zk.muiSkipListHighlight=!0);const jk=zk;function Dk(e){return Sy(e).defaultView||window}const Tk=["onChange","maxRows","minRows","style","value"];function Pk(e){return parseInt(e,10)||0}const Uk={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Qk(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const Ok=o.forwardRef((function(e,t){const{onChange:n,maxRows:r,minRows:l=1,style:a,value:i}=e,g=Kg(e,Tk),{current:s}=o.useRef(null!=i),c=o.useRef(null),d=Xg(t,c),I=o.useRef(null),u=o.useRef(null),C=o.useCallback((()=>{const t=c.current,n=u.current;if(!t||!n)return;const o=Dk(t).getComputedStyle(t);if("0px"===o.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=o.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const a=o.boxSizing,i=Pk(o.paddingBottom)+Pk(o.paddingTop),g=Pk(o.borderBottomWidth)+Pk(o.borderTopWidth),s=n.scrollHeight;n.value="x";const d=n.scrollHeight;let I=s;l&&(I=Math.max(Number(l)*d,I)),r&&(I=Math.min(Number(r)*d,I)),I=Math.max(I,d);return{outerHeightStyle:I+("border-box"===a?i+g:0),overflowing:Math.abs(I-s)<=1}}),[r,l,e.placeholder]),p=Cp((()=>{const e=c.current,t=C();if(!e||!t||Qk(t))return!1;const n=t.outerHeightStyle;return null!=I.current&&I.current!==n})),A=o.useCallback((()=>{const e=c.current,t=C();if(!e||!t||Qk(t))return;const n=t.outerHeightStyle;I.current!==n&&(I.current=n,e.style.height="".concat(n,"px")),e.style.overflow=t.overflowing?"hidden":""}),[C]),m=o.useRef(-1);up((()=>{const e=rZ(A),t=null===c||void 0===c?void 0:c.current;if(!t)return;const n=Dk(t);let o;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver((()=>{p()&&(o.unobserve(t),cancelAnimationFrame(m.current),A(),m.current=requestAnimationFrame((()=>{o.observe(t)})))})),o.observe(t)),()=>{e.clear(),cancelAnimationFrame(m.current),n.removeEventListener("resize",e),o&&o.disconnect()}}),[C,A,p]),up((()=>{A()}));return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)("textarea",Xe({value:i,onChange:e=>{s||A();const t=e.target,o=t.value.length,r=t.value.endsWith("\n"),l=t.selectionStart===o;r&&l&&t.setSelectionRange(o,o),n&&n(e)},ref:d,rows:l,style:a},g)),(0,ao.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:u,tabIndex:-1,style:Xe(Xe(Xe({},Uk),a),{},{paddingTop:0,paddingBottom:0})})]})})),qk=Ok;const _k=function(e){return"string"===typeof e};function $k(e){let{props:t,states:n,muiFormControl:o}=e;return n.reduce(((e,n)=>(e[n]=t[n],o&&"undefined"===typeof t[n]&&(e[n]=o[n]),e)),{})}const eV=["sx"];function tV(e){const{sx:t}=e,n=Kg(e,eV),{systemProps:o,otherProps:r}=(e=>{var t,n;const o={systemProps:{},otherProps:{}},r=null!==(t=null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.unstable_sxConfig)&&void 0!==t?t:Vd;return Object.keys(e).forEach((t=>{r[t]?o.systemProps[t]=e[t]:o.otherProps[t]=e[t]})),o})(n);let l;return l=Array.isArray(t)?[o,...t]:"function"===typeof t?function(){const e=t(...arguments);return Bc(e)?Xe(Xe({},o),e):o}:Xe(Xe({},o),t),Xe(Xe({},r),{},{sx:l})}function nV(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(o=e)||null===o||0===Object.keys(o).length?n:e);var o}:t;return(0,ao.jsx)(jG,{styles:o})}const oV=function(e){let{styles:t,themeId:n,defaultTheme:o={}}=e;const r=hZ(o),l="function"===typeof t?t(n&&r[n]||r):t;return(0,ao.jsx)(nV,{styles:l})};const rV=function(e){return(0,ao.jsx)(oV,Xe(Xe({},e),{},{defaultTheme:uu,themeId:Cu}))};const lV=up;function aV(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function iV(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(aV(e.value)&&""!==e.value||t&&aV(e.defaultValue)&&""!==e.defaultValue)}const gV=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"];var sV;const cV=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(qw(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},dV=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},IV=mu("div",{name:"MuiInputBase",slot:"Root",overridesResolver:cV})(Ow((e=>{let{theme:t}=e;return Xe(Xe({},t.typography.body1),{},{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(MG.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]})}))),uV=mu("input",{name:"MuiInputBase",slot:"Input",overridesResolver:dV})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode,o=Xe(Xe({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5}),{},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),r={opacity:"0 !important"},l=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(MG.formControl," &")]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus::-ms-input-placeholder":l},["&.".concat(MG.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),CV=function(e){return function(t){return(0,ao.jsx)(rV,{styles:"function"===typeof e?n=>e(Xe({theme:n},t)):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),pV=o.forwardRef((function(e,t){var n;const r=jw({props:e,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:a,autoFocus:i,className:g,color:s,components:c={},componentsProps:d={},defaultValue:I,disabled:u,disableInjectingGlobalStyles:C,endAdornment:p,error:A,fullWidth:m=!1,id:h,inputComponent:b="input",inputProps:f={},inputRef:y,margin:v,maxRows:Z,minRows:G,multiline:S=!1,name:B,onBlur:w,onChange:R,onClick:W,onFocus:k,onKeyDown:V,onKeyUp:X,placeholder:x,readOnly:J,renderSuffix:N,rows:H,size:F,slotProps:Y={},slots:K={},startAdornment:M,type:L="text",value:E}=r,z=Kg(r,gV),j=null!=f.value?f.value:E,{current:D}=o.useRef(null!=j),T=o.useRef(),P=o.useCallback((e=>{0}),[]),U=dR(T,y,f.ref,P),[Q,O]=o.useState(!1),q=hk();const _=$k({props:r,muiFormControl:q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});_.focused=q?q.focused:Q,o.useEffect((()=>{!q&&u&&Q&&(O(!1),w&&w())}),[q,u,Q,w]);const $=q&&q.onFilled,ee=q&&q.onEmpty,te=o.useCallback((e=>{iV(e)?$&&$():ee&&ee()}),[$,ee]);lV((()=>{D&&te({value:j})}),[j,te,D]);o.useEffect((()=>{te(T.current)}),[]);let ne=b,oe=f;S&&"input"===ne&&(oe=Xe(H?{type:void 0,minRows:H,maxRows:H}:{type:void 0,maxRows:Z,minRows:G},oe),ne=qk);o.useEffect((()=>{q&&q.setAdornedStart(Boolean(M))}),[q,M]);const re=Xe(Xe({},r),{},{color:_.color||"primary",disabled:_.disabled,endAdornment:p,error:_.error,focused:_.focused,formControl:q,fullWidth:m,hiddenLabel:_.hiddenLabel,multiline:S,size:_.size,startAdornment:M,type:L}),le=(e=>{const{classes:t,color:n,disabled:o,error:r,endAdornment:l,focused:a,formControl:i,fullWidth:g,hiddenLabel:s,multiline:c,readOnly:d,size:I,startAdornment:u,type:C}=e;return Ng({root:["root","color".concat(qw(n)),o&&"disabled",r&&"error",g&&"fullWidth",a&&"focused",i&&"formControl",I&&"medium"!==I&&"size".concat(qw(I)),c&&"multiline",u&&"adornedStart",l&&"adornedEnd",s&&"hiddenLabel",d&&"readOnly"],input:["input",o&&"disabled","search"===C&&"inputTypeSearch",c&&"inputMultiline","small"===I&&"inputSizeSmall",s&&"inputHiddenLabel",u&&"inputAdornedStart",l&&"inputAdornedEnd",d&&"readOnly"]},KG,t)})(re),ae=K.root||c.Root||IV,ie=Y.root||d.root||{},ge=K.input||c.Input||uV;return oe=Xe(Xe({},oe),null!==(n=Y.input)&&void 0!==n?n:d.input),(0,ao.jsxs)(o.Fragment,{children:[!C&&"function"===typeof CV&&(sV||(sV=(0,ao.jsx)(CV,{}))),(0,ao.jsxs)(ae,Xe(Xe(Xe(Xe({},ie),{},{ref:t,onClick:e=>{T.current&&e.currentTarget===e.target&&T.current.focus(),W&&W(e)}},z),!_k(ae)&&{ownerState:Xe(Xe({},re),ie.ownerState)}),{},{className:Vg(le.root,ie.className,g,J&&"MuiInputBase-readOnly"),children:[M,(0,ao.jsx)(mk.Provider,{value:null,children:(0,ao.jsx)(ge,Xe(Xe(Xe({"aria-invalid":_.error,"aria-describedby":l,autoComplete:a,autoFocus:i,defaultValue:I,disabled:_.disabled,id:h,onAnimationStart:e=>{te("mui-auto-fill-cancel"===e.animationName?T.current:{value:"x"})},name:B,placeholder:x,readOnly:J,required:_.required,rows:H,value:j,onKeyDown:V,onKeyUp:X,type:L},oe),!_k(ge)&&{as:ne,ownerState:Xe(Xe({},re),oe.ownerState)}),{},{ref:U,className:Vg(le.input,oe.className,J&&"MuiInputBase-readOnly"),onBlur:e=>{w&&w(e),f.onBlur&&f.onBlur(e),q&&q.onBlur?q.onBlur(e):O(!1)},onChange:function(e){if(!D){const t=e.target||T.current;if(null==t)throw new Error(xg(1));te({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];f.onChange&&f.onChange(e,...n),R&&R(e,...n)},onFocus:e=>{k&&k(e),f.onFocus&&f.onFocus(e),q&&q.onFocus?q.onFocus(e):O(!0)}}))}),p,N?N(Xe(Xe({},_),{},{startAdornment:M})):null]}))]})})),AV=pV,mV=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function hV(e){const t=[],n=[];return Array.from(e.querySelectorAll(mV)).forEach(((e,o)=>{const r=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==r&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===r?t.push(e):n.push({documentOrder:o,tabIndex:r,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function bV(){return!0}const fV=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:l=!1,getTabbable:a=hV,isEnabled:i=bV,open:g}=e,s=o.useRef(!1),c=o.useRef(null),d=o.useRef(null),I=o.useRef(null),u=o.useRef(null),C=o.useRef(!1),p=o.useRef(null),A=Xg(Vw(t),p),m=o.useRef(null);o.useEffect((()=>{g&&p.current&&(C.current=!n)}),[n,g]),o.useEffect((()=>{if(!g||!p.current)return;const e=Sy(p.current);return p.current.contains(e.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),C.current&&p.current.focus()),()=>{l||(I.current&&I.current.focus&&(s.current=!0,I.current.focus()),I.current=null)}}),[g]),o.useEffect((()=>{if(!g||!p.current)return;const e=Sy(p.current),t=t=>{m.current=t,!r&&i()&&"Tab"===t.key&&e.activeElement===p.current&&t.shiftKey&&(s.current=!0,d.current&&d.current.focus())},n=()=>{const t=p.current;if(null===t)return;if(!e.hasFocus()||!i()||s.current)return void(s.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==c.current&&e.activeElement!==d.current)return;if(e.activeElement!==u.current)u.current=null;else if(null!==u.current)return;if(!C.current)return;let n=[];if(e.activeElement!==c.current&&e.activeElement!==d.current||(n=a(p.current)),n.length>0){var o,l;const e=Boolean((null===(o=m.current)||void 0===o?void 0:o.shiftKey)&&"Tab"===(null===(l=m.current)||void 0===l?void 0:l.key)),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const o=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(o),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,l,i,g,a]);const h=e=>{null===I.current&&(I.current=e.relatedTarget),C.current=!0};return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)("div",{tabIndex:g?0:-1,onFocus:h,ref:c,"data-testid":"sentinelStart"}),o.cloneElement(t,{ref:A,onFocus:e=>{null===I.current&&(I.current=e.relatedTarget),C.current=!0,u.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,ao.jsx)("div",{tabIndex:g?0:-1,onFocus:h,ref:d,"data-testid":"sentinelEnd"})]})};function yV(e){return yu("MuiLinearProgress",e)}vu("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const vV=["className","color","value","valueBuffer","variant"];var ZV,GV,SV,BV,wV,RV;const WV=TG(ZV||(ZV=EG(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"]))),kV="string"!==typeof WV?DG(GV||(GV=EG(["\n        animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n      "])),WV):null,VV=TG(SV||(SV=EG(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"]))),XV="string"!==typeof VV?DG(BV||(BV=EG(["\n        animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n      "])),VV):null,xV=TG(wV||(wV=EG(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"]))),JV="string"!==typeof xV?DG(RV||(RV=EG(["\n        animation: "," 3s infinite linear;\n      "])),xV):null,NV=(e,t)=>e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?aI(e.palette[t].main,.62):rI(e.palette[t].main,.5),HV=mu("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat(qw(n.color))],t[n.variant]]}})(Ow((e=>{let{theme:t}=e;return{position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:NV(t,n)}}})),{props:e=>{let{ownerState:t}=e;return"inherit"===t.color&&"buffer"!==t.variant},style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}}))),FV=mu("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t["dashedColor".concat(qw(n.color))]]}})(Ow((e=>{let{theme:t}=e;return{position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;const o=NV(t,n);return{props:{color:n},style:{backgroundImage:"radial-gradient(".concat(o," 0%, ").concat(o," 16%, transparent 42%)")}}}))]}})),JV||{animation:"".concat(xV," 3s infinite linear")}),YV=mu("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t["barColor".concat(qw(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})(Ow((e=>{let{theme:t}=e;return{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main}}})),{props:{variant:"determinate"},style:{transition:"transform .".concat(4,"s linear")}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .".concat(4,"s linear")}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:kV||{animation:"".concat(WV," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite")}}]}}))),KV=mu("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t["barColor".concat(qw(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})(Ow((e=>{let{theme:t}=e;return{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[n].main}}})),{props:e=>{let{ownerState:t}=e;return"buffer"!==t.variant&&"inherit"!==t.color},style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:e=>{let{ownerState:t}=e;return"buffer"!==t.variant&&"inherit"===t.color},style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n,variant:"buffer"},style:{backgroundColor:NV(t,n),transition:"transform .".concat(4,"s linear")}}})),{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:XV||{animation:"".concat(VV," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite")}}]}}))),MV=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiLinearProgress"}),{className:o,color:r="primary",value:l,valueBuffer:a,variant:i="indeterminate"}=n,g=Kg(n,vV),s=Xe(Xe({},n),{},{color:r,variant:i}),c=(e=>{const{classes:t,variant:n,color:o}=e;return Ng({root:["root","color".concat(qw(o)),n],dashed:["dashed","dashedColor".concat(qw(o))],bar1:["bar","bar1","barColor".concat(qw(o)),("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==n&&"barColor".concat(qw(o)),"buffer"===n&&"color".concat(qw(o)),("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]},yV,t)})(s),d=Ym(),I={},u={bar1:{},bar2:{}};if("determinate"===i||"buffer"===i)if(void 0!==l){I["aria-valuenow"]=Math.round(l),I["aria-valuemin"]=0,I["aria-valuemax"]=100;let e=l-100;d&&(e=-e),u.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===i)if(void 0!==a){let e=(a||0)-100;d&&(e=-e),u.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,ao.jsxs)(HV,Xe(Xe(Xe({className:Vg(c.root,o),ownerState:s,role:"progressbar"},I),{},{ref:t},g),{},{children:["buffer"===i?(0,ao.jsx)(FV,{className:c.dashed,ownerState:s}):null,(0,ao.jsx)(YV,{className:c.bar1,ownerState:s,style:u.bar1}),"determinate"===i?null:(0,ao.jsx)(KV,{className:c.bar2,ownerState:s,style:u.bar2})]}))})),LV=MV;function EV(e){return yu("MuiListItemIcon",e)}const zV=vu("MuiListItemIcon",["root","alignItemsFlexStart"]);const jV=o.createContext({}),DV=["className"],TV=mu("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(Ow((e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}}))),PV=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiListItemIcon"}),{className:r}=n,l=Kg(n,DV),a=o.useContext(jV),i=Xe(Xe({},n),{},{alignItems:a.alignItems}),g=(e=>{const{alignItems:t,classes:n}=e;return Ng({root:["root","flex-start"===t&&"alignItemsFlexStart"]},EV,n)})(i);return(0,ao.jsx)(TV,Xe({className:Vg(g.root,r),ownerState:i,ref:t},l))})),UV=PV;function QV(e){return yu("MuiTypography",e)}const OV=vu("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),qV=["color"],_V=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],$V={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},eX=tV,tX=mu("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(qw(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Ow((e=>{var t;let{theme:n}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(n.palette).filter(sR()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(n.vars||n).palette[t].main}}})),...Object.entries((null===(t=n.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat(qw(t))},style:{color:(n.vars||n).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),nX={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},oX=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTypography"}),{color:o}=n,r=Kg(n,qV),l=!$V[o],a=eX(Xe(Xe({},r),l&&{color:o})),{align:i="inherit",className:g,component:s,gutterBottom:c=!1,noWrap:d=!1,paragraph:I=!1,variant:u="body1",variantMapping:C=nX}=a,p=Kg(a,_V),A=Xe(Xe({},a),{},{align:i,color:o,className:g,component:s,gutterBottom:c,noWrap:d,paragraph:I,variant:u,variantMapping:C}),m=s||(I?"p":C[u]||nX[u])||"span",h=(e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:r,variant:l,classes:a}=e;return Ng({root:["root",l,"inherit"!==e.align&&"align".concat(qw(t)),n&&"gutterBottom",o&&"noWrap",r&&"paragraph"]},QV,a)})(A);return(0,ao.jsx)(tX,Xe(Xe({as:m,ref:t,className:Vg(h.root,g)},p),{},{ownerState:A,style:Xe(Xe({},"inherit"!==i&&{"--Typography-textAlign":i}),p.style)}))})),rX=oX;function lX(e){return yu("MuiListItemText",e)}const aX=vu("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),iX=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps","slots","slotProps"],gX=mu("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(aX.primary)]:t.primary},{["& .".concat(aX.secondary)]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(OV.root,":where(& .").concat(aX.primary,")")]:{display:"block"},[".".concat(OV.root,":where(& .").concat(aX.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),sX=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiListItemText"}),{children:r,className:l,disableTypography:a=!1,inset:i=!1,primary:g,primaryTypographyProps:s,secondary:c,secondaryTypographyProps:d,slots:I={},slotProps:u={}}=n,C=Kg(n,iX),{dense:p}=o.useContext(jV);let A=null!=g?g:r,m=c;const h=Xe(Xe({},n),{},{disableTypography:a,inset:i,primary:!!A,secondary:!!m,dense:p}),b=(e=>{const{classes:t,inset:n,primary:o,secondary:r,dense:l}=e;return Ng({root:["root",n&&"inset",l&&"dense",o&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},lX,t)})(h),f={slots:I,slotProps:Xe({primary:s,secondary:d},u)},[y,v]=SW("root",{className:Vg(b.root,l),elementType:gX,externalForwardedProps:Xe(Xe({},f),C),ownerState:h,ref:t}),[Z,G]=SW("primary",{className:b.primary,elementType:rX,externalForwardedProps:f,ownerState:h}),[S,B]=SW("secondary",{className:b.secondary,elementType:rX,externalForwardedProps:f,ownerState:h});return null==A||A.type===rX||a||(A=(0,ao.jsx)(Z,Xe(Xe({variant:p?"body2":"body1",component:null!==G&&void 0!==G&&G.variant?void 0:"span"},G),{},{children:A}))),null==m||m.type===rX||a||(m=(0,ao.jsx)(S,Xe(Xe({variant:"body2",color:"textSecondary"},B),{},{children:m}))),(0,ao.jsxs)(y,Xe(Xe({},v),{},{children:[A,m]}))})),cX=sX,dX=Sy;function IX(e){return yu("MuiList",e)}vu("MuiList",["root","padding","dense","subheader"]);const uX=["children","className","component","dense","disablePadding","subheader"],CX=mu("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),pX=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiList"}),{children:r,className:l,component:a="ul",dense:i=!1,disablePadding:g=!1,subheader:s}=n,c=Kg(n,uX),d=o.useMemo((()=>({dense:i})),[i]),I=Xe(Xe({},n),{},{component:a,dense:i,disablePadding:g}),u=(e=>{const{classes:t,disablePadding:n,dense:o,subheader:r}=e;return Ng({root:["root",!n&&"padding",o&&"dense",r&&"subheader"]},IX,t)})(I);return(0,ao.jsx)(jV.Provider,{value:d,children:(0,ao.jsxs)(CX,Xe(Xe({as:a,className:Vg(u.root,l),ref:t,ownerState:I},c),{},{children:[s,r]}))})})),AX=pX;function mX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const hX=mX,bX=Dk,fX=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function yX(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function vX(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function ZX(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function GX(e,t,n,o,r,l){let a=!1,i=r(e,t,!!t&&n);for(;i;){if(i===e.firstChild){if(a)return!1;a=!0}const t=!o&&(i.disabled||"true"===i.getAttribute("aria-disabled"));if(i.hasAttribute("tabindex")&&ZX(i,l)&&!t)return i.focus(),!0;i=r(e,i,n)}return!1}const SX=o.forwardRef((function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:l=!1,children:a,className:i,disabledItemsFocusable:g=!1,disableListWrap:s=!1,onKeyDown:c,variant:d="selectedMenu"}=e,I=Kg(e,fX),u=o.useRef(null),C=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});lV((()=>{r&&u.current.focus()}),[r]),o.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const o=!u.current.style.width;if(e.clientHeight<u.current.clientHeight&&o){const t="".concat(hX(bX(e)),"px");u.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,u.current.style.width="calc(100% + ".concat(t,")")}return u.current}})),[]);const p=dR(u,t);let A=-1;o.Children.forEach(a,((e,t)=>{o.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===A)&&(A=t),A===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(A+=1,A>=a.length&&(A=-1))):A===t&&(A+=1,A>=a.length&&(A=-1))}));const m=o.Children.map(a,((e,t)=>{if(t===A){const t={};return l&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(t.tabIndex=0),o.cloneElement(e,t)}return e}));return(0,ao.jsx)(AX,Xe(Xe({role:"menu",ref:p,className:i,onKeyDown:e=>{const t=u.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(c&&c(e));const o=dX(t).activeElement;if("ArrowDown"===n)e.preventDefault(),GX(t,o,s,g,yX);else if("ArrowUp"===n)e.preventDefault(),GX(t,o,s,g,vX);else if("Home"===n)e.preventDefault(),GX(t,null,s,g,yX);else if("End"===n)e.preventDefault(),GX(t,null,s,g,vX);else if(1===n.length){const r=C.current,l=n.toLowerCase(),a=performance.now();r.keys.length>0&&(a-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&l!==r.keys[0]&&(r.repeating=!1)),r.lastTime=a,r.keys.push(l);const i=o&&!r.repeating&&ZX(o,r);r.previousKeyMatched&&(i||GX(t,o,!1,g,yX,r))?e.preventDefault():r.previousKeyMatched=!1}c&&c(e)},tabIndex:r?0:-1},I),{},{children:m}))}));function BX(e){return yu("MuiMenuItem",e)}const wX=vu("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),RX=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],WX=mu(zR,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(Ow((e=>{let{theme:t}=e;return Xe(Xe({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(wX.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):nI(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(wX.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):nI(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(wX.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):nI(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):nI(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(wX.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(wX.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(Kk.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(Kk.inset)]:{marginLeft:52},["& .".concat(aX.root)]:{marginTop:0,marginBottom:0},["& .".concat(aX.inset)]:{paddingLeft:36},["& .".concat(zV.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:Xe(Xe({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(zV.root," svg")]:{fontSize:"1.25rem"}})}]})}))),kX=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:l="li",dense:a=!1,divider:i=!1,disableGutters:g=!1,focusVisibleClassName:s,role:c="menuitem",tabIndex:d,className:I}=n,u=Kg(n,RX),C=o.useContext(jV),p=o.useMemo((()=>({dense:a||C.dense||!1,disableGutters:g})),[C.dense,a,g]),A=o.useRef(null);lV((()=>{r&&A.current&&A.current.focus()}),[r]);const m=Xe(Xe({},n),{},{dense:p.dense,divider:i,disableGutters:g}),h=(e=>{const{disabled:t,dense:n,divider:o,disableGutters:r,selected:l,classes:a}=e,i=Ng({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",o&&"divider",l&&"selected"]},BX,a);return Xe(Xe({},a),i)})(n),b=dR(A,t);let f;return n.disabled||(f=void 0!==d?d:-1),(0,ao.jsx)(jV.Provider,{value:p,children:(0,ao.jsx)(WX,Xe(Xe({ref:b,role:c,tabIndex:f,component:l,focusVisibleClassName:Vg(h.focusVisible,s),className:Vg(h.root,I)},u),{},{ownerState:m,classes:h}))})})),VX=kX,XX=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],xX=mu(IV,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...cV(e,t),!n.disableUnderline&&t.underline]}})(Ow((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(xW.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(xW.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(xW.disabled,", .").concat(xW.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(n)}},["&.".concat(xW.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n].main)}}}}))]}}))),JX=mu(uV,{name:"MuiInput",slot:"Input",overridesResolver:dV})({}),NX=o.forwardRef((function(e,t){var n,o,r,l;const a=jw({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:g={},componentsProps:s,fullWidth:c=!1,inputComponent:d="input",multiline:I=!1,slotProps:u,slots:C={},type:p="text"}=a,A=Kg(a,XX),m=(e=>{const{classes:t,disableUnderline:n}=e,o=Ng({root:["root",!n&&"underline"],input:["input"]},XW,t);return Xe(Xe({},t),o)})(a),h={root:{ownerState:{disableUnderline:i}}},b=(null!==u&&void 0!==u?u:s)?Rc(null!==u&&void 0!==u?u:s,h):h,f=null!==(n=null!==(o=C.root)&&void 0!==o?o:g.Root)&&void 0!==n?n:xX,y=null!==(r=null!==(l=C.input)&&void 0!==l?l:g.Input)&&void 0!==r?r:JX;return(0,ao.jsx)(AV,Xe(Xe({slots:{root:f,input:y},slotProps:b,fullWidth:c,inputComponent:d,multiline:I,ref:t,type:p},A),{},{classes:m}))}));NX.muiName="Input";const HX=NX,FX=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],YX=mu(IV,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...cV(e,t),!n.disableUnderline&&t.underline]}})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode,o=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},["&.".concat(FW.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},["&.".concat(FW.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(FW.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(FW.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(FW.disabled,", .").concat(FW.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(FW.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(sR()).map((e=>{var n;let[o]=e;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:"2px solid ".concat(null===(n=(t.vars||t).palette[o])||void 0===n?void 0:n.main)}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),KX=mu(uV,{name:"MuiFilledInput",slot:"Input",overridesResolver:dV})(Ow((e=>{let{theme:t}=e;return Xe(Xe(Xe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]})}))),MX=o.forwardRef((function(e,t){var n,o,r,l;const a=jw({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:g={},componentsProps:s,fullWidth:c=!1,hiddenLabel:d,inputComponent:I="input",multiline:u=!1,slotProps:C,slots:p={},type:A="text"}=a,m=Kg(a,FX),h=Xe(Xe({},a),{},{disableUnderline:i,fullWidth:c,inputComponent:I,multiline:u,type:A}),b=(e=>{const{classes:t,disableUnderline:n,startAdornment:o,endAdornment:r,size:l,hiddenLabel:a,multiline:i}=e,g=Ng({root:["root",!n&&"underline",o&&"adornedStart",r&&"adornedEnd","small"===l&&"size".concat(qw(l)),a&&"hiddenLabel",i&&"multiline"],input:["input"]},HW,t);return Xe(Xe({},t),g)})(a),f={root:{ownerState:h},input:{ownerState:h}},y=(null!==C&&void 0!==C?C:s)?Rc(f,null!==C&&void 0!==C?C:s):f,v=null!==(n=null!==(o=p.root)&&void 0!==o?o:g.Root)&&void 0!==n?n:YX,Z=null!==(r=null!==(l=p.input)&&void 0!==l?l:g.Input)&&void 0!==r?r:KX;return(0,ao.jsx)(AV,Xe(Xe({slots:{root:v,input:Z},slotProps:y,fullWidth:c,inputComponent:I,multiline:u,ref:t,type:A},m),{},{classes:b}))}));MX.muiName="Input";const LX=MX,EX=["children","classes","className","label","notched"];var zX;const jX=mu("fieldset",{shouldForwardProp:Au})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),DX=mu("legend",{shouldForwardProp:Au})(Ow((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));const TX=["components","fullWidth","inputComponent","label","multiline","notched","slots","slotProps","type"],PX=mu(IV,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:cV})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(NW.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(NW.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}},["&.".concat(NW.focused," .").concat(NW.notchedOutline)]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(NW.focused," .").concat(NW.notchedOutline)]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(NW.error," .").concat(NW.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(NW.disabled," .").concat(NW.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),UX=mu((function(e){const{children:t,classes:n,className:o,label:r,notched:l}=e,a=Kg(e,EX),i=null!=r&&""!==r,g=Xe(Xe({},e),{},{notched:l,withLabel:i});return(0,ao.jsx)(jX,Xe(Xe({"aria-hidden":!0,className:o,ownerState:g},a),{},{children:(0,ao.jsx)(DX,{ownerState:g,children:i?(0,ao.jsx)("span",{children:r}):zX||(zX=(0,ao.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}}))),QX=mu(uV,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:dV})(Ow((e=>{let{theme:t}=e;return Xe(Xe(Xe({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]})}))),OX=o.forwardRef((function(e,t){var n,r,l,a;const i=jw({props:e,name:"MuiOutlinedInput"}),{components:g={},fullWidth:s=!1,inputComponent:c="input",label:d,multiline:I=!1,notched:u,slots:C={},slotProps:p={},type:A="text"}=i,m=Kg(i,TX),h=(e=>{const{classes:t}=e,n=Ng({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},JW,t);return Xe(Xe({},t),n)})(i),b=hk(),f=$k({props:i,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y=Xe(Xe({},i),{},{color:f.color||"primary",disabled:f.disabled,error:f.error,focused:f.focused,formControl:b,fullWidth:s,hiddenLabel:f.hiddenLabel,multiline:I,size:f.size,type:A}),v=null!==(n=null!==(r=C.root)&&void 0!==r?r:g.Root)&&void 0!==n?n:PX,Z=null!==(l=null!==(a=C.input)&&void 0!==a?a:g.Input)&&void 0!==l?l:QX,[G,S]=SW("notchedOutline",{elementType:UX,className:h.notchedOutline,shouldForwardComponentProp:!0,ownerState:y,externalForwardedProps:{slots:C,slotProps:p},additionalProps:{label:null!=d&&""!==d&&f.required?(0,ao.jsxs)(o.Fragment,{children:[d,"\u2009","*"]}):d}});return(0,ao.jsx)(AV,Xe(Xe({slots:{root:v,input:Z},slotProps:p,renderSuffix:e=>(0,ao.jsx)(G,Xe(Xe({},S),{},{notched:"undefined"!==typeof u?u:Boolean(e.startAdornment||e.filled||e.focused)})),fullWidth:s,inputComponent:c,multiline:I,ref:t,type:A},m),{},{classes:Xe(Xe({},h),{},{notchedOutline:null})}))}));OX.muiName="Input";const qX=OX;function _X(e){return yu("MuiFormLabel",e)}const $X=vu("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),ex=["children","className","color","component","disabled","error","filled","focused","required"],tx=mu("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled]}})(Ow((e=>{let{theme:t}=e;return Xe(Xe({color:(t.vars||t).palette.text.secondary},t.typography.body1),{},{lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat($X.focused)]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat($X.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat($X.error)]:{color:(t.vars||t).palette.error.main}}}]})}))),nx=mu("span",{name:"MuiFormLabel",slot:"Asterisk"})(Ow((e=>{let{theme:t}=e;return{["&.".concat($X.error)]:{color:(t.vars||t).palette.error.main}}}))),ox=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiFormLabel"}),{children:o,className:r,color:l,component:a="label",disabled:i,error:g,filled:s,focused:c,required:d}=n,I=Kg(n,ex),u=$k({props:n,muiFormControl:hk(),states:["color","required","focused","disabled","error","filled"]}),C=Xe(Xe({},n),{},{color:u.color||"primary",component:a,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),p=(e=>{const{classes:t,color:n,focused:o,disabled:r,error:l,filled:a,required:i}=e;return Ng({root:["root","color".concat(qw(n)),r&&"disabled",l&&"error",a&&"filled",o&&"focused",i&&"required"],asterisk:["asterisk",l&&"error"]},_X,t)})(C);return(0,ao.jsxs)(tx,Xe(Xe({as:a,ownerState:C,className:Vg(p.root,r),ref:t},I),{},{children:[o,u.required&&(0,ao.jsxs)(nx,{ownerState:C,"aria-hidden":!0,className:p.asterisk,children:["\u2009","*"]})]}))})),rx=ox;function lx(e){return yu("MuiInputLabel",e)}vu("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const ax=["disableAnimation","margin","shrink","variant","className"],ix=mu(rx,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat($X.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(Ow((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:o}=e;return"filled"===t&&n.shrink&&"small"===o},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),gx=o.forwardRef((function(e,t){const n=jw({name:"MuiInputLabel",props:e}),{disableAnimation:o=!1,margin:r,shrink:l,variant:a,className:i}=n,g=Kg(n,ax),s=hk();let c=l;"undefined"===typeof c&&s&&(c=s.filled||s.focused||s.adornedStart);const d=$k({props:n,muiFormControl:s,states:["size","variant","required","focused"]}),I=Xe(Xe({},n),{},{disableAnimation:o,formControl:s,shrink:c,size:d.size,variant:d.variant,required:d.required,focused:d.focused}),u=(e=>{const{classes:t,formControl:n,size:o,shrink:r,disableAnimation:l,variant:a,required:i}=e,g=Ng({root:["root",n&&"formControl",!l&&"animated",r&&"shrink",o&&"medium"!==o&&"size".concat(qw(o)),a],asterisk:[i&&"asterisk"]},lx,t);return Xe(Xe({},t),g)})(I);return(0,ao.jsx)(ix,Xe(Xe({"data-shrink":c,ref:t,className:Vg(u.root,i)},g),{},{ownerState:I,classes:u}))})),sx=gx;function cx(e,t){var n,r;return o.isValidElement(e)&&-1!==t.indexOf(null!==(n=e.type.muiName)&&void 0!==n?n:null===(r=e.type)||void 0===r||null===(r=r._payload)||void 0===r||null===(r=r.value)||void 0===r?void 0:r.muiName)}const dx=cx;function Ix(e){return yu("MuiFormControl",e)}vu("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const ux=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Cx=mu("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["margin".concat(qw(n.margin))],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),px=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiFormControl"}),{children:r,className:l,color:a="primary",component:i="div",disabled:g=!1,error:s=!1,focused:c,fullWidth:d=!1,hiddenLabel:I=!1,margin:u="none",required:C=!1,size:p="medium",variant:A="outlined"}=n,m=Kg(n,ux),h=Xe(Xe({},n),{},{color:a,component:i,disabled:g,error:s,fullWidth:d,hiddenLabel:I,margin:u,required:C,size:p,variant:A}),b=(e=>{const{classes:t,margin:n,fullWidth:o}=e;return Ng({root:["root","none"!==n&&"margin".concat(qw(n)),o&&"fullWidth"]},Ix,t)})(h),[f,y]=o.useState((()=>{let e=!1;return r&&o.Children.forEach(r,(t=>{if(!dx(t,["Input","Select"]))return;const n=dx(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[v,Z]=o.useState((()=>{let e=!1;return r&&o.Children.forEach(r,(t=>{dx(t,["Input","Select"])&&(iV(t.props,!0)||iV(t.props.inputProps,!0))&&(e=!0)})),e})),[G,S]=o.useState(!1);g&&G&&S(!1);const B=void 0===c||g?G:c;let w;o.useRef(!1);const R=o.useCallback((()=>{Z(!0)}),[]),W=o.useCallback((()=>{Z(!1)}),[]),k=o.useMemo((()=>({adornedStart:f,setAdornedStart:y,color:a,disabled:g,error:s,filled:v,focused:B,fullWidth:d,hiddenLabel:I,size:p,onBlur:()=>{S(!1)},onFocus:()=>{S(!0)},onEmpty:W,onFilled:R,registerEffect:w,required:C,variant:A})),[f,a,g,s,v,B,d,I,w,W,R,C,p,A]);return(0,ao.jsx)(mk.Provider,{value:k,children:(0,ao.jsx)(Cx,Xe(Xe({as:i,ownerState:h,className:Vg(b.root,l),ref:t},m),{},{children:r}))})})),Ax=px;function mx(e){return yu("MuiFormHelperText",e)}const hx=vu("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),bx=["children","className","component","disabled","error","filled","focused","margin","required","variant"];var fx;const yx=mu("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(qw(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})(Ow((e=>{let{theme:t}=e;return Xe(Xe({color:(t.vars||t).palette.text.secondary},t.typography.caption),{},{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(hx.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(hx.error)]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]})}))),vx=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiFormHelperText"}),{children:o,className:r,component:l="p",disabled:a,error:i,filled:g,focused:s,margin:c,required:d,variant:I}=n,u=Kg(n,bx),C=$k({props:n,muiFormControl:hk(),states:["variant","size","disabled","error","filled","focused","required"]}),p=Xe(Xe({},n),{},{component:l,contained:"filled"===C.variant||"outlined"===C.variant,variant:C.variant,size:C.size,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required});delete p.ownerState;const A=(e=>{const{classes:t,contained:n,size:o,disabled:r,error:l,filled:a,focused:i,required:g}=e;return Ng({root:["root",r&&"disabled",l&&"error",o&&"size".concat(qw(o)),n&&"contained",i&&"focused",a&&"filled",g&&"required"]},mx,t)})(p);return(0,ao.jsx)(yx,Xe(Xe({as:l,className:Vg(A.root,r),ref:t},u),{},{ownerState:p,children:" "===o?fx||(fx=(0,ao.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):o}))})),Zx=vx,Gx=rZ,Sx=!1;var Bx="unmounted",wx="exited",Rx="entering",Wx="entered",kx="exiting",Vx=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var r,l=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?l?(r=wx,o.appearStatus=Rx):r=Wx:r=t.unmountOnExit||t.mountOnEnter?Bx:wx,o.state={status:r},o.nextCallback=null,o}pR(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Bx?{status:wx}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Rx&&n!==Wx&&(t=Rx):n!==Rx&&n!==Wx||(t=kx)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!==typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Rx){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===wx&&this.setState({status:Bx})},n.performEnter=function(e){var t=this,n=this.props.enter,o=this.context?this.context.isMounting:e,r=this.props.nodeRef?[o]:[a.findDOMNode(this),o],l=r[0],i=r[1],g=this.getTimeouts(),s=o?g.appear:g.enter;!e&&!n||Sx?this.safeSetState({status:Wx},(function(){t.props.onEntered(l)})):(this.props.onEnter(l,i),this.safeSetState({status:Rx},(function(){t.props.onEntering(l,i),t.onTransitionEnd(s,(function(){t.safeSetState({status:Wx},(function(){t.props.onEntered(l,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!Sx?(this.props.onExit(o),this.safeSetState({status:kx},(function(){e.props.onExiting(o),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:wx},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:wx},(function(){e.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),o=null==e&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],l=r[0],i=r[1];this.props.addEndListener(l,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Bx)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Wg(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(AR.Provider,{value:null},"function"===typeof n?n(e,r):o.cloneElement(o.Children.only(n),r))},t}(o.Component);function Xx(){}Vx.contextType=AR,Vx.propTypes={},Vx.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xx,onEntering:Xx,onEntered:Xx,onExit:Xx,onExiting:Xx,onExited:Xx},Vx.UNMOUNTED=Bx,Vx.EXITED=wx,Vx.ENTERING=Rx,Vx.ENTERED=Wx,Vx.EXITING=kx;const xx=Vx,Jx=e=>e.scrollTop;function Nx(e,t){var n,o;const{timeout:r,easing:l,style:a={}}=e;return{duration:null!==(n=a.transitionDuration)&&void 0!==n?n:"number"===typeof r?r:r[t.mode]||0,easing:null!==(o=a.transitionTimingFunction)&&void 0!==o?o:"object"===typeof l?l[t.mode]:l,delay:a.transitionDelay}}const Hx=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Fx=["ownerState"];function Yx(e){return"scale(".concat(e,", ").concat(e**2,")")}const Kx={entering:{opacity:1,transform:Yx(1)},entered:{opacity:1,transform:"none"}},Mx="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Lx=o.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:l,easing:a,in:i,onEnter:g,onEntered:s,onEntering:c,onExit:d,onExited:I,onExiting:u,style:C,timeout:p="auto",TransitionComponent:A=xx}=e,m=Kg(e,Hx),h=wp(),b=o.useRef(),f=bZ(),y=o.useRef(null),v=dR(y,Vw(l),t),Z=e=>t=>{if(e){const n=y.current;void 0===t?e(n):e(n,t)}},G=Z(c),S=Z(((e,t)=>{Jx(e);const{duration:n,delay:o,easing:r}=Nx({style:C,timeout:p,easing:a},{mode:"enter"});let l;"auto"===p?(l=f.transitions.getAutoHeightDuration(e.clientHeight),b.current=l):l=n,e.style.transition=[f.transitions.create("opacity",{duration:l,delay:o}),f.transitions.create("transform",{duration:Mx?l:.666*l,delay:o,easing:r})].join(","),g&&g(e,t)})),B=Z(s),w=Z(u),R=Z((e=>{const{duration:t,delay:n,easing:o}=Nx({style:C,timeout:p,easing:a},{mode:"exit"});let r;"auto"===p?(r=f.transitions.getAutoHeightDuration(e.clientHeight),b.current=r):r=t,e.style.transition=[f.transitions.create("opacity",{duration:r,delay:n}),f.transitions.create("transform",{duration:Mx?r:.666*r,delay:Mx?n:n||.333*r,easing:o})].join(","),e.style.opacity=0,e.style.transform=Yx(.75),d&&d(e)})),W=Z(I);return(0,ao.jsx)(A,Xe(Xe({appear:r,in:i,nodeRef:y,onEnter:S,onEntered:B,onEntering:G,onExit:R,onExited:W,onExiting:w,addEndListener:e=>{"auto"===p&&h.start(b.current||0,e),n&&n(y.current,e)},timeout:"auto"===p?null:p},m),{},{children:(e,t)=>{let{ownerState:n}=t,r=Kg(t,Fx);return o.cloneElement(l,Xe({style:Xe(Xe(Xe({opacity:0,transform:Yx(.75),visibility:"exited"!==e||i?void 0:"hidden"},Kx[e]),C),l.props.style),ref:v},r))}}))}));Lx&&(Lx.muiSupportAuto=!0);const Ex=Lx,zx=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],jx=["ownerState"],Dx={entering:{opacity:1},entered:{opacity:1}},Tx=o.forwardRef((function(e,t){const n=bZ(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:l,appear:a=!0,children:i,easing:g,in:s,onEnter:c,onEntered:d,onEntering:I,onExit:u,onExited:C,onExiting:p,style:A,timeout:m=r,TransitionComponent:h=xx}=e,b=Kg(e,zx),f=o.useRef(null),y=dR(f,Vw(i),t),v=e=>t=>{if(e){const n=f.current;void 0===t?e(n):e(n,t)}},Z=v(I),G=v(((e,t)=>{Jx(e);const o=Nx({style:A,timeout:m,easing:g},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",o),e.style.transition=n.transitions.create("opacity",o),c&&c(e,t)})),S=v(d),B=v(p),w=v((e=>{const t=Nx({style:A,timeout:m,easing:g},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),u&&u(e)})),R=v(C);return(0,ao.jsx)(h,Xe(Xe({appear:a,in:s,nodeRef:f,onEnter:G,onEntered:S,onEntering:Z,onExit:w,onExited:R,onExiting:B,addEndListener:e=>{l&&l(f.current,e)},timeout:m},b),{},{children:(e,t)=>{let{ownerState:n}=t,r=Kg(t,jx);return o.cloneElement(i,Xe({style:Xe(Xe(Xe({opacity:0,visibility:"exited"!==e||s?void 0:"hidden"},Dx[e]),A),i.props.style),ref:y},r))}}))})),Px=Tx;function Ux(e){return yu("MuiBackdrop",e)}vu("MuiBackdrop",["root","invisible"]);const Qx=["children","className","component","invisible","open","components","componentsProps","slotProps","slots","TransitionComponent","transitionDuration"],Ox=mu("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),qx=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiBackdrop"}),{children:o,className:r,component:l="div",invisible:a=!1,open:i,components:g={},componentsProps:s={},slotProps:c={},slots:d={},TransitionComponent:I,transitionDuration:u}=n,C=Kg(n,Qx),p=Xe(Xe({},n),{},{component:l,invisible:a}),A=(e=>{const{classes:t,invisible:n}=e;return Ng({root:["root",n&&"invisible"]},Ux,t)})(p),m={slots:Xe({transition:I,root:g.Root},d),slotProps:Xe(Xe({},s),c)},[h,b]=SW("root",{elementType:Ox,externalForwardedProps:m,className:Vg(A.root,r),ownerState:p}),[f,y]=SW("transition",{elementType:Px,externalForwardedProps:m,ownerState:p});return(0,ao.jsx)(f,Xe(Xe(Xe({in:i,timeout:u},C),y),{},{children:(0,ao.jsx)(h,Xe(Xe({"aria-hidden":!0},b),{},{classes:A,ref:t,children:o}))}))})),_x=qx;function $x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(this,o),t.apply(this,o)}),(()=>{}))}function eJ(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function tJ(e){return parseInt(Dk(e).getComputedStyle(e).paddingRight,10)||0}function nJ(e,t,n,o,r){const l=[t,n,...o];[].forEach.call(e.children,(e=>{const t=!l.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&eJ(e,r)}))}function oJ(e,t){let n=-1;return e.some(((e,o)=>!!t(e)&&(n=o,!0))),n}function rJ(e,t){const n=[],o=e.container;if(!t.disableScrollLock){if(function(e){const t=Sy(e);return t.body===e?Dk(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(o)){const e=mX(Dk(o));n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight="".concat(tJ(o)+e,"px");const t=Sy(o).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(tJ(t)+e,"px")}))}let e;if(o.parentNode instanceof DocumentFragment)e=Sy(o).body;else{const t=o.parentElement,n=Dk(o);e="HTML"===(null===t||void 0===t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:o}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:o}=e;t?n.style.setProperty(o,t):n.style.removeProperty(o)}))}}const lJ=()=>{},aJ=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&eJ(e.modalRef,!1);const o=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);nJ(t,e.mount,e.modalRef,o,!0);const r=oJ(this.containers,(e=>e.container===t));return-1!==r?(this.containers[r].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:o}),n)}mount(e,t){const n=oJ(this.containers,(t=>t.modals.includes(e))),o=this.containers[n];o.restore||(o.restore=rJ(o,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const o=oJ(this.containers,(t=>t.modals.includes(e))),r=this.containers[o];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(n,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&eJ(e.modalRef,t),nJ(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(o,1);else{const e=r.modals[r.modals.length-1];e.modalRef&&eJ(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const iJ=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:l=!1,onTransitionEnter:a,onTransitionExited:i,children:g,onClose:s,open:c,rootRef:d}=e,I=o.useRef({}),u=o.useRef(null),C=o.useRef(null),p=Xg(C,d),[A,m]=o.useState(!c),h=function(e){return!!e&&e.props.hasOwnProperty("in")}(g);let b=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(b=!1);const f=()=>(I.current.modalRef=C.current,I.current.mount=u.current,I.current),y=()=>{aJ.mount(f(),{disableScrollLock:r}),C.current&&(C.current.scrollTop=0)},v=Cp((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||Sy(u.current).body;aJ.add(f(),e),C.current&&y()})),Z=()=>aJ.isTopModal(f()),G=Cp((e=>{u.current=e,e&&(c&&Z()?y():C.current&&eJ(C.current,b))})),S=o.useCallback((()=>{aJ.remove(f(),b)}),[b]);o.useEffect((()=>()=>{S()}),[S]),o.useEffect((()=>{c?v():h&&l||S()}),[c,S,h,l,v]);const B=e=>t=>{var o;null===(o=e.onKeyDown)||void 0===o||o.call(e,t),"Escape"===t.key&&229!==t.which&&Z()&&(n||(t.stopPropagation(),s&&s(t,"escapeKeyDown")))},w=e=>t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),t.target===t.currentTarget&&s&&s(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Sw(e);delete n.onTransitionEnter,delete n.onTransitionExited;const o=Xe(Xe({},n),t);return Xe(Xe({role:"presentation"},o),{},{onKeyDown:B(o),ref:p})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xe(Xe({"aria-hidden":!0},e),{},{onClick:w(e),open:c})},getTransitionProps:()=>{var e,t;return{onEnter:$x((()=>{m(!1),a&&a()}),null!==(e=null===g||void 0===g?void 0:g.props.onEnter)&&void 0!==e?e:lJ),onExited:$x((()=>{m(!0),i&&i(),l&&S()}),null!==(t=null===g||void 0===g?void 0:g.props.onExited)&&void 0!==t?t:lJ)}},rootRef:p,portalRef:G,isTopModal:Z,exited:A,hasTransition:h}};function gJ(e){return yu("MuiModal",e)}vu("MuiModal",["root","hidden","backdrop"]);const sJ=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],cJ=mu("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Ow((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),dJ=mu(_x,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),IJ=o.forwardRef((function(e,t){const n=jw({name:"MuiModal",props:e}),{BackdropComponent:r=dJ,BackdropProps:l,classes:a,className:i,closeAfterTransition:g=!1,children:s,container:c,component:d,components:I={},componentsProps:u={},disableAutoFocus:C=!1,disableEnforceFocus:p=!1,disableEscapeKeyDown:A=!1,disablePortal:m=!1,disableRestoreFocus:h=!1,disableScrollLock:b=!1,hideBackdrop:f=!1,keepMounted:y=!1,onClose:v,onTransitionEnter:Z,onTransitionExited:G,open:S,slotProps:B={},slots:w={},theme:R}=n,W=Kg(n,sJ),k=Xe(Xe({},n),{},{closeAfterTransition:g,disableAutoFocus:C,disableEnforceFocus:p,disableEscapeKeyDown:A,disablePortal:m,disableRestoreFocus:h,disableScrollLock:b,hideBackdrop:f,keepMounted:y}),{getRootProps:V,getBackdropProps:X,getTransitionProps:x,portalRef:J,isTopModal:N,exited:H,hasTransition:F}=iJ(Xe(Xe({},k),{},{rootRef:t})),Y=Xe(Xe({},k),{},{exited:H}),K=(e=>{const{open:t,exited:n,classes:o}=e;return Ng({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},gJ,o)})(Y),M={};if(void 0===s.props.tabIndex&&(M.tabIndex="-1"),F){const{onEnter:e,onExited:t}=x();M.onEnter=e,M.onExited=t}const L={slots:Xe({root:I.Root,backdrop:I.Backdrop},w),slotProps:Xe(Xe({},u),B)},[E,z]=SW("root",{ref:t,elementType:cJ,externalForwardedProps:Xe(Xe(Xe({},L),W),{},{component:d}),getSlotProps:V,ownerState:Y,className:Vg(i,null===K||void 0===K?void 0:K.root,!Y.open&&Y.exited&&(null===K||void 0===K?void 0:K.hidden))}),[j,D]=SW("backdrop",{ref:null===l||void 0===l?void 0:l.ref,elementType:r,externalForwardedProps:L,shouldForwardComponentProp:!0,additionalProps:l,getSlotProps:e=>X(Xe(Xe({},e),{},{onClick:t=>{null!==e&&void 0!==e&&e.onClick&&e.onClick(t)}})),className:Vg(null===l||void 0===l?void 0:l.className,null===K||void 0===K?void 0:K.backdrop),ownerState:Y});return y||S||F&&!H?(0,ao.jsx)(Xw,{ref:J,container:c,disablePortal:m,children:(0,ao.jsxs)(E,Xe(Xe({},z),{},{children:[!f&&r?(0,ao.jsx)(j,Xe({},D)):null,(0,ao.jsx)(fV,{disableEnforceFocus:p,disableAutoFocus:C,disableRestoreFocus:h,isEnabled:N,open:S,children:o.cloneElement(s,M)})]}))}):null})),uJ=IJ;function CJ(e){return yu("MuiPopover",e)}vu("MuiPopover",["root","paper"]);const pJ=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],AJ=["slots","slotProps"];function mJ(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function hJ(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function bJ(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function fJ(e){return"function"===typeof e?e():e}const yJ=mu(uJ,{name:"MuiPopover",slot:"Root"})({}),vJ=mu(iR,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),ZJ=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiPopover"}),{action:r,anchorEl:l,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:i,anchorReference:g="anchorEl",children:s,className:c,container:d,elevation:I=8,marginThreshold:u=16,open:C,PaperProps:p={},slots:A={},slotProps:m={},transformOrigin:h={vertical:"top",horizontal:"left"},TransitionComponent:b,transitionDuration:f="auto",TransitionProps:y={},disableScrollLock:v=!1}=n,Z=Kg(n,pJ),G=o.useRef(),S=Xe(Xe({},n),{},{anchorOrigin:a,anchorReference:g,elevation:I,marginThreshold:u,transformOrigin:h,TransitionComponent:b,transitionDuration:f,TransitionProps:y}),B=(e=>{const{classes:t}=e;return Ng({root:["root"],paper:["paper"]},CJ,t)})(S),w=o.useCallback((()=>{if("anchorPosition"===g)return i;const e=fJ(l),t=(e&&1===e.nodeType?e:dX(G.current).body).getBoundingClientRect();return{top:t.top+mJ(t,a.vertical),left:t.left+hJ(t,a.horizontal)}}),[l,a.horizontal,a.vertical,i,g]),R=o.useCallback((e=>({vertical:mJ(e,h.vertical),horizontal:hJ(e,h.horizontal)})),[h.horizontal,h.vertical]),W=o.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=R(t);if("none"===g)return{top:null,left:null,transformOrigin:bJ(n)};const o=w();let r=o.top-n.vertical,a=o.left-n.horizontal;const i=r+t.height,s=a+t.width,c=bX(fJ(l)),d=c.innerHeight-u,I=c.innerWidth-u;if(null!==u&&r<u){const e=r-u;r-=e,n.vertical+=e}else if(null!==u&&i>d){const e=i-d;r-=e,n.vertical+=e}if(null!==u&&a<u){const e=a-u;a-=e,n.horizontal+=e}else if(s>I){const e=s-I;a-=e,n.horizontal+=e}return{top:"".concat(Math.round(r),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:bJ(n)}}),[l,g,w,R,u]),[k,V]=o.useState(C),X=o.useCallback((()=>{const e=G.current;if(!e)return;const t=W(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,V(!0)}),[W]);o.useEffect((()=>(v&&window.addEventListener("scroll",X),()=>window.removeEventListener("scroll",X))),[l,v,X]);o.useEffect((()=>{C&&X()})),o.useImperativeHandle(r,(()=>C?{updatePosition:()=>{X()}}:null),[C,X]),o.useEffect((()=>{if(!C)return;const e=Gx((()=>{X()})),t=bX(fJ(l));return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,C,X]);let x=f;const J={slots:Xe({transition:b},A),slotProps:Xe({transition:y,paper:p},m)},[N,H]=SW("transition",{elementType:Ex,externalForwardedProps:J,ownerState:S,getSlotProps:e=>Xe(Xe({},e),{},{onEntering:(t,n)=>{var o;null===(o=e.onEntering)||void 0===o||o.call(e,t,n),X()},onExited:t=>{var n;null===(n=e.onExited)||void 0===n||n.call(e,t),V(!1)}}),additionalProps:{appear:!0,in:C}});"auto"!==f||N.muiSupportAuto||(x=void 0);const F=d||(l?dX(fJ(l)).body:void 0),[Y,K]=SW("root",{ref:t,elementType:yJ,externalForwardedProps:Xe(Xe({},J),Z),shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:A.backdrop},slotProps:{backdrop:kk("function"===typeof m.backdrop?m.backdrop(S):m.backdrop,{invisible:!0})},container:F,open:C},ownerState:S,className:Vg(B.root,c)}),{slots:M,slotProps:L}=K,E=Kg(K,AJ),[z,j]=SW("paper",{ref:G,className:B.paper,elementType:vJ,externalForwardedProps:J,shouldForwardComponentProp:!0,additionalProps:{elevation:I,style:k?void 0:{opacity:0}},ownerState:S});return(0,ao.jsx)(Y,Xe(Xe(Xe({},E),!_k(Y)&&{slots:M,slotProps:L,disableScrollLock:v}),{},{children:(0,ao.jsx)(N,Xe(Xe({},H),{},{timeout:x,children:(0,ao.jsx)(z,Xe(Xe({},j),{},{children:s}))}))}))})),GJ=ZJ;function SJ(e){return yu("MuiMenu",e)}vu("MuiMenu",["root","paper","list"]);const BJ=["onEntering"],wJ=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],RJ={vertical:"top",horizontal:"right"},WJ={vertical:"top",horizontal:"left"},kJ=mu(GJ,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiMenu",slot:"Root"})({}),VJ=mu(vJ,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),XJ=mu(SX,{name:"MuiMenu",slot:"List"})({outline:0}),xJ=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:l,className:a,disableAutoFocusItem:i=!1,MenuListProps:g={},onClose:s,open:c,PaperProps:d={},PopoverClasses:I,transitionDuration:u="auto",TransitionProps:{onEntering:C}={},variant:p="selectedMenu",slots:A={},slotProps:m={}}=n,h=Kg(n.TransitionProps,BJ),b=Kg(n,wJ),f=Ym(),y=Xe(Xe({},n),{},{autoFocus:r,disableAutoFocusItem:i,MenuListProps:g,onEntering:C,PaperProps:d,transitionDuration:u,TransitionProps:h,variant:p}),v=(e=>{const{classes:t}=e;return Ng({root:["root"],paper:["paper"],list:["list"]},SJ,t)})(y),Z=r&&!i&&c,G=o.useRef(null);let S=-1;o.Children.map(l,((e,t)=>{o.isValidElement(e)&&(e.props.disabled||("selectedMenu"===p&&e.props.selected||-1===S)&&(S=t))}));const B={slots:A,slotProps:Xe({list:g,transition:h,paper:d},m)},w=kw({elementType:A.root,externalSlotProps:m.root,ownerState:y,className:[v.root,a]}),[R,W]=SW("paper",{className:v.paper,elementType:VJ,externalForwardedProps:B,shouldForwardComponentProp:!0,ownerState:y}),[k,V]=SW("list",{className:Vg(v.list,g.className),elementType:XJ,shouldForwardComponentProp:!0,externalForwardedProps:B,getSlotProps:e=>Xe(Xe({},e),{},{onKeyDown:t=>{var n;(e=>{"Tab"===e.key&&(e.preventDefault(),s&&s(e,"tabKeyDown"))})(t),null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}}),ownerState:y}),X="function"===typeof B.slotProps.transition?B.slotProps.transition(y):B.slotProps.transition;return(0,ao.jsx)(kJ,Xe(Xe({onClose:s,anchorOrigin:{vertical:"bottom",horizontal:f?"right":"left"},transformOrigin:f?RJ:WJ,slots:Xe({root:A.root,paper:R,backdrop:A.backdrop},A.transition&&{transition:A.transition}),slotProps:{root:w,paper:W,backdrop:"function"===typeof m.backdrop?m.backdrop(y):m.backdrop,transition:Xe(Xe({},X),{},{onEntering:function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];((e,t)=>{G.current&&G.current.adjustStyleForScrollbar(e,{direction:f?"rtl":"ltr"}),C&&C(e,t)})(...n),null===X||void 0===X||null===(e=X.onEntering)||void 0===e||e.call(X,...n)}})},open:c,ref:t,transitionDuration:u,ownerState:y},b),{},{classes:I,children:(0,ao.jsx)(k,Xe(Xe({actions:G,autoFocus:r&&(-1===S||i),autoFocusItem:Z,variant:p},V),{},{children:l}))}))})),JJ=xJ;function NJ(e){return yu("MuiNativeSelect",e)}const HJ=vu("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),FJ=["className","disabled","error","IconComponent","inputRef","variant"],YJ=mu("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},["&.".concat(HJ.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),KJ=mu(YJ,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Au,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(HJ.multiple)]:t.multiple}]}})({}),MJ=mu("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,["&.".concat(HJ.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),LJ=mu(MJ,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(qw(n.variant))],n.open&&t.iconOpen]}})({}),EJ=o.forwardRef((function(e,t){const{className:n,disabled:r,error:l,IconComponent:a,inputRef:i,variant:g="standard"}=e,s=Kg(e,FJ),c=Xe(Xe({},e),{},{disabled:r,variant:g,error:l}),d=(e=>{const{classes:t,variant:n,disabled:o,multiple:r,open:l,error:a}=e;return Ng({select:["select",n,o&&"disabled",r&&"multiple",a&&"error"],icon:["icon","icon".concat(qw(n)),l&&"iconOpen",o&&"disabled"]},NJ,t)})(c);return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(KJ,Xe({ownerState:c,className:Vg(d.select,n),disabled:r,ref:i||t},s)),e.multiple?null:(0,ao.jsx)(LJ,{as:a,ownerState:c,className:d.icon})]})})),zJ=EJ;function jJ(e){return yu("MuiSelect",e)}const DJ=vu("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),TJ=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"];var PJ;const UJ=mu(YJ,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(DJ.select)]:t.select},{["&.".concat(DJ.select)]:t[n.variant]},{["&.".concat(DJ.error)]:t.error},{["&.".concat(DJ.multiple)]:t.multiple}]}})({["&.".concat(DJ.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),QJ=mu(MJ,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(qw(n.variant))],n.open&&t.iconOpen]}})({}),OJ=mu("input",{shouldForwardProp:e=>pu(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function qJ(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function _J(e){return null==e||"string"===typeof e&&!e.trim()}const $J=o.forwardRef((function(e,t){var n;const{"aria-describedby":r,"aria-label":l,autoFocus:a,autoWidth:i,children:g,className:s,defaultOpen:c,defaultValue:d,disabled:I,displayEmpty:u,error:C=!1,IconComponent:p,inputRef:A,labelId:m,MenuProps:h={},multiple:b,name:f,onBlur:y,onChange:v,onClose:Z,onFocus:G,onOpen:S,open:B,readOnly:w,renderValue:R,required:W,SelectDisplayProps:k={},tabIndex:V,type:X,value:x,variant:J="standard"}=e,N=Kg(e,TJ),[H,F]=Ak({controlled:x,default:d,name:"Select"}),[Y,K]=Ak({controlled:B,default:c,name:"Select"}),M=o.useRef(null),L=o.useRef(null),[E,z]=o.useState(null),{current:j}=o.useRef(null!=B),[D,T]=o.useState(),P=dR(t,A),U=o.useCallback((e=>{L.current=e,e&&z(e)}),[]),Q=null===E||void 0===E?void 0:E.parentNode;o.useImperativeHandle(P,(()=>({focus:()=>{L.current.focus()},node:M.current,value:H})),[H]),o.useEffect((()=>{c&&Y&&E&&!j&&(T(i?null:Q.clientWidth),L.current.focus())}),[E,i]),o.useEffect((()=>{a&&L.current.focus()}),[a]),o.useEffect((()=>{if(!m)return;const e=dX(L.current).getElementById(m);if(e){const t=()=>{getSelection().isCollapsed&&L.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[m]);const O=(e,t)=>{e?S&&S(t):Z&&Z(t),j||(T(i?null:Q.clientWidth),K(e))},q=o.Children.toArray(g),_=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(H)?H.slice():[];const t=H.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),H!==n&&(F(n),v)){const o=t.nativeEvent||t,r=new o.constructor(o.type,o);Object.defineProperty(r,"target",{writable:!0,value:{value:n,name:f}}),v(r,e)}b||O(!1,t)}},$=null!==E&&Y;let ee,te;delete N["aria-invalid"];const ne=[];let oe=!1,re=!1;(iV({value:H})||u)&&(R?ee=R(H):oe=!0);const le=q.map((e=>{if(!o.isValidElement(e))return null;let t;if(b){if(!Array.isArray(H))throw new Error(xg(2));t=H.some((t=>qJ(t,e.props.value))),t&&oe&&ne.push(e.props.children)}else t=qJ(H,e.props.value),t&&oe&&(te=e.props.children);return t&&(re=!0),o.cloneElement(e,{"aria-selected":t?"true":"false",onClick:_(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));oe&&(ee=b?0===ne.length?null:ne.reduce(((e,t,n)=>(e.push(t),n<ne.length-1&&e.push(", "),e)),[]):te);let ae,ie=D;!i&&j&&E&&(ie=Q.clientWidth),ae="undefined"!==typeof V?V:I?null:0;const ge=k.id||(f?"mui-component-select-".concat(f):void 0),se=Xe(Xe({},e),{},{variant:J,value:H,open:$,error:C}),ce=(e=>{const{classes:t,variant:n,disabled:o,multiple:r,open:l,error:a}=e;return Ng({select:["select",n,o&&"disabled",r&&"multiple",a&&"error"],icon:["icon","icon".concat(qw(n)),l&&"iconOpen",o&&"disabled"],nativeInput:["nativeInput"]},jJ,t)})(se),de=Xe(Xe({},h.PaperProps),null===(n=h.slotProps)||void 0===n?void 0:n.paper),Ie=rA();return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(UJ,Xe(Xe({as:"div",ref:U,tabIndex:ae,role:"combobox","aria-controls":$?Ie:void 0,"aria-disabled":I?"true":void 0,"aria-expanded":$?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[m,ge].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":W?"true":void 0,"aria-invalid":C?"true":void 0,onKeyDown:e=>{if(!w){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),O(!0,e))}},onMouseDown:I||w?null:e=>{0===e.button&&(e.preventDefault(),L.current.focus(),O(!0,e))},onBlur:e=>{!$&&y&&(Object.defineProperty(e,"target",{writable:!0,value:{value:H,name:f}}),y(e))},onFocus:G},k),{},{ownerState:se,className:Vg(k.className,ce.select,s),id:ge,children:_J(ee)?PJ||(PJ=(0,ao.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):ee})),(0,ao.jsx)(OJ,Xe(Xe({"aria-invalid":C,value:Array.isArray(H)?H.join(","):H,name:f,ref:M,"aria-hidden":!0,onChange:e=>{const t=q.find((t=>t.props.value===e.target.value));void 0!==t&&(F(t.props.value),v&&v(e,t))},tabIndex:-1,disabled:I,className:ce.nativeInput,autoFocus:a,required:W},N),{},{ownerState:se})),(0,ao.jsx)(QJ,{as:p,className:ce.icon,ownerState:se}),(0,ao.jsx)(JJ,Xe(Xe({id:"menu-".concat(f||""),anchorEl:Q,open:$,onClose:e=>{O(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},h),{},{slotProps:Xe(Xe({},h.slotProps),{},{list:Xe({"aria-labelledby":m,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:Ie},h.MenuListProps),paper:Xe(Xe({},de),{},{style:Xe({minWidth:ie},null!=de?de.style:null)})}),children:le}))]})})),eN=$J,tN=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],nN=["root"],oN={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>Au(e)&&"variant"!==e},rN=mu(HX,oN)(""),lN=mu(qX,oN)(""),aN=mu(LX,oN)(""),iN=o.forwardRef((function(e,t){const n=jw({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:l,classes:a={},className:i,defaultOpen:g=!1,displayEmpty:s=!1,IconComponent:c=KW,id:d,input:I,inputProps:u,label:C,labelId:p,MenuProps:A,multiple:m=!1,native:h=!1,onClose:b,onOpen:f,open:y,renderValue:v,SelectDisplayProps:Z,variant:G="outlined"}=n,S=Kg(n,tN),B=h?zJ:eN,w=$k({props:n,muiFormControl:hk(),states:["variant","error"]}),R=w.variant||G,W=Xe(Xe({},n),{},{variant:R,classes:a}),k=(e=>{const{classes:t}=e,n=Ng({root:["root"]},jJ,t);return Xe(Xe({},t),n)})(W),{root:V}=k,X=Kg(k,nN),x=I||{standard:(0,ao.jsx)(rN,{ownerState:W}),outlined:(0,ao.jsx)(lN,{label:C,ownerState:W}),filled:(0,ao.jsx)(aN,{ownerState:W})}[R],J=dR(t,Vw(x));return(0,ao.jsx)(o.Fragment,{children:o.cloneElement(x,Xe(Xe(Xe({inputComponent:B,inputProps:Xe(Xe(Xe({children:l,error:w.error,IconComponent:c,variant:R,type:void 0,multiple:m},h?{id:d}:{autoWidth:r,defaultOpen:g,displayEmpty:s,labelId:p,MenuProps:A,onClose:b,onOpen:f,open:y,renderValue:v,SelectDisplayProps:Xe({id:d},Z)}),u),{},{classes:u?Rc(X,u.classes):X},I?I.props.inputProps:{})},(m&&h||s)&&"outlined"===R?{notched:!0}:{}),{},{ref:J,className:Vg(x.props.className,i,k.root)},!I&&{variant:R}),S))})}));iN.muiName="Select";const gN=iN;function sN(e){return yu("MuiTextField",e)}vu("MuiTextField",["root"]);const cN=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","slots","slotProps","type","value","variant"],dN={standard:HX,filled:LX,outlined:qX},IN=mu(Ax,{name:"MuiTextField",slot:"Root"})({}),uN=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTextField"}),{autoComplete:o,autoFocus:r=!1,children:l,className:a,color:i="primary",defaultValue:g,disabled:s=!1,error:c=!1,FormHelperTextProps:d,fullWidth:I=!1,helperText:u,id:C,InputLabelProps:p,inputProps:A,InputProps:m,inputRef:h,label:b,maxRows:f,minRows:y,multiline:v=!1,name:Z,onBlur:G,onChange:S,onFocus:B,placeholder:w,required:R=!1,rows:W,select:k=!1,SelectProps:V,slots:X={},slotProps:x={},type:J,value:N,variant:H="outlined"}=n,F=Kg(n,cN),Y=Xe(Xe({},n),{},{autoFocus:r,color:i,disabled:s,error:c,fullWidth:I,multiline:v,required:R,select:k,variant:H}),K=(e=>{const{classes:t}=e;return Ng({root:["root"]},sN,t)})(Y);const M=rA(C),L=u&&M?"".concat(M,"-helper-text"):void 0,E=b&&M?"".concat(M,"-label"):void 0,z=dN[H],j={slots:X,slotProps:Xe({input:m,inputLabel:p,htmlInput:A,formHelperText:d,select:V},x)},D={},T=j.slotProps.inputLabel;"outlined"===H&&(T&&"undefined"!==typeof T.shrink&&(D.notched=T.shrink),D.label=b),k&&(V&&V.native||(D.id=void 0),D["aria-describedby"]=void 0);const[P,U]=SW("root",{elementType:IN,shouldForwardComponentProp:!0,externalForwardedProps:Xe(Xe({},j),F),ownerState:Y,className:Vg(K.root,a),ref:t,additionalProps:{disabled:s,error:c,fullWidth:I,required:R,color:i,variant:H}}),[Q,O]=SW("input",{elementType:z,externalForwardedProps:j,additionalProps:D,ownerState:Y}),[q,_]=SW("inputLabel",{elementType:sx,externalForwardedProps:j,ownerState:Y}),[$,ee]=SW("htmlInput",{elementType:"input",externalForwardedProps:j,ownerState:Y}),[te,ne]=SW("formHelperText",{elementType:Zx,externalForwardedProps:j,ownerState:Y}),[oe,re]=SW("select",{elementType:gN,externalForwardedProps:j,ownerState:Y}),le=(0,ao.jsx)(Q,Xe({"aria-describedby":L,autoComplete:o,autoFocus:r,defaultValue:g,fullWidth:I,multiline:v,name:Z,rows:W,maxRows:f,minRows:y,type:J,value:N,id:M,inputRef:h,onBlur:G,onChange:S,onFocus:B,placeholder:w,inputProps:ee,slots:{input:X.htmlInput?$:void 0}},O));return(0,ao.jsxs)(P,Xe(Xe({},U),{},{children:[null!=b&&""!==b&&(0,ao.jsx)(q,Xe(Xe({htmlFor:M,id:E},_),{},{children:b})),k?(0,ao.jsx)(oe,Xe(Xe({"aria-describedby":L,id:M,labelId:E,value:N,input:le},re),{},{children:l})):le,u&&(0,ao.jsx)(te,Xe(Xe({id:L},ne),{},{children:u}))]}))})),CN=uN;function pN(e){return yu("MuiFormControlLabel",e)}const AN=vu("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),mN=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slots","slotProps","value"],hN=mu("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(AN.label)]:t.label},t.root,t["labelPlacement".concat(qw(n.labelPlacement))]]}})(Ow((e=>{let{theme:t}=e;return{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(AN.disabled)]:{cursor:"default"},["& .".concat(AN.label)]:{["&.".concat(AN.disabled)]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:e=>{let{labelPlacement:t}=e;return"start"===t||"top"===t||"bottom"===t},style:{marginLeft:16}}]}}))),bN=mu("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Ow((e=>{let{theme:t}=e;return{["&.".concat(AN.error)]:{color:(t.vars||t).palette.error.main}}}))),fN=o.forwardRef((function(e,t){var n;const r=jw({props:e,name:"MuiFormControlLabel"}),{checked:l,className:a,componentsProps:i={},control:g,disabled:s,disableTypography:c,inputRef:d,label:I,labelPlacement:u="end",name:C,onChange:p,required:A,slots:m={},slotProps:h={},value:b}=r,f=Kg(r,mN),y=hk(),v=null!==(n=null!==s&&void 0!==s?s:g.props.disabled)&&void 0!==n?n:null===y||void 0===y?void 0:y.disabled,Z=null!==A&&void 0!==A?A:g.props.required,G={disabled:v,required:Z};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof g.props[e]&&"undefined"!==typeof r[e]&&(G[e]=r[e])}));const S=$k({props:r,muiFormControl:y,states:["error"]}),B=Xe(Xe({},r),{},{disabled:v,labelPlacement:u,required:Z,error:S.error}),w=(e=>{const{classes:t,disabled:n,labelPlacement:o,error:r,required:l}=e;return Ng({root:["root",n&&"disabled","labelPlacement".concat(qw(o)),r&&"error",l&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",r&&"error"]},pN,t)})(B),R={slots:m,slotProps:Xe(Xe({},i),h)},[W,k]=SW("typography",{elementType:rX,externalForwardedProps:R,ownerState:B});let V=I;return null==V||V.type===rX||c||(V=(0,ao.jsx)(W,Xe(Xe({component:"span"},k),{},{className:Vg(w.label,null===k||void 0===k?void 0:k.className),children:V}))),(0,ao.jsxs)(hN,Xe(Xe({className:Vg(w.root,a),ownerState:B,ref:t},f),{},{children:[o.cloneElement(g,G),Z?(0,ao.jsxs)("div",{children:[V,(0,ao.jsxs)(bN,{ownerState:B,"aria-hidden":!0,className:w.asterisk,children:["\u2009","*"]})]}):V]}))})),yN=fN;function vN(e){return yu("MuiSwitch",e)}const ZN=vu("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),GN=["className","color","edge","size","sx","slots","slotProps"],SN=mu("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat(qw(n.edge))],t["size".concat(qw(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(ZN.thumb)]:{width:16,height:16},["& .".concat(ZN.switchBase)]:{padding:4,["&.".concat(ZN.checked)]:{transform:"translateX(16px)"}}}}]}),BN=mu(Gk,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(ZN.input)]:t.input},"default"!==n.color&&t["color".concat(qw(n.color))]]}})(Ow((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(ZN.checked)]:{transform:"translateX(20px)"},["&.".concat(ZN.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(ZN.checked," + .").concat(ZN.track)]:{opacity:.5},["&.".concat(ZN.disabled," + .").concat(ZN.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(ZN.input)]:{left:"-100%",width:"300%"}}})),Ow((e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(sR(["light"])).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(ZN.checked)]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(ZN.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===t.palette.mode?aI(t.palette[n].main,.62):rI(t.palette[n].main,.55))}},["&.".concat(ZN.checked," + .").concat(ZN.track)]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}}))),wN=mu("span",{name:"MuiSwitch",slot:"Track"})(Ow((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}))),RN=mu("span",{name:"MuiSwitch",slot:"Thumb"})(Ow((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}))),WN=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiSwitch"}),{className:o,color:r="primary",edge:l=!1,size:a="medium",sx:i,slots:g={},slotProps:s={}}=n,c=Kg(n,GN),d=Xe(Xe({},n),{},{color:r,edge:l,size:a}),I=(e=>{const{classes:t,edge:n,size:o,color:r,checked:l,disabled:a}=e,i=Ng({root:["root",n&&"edge".concat(qw(n)),"size".concat(qw(o))],switchBase:["switchBase","color".concat(qw(r)),l&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},vN,t);return Xe(Xe({},t),i)})(d),u={slots:g,slotProps:s},[C,p]=SW("root",{className:Vg(I.root,o),elementType:SN,externalForwardedProps:u,ownerState:d,additionalProps:{sx:i}}),[A,m]=SW("thumb",{className:I.thumb,elementType:RN,externalForwardedProps:u,ownerState:d}),h=(0,ao.jsx)(A,Xe({},m)),[b,f]=SW("track",{className:I.track,elementType:wN,externalForwardedProps:u,ownerState:d});return(0,ao.jsxs)(C,Xe(Xe({},p),{},{children:[(0,ao.jsx)(BN,Xe(Xe({type:"checkbox",icon:h,checkedIcon:h,ref:t,ownerState:d},c),{},{classes:Xe(Xe({},I),{},{root:I.switchBase}),slots:Xe(Xe({},g.switchBase&&{root:g.switchBase}),g.input&&{input:g.input}),slotProps:Xe(Xe({},s.switchBase&&{root:"function"===typeof s.switchBase?s.switchBase(d):s.switchBase}),s.input&&{input:"function"===typeof s.input?s.input(d):s.input})})),(0,ao.jsx)(b,Xe({},f))]}))})),kN=WN;function VN(e){return yu("MuiButton",e)}const XN=vu("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const xN=o.createContext({});const JN=o.createContext(void 0),NN=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","id","loading","loadingIndicator","loadingPosition","size","startIcon","type","variant"],HN=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],FN=mu(zR,{shouldForwardProp:e=>Au(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(qw(n.color))],t["size".concat(qw(n.size))],t["".concat(n.variant,"Size").concat(qw(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],o="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return Xe(Xe({},t.typography.button),{},{minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},["&.".concat(XN.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},["&.".concat(XN.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},["&.".concat(XN.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",["&.".concat(XN.disabled)]:{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(sR()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.5)"):nI(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:o,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):nI(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(XN.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(XN.disabled)]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),["&.".concat(XN.loading)]:{color:"transparent"}}}]})}))),YN=mu("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t["iconSize".concat(qw(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...HN]}})),KN=mu("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t["iconSize".concat(qw(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...HN]}})),MN=mu("span",{name:"MuiButton",slot:"LoadingIndicator"})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),LN=mu("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),EN=o.forwardRef((function(e,t){const n=o.useContext(xN),r=o.useContext(JN),l=jw({props:Rp(n,e),name:"MuiButton"}),{children:a,color:i="primary",component:g="button",className:s,disabled:c=!1,disableElevation:d=!1,disableFocusRipple:I=!1,endIcon:u,focusVisibleClassName:C,fullWidth:p=!1,id:A,loading:m=null,loadingIndicator:h,loadingPosition:b="center",size:f="medium",startIcon:y,type:v,variant:Z="text"}=l,G=Kg(l,NN),S=gR(A),B=null!==h&&void 0!==h?h:(0,ao.jsx)(lW,{"aria-labelledby":S,color:"inherit",size:16}),w=Xe(Xe({},l),{},{color:i,component:g,disabled:c,disableElevation:d,disableFocusRipple:I,fullWidth:p,loading:m,loadingIndicator:B,loadingPosition:b,size:f,type:v,variant:Z}),R=(e=>{const{color:t,disableElevation:n,fullWidth:o,size:r,variant:l,loading:a,loadingPosition:i,classes:g}=e,s=Ng({root:["root",a&&"loading",l,"".concat(l).concat(qw(t)),"size".concat(qw(r)),"".concat(l,"Size").concat(qw(r)),"color".concat(qw(t)),n&&"disableElevation",o&&"fullWidth",a&&"loadingPosition".concat(qw(i))],startIcon:["icon","startIcon","iconSize".concat(qw(r))],endIcon:["icon","endIcon","iconSize".concat(qw(r))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},VN,g);return Xe(Xe({},g),s)})(w),W=(y||m&&"start"===b)&&(0,ao.jsx)(YN,{className:R.startIcon,ownerState:w,children:y||(0,ao.jsx)(LN,{className:R.loadingIconPlaceholder,ownerState:w})}),k=(u||m&&"end"===b)&&(0,ao.jsx)(KN,{className:R.endIcon,ownerState:w,children:u||(0,ao.jsx)(LN,{className:R.loadingIconPlaceholder,ownerState:w})}),V=r||"",X="boolean"===typeof m?(0,ao.jsx)("span",{className:R.loadingWrapper,style:{display:"contents"},children:m&&(0,ao.jsx)(MN,{className:R.loadingIndicator,ownerState:w,children:B})}):null;return(0,ao.jsxs)(FN,Xe(Xe({ownerState:w,className:Vg(n.className,R.root,s,V),component:g,disabled:c||m,focusRipple:!I,focusVisibleClassName:Vg(R.focusVisible,C),ref:t,type:v,id:m?S:A},G),{},{classes:R,children:[W,"end"!==b&&X,a,"end"===b&&X,k]}))})),zN=EN;function jN(e){return yu("MuiInputAdornment",e)}const DN=vu("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),TN=["children","className","component","disablePointerEvents","disableTypography","position","variant"];var PN;const UN=mu("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat(qw(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(Ow((e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(DN.positionStart,"&:not(.").concat(DN.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}}))),QN=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiInputAdornment"}),{children:r,className:l,component:a="div",disablePointerEvents:i=!1,disableTypography:g=!1,position:s,variant:c}=n,d=Kg(n,TN),I=hk()||{};let u=c;c&&I.variant,I&&!u&&(u=I.variant);const C=Xe(Xe({},n),{},{hiddenLabel:I.hiddenLabel,size:I.size,disablePointerEvents:i,position:s,variant:u}),p=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:o,position:r,size:l,variant:a}=e;return Ng({root:["root",n&&"disablePointerEvents",r&&"position".concat(qw(r)),a,o&&"hiddenLabel",l&&"size".concat(qw(l))]},jN,t)})(C);return(0,ao.jsx)(mk.Provider,{value:null,children:(0,ao.jsx)(UN,Xe(Xe({as:a,ownerState:C,className:Vg(p.root,l),ref:t},d),{},{children:"string"!==typeof r||g?(0,ao.jsxs)(o.Fragment,{children:["start"===s?PN||(PN=(0,ao.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):null,r]}):(0,ao.jsx)(rX,{color:"textSecondary",children:r})}))})})),ON=QN;function qN(e){return yu("MuiTooltip",e)}const _N=vu("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),$N=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const eH=mu(Uw,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(Ow((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInteractive},style:{pointerEvents:"auto"}},{props:e=>{let{open:t}=e;return!t},style:{pointerEvents:"none"}},{props:e=>{let{ownerState:t}=e;return t.arrow},style:{['&[data-popper-placement*="bottom"] .'.concat(_N.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(_N.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(_N.arrow)]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},['&[data-popper-placement*="left"] .'.concat(_N.arrow)]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!t.isRtl},style:{['&[data-popper-placement*="right"] .'.concat(_N.arrow)]:{left:0,marginLeft:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!!t.isRtl},style:{['&[data-popper-placement*="right"] .'.concat(_N.arrow)]:{right:0,marginRight:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!t.isRtl},style:{['&[data-popper-placement*="left"] .'.concat(_N.arrow)]:{right:0,marginRight:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!!t.isRtl},style:{['&[data-popper-placement*="left"] .'.concat(_N.arrow)]:{left:0,marginLeft:"-0.71em"}}}]}}))),tH=mu("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat(qw(n.placement.split("-")[0]))]]}})(Ow((e=>{let{theme:t}=e;return{backgroundColor:t.vars?t.vars.palette.Tooltip.bg:nI(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[".".concat(_N.popper,'[data-popper-placement*="left"] &')]:{transformOrigin:"right center"},[".".concat(_N.popper,'[data-popper-placement*="right"] &')]:{transformOrigin:"left center"},[".".concat(_N.popper,'[data-popper-placement*="top"] &')]:{transformOrigin:"center bottom",marginBottom:"14px"},[".".concat(_N.popper,'[data-popper-placement*="bottom"] &')]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:e=>{let{ownerState:t}=e;return t.arrow},style:{position:"relative",margin:0}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:"".concat((n=16/14,Math.round(1e5*n)/1e5),"em"),fontWeight:t.typography.fontWeightRegular}},{props:e=>{let{ownerState:t}=e;return!t.isRtl},style:{[".".concat(_N.popper,'[data-popper-placement*="left"] &')]:{marginRight:"14px"},[".".concat(_N.popper,'[data-popper-placement*="right"] &')]:{marginLeft:"14px"}}},{props:e=>{let{ownerState:t}=e;return!t.isRtl&&t.touch},style:{[".".concat(_N.popper,'[data-popper-placement*="left"] &')]:{marginRight:"24px"},[".".concat(_N.popper,'[data-popper-placement*="right"] &')]:{marginLeft:"24px"}}},{props:e=>{let{ownerState:t}=e;return!!t.isRtl},style:{[".".concat(_N.popper,'[data-popper-placement*="left"] &')]:{marginLeft:"14px"},[".".concat(_N.popper,'[data-popper-placement*="right"] &')]:{marginRight:"14px"}}},{props:e=>{let{ownerState:t}=e;return!!t.isRtl&&t.touch},style:{[".".concat(_N.popper,'[data-popper-placement*="left"] &')]:{marginLeft:"24px"},[".".concat(_N.popper,'[data-popper-placement*="right"] &')]:{marginRight:"24px"}}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{[".".concat(_N.popper,'[data-popper-placement*="top"] &')]:{marginBottom:"24px"}}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{[".".concat(_N.popper,'[data-popper-placement*="bottom"] &')]:{marginTop:"24px"}}}]};var n}))),nH=mu("span",{name:"MuiTooltip",slot:"Arrow"})(Ow((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:nI(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})));let oH=!1;const rH=new Bp;let lH={x:0,y:0};function aH(e,t){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),l=1;l<o;l++)r[l-1]=arguments[l];t&&t(n,...r),e(n,...r)}}const iH=o.forwardRef((function(e,t){var n,r,l;const a=jw({props:e,name:"MuiTooltip"}),{arrow:i=!1,children:g,classes:s,components:c={},componentsProps:d={},describeChild:I=!1,disableFocusListener:u=!1,disableHoverListener:C=!1,disableInteractive:p=!1,disableTouchListener:A=!1,enterDelay:m=100,enterNextDelay:h=0,enterTouchDelay:b=700,followCursor:f=!1,id:y,leaveDelay:v=0,leaveTouchDelay:Z=1500,onClose:G,onOpen:S,open:B,placement:w="bottom",PopperComponent:R,PopperProps:W={},slotProps:k={},slots:V={},title:X,TransitionComponent:x,TransitionProps:J}=a,N=Kg(a,$N),H=o.isValidElement(g)?g:(0,ao.jsx)("span",{children:g}),F=bZ(),Y=Ym(),[K,M]=o.useState(),[L,E]=o.useState(null),z=o.useRef(!1),j=p||f,D=wp(),T=wp(),P=wp(),U=wp(),[Q,O]=Ak({controlled:B,default:!1,name:"Tooltip",state:"open"});let q=Q;const _=gR(y),$=o.useRef(),ee=IR((()=>{void 0!==$.current&&(document.body.style.WebkitUserSelect=$.current,$.current=void 0),U.clear()}));o.useEffect((()=>ee),[ee]);const te=e=>{rH.clear(),oH=!0,O(!0),S&&!q&&S(e)},ne=IR((e=>{rH.start(800+v,(()=>{oH=!1})),O(!1),G&&q&&G(e),D.start(F.transitions.duration.shortest,(()=>{z.current=!1}))})),oe=e=>{z.current&&"touchstart"!==e.type||(K&&K.removeAttribute("title"),T.clear(),P.clear(),m||oH&&h?T.start(oH?h:m,(()=>{te(e)})):te(e))},re=e=>{T.clear(),P.start(v,(()=>{ne(e)}))},[,le]=o.useState(!1),ae=e=>{cR(e.target)||(le(!1),re(e))},ie=e=>{K||M(e.currentTarget),cR(e.target)&&(le(!0),oe(e))},ge=e=>{z.current=!0;const t=H.props;t.onTouchStart&&t.onTouchStart(e)},se=e=>{ge(e),P.clear(),D.clear(),ee(),$.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",U.start(b,(()=>{document.body.style.WebkitUserSelect=$.current,oe(e)}))},ce=e=>{H.props.onTouchEnd&&H.props.onTouchEnd(e),ee(),P.start(Z,(()=>{ne(e)}))};o.useEffect((()=>{if(q)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"===e.key&&ne(e)}}),[ne,q]);const de=dR(Vw(H),M,t);X||0===X||(q=!1);const Ie=o.useRef(),ue={},Ce="string"===typeof X;I?(ue.title=q||!Ce||C?null:X,ue["aria-describedby"]=q?_:null):(ue["aria-label"]=Ce?X:null,ue["aria-labelledby"]=q&&!Ce?_:null);const pe=Xe(Xe(Xe(Xe({},ue),N),H.props),{},{className:Vg(N.className,H.props.className),onTouchStart:ge,ref:de},f?{onMouseMove:e=>{const t=H.props;t.onMouseMove&&t.onMouseMove(e),lH={x:e.clientX,y:e.clientY},Ie.current&&Ie.current.update()}}:{});const Ae={};A||(pe.onTouchStart=se,pe.onTouchEnd=ce),C||(pe.onMouseOver=aH(oe,pe.onMouseOver),pe.onMouseLeave=aH(re,pe.onMouseLeave),j||(Ae.onMouseOver=oe,Ae.onMouseLeave=re)),u||(pe.onFocus=aH(ie,pe.onFocus),pe.onBlur=aH(ae,pe.onBlur),j||(Ae.onFocus=ie,Ae.onBlur=ae));const me=Xe(Xe({},a),{},{isRtl:Y,arrow:i,disableInteractive:j,placement:w,PopperComponentProp:R,touch:z.current}),he="function"===typeof k.popper?k.popper(me):k.popper,be=o.useMemo((()=>{var e,t;let n=[{name:"arrow",enabled:Boolean(L),options:{element:L,padding:4}}];return null!==(e=W.popperOptions)&&void 0!==e&&e.modifiers&&(n=n.concat(W.popperOptions.modifiers)),null!==he&&void 0!==he&&null!==(t=he.popperOptions)&&void 0!==t&&t.modifiers&&(n=n.concat(he.popperOptions.modifiers)),Xe(Xe(Xe({},W.popperOptions),null===he||void 0===he?void 0:he.popperOptions),{},{modifiers:n})}),[L,W.popperOptions,null===he||void 0===he?void 0:he.popperOptions]),fe=(e=>{const{classes:t,disableInteractive:n,arrow:o,touch:r,placement:l}=e;return Ng({popper:["popper",!n&&"popperInteractive",o&&"popperArrow"],tooltip:["tooltip",o&&"tooltipArrow",r&&"touch","tooltipPlacement".concat(qw(l.split("-")[0]))],arrow:["arrow"]},qN,t)})(me),ye="function"===typeof k.transition?k.transition(me):k.transition,ve={slots:Xe({popper:c.Popper,transition:null!==(n=c.Transition)&&void 0!==n?n:x,tooltip:c.Tooltip,arrow:c.Arrow},V),slotProps:{arrow:null!==(r=k.arrow)&&void 0!==r?r:d.arrow,popper:Xe(Xe({},W),null!==he&&void 0!==he?he:d.popper),tooltip:null!==(l=k.tooltip)&&void 0!==l?l:d.tooltip,transition:Xe(Xe({},J),null!==ye&&void 0!==ye?ye:d.transition)}},[Ze,Ge]=SW("popper",{elementType:eH,externalForwardedProps:ve,ownerState:me,className:Vg(fe.popper,null===W||void 0===W?void 0:W.className)}),[Se,Be]=SW("transition",{elementType:Ex,externalForwardedProps:ve,ownerState:me}),[we,Re]=SW("tooltip",{elementType:tH,className:fe.tooltip,externalForwardedProps:ve,ownerState:me}),[We,ke]=SW("arrow",{elementType:nH,className:fe.arrow,externalForwardedProps:ve,ownerState:me,ref:E});return(0,ao.jsxs)(o.Fragment,{children:[o.cloneElement(H,pe),(0,ao.jsx)(Ze,Xe(Xe(Xe({as:null!==R&&void 0!==R?R:Uw,placement:w,anchorEl:f?{getBoundingClientRect:()=>({top:lH.y,left:lH.x,right:lH.x,bottom:lH.y,width:0,height:0})}:K,popperRef:Ie,open:!!K&&q,id:_,transition:!0},Ae),Ge),{},{popperOptions:be,children:e=>{let{TransitionProps:t}=e;return(0,ao.jsx)(Se,Xe(Xe(Xe({timeout:F.transitions.duration.shorter},t),Be),{},{children:(0,ao.jsxs)(we,Xe(Xe({},Re),{},{children:[X,i?(0,ao.jsx)(We,Xe({},ke)):null]}))}))}}))]})})),gH=iH;const sH=o.createContext();const cH=o.createContext();function dH(e){return yu("MuiTableCell",e)}const IH=vu("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),uH=["align","className","component","padding","scope","size","sortDirection","variant"],CH=mu("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(qw(n.size))],"normal"!==n.padding&&t["padding".concat(qw(n.padding))],"inherit"!==n.align&&t["align".concat(qw(n.align))],n.stickyHeader&&t.stickyHeader]}})(Ow((e=>{let{theme:t}=e;return Xe(Xe({},t.typography.body2),{},{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?aI(nI(t.palette.divider,1),.88):rI(nI(t.palette.divider,1),.68)),textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",["&.".concat(IH.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]})}))),pH=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTableCell"}),{align:r="inherit",className:l,component:a,padding:i,scope:g,size:s,sortDirection:c,variant:d}=n,I=Kg(n,uH),u=o.useContext(sH),C=o.useContext(cH),p=C&&"head"===C.variant;let A;A=a||(p?"th":"td");let m=g;"td"===A?m=void 0:!m&&p&&(m="col");const h=d||C&&C.variant,b=Xe(Xe({},n),{},{align:r,component:A,padding:i||(u&&u.padding?u.padding:"normal"),size:s||(u&&u.size?u.size:"medium"),sortDirection:c,stickyHeader:"head"===h&&u&&u.stickyHeader,variant:h}),f=(e=>{const{classes:t,variant:n,align:o,padding:r,size:l,stickyHeader:a}=e;return Ng({root:["root",n,a&&"stickyHeader","inherit"!==o&&"align".concat(qw(o)),"normal"!==r&&"padding".concat(qw(r)),"size".concat(qw(l))]},dH,t)})(b);let y=null;return c&&(y="asc"===c?"ascending":"descending"),(0,ao.jsx)(CH,Xe({as:A,ref:t,className:Vg(f.root,l),"aria-sort":y,scope:m,ownerState:b},I))})),AH=pH;function mH(e){return yu("MuiToolbar",e)}vu("MuiToolbar",["root","gutters","regular","dense"]);const hH=["className","component","disableGutters","variant"],bH=mu("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(Ow((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}}))),fH=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiToolbar"}),{className:o,component:r="div",disableGutters:l=!1,variant:a="regular"}=n,i=Kg(n,hH),g=Xe(Xe({},n),{},{component:r,disableGutters:l,variant:a}),s=(e=>{const{classes:t,disableGutters:n,variant:o}=e;return Ng({root:["root",!n&&"gutters",o]},mH,t)})(g);return(0,ao.jsx)(bH,Xe({as:r,className:Vg(s.root,o),ref:t,ownerState:g},i))})),yH=fH,vH=hW((0,ao.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),ZH=hW((0,ao.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"})),GH=hW((0,ao.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),SH=hW((0,ao.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}));function BH(e){return yu("MuiTablePaginationActions",e)}vu("MuiTablePaginationActions",["root"]);const wH=["backIconButtonProps","className","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],RH=mu("div",{name:"MuiTablePaginationActions",slot:"Root"})({}),WH=o.forwardRef((function(e,t){var n,o,r,l,a,i,g,s;const c=jw({props:e,name:"MuiTablePaginationActions"}),{backIconButtonProps:d,className:I,count:u,disabled:C=!1,getItemAriaLabel:p,nextIconButtonProps:A,onPageChange:m,page:h,rowsPerPage:b,showFirstButton:f,showLastButton:y,slots:v={},slotProps:Z={}}=c,G=Kg(c,wH),S=Ym(),B=(e=>{const{classes:t}=e;return Ng({root:["root"]},BH,t)})(c),w=null!==(n=v.firstButton)&&void 0!==n?n:IW,R=null!==(o=v.lastButton)&&void 0!==o?o:IW,W=null!==(r=v.nextButton)&&void 0!==r?r:IW,k=null!==(l=v.previousButton)&&void 0!==l?l:IW,V=null!==(a=v.firstButtonIcon)&&void 0!==a?a:SH,X=null!==(i=v.lastButtonIcon)&&void 0!==i?i:GH,x=null!==(g=v.nextButtonIcon)&&void 0!==g?g:ZH,J=null!==(s=v.previousButtonIcon)&&void 0!==s?s:vH,N=S?R:w,H=S?W:k,F=S?k:W,Y=S?w:R,K=S?Z.lastButton:Z.firstButton,M=S?Z.nextButton:Z.previousButton,L=S?Z.previousButton:Z.nextButton,E=S?Z.firstButton:Z.lastButton;return(0,ao.jsxs)(RH,Xe(Xe({ref:t,className:Vg(B.root,I)},G),{},{children:[f&&(0,ao.jsx)(N,Xe(Xe({onClick:e=>{m(e,0)},disabled:C||0===h,"aria-label":p("first",h),title:p("first",h)},K),{},{children:S?(0,ao.jsx)(X,Xe({},Z.lastButtonIcon)):(0,ao.jsx)(V,Xe({},Z.firstButtonIcon))})),(0,ao.jsx)(H,Xe(Xe({onClick:e=>{m(e,h-1)},disabled:C||0===h,color:"inherit","aria-label":p("previous",h),title:p("previous",h)},null!==M&&void 0!==M?M:d),{},{children:S?(0,ao.jsx)(x,Xe({},Z.nextButtonIcon)):(0,ao.jsx)(J,Xe({},Z.previousButtonIcon))})),(0,ao.jsx)(F,Xe(Xe({onClick:e=>{m(e,h+1)},disabled:C||-1!==u&&h>=Math.ceil(u/b)-1,color:"inherit","aria-label":p("next",h),title:p("next",h)},null!==L&&void 0!==L?L:A),{},{children:S?(0,ao.jsx)(J,Xe({},Z.previousButtonIcon)):(0,ao.jsx)(x,Xe({},Z.nextButtonIcon))})),y&&(0,ao.jsx)(Y,Xe(Xe({onClick:e=>{m(e,Math.max(0,Math.ceil(u/b)-1))},disabled:C||h>=Math.ceil(u/b)-1,"aria-label":p("last",h),title:p("last",h)},E),{},{children:S?(0,ao.jsx)(V,Xe({},Z.firstButtonIcon)):(0,ao.jsx)(X,Xe({},Z.lastButtonIcon))}))]}))})),kH=WH;function VH(e){return yu("MuiTablePagination",e)}const XH=vu("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),xH=["ActionsComponent","backIconButtonProps","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"];var JH;const NH=mu(AH,{name:"MuiTablePagination",slot:"Root"})(Ow((e=>{let{theme:t}=e;return{overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}}}))),HH=mu(yH,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>Xe({["& .".concat(XH.actions)]:t.actions},t.toolbar)})(Ow((e=>{let{theme:t}=e;return{minHeight:52,paddingRight:2,["".concat(t.breakpoints.up("xs")," and (orientation: landscape)")]:{minHeight:52},[t.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},["& .".concat(XH.actions)]:{flexShrink:0,marginLeft:20}}}))),FH=mu("div",{name:"MuiTablePagination",slot:"Spacer"})({flex:"1 1 100%"}),YH=mu("p",{name:"MuiTablePagination",slot:"SelectLabel"})(Ow((e=>{let{theme:t}=e;return Xe(Xe({},t.typography.body2),{},{flexShrink:0})}))),KH=mu(gN,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>Xe(Xe({["& .".concat(XH.selectIcon)]:t.selectIcon,["& .".concat(XH.select)]:t.select},t.input),t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,["& .".concat(XH.select)]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),MH=mu(VX,{name:"MuiTablePagination",slot:"MenuItem"})({}),LH=mu("p",{name:"MuiTablePagination",slot:"DisplayedRows"})(Ow((e=>{let{theme:t}=e;return Xe(Xe({},t.typography.body2),{},{flexShrink:0})})));function EH(e){let{from:t,to:n,count:o}=e;return"".concat(t,"\u2013").concat(n," of ").concat(-1!==o?o:"more than ".concat(n))}function zH(e){return"Go to ".concat(e," page")}const jH=o.forwardRef((function(e,t){var n;const r=jw({props:e,name:"MuiTablePagination"}),{ActionsComponent:l=kH,backIconButtonProps:a,colSpan:i,component:g=AH,count:s,disabled:c=!1,getItemAriaLabel:d=zH,labelDisplayedRows:I=EH,labelRowsPerPage:u="Rows per page:",nextIconButtonProps:C,onPageChange:p,onRowsPerPageChange:A,page:m,rowsPerPage:h,rowsPerPageOptions:b=[10,25,50,100],SelectProps:f={},showFirstButton:y=!1,showLastButton:v=!1,slotProps:Z={},slots:G={}}=r,S=Kg(r,xH),B=r,w=(e=>{const{classes:t}=e;return Ng({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},VH,t)})(B),R=null!==(n=null===Z||void 0===Z?void 0:Z.select)&&void 0!==n?n:f,W=R.native?"option":MH;let k;g!==AH&&"td"!==g||(k=i||1e3);const V=gR(R.id),X=gR(R.labelId),x={slots:G,slotProps:Z},[J,N]=SW("root",{ref:t,className:w.root,elementType:NH,externalForwardedProps:Xe(Xe({},x),{},{component:g},S),ownerState:B,additionalProps:{colSpan:k}}),[H,F]=SW("toolbar",{className:w.toolbar,elementType:HH,externalForwardedProps:x,ownerState:B}),[Y,K]=SW("spacer",{className:w.spacer,elementType:FH,externalForwardedProps:x,ownerState:B}),[M,L]=SW("selectLabel",{className:w.selectLabel,elementType:YH,externalForwardedProps:x,ownerState:B,additionalProps:{id:X}}),[E,z]=SW("select",{className:w.select,elementType:KH,externalForwardedProps:x,ownerState:B}),[j,D]=SW("menuItem",{className:w.menuItem,elementType:W,externalForwardedProps:x,ownerState:B}),[T,P]=SW("displayedRows",{className:w.displayedRows,elementType:LH,externalForwardedProps:x,ownerState:B});return(0,ao.jsx)(J,Xe(Xe({},N),{},{children:(0,ao.jsxs)(H,Xe(Xe({},F),{},{children:[(0,ao.jsx)(Y,Xe({},K)),b.length>1&&(0,ao.jsx)(M,Xe(Xe({},L),{},{children:u})),b.length>1&&(0,ao.jsx)(E,Xe(Xe(Xe(Xe({variant:"standard"},!R.variant&&{input:JH||(JH=(0,ao.jsx)(AV,{}))}),{},{value:h,onChange:A,id:V,labelId:X},R),{},{classes:Xe(Xe({},R.classes),{},{root:Vg(w.input,w.selectRoot,(R.classes||{}).root),select:Vg(w.select,(R.classes||{}).select),icon:Vg(w.selectIcon,(R.classes||{}).icon)}),disabled:c},z),{},{children:b.map((e=>(0,o.createElement)(j,Xe(Xe({},D),{},{key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)))})),(0,ao.jsx)(T,Xe(Xe({},P),{},{children:I({from:0===s?0:m*h+1,to:-1===s?(m+1)*h:-1===h?s:Math.min(s,(m+1)*h),count:-1===s?-1:s,page:m})})),(0,ao.jsx)(l,{className:w.actions,backIconButtonProps:a,count:s,nextIconButtonProps:C,onPageChange:p,page:m,rowsPerPage:h,showFirstButton:y,showLastButton:v,slotProps:Z.actions,slots:G.actions,getItemAriaLabel:d,disabled:c})]}))}))})),DH=jH;function TH(e){return e.substring(2).toLowerCase()}function PH(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:l,touchEvent:a="onTouchEnd"}=e,i=o.useRef(!1),g=o.useRef(null),s=o.useRef(!1),c=o.useRef(!1);o.useEffect((()=>(setTimeout((()=>{s.current=!0}),0),()=>{s.current=!1})),[]);const d=Xg(Vw(t),g),I=Cp((e=>{const t=c.current;c.current=!1;const o=Sy(g.current);if(!s.current||!g.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,o))return;if(i.current)return void(i.current=!1);let r;r=e.composedPath?e.composedPath().includes(g.current):!o.documentElement.contains(e.target)||g.current.contains(e.target),r||!n&&t||l(e)})),u=e=>n=>{c.current=!0;const o=t.props[e];o&&o(n)},C={ref:d};return!1!==a&&(C[a]=u(a)),o.useEffect((()=>{if(!1!==a){const e=TH(a),t=Sy(g.current),n=()=>{i.current=!0};return t.addEventListener(e,I),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,I),t.removeEventListener("touchmove",n)}}}),[I,a]),!1!==r&&(C[r]=u(r)),o.useEffect((()=>{if(!1!==r){const e=TH(r),t=Sy(g.current);return t.addEventListener(e,I),()=>{t.removeEventListener(e,I)}}}),[I,r]),o.cloneElement(t,C)}function UH(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function QH(e){return parseFloat(e)}function OH(e){return yu("MuiSkeleton",e)}vu("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const qH=["animation","className","component","height","style","variant","width"];var _H,$H,eF,tF;const nF=TG(_H||(_H=EG(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]))),oF=TG($H||($H=EG(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"]))),rF="string"!==typeof nF?DG(eF||(eF=EG(["\n        animation: "," 2s ease-in-out 0.5s infinite;\n      "])),nF):null,lF="string"!==typeof oF?DG(tF||(tF=EG(["\n        &::after {\n          animation: "," 2s linear 0.5s infinite;\n        }\n      "])),oF):null,aF=mu("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(Ow((e=>{let{theme:t}=e;const n=UH(t.shape.borderRadius)||"px",o=QH(t.shape.borderRadius);return{display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:nI(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(o).concat(n,"/").concat(Math.round(o/.6*10)/10).concat(n),"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:e=>{let{ownerState:t}=e;return t.hasChildren},style:{"& > *":{visibility:"hidden"}}},{props:e=>{let{ownerState:t}=e;return t.hasChildren&&!t.width},style:{maxWidth:"fit-content"}},{props:e=>{let{ownerState:t}=e;return t.hasChildren&&!t.height},style:{height:"auto"}},{props:{animation:"pulse"},style:rF||{animation:"".concat(nF," 2s ease-in-out 0.5s infinite")}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:"linear-gradient(\n                90deg,\n                transparent,\n                ".concat((t.vars||t).palette.action.hover,",\n                transparent\n              )"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:lF||{"&::after":{animation:"".concat(oF," 2s linear 0.5s infinite")}}}]}}))),iF=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiSkeleton"}),{animation:o="pulse",className:r,component:l="span",height:a,style:i,variant:g="text",width:s}=n,c=Kg(n,qH),d=Xe(Xe({},n),{},{animation:o,component:l,variant:g,hasChildren:Boolean(c.children)}),I=(e=>{const{classes:t,variant:n,animation:o,hasChildren:r,width:l,height:a}=e;return Ng({root:["root",n,o,r&&"withChildren",r&&!l&&"fitContent",r&&!a&&"heightAuto"]},OH,t)})(d);return(0,ao.jsx)(aF,Xe(Xe({as:l,ref:t,className:Vg(I.root,r),ownerState:d},c),{},{style:Xe({width:s,height:a},i)}))})),gF=iF,sF=hW,cF=sF((0,ao.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),dF=sF((0,ao.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),IF=sF((0,ao.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),uF=sF((0,ao.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),CF=sF((0,ao.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),pF=sF((0,ao.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),AF=sF((0,ao.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),mF=(sF((0,ao.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),sF((0,ao.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),sF((0,ao.jsx)("path",{d:"M14.67 5v14H9.33V5zm1 14H21V5h-5.33zm-7.34 0V5H3v14z"}),"ColumnIcon")),hF=sF((0,ao.jsx)("rect",{width:"1",height:"24",x:"11.5",rx:"0.5"}),"Separator"),bF=sF((0,ao.jsx)("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),fF=sF((0,ao.jsx)("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),yF=sF((0,ao.jsx)("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),vF=sF((0,ao.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),ZF=sF((0,ao.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),GF=sF((0,ao.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),SF=sF((0,ao.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),BF=sF((0,ao.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),wF=sF((0,ao.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),RF=sF((0,ao.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),WF=sF((0,ao.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),kF=sF((0,ao.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),VF=sF((0,ao.jsx)("g",{children:(0,ao.jsx)("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),XF=sF((0,ao.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Clear"),xF=(sF((0,ao.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),sF((0,ao.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")),JF=sF((0,ao.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),NF=["id","label","labelId","material","disabled","slotProps","onChange","onKeyDown","onOpen","onClose","size","style","fullWidth"],HF=["onRowsPerPageChange","material","disabled"],FF=["material"],YF=["autoFocus","label","fullWidth","slotProps","className","material"],KF=["material"],MF=["material"],LF=["material"],EF=["material"],zF=["material"],jF=["material"],DF=["material"],TF=["material"],PF=["material","label","className"],UF=["material"],QF=["inert","iconStart","iconEnd","children","material"],OF=["slotProps","material"],qF=["id","multiple","freeSolo","options","getOptionLabel","isOptionEqualToValue","value","onChange","label","placeholder","slotProps","material"],_F=["key"],$F=["inputProps","InputProps","InputLabelProps"],eY=["slotProps","material"],tY=["ref","open","children","className","clickAwayTouchEvent","clickAwayMouseEvent","flip","focusTrap","onExited","onClickAway","onDidShow","onDidHide","id","target","transition","placement","material"],nY=["native"],oY=mu(ON)((e=>{let{theme:t}=e;return{["&.".concat(DN.positionEnd," .").concat(iW.sizeSmall)]:{marginRight:t.spacing(-.75)}}})),rY=mu(yN,{shouldForwardProp:e=>"fullWidth"!==e})((e=>{let{theme:t}=e;return{gap:t.spacing(.5),margin:0,overflow:"hidden",["& .".concat(AN.label)]:{fontSize:t.typography.pxToRem(14),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},variants:[{props:{fullWidth:!0},style:{width:"100%"}}]}})),lY=mu(Fk,{shouldForwardProp:e=>"density"!==e})((e=>{let{theme:t}=e;return{variants:[{props:{density:"compact"},style:{padding:t.spacing(.5)}}]}})),aY=mu(cX)({["& .".concat(aX.primary)]:{overflowX:"clip",textOverflow:"ellipsis",maxWidth:"300px"}}),iY=Rg((function(e,t){const{id:n,label:o,labelId:r,material:l,disabled:a,slotProps:i,onChange:g,onKeyDown:s,onOpen:c,onClose:d,size:I,style:u,fullWidth:C}=e,p=Wg(e,NF),A={PaperProps:{onKeyDown:s}};return d&&(A.onClose=d),(0,ao.jsxs)(Ax,{size:I,fullWidth:C,style:u,disabled:a,ref:t,children:[(0,ao.jsx)(sx,{id:r,htmlFor:n,shrink:!0,variant:"outlined",children:o}),(0,ao.jsx)(gN,Sg({id:n,labelId:r,label:o,displayEmpty:!0,onChange:g},p,{variant:"outlined",notched:!0,inputProps:null===i||void 0===i?void 0:i.htmlInput,onOpen:c,MenuProps:A,size:I},l))]})}));const gY=mu(DH)((e=>{let{theme:t}=e;return{["& .".concat(XH.selectLabel)]:{display:"none",[t.breakpoints.up("sm")]:{display:"block"}},["& .".concat(XH.input)]:{display:"none",[t.breakpoints.up("sm")]:{display:"inline-flex"}}}})),sY=Rg((function(e,t){const{onRowsPerPageChange:n,material:r,disabled:l}=e,a=Wg(e,HF),i=o.useMemo((()=>{if(l)return{backIconButtonProps:{disabled:!0},nextIconButtonProps:{disabled:!0}}}),[l]),g=UC(),s=Qu(),{estimatedRowCount:c}=s;return(0,ao.jsx)(gY,Sg({component:"div",onRowsPerPageChange:Cp((e=>{null===n||void 0===n||n(Number(e.target.value))})),labelRowsPerPage:g.current.getLocaleText("paginationRowsPerPage"),labelDisplayedRows:e=>g.current.getLocaleText("paginationDisplayedRows")(Sg({},e,{estimated:c})),getItemAriaLabel:g.current.getLocaleText("paginationItemAriaLabel")},i,a,r,{ref:t}))}));const cY=Rg((function(e,t){const{material:n}=e,o=Wg(e,FF);return(0,ao.jsx)(pk,Sg({},o,n,{ref:t}))}));const dY=Rg((function(e,t){const{autoFocus:n,label:r,fullWidth:l,slotProps:a,className:i,material:g}=e,s=Wg(e,YF),c=o.useRef(null),d=Xg(c,t),I=o.useRef(null);return o.useEffect((()=>{if(n){var e;const t=null===(e=c.current)||void 0===e?void 0:e.querySelector("input");null===t||void 0===t||t.focus({preventScroll:!0})}else!1===n&&I.current&&I.current.stop({})}),[n]),r?(0,ao.jsx)(rY,{className:i,control:(0,ao.jsx)(lY,Sg({},s,g,{inputProps:null===a||void 0===a?void 0:a.htmlInput,ref:d,touchRippleRef:I})),label:r,fullWidth:l}):(0,ao.jsx)(lY,Sg({},s,g,{className:Vg(i,null===g||void 0===g?void 0:g.className),inputProps:null===a||void 0===a?void 0:a.htmlInput,ref:d,touchRippleRef:I}))}));const IY=Rg((function(e,t){const{material:n}=e,o=Wg(e,KF);return(0,ao.jsx)(lW,Sg({},o,n,{ref:t}))}));const uY=Rg((function(e,t){const{material:n}=e,o=Wg(e,MF);return(0,ao.jsx)(jk,Sg({},o,n,{ref:t}))}));const CY=Rg((function(e,t){const{material:n}=e,o=Wg(e,LF);return(0,ao.jsx)(LV,Sg({},o,n,{ref:t}))}));const pY=Rg((function(e,t){const{material:n}=e,o=Wg(e,EF);return(0,ao.jsx)(zN,Sg({},o,n,{ref:t}))}));const AY=Rg((function(e,t){const{material:n}=e,o=Wg(e,zF);return(0,ao.jsx)(VW,Sg({},o,n,{ref:t}))}));const mY=Rg((function(e,t){const{material:n}=e,o=Wg(e,jF);return(0,ao.jsx)(IW,Sg({},o,n,{ref:t}))}));const hY=Rg((function(e,t){const{material:n}=e,o=Wg(e,DF);return(0,ao.jsx)(gH,Sg({},o,n,{ref:t}))}));const bY=Rg((function(e,t){const{material:n}=e,o=Wg(e,TF);return(0,ao.jsx)(gF,Sg({},o,n,{ref:t}))}));const fY=Rg((function(e,t){const{material:n,label:o,className:r}=e,l=Wg(e,PF);return o?(0,ao.jsx)(rY,{className:r,control:(0,ao.jsx)(kN,Sg({},l,n,{ref:t})),label:o}):(0,ao.jsx)(kN,Sg({},l,n,{className:r,ref:t}))}));const yY=Rg((function(e,t){const{material:n}=e,o=Wg(e,UF);return(0,ao.jsx)(SX,Sg({},o,n,{ref:t}))}));function vY(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return;const{slotProps:n,material:o}=e,r=Wg(e,eY);t&&(r.startAdornment&&(r.startAdornment=(0,ao.jsx)(oY,{position:"start",children:r.startAdornment})),r.endAdornment&&(r.endAdornment=(0,ao.jsx)(oY,{position:"end",children:r.endAdornment})));for(const l in o)Object.hasOwn(o,l)&&(r[l]=o[l]);return null!==n&&void 0!==n&&n.htmlInput&&(r.inputProps?r.inputProps=Sg({},r.inputProps,null===n||void 0===n?void 0:n.htmlInput):r.inputProps=null===n||void 0===n?void 0:n.htmlInput),r}const ZY={"bottom-start":"top left","bottom-end":"top right"};function GY(e,t){return function(e,t){if(void 0===e.focusTrap)return t;return(0,ao.jsx)(fV,{open:!0,disableEnforceFocus:!0,disableAutoFocus:!0,children:(0,ao.jsx)("div",{tabIndex:-1,children:t})})}(e,function(e,t){if(void 0===e.onClickAway)return t;return(0,ao.jsx)(PH,{onClickAway:e.onClickAway,touchEvent:e.clickAwayTouchEvent,mouseEvent:e.clickAwayMouseEvent,children:t})}(e,t))}const SY={baseAutocomplete:function(e){const t=Qu(),{id:n,multiple:o,freeSolo:r,options:l,getOptionLabel:a,isOptionEqualToValue:i,value:g,onChange:s,label:c,placeholder:d,slotProps:I,material:u}=e,C=Wg(e,qF);return(0,ao.jsx)(ak,Sg({id:n,multiple:o,freeSolo:r,options:l,getOptionLabel:a,isOptionEqualToValue:i,value:g,onChange:s,renderTags:(e,t)=>e.map(((e,n)=>{const o=t({index:n}),{key:r}=o,l=Wg(o,_F);return(0,ao.jsx)(VW,Sg({variant:"outlined",size:"small",label:"string"===typeof e?e:null===a||void 0===a?void 0:a(e)},l),r)})),renderInput:e=>{var n;const{inputProps:o,InputProps:r,InputLabelProps:l}=e,a=Wg(e,$F);return(0,ao.jsx)(CN,Sg({},a,{label:c,placeholder:d,inputProps:o,InputProps:vY(r,!1),InputLabelProps:Sg({shrink:!0},l)},null===I||void 0===I?void 0:I.textField,null===(n=t.slotProps)||void 0===n?void 0:n.baseTextField))}},C,u))},baseBadge:cY,baseCheckbox:dY,baseChip:AY,baseCircularProgress:IY,baseDivider:uY,baseInput:function(e){return(0,ao.jsx)(AV,Sg({},vY(e)))},baseLinearProgress:CY,baseMenuList:yY,baseMenuItem:function(e){const{inert:t,iconStart:n,iconEnd:r,children:l,material:a}=e,i=Wg(e,QF);return t&&(i.disableRipple=!0),o.createElement(VX,Sg({},i,a),[n&&(0,ao.jsx)(UV,{children:n},"1"),(0,ao.jsx)(aY,{children:l},"2"),r&&(0,ao.jsx)(UV,{children:r},"3")])},baseTextField:function(e){const{slotProps:t,material:n}=e,o=Wg(e,OF);return(0,ao.jsx)(CN,Sg({variant:"outlined"},o,n,{inputProps:null===t||void 0===t?void 0:t.htmlInput,InputProps:vY(null===t||void 0===t?void 0:t.input),InputLabelProps:Sg({shrink:!0},null===t||void 0===t?void 0:t.inputLabel)}))},baseButton:pY,baseIconButton:mY,baseTooltip:hY,basePagination:sY,basePopper:function(e){const{open:t,children:n,className:r,flip:l,onExited:a,onDidShow:i,onDidHide:g,id:s,target:c,transition:d,placement:I,material:u}=e,C=Wg(e,tY),p=o.useMemo((()=>{const e=[{name:"preventOverflow",options:{padding:8}}];return l&&e.push({name:"flip",enabled:!0,options:{rootBoundary:"document"}}),(i||g)&&e.push({name:"isPlaced",enabled:!0,phase:"main",fn:()=>{null===i||void 0===i||i()},effect:()=>()=>{null===g||void 0===g||g()}}),e}),[l,i,g]);let A;if(d){const t=e=>t=>{e&&e(),a&&a(t)};A=o=>{var r;return GY(e,(0,ao.jsx)(Ex,Sg({},o.TransitionProps,{style:{transformOrigin:ZY[o.placement]},onExited:t(null===(r=o.TransitionProps)||void 0===r?void 0:r.onExited),children:(0,ao.jsx)(iR,{children:n})})))}}else A=GY(e,n);return(0,ao.jsx)(Uw,Sg({id:s,className:r,open:t,anchorEl:c,transition:d,placement:I,modifiers:p},C,u,{children:A}))},baseSelect:iY,baseSelectOption:function(e){let{native:t}=e,n=Wg(e,nY);return t?(0,ao.jsx)("option",Sg({},n)):(0,ao.jsx)(VX,Sg({},n))},baseSkeleton:bY,baseSwitch:fY},BY=Sg({},SY,{booleanCellTrueIcon:RF,booleanCellFalseIcon:ZF,columnMenuIcon:vF,openFilterButtonIcon:CF,filterPanelDeleteIcon:ZF,columnFilteredIcon:pF,columnSelectorIcon:mF,columnSortedAscendingIcon:cF,columnSortedDescendingIcon:dF,columnResizeIcon:hF,densityCompactIcon:bF,densityStandardIcon:fF,densityComfortableIcon:yF,exportIcon:JF,moreActionsIcon:WF,treeDataCollapseIcon:uF,treeDataExpandIcon:IF,groupingCriteriaCollapseIcon:uF,groupingCriteriaExpandIcon:IF,detailPanelExpandIcon:GF,detailPanelCollapseIcon:SF,rowReorderIcon:wF,quickFilterIcon:AF,quickFilterClearIcon:XF,columnMenuHideIcon:kF,columnMenuSortAscendingIcon:cF,columnMenuSortDescendingIcon:dF,columnMenuUnsortIcon:null,columnMenuFilterIcon:pF,columnMenuManageColumnsIcon:VF,columnMenuClearIcon:XF,loadIcon:BF,filterPanelAddIcon:GF,filterPanelRemoveAllIcon:xF,columnReorderIcon:wF,menuItemCheckIcon:RF}),wY=ep("div")({position:"sticky",zIndex:40,bottom:"calc(var(--DataGrid-hasScrollX) * var(--DataGrid-scrollbarSize))"});function RY(e,t,n){return"function"===typeof t?t(n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}):t?(t.props.className&&(n.className=function(e,t){if(!e||!t)return e||t;return"".concat(e," ").concat(t)}(t.props.className,n.className)),(t.props.style||n.style)&&(n.style=Sg({},n.style,t.props.style)),(t.props.sx||n.sx)&&(n.sx=function(e,t){if(!e||!t)return e||t;return(Array.isArray(e)?e:[e]).concat(Array.isArray(t)?t:[t])}(n.sx,t.props.sx)),o.cloneElement(t,n)):o.createElement(e,n)}const WY=o.createContext(void 0);function kY(e,t){if(!e.ref.current||!t.ref.current)return 0;const n=e.ref.current.compareDocumentPosition(t.ref.current);return n?n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0:0}const VY=["render","className"],XY=ep("div",{name:"MuiDataGrid",slot:"Toolbar"})({flex:0,display:"flex",alignItems:"center",justifyContent:"end",gap:Ru.spacing(.25),padding:Ru.spacing(.75),minHeight:52,boxSizing:"border-box",borderBottom:"1px solid ".concat(Ru.colors.border.base)}),xY=Rg((function(e,t){const{render:n,className:r}=e,l=Wg(e,VY),a=Qu(),i=(e=>{const{classes:t}=e;return Ng({root:["toolbar"]},Zu,t)})(a),[g,s]=o.useState(null),[c,d]=o.useState([]),I=o.useCallback((()=>c.sort(kY)),[c]),u=o.useCallback((function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e;const r=I(),l=r.length;for(let g=0;g<l;g+=1){var a,i;if(o+=t,o>=l){if(!n)return-1;o=0}else if(o<0){if(!n)return-1;o=l-1}if((null===(a=r[o].ref.current)||void 0===a||!a.disabled)&&"true"!==(null===(i=r[o].ref.current)||void 0===i?void 0:i.ariaDisabled))return o}return-1}),[I]),C=o.useCallback(((e,t)=>{d((n=>[...n,{id:e,ref:t}]))}),[]),p=o.useCallback((e=>{d((t=>t.filter((t=>t.id!==e))))}),[]),A=o.useCallback((e=>{if(!g)return;const t=I(),n=t.findIndex((e=>e.id===g));let o=-1;if("ArrowRight"===e.key?(e.preventDefault(),o=u(n,1)):"ArrowLeft"===e.key?(e.preventDefault(),o=u(n,-1)):"Home"===e.key?(e.preventDefault(),o=u(-1,1,!1)):"End"===e.key&&(e.preventDefault(),o=u(t.length,-1,!1)),o>=0&&o<t.length){var r;const e=t[o];s(e.id),null===(r=e.ref.current)||void 0===r||r.focus()}}),[I,g,u]),m=o.useCallback((e=>{g!==e&&s(e)}),[g,s]),h=o.useCallback((e=>{const t=I(),n=t.findIndex((t=>t.id===e)),o=u(n,1);if(o>=0&&o<t.length){var r;const e=t[o];s(e.id),null===(r=e.ref.current)||void 0===r||r.focus()}}),[I,u]);o.useEffect((()=>{const e=I();if(e.length>0){if(!g)return void s(e[0].id);const o=e.findIndex((e=>e.id===g));if(e[o]){if(-1===o){const n=e[o];var t;if(n)s(n.id),null===(t=n.ref.current)||void 0===t||t.focus()}}else{const t=e[e.length-1];var n;if(t)s(t.id),null===(n=t.ref.current)||void 0===n||n.focus()}}}),[I,u]);const b=o.useMemo((()=>({focusableItemId:g,registerItem:C,unregisterItem:p,onItemKeyDown:A,onItemFocus:m,onItemDisabled:h})),[g,C,p,A,m,h]),f=RY(XY,n,Sg({role:"toolbar","aria-orientation":"horizontal","aria-label":a.label||void 0,className:Vg(i.root,r)},l,{ref:t}));return(0,ao.jsx)(WY.Provider,{value:b,children:f})}));const JY=["render","onKeyDown","onFocus","disabled","aria-disabled"],NY=Rg((function(e,t){var n;const{render:r,onKeyDown:l,onFocus:a,disabled:i,"aria-disabled":g}=e,s=Wg(e,JY),c=rA(),d=Qu(),I=o.useRef(null),u=Xg(I,t),{focusableItemId:C,registerItem:p,unregisterItem:A,onItemKeyDown:m,onItemFocus:h,onItemDisabled:b}=function(){const e=o.useContext(WY);if(void 0===e)throw new Error("MUI X: Missing context. Toolbar subcomponents must be placed within a <Toolbar /> component.");return e}();o.useEffect((()=>(p(c,I),()=>A(c))),[]);const f=o.useRef(i);o.useEffect((()=>{f.current!==i&&!0===i&&b(c,i),f.current=i}),[i,c,b]);const y=o.useRef(g);o.useEffect((()=>{y.current!==g&&!0===g&&b(c,!0),y.current=g}),[g,c,b]);const v=RY(d.slots.baseIconButton,r,Sg({},null===(n=d.slotProps)||void 0===n?void 0:n.baseIconButton,{tabIndex:C===c?0:-1},s,{disabled:i,"aria-disabled":g,onKeyDown:e=>{m(e),null===l||void 0===l||l(e)},onFocus:e=>{h(c),null===a||void 0===a||a(e)},ref:u}));return(0,ao.jsx)(o.Fragment,{children:v})}));const HY=["render","className","onClick","onPointerUp"],FY=Rg((function(e,t){var n;const{render:r,className:l,onClick:a,onPointerUp:i}=e,g=Wg(e,HY),s=Qu(),c=rA(),d=rA(),I=UC(),u=Mu(I,jC),C=u.open&&u.openedPanelValue===TC.filters,p=Mu(I,Vh).length,A={open:C,filterCount:p},m="function"===typeof l?l(A):l,{filterPanelTriggerRef:h}=OC(),b=Xg(t,h),f=RY(s.slots.baseButton,r,Sg({},null===(n=s.slotProps)||void 0===n?void 0:n.baseButton,{id:c,"aria-haspopup":"true","aria-expanded":C?"true":void 0,"aria-controls":C?d:void 0,onClick:e=>{C?I.current.hidePreferences():I.current.showPreferences(TC.filters,d,c),null===a||void 0===a||a(e)},onPointerUp:e=>{C&&e.stopPropagation(),null===i||void 0===i||i(e)},className:m},g,{ref:b}),A);return(0,ao.jsx)(o.Fragment,{children:f})}));const YY=["render","className","onClick","onPointerUp"],KY=Rg((function(e,t){var n;const{render:r,className:l,onClick:a,onPointerUp:i}=e,g=Wg(e,YY),s=Qu(),c=rA(),d=rA(),I=UC(),u=Mu(I,jC),C=u.open&&u.openedPanelValue===TC.columns,p={open:C},A="function"===typeof l?l(p):l,{columnsPanelTriggerRef:m}=OC(),h=Xg(t,m),b=RY(s.slots.baseButton,r,Sg({},null===(n=s.slotProps)||void 0===n?void 0:n.baseButton,{id:c,"aria-haspopup":"true","aria-expanded":C?"true":void 0,"aria-controls":C?d:void 0,className:A},g,{onPointerUp:e=>{C&&e.stopPropagation(),null===i||void 0===i||i(e)},onClick:e=>{C?I.current.hidePreferences():I.current.showPreferences(TC.columns,d,c),null===a||void 0===a||a(e)},ref:h}),p);return(0,ao.jsx)(o.Fragment,{children:b})}));const MY=["render","options","onClick"],LY=Rg((function(e,t){var n;const{render:r,options:l,onClick:a}=e,i=Wg(e,MY),g=Qu(),s=UC(),c=RY(g.slots.baseButton,r,Sg({},null===(n=g.slotProps)||void 0===n?void 0:n.baseButton,{onClick:e=>{s.current.exportDataAsPrint(l),null===a||void 0===a||a(e)}},i,{ref:t}));return(0,ao.jsx)(o.Fragment,{children:c})}));const EY=["render","options","onClick"],zY=Rg((function(e,t){var n;const{render:r,options:l,onClick:a}=e,i=Wg(e,EY),g=Qu(),s=UC(),c=RY(g.slots.baseButton,r,Sg({},null===(n=g.slotProps)||void 0===n?void 0:n.baseButton,{onClick:e=>{s.current.exportDataAsCsv(l),null===a||void 0===a||a(e)}},i,{ref:t}));return(0,ao.jsx)(o.Fragment,{children:c})}));const jY=o.createContext(void 0);function DY(){const e=o.useContext(jY);if(void 0===e)throw new Error("MUI X: Missing context. Quick Filter subcomponents must be placed within a <QuickFilter /> component.");return e}const TY=["render","className","parser","formatter","debounceMs","defaultExpanded","expanded","onExpandedChange"],PY=e=>e.split(" ").filter((e=>""!==e)),UY=e=>e.join(" ");function QY(e){const t=Qu(),{render:n,className:r,parser:l=PY,formatter:a=UY,debounceMs:i=t.filterDebounceMs,defaultExpanded:g,expanded:s,onExpandedChange:c}=e,d=Wg(e,TY),I=UC(),u=o.useRef(null),C=o.useRef(null),p=Mu(I,fh),[A,m]=o.useState(a(null!==p&&void 0!==p?p:[])),[h,b]=o.useState(null!==g&&void 0!==g?g:A.length>0),f=null!==s&&void 0!==s?s:h,y=o.useMemo((()=>({value:A,expanded:f})),[A,f]),v="function"===typeof r?r(y):r,Z=o.useRef(null),G=rA(),S=o.useCallback((e=>{c&&c(e),void 0===s&&b(e)}),[c,s]),B=o.useRef(p);o.useEffect((()=>{By(B.current,p)||(B.current=p,m((e=>By(l(e),p)?e:a(null!==p&&void 0!==p?p:[]))))}),[p,a,l]);const w=o.useRef(!0),R=o.useRef(f);o.useEffect((()=>{if(w.current)w.current=!1;else if(R.current!==f){var e;if(f)requestAnimationFrame((()=>{var e;null===(e=u.current)||void 0===e||e.focus({preventScroll:!0})}));else null===(e=C.current)||void 0===e||e.focus({preventScroll:!0});R.current=f}}),[f]);const W=o.useMemo((()=>rZ((e=>{const t=l(e);B.current=t,I.current.setQuickFilterValues(t)}),i)),[I,i,l]);o.useEffect((()=>W.clear),[W]);const k=o.useCallback((e=>{const t=e.target.value;m(t),W(t)}),[W]),V=o.useCallback((()=>{var e;m(""),I.current.setQuickFilterValues([]),null===(e=u.current)||void 0===e||e.focus()}),[I,u]),X=o.useMemo((()=>({controlRef:u,triggerRef:C,state:y,controlId:G,clearValue:V,onValueChange:k,onExpandedChange:S})),[G,y,k,V,S]);up((()=>{var e;Z.current&&C.current&&Z.current.style.setProperty("--trigger-width","".concat(null===(e=C.current)||void 0===e?void 0:e.offsetWidth,"px"))}),[]);const x=RY("div",n,Sg({className:v},d,{ref:Z}),y);return(0,ao.jsx)(jY.Provider,{value:X,children:x})}const OY=["render","className","onClick"],qY=Rg((function(e,t){var n;const{render:r,className:l,onClick:a}=e,i=Wg(e,OY),g=Qu(),{state:s,controlId:c,onExpandedChange:d,triggerRef:I}=DY(),u="function"===typeof l?l(s):l,C=Xg(I,t),p=RY(g.slots.baseButton,r,Sg({},null===(n=g.slotProps)||void 0===n?void 0:n.baseButton,{className:u,"aria-controls":c,"aria-expanded":s.expanded},i,{onClick:e=>{d(!s.expanded),null===a||void 0===a||a(e)},ref:C}),s);return(0,ao.jsx)(o.Fragment,{children:p})}));const _Y=["render","className","slotProps","onKeyDown","onChange"],$Y=Rg((function(e,t){var n;const{render:r,className:l,slotProps:a,onKeyDown:i,onChange:g}=e,s=Wg(e,_Y),c=Qu(),{state:d,controlId:I,controlRef:u,onValueChange:C,onExpandedChange:p,clearValue:A}=DY(),m="function"===typeof l?l(d):l,h=Xg(u,t),b=RY(c.slots.baseTextField,r,Sg({},null===(n=c.slotProps)||void 0===n?void 0:n.baseTextField,{slotProps:Sg({htmlInput:Sg({role:"searchbox",id:I,tabIndex:d.expanded?void 0:-1},null===a||void 0===a?void 0:a.htmlInput,{onBlur:e=>{var t,n;""===d.value&&p(!1),null===a||void 0===a||null===(t=a.htmlInput)||void 0===t||null===(n=t.onBlur)||void 0===n||n.call(t,e)}})},a),value:d.value,className:m},s,{onChange:e=>{d.expanded||p(!0),C(e),null===g||void 0===g||g(e)},onKeyDown:e=>{"Escape"===e.key&&(""===d.value?p(!1):A()),null===i||void 0===i||i(e)},ref:h}),d);return(0,ao.jsx)(o.Fragment,{children:b})}));const eK=["render","className","onClick"],tK=Rg((function(e,t){var n;const{render:r,className:l,onClick:a}=e,i=Wg(e,eK),g=Qu(),{state:s,clearValue:c}=DY(),d="function"===typeof l?l(s):l,I=RY(g.slots.baseIconButton,r,Sg({},null===(n=g.slotProps)||void 0===n?void 0:n.baseIconButton,{className:d,tabIndex:-1},i,{onClick:e=>{c(),null===a||void 0===a||a(e)},ref:t}),s);return(0,ao.jsx)(o.Fragment,{children:I})}));const nK=["quickFilterParser","quickFilterFormatter","debounceMs","className","slotProps"],oK=["ref","slotProps"],rK=ep("div",{name:"MuiDataGrid",slot:"ToolbarQuickFilter"})({display:"grid",alignItems:"center"}),lK=ep(NY,{name:"MuiDataGrid",slot:"ToolbarQuickFilterTrigger"})((e=>{let{ownerState:t}=e;return{gridArea:"1 / 1",width:"min-content",height:"min-content",zIndex:1,opacity:t.expanded?0:1,pointerEvents:t.expanded?"none":"auto",transition:Ru.transition(["opacity"])}})),aK=ep((e=>{throw new Error("Failed assertion: should not be rendered")}),{name:"MuiDataGrid",slot:"ToolbarQuickFilterControl"})((e=>{let{ownerState:t}=e;return{gridArea:"1 / 1",overflowX:"clip",width:t.expanded?260:"var(--trigger-width)",opacity:t.expanded?1:0,transition:Ru.transition(["width","opacity"])}}));function iK(e){const t=UC(),n=Qu(),o={classes:n.classes,expanded:!1},r=(e=>{const{classes:t}=e;return Ng({root:["toolbarQuickFilter"],trigger:["toolbarQuickFilterTrigger"],control:["toolbarQuickFilterControl"]},Zu,t)})(o),{quickFilterParser:l,quickFilterFormatter:a,debounceMs:i,className:g,slotProps:s}=e,c=Wg(e,nK);return(0,ao.jsx)(QY,{parser:l,formatter:a,debounceMs:i,render:(e,l)=>{const a=Sg({},o,{expanded:l.expanded});return(0,ao.jsxs)(rK,Sg({},e,{className:Vg(r.root,g),children:[(0,ao.jsx)(qY,{render:e=>(0,ao.jsx)(n.slots.baseTooltip,{title:t.current.getLocaleText("toolbarQuickFilterLabel"),enterDelay:0,children:(0,ao.jsx)(lK,Sg({className:r.trigger},e,{ownerState:a,color:"default","aria-disabled":l.expanded,children:(0,ao.jsx)(n.slots.quickFilterIcon,{fontSize:"small"})}))})}),(0,ao.jsx)($Y,{render:e=>{var o;let{ref:l,slotProps:i}=e,g=Wg(e,oK);return(0,ao.jsx)(aK,Sg({as:n.slots.baseTextField,className:r.control,ownerState:a,inputRef:l,"aria-label":t.current.getLocaleText("toolbarQuickFilterLabel"),placeholder:t.current.getLocaleText("toolbarQuickFilterPlaceholder"),size:"small",slotProps:Sg({input:Sg({startAdornment:(0,ao.jsx)(n.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:g.value?(0,ao.jsx)(tK,{render:(0,ao.jsx)(n.slots.baseIconButton,{size:"small",edge:"end","aria-label":t.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),children:(0,ao.jsx)(n.slots.quickFilterClearIcon,{fontSize:"small"})})}):null},null===i||void 0===i?void 0:i.input)},i)},null===(o=n.slotProps)||void 0===o?void 0:o.baseTextField,g,null===s||void 0===s?void 0:s.root,c))}})]}))}})}const gK=["className"],sK=["className"],cK=e=>{const{classes:t}=e;return Ng({divider:["toolbarDivider"],label:["toolbarLabel"]},Zu,t)},dK=ep(Wp,{name:"MuiDataGrid",slot:"ToolbarDivider"})({height:"50%",margin:Ru.spacing(0,.5)}),IK=ep("span",{name:"MuiDataGrid",slot:"ToolbarLabel"})({flex:1,font:Ru.typography.font.large,fontWeight:Ru.typography.fontWeight.medium,margin:Ru.spacing(0,.5),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"});function uK(e){const t=Wg(e,gK),n=Qu(),o=cK(n);return(0,ao.jsx)(dK,Sg({as:n.slots.baseDivider,orientation:"vertical",className:o.divider},t))}function CK(e){const t=Wg(e,sK),n=Qu(),o=cK(n);return(0,ao.jsx)(IK,Sg({className:o.label},t))}const pK=Sg({},BY,{cell:bS,skeletonCell:wZ,columnHeaderFilterIconButton:function(e){return e.counter?(0,ao.jsx)(VZ,Sg({},e)):null},columnHeaderSortIcon:YZ,columnMenu:qS,columnHeaders:MS,detailPanels:function(e){return null},bottomContainer:function(e){const t=Ng({root:["bottomContainer"]},Zu,{});return(0,ao.jsx)(wY,Sg({},e,{className:Vg(t.root,Gu["container--bottom"]),role:"presentation"}))},footer:DZ,footerRowCount:UZ,toolbar:function(e){var t,n,r;const{showQuickFilter:l=!0,quickFilterProps:a,csvOptions:i,printOptions:g,additionalItems:s,additionalExportMenuItems:c}=e,d=UC(),I=Qu(),[u,C]=o.useState(!1),p=o.useRef(null),A=rA(),m=rA(),h=!(null!==i&&void 0!==i&&i.disableToolbarButton)||!(null!==g&&void 0!==g&&g.disableToolbarButton)||c,b=()=>C(!1);return(0,ao.jsxs)(xY,{children:[I.label&&(0,ao.jsx)(CK,{children:I.label}),!I.disableColumnSelector&&(0,ao.jsx)(I.slots.baseTooltip,{title:d.current.getLocaleText("toolbarColumns"),children:(0,ao.jsx)(KY,{render:(0,ao.jsx)(NY,{}),children:(0,ao.jsx)(I.slots.columnSelectorIcon,{fontSize:"small"})})}),!I.disableColumnFilter&&(0,ao.jsx)(I.slots.baseTooltip,{title:d.current.getLocaleText("toolbarFilters"),children:(0,ao.jsx)(FY,{render:(e,t)=>(0,ao.jsx)(NY,Sg({},e,{color:t.filterCount>0?"primary":"default",children:(0,ao.jsx)(I.slots.baseBadge,{badgeContent:t.filterCount,color:"primary",variant:"dot",children:(0,ao.jsx)(I.slots.openFilterButtonIcon,{fontSize:"small"})})}))})}),s,h&&(!I.disableColumnFilter||!I.disableColumnSelector)&&(0,ao.jsx)(uK,{}),h&&(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(I.slots.baseTooltip,{title:d.current.getLocaleText("toolbarExport"),children:(0,ao.jsx)(NY,{ref:p,id:m,"aria-controls":A,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:()=>C(!u),children:(0,ao.jsx)(I.slots.exportIcon,{fontSize:"small"})})}),(0,ao.jsx)(Lm,{target:p.current,open:u,onClose:b,position:"bottom-end",children:(0,ao.jsxs)(I.slots.baseMenuList,Sg({id:A,"aria-labelledby":m,autoFocusItem:!0},null===(t=I.slotProps)||void 0===t?void 0:t.baseMenuList,{children:[!(null!==g&&void 0!==g&&g.disableToolbarButton)&&(0,ao.jsx)(LY,{render:(0,ao.jsx)(I.slots.baseMenuItem,Sg({},null===(n=I.slotProps)||void 0===n?void 0:n.baseMenuItem)),options:g,onClick:b,children:d.current.getLocaleText("toolbarExportPrint")}),!(null!==i&&void 0!==i&&i.disableToolbarButton)&&(0,ao.jsx)(zY,{render:(0,ao.jsx)(I.slots.baseMenuItem,Sg({},null===(r=I.slotProps)||void 0===r?void 0:r.baseMenuItem)),options:i,onClick:b,children:d.current.getLocaleText("toolbarExportCSV")}),null===c||void 0===c?void 0:c(b)]}))})]}),l&&(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(uK,{}),(0,ao.jsx)(iK,Sg({},a))]})]})},pinnedRows:function(e){return null},loadingOverlay:IG,noResultsOverlay:_S,noRowsOverlay:uG,noColumnsOverlay:CG,pagination:function(){const e=UC(),t=Qu(),n=Mu(e,Kh),r=Mu(e,Mh),l=Mu(e,jh),{paginationMode:a,loading:i}=t,g=-1===r&&"server"===a&&i,s=o.useMemo((()=>Math.max(0,l-1)),[l]),c=o.useMemo((()=>-1===r||n.page<=s?n.page:s),[s,n.page,r]),d=o.useCallback((t=>{e.current.setPageSize(t)}),[e]),I=o.useCallback(((t,n)=>{e.current.setPage(n)}),[e]),u=(e=>{for(let n=0;n<t.pageSizeOptions.length;n+=1){const o=t.pageSizeOptions[n];if("number"===typeof o){if(o===e)return!0}else if(o.value===e)return!0}return!1})(n.pageSize)?t.pageSizeOptions:[];return(0,ao.jsx)(pG,{as:t.slots.basePagination,count:r,page:c,rowsPerPageOptions:u,rowsPerPage:n.pageSize,onPageChange:I,onRowsPerPageChange:d,disabled:g})},filterPanel:YG,columnsPanel:function(e){var t;const n=Qu();return(0,ao.jsx)(GG,Sg({},e,{children:(0,ao.jsx)(n.slots.columnsManagement,Sg({},null===(t=n.slotProps)||void 0===t?void 0:t.columnsManagement))}))},columnsManagement:function(e){var t,n,r,l;const a=UC(),i=o.useRef(null),g=Mu(a,JC),s=Mu(a,xC),c=Qu(),[d,I]=o.useState(""),u=(e=>{const{classes:t}=e;return Ng({root:["columnsManagement"],header:["columnsManagementHeader"],searchInput:["columnsManagementSearchInput"],footer:["columnsManagementFooter"],row:["columnsManagementRow"]},Zu,t)})(c),C=Mu(a,XC),p=Mu(a,Ub),A=Mu(a,Ob),m=o.useMemo((()=>p?Array.from(A.values()):C),[p,A,C]),{sort:h,searchPredicate:b=LG,autoFocusSearchField:f=!0,disableShowHideToggle:y=!1,disableResetButton:v=!1,toggleAllMode:Z="all",getTogglableColumns:G,searchInputProps:S}=e,B=o.useMemo((()=>((e,t)=>{const n=new Set(Object.keys(e).filter((t=>!1===e[t]))),o=new Set(Object.keys(t).filter((e=>!1===t[e])));if(n.size!==o.size)return!1;let r=!0;return n.forEach((e=>{o.has(e)||(r=!1)})),r})(s,g)),[s,g]),w=o.useMemo((()=>{switch(h){case"asc":return[...m].sort(((e,t)=>$G.compare(e.headerName||e.field,t.headerName||t.field)));case"desc":return[...m].sort(((e,t)=>-$G.compare(e.headerName||e.field,t.headerName||t.field)));default:return m}}),[m,h]),R=e=>{const{name:t}=e.target;a.current.setColumnVisibility(t,!1===s[t])},W=o.useMemo((()=>{const e=G?G(w):null,t=e?w.filter((t=>{let{field:n}=t;return e.includes(n)})):w;return d?t.filter((e=>b(e,d.toLowerCase()))):t}),[w,d,b,G]),k=o.useCallback((e=>{const t=Sg({},xC(a)),n=G?G(m):null;return("filteredOnly"===Z?W:m).forEach((o=>{o.hideable&&(null==n||n.includes(o.field))&&(e?delete t[o.field]:t[o.field]=!1)})),a.current.setColumnVisibilityModel(t)}),[a,m,G,Z,W]),V=o.useCallback((e=>{I(e.target.value)}),[]),X=o.useMemo((()=>W.filter((e=>e.hideable))),[W]),x=o.useMemo((()=>X.every((e=>null==s[e.field]||!1!==s[e.field]))),[s,X]),J=o.useMemo((()=>X.every((e=>!1===s[e.field]))),[s,X]),N=o.useRef(null);o.useEffect((()=>{var e;f?null===(e=i.current)||void 0===e||e.focus():N.current&&"function"===typeof N.current.focus&&N.current.focus()}),[f]);let H=!1;const F=e=>!1===H&&!1!==e.hideable&&(H=!0,!0),Y=o.useCallback((()=>{var e;I(""),null===(e=i.current)||void 0===e||e.focus()}),[]);return(0,ao.jsxs)(o.Fragment,{children:[(0,ao.jsx)(nS,{className:u.header,ownerState:c,children:(0,ao.jsx)(oS,Sg({as:c.slots.baseTextField,ownerState:c,placeholder:a.current.getLocaleText("columnsManagementSearchTitle"),inputRef:i,className:u.searchInput,value:d,onChange:V,size:"small",type:"search",slotProps:{input:{startAdornment:(0,ao.jsx)(c.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:(0,ao.jsx)(c.slots.baseIconButton,Sg({size:"small","aria-label":a.current.getLocaleText("columnsManagementDeleteIconLabel"),style:d?{visibility:"visible"}:{visibility:"hidden"},tabIndex:-1,onClick:Y,edge:"end"},null===(t=c.slotProps)||void 0===t?void 0:t.baseIconButton,{children:(0,ao.jsx)(c.slots.quickFilterClearIcon,{fontSize:"small"})}))},htmlInput:{"aria-label":a.current.getLocaleText("columnsManagementSearchTitle")}},autoComplete:"off",fullWidth:!0},null===(n=c.slotProps)||void 0===n?void 0:n.baseTextField,S))}),(0,ao.jsx)(tS,{ownerState:c,children:(0,ao.jsxs)(eS,{className:u.root,ownerState:c,children:[W.map((e=>{var t;return(0,ao.jsx)(c.slots.baseCheckbox,Sg({className:u.row,disabled:!1===e.hideable||p,checked:!1!==s[e.field],onChange:R,name:e.field,inputRef:F(e)?N:void 0,label:e.headerName||e.field,density:"compact",fullWidth:!0},null===(t=c.slotProps)||void 0===t?void 0:t.baseCheckbox),e.field)})),0===W.length&&(0,ao.jsx)(lS,{ownerState:c,children:a.current.getLocaleText("columnsManagementNoColumns")})]})}),y&&v?null:(0,ao.jsxs)(rS,{ownerState:c,className:u.footer,children:[y?(0,ao.jsx)("span",{}):(0,ao.jsx)(c.slots.baseCheckbox,Sg({disabled:0===X.length||p,checked:x,indeterminate:!x&&!J,onChange:()=>k(!x),name:a.current.getLocaleText("columnsManagementShowHideAllText"),label:a.current.getLocaleText("columnsManagementShowHideAllText"),density:"compact"},null===(r=c.slotProps)||void 0===r?void 0:r.baseCheckbox)),v?null:(0,ao.jsx)(c.slots.baseButton,Sg({onClick:()=>a.current.setColumnVisibilityModel(g),disabled:B||p},null===(l=c.slotProps)||void 0===l?void 0:l.baseButton,{children:a.current.getLocaleText("columnsManagementReset")}))]})]})},panel:cS,row:CS});const AK={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid",listView:!1},mK=pK,hK=e=>{const t=bZ(),n=o.useMemo((()=>fZ({props:e,theme:t,name:"MuiDataGrid"})),[t,e]),r=o.useMemo((()=>Sg({},yZ,n.localeText)),[n.localeText]),l=o.useMemo((()=>function(e){let{defaultSlots:t,slots:n}=e;const o=n;if(!o||0===Object.keys(o).length)return t;const r=Sg({},t);return Object.keys(o).forEach((e=>{const t=e;void 0!==o[t]&&(r[t]=o[t])})),r}({defaultSlots:mK,slots:n.slots})),[n.slots]),a=o.useMemo((()=>Object.keys(hv).reduce(((e,t)=>{var o;return e[t]=null!==(o=n[t])&&void 0!==o?o:hv[t],e}),{})),[n]);return o.useMemo((()=>Sg({},n,a,{localeText:r,slots:l},(e=>Sg({},AK,e.dataSource?{filterMode:"server",sortingMode:"server",paginationMode:"server"}:{}))(n))),[n,r,l,a])},bK=new TextEncoder;let fK=2048,yK=new ArrayBuffer(fK),vK=new Uint8Array(yK),ZK=new Int32Array(yK);const GK=function(e){const t=2*e.length;t>fK&&(fK=t+(4-t%4),yK=new ArrayBuffer(fK),vK=new Uint8Array(yK),ZK=new Int32Array(yK));const n=bK.encodeInto(e,vK).written,o=0|n;let r=0,l=374761393+(0+o|0)|0;if(o<16)for(;(r+3|0)<o;r=r+4|0)l=Math.imul(0|SK(l+Math.imul(0|ZK[r],3266489917)|0,17),668265263);else{let e=606290984,t=-2048144777,n=0,a=1640531535;for(;(r+15|0)<o;r=r+16|0)e=Math.imul(0|SK(e+Math.imul(0|ZK[r+0|0],2246822519)|0,13),2654435761),t=Math.imul(0|SK(t+Math.imul(0|ZK[r+4|0],2246822519)|0,13),2654435761),n=Math.imul(0|SK(n+Math.imul(0|ZK[r+8|0],2246822519)|0,13),2654435761),a=Math.imul(0|SK(a+Math.imul(0|ZK[r+12|0],2246822519)|0,13),2654435761);for(l=(((SK(e,1)|0+SK(t,7)|0)+SK(n,12)|0)+SK(a,18)|0)+o|0;(r+3|0)<o;r=r+4|0)l=Math.imul(0|SK(l+Math.imul(0|ZK[r],3266489917)|0,17),668265263)}for(;r<o;r=r+1|0)l=Math.imul(0|SK(l+Math.imul(0|vK[r],374761393)|0,11),2654435761);return l=Math.imul(l^l>>>15,2246822519),l=Math.imul(l^l>>>13,3266489917),((l^l>>>16)>>>0).toString()};function SK(e,t){return e<<t|e>>>32-t}function BK(e){return function(e,t){return"rgba(from ".concat(e," r g b / ").concat(t,")")}(e,1)}function wK(e){if(e)return"".concat(e.fontWeight," ").concat(e.fontSize," / ").concat(e.lineHeight," ").concat(e.fontFamily)}class RK{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.events[e];o||(o={highPriority:new Map,regular:new Map},this.events[e]=o),n.isFirst?o.highPriority.set(t,!0):o.regular.set(t,!0)}removeListener(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}removeAllListeners(){this.events={}}emit(e){const t=this.events[e];if(!t)return;const n=Array.from(t.highPriority.keys()),o=Array.from(t.regular.keys());for(var r=arguments.length,l=new Array(r>1?r-1:0),a=1;a<r;a++)l[a-1]=arguments[a];for(let i=n.length-1;i>=0;i-=1){const e=n[i];t.highPriority.has(e)&&e.apply(this,l)}for(let i=0;i<o.length;i+=1){const e=o[i];t.regular.has(e)&&e.apply(this,l)}}once(e,t){const n=this;this.on(e,(function o(){n.removeListener(e,o);for(var r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];t.apply(n,l)}))}}class WK{static create(e){return new WK(e)}constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}),this.getSnapshot=()=>this.value,this.update=e=>{this.value=e,this.listeners.forEach((t=>t(e)))},this.value=e,this.listeners=new Set}}const kK=Symbol("mui.api_private");let VK=0;function XK(e,t){var n;const r=o.useRef(null),l=o.useRef(null);l.current||(l.current=function(e){var t;const n=null===(t=e.current)||void 0===t?void 0:t[kK];if(n)return n;const o={},r={state:o,store:WK.create(o),instanceId:{id:VK}};return VK+=1,r.getPublicApi=()=>e.current,r.register=(t,n)=>{Object.keys(n).forEach((o=>{const l=n[o],a=r[o];if(!0===(null===a||void 0===a?void 0:a.spying)?a.target=l:r[o]=l,"public"===t){const t=e.current,n=t[o];!0===(null===n||void 0===n?void 0:n.spying)?n.target=l:t[o]=l}}))},r.register("private",{caches:{},eventManager:new RK}),r}(r)),r.current||(r.current=function(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[kK]:e.current}}(l));const a=o.useCallback((function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];const[r,a,i={}]=n;if(i.defaultMuiPrevented=!1,(e=>void 0!==e.isPropagationStopped)(i)&&i.isPropagationStopped())return;const g=t.signature===xh.DataGridPro||t.signature===xh.DataGridPremium?{api:l.current.getPublicApi()}:{};l.current.eventManager.emit(r,a,i,g)}),[l,t.signature]),i=o.useCallback(((e,t,n)=>{l.current.eventManager.on(e,t,n);const o=l.current;return()=>{o.eventManager.removeListener(e,t)}}),[l]);return rb(l,{subscribeEvent:i,publishEvent:a},"public"),!e||null!==(n=e.current)&&void 0!==n&&n.state||(e.current=r.current),o.useImperativeHandle(e,(()=>r.current),[r]),o.useEffect((()=>{const e=l.current;return()=>{e.publishEvent("unmount")}}),[l]),l}const xK={hooks:{useCSSVariables:function(){const e=bZ();return o.useMemo((()=>{const t=GK(function(e){const t=new WeakSet;return JSON.stringify(e,((e,n)=>{if(null!==n&&"object"===typeof n){if(t.has(n))return null;t.add(n)}return n}))}(e)),n=function(e){var t,n,o,r,l,a,i,g,s,c;const d=function(e){if(e.vars)return e.vars.palette.TableCell.border;if("light"===e.palette.mode)return aI(nI(e.palette.divider,1),.88);return rI(nI(e.palette.divider,1),.68)}(e),I=e.palette.DataGrid,u=null!==(t=null===I||void 0===I?void 0:I.bg)&&void 0!==t?t:(e.vars||e).palette.background.default,C=null!==(n=null===I||void 0===I?void 0:I.headerBg)&&void 0!==n?n:u,p=null!==(o=null===I||void 0===I?void 0:I.pinnedBg)&&void 0!==o?o:u,A=e.vars?"rgba(".concat(e.vars.palette.background.defaultChannel," / ").concat(e.vars.palette.action.disabledOpacity,")"):nI(e.palette.background.default,e.palette.action.disabledOpacity),m="dark"===e.palette.mode?"color-mix(in srgb, ".concat((e.vars||e).palette.background.paper," 95%, #fff)"):(e.vars||e).palette.background.paper,h=e.vars?"rgb(".concat(e.vars.palette.primary.mainChannel,")"):e.palette.primary.main,b=function(e){if(e.vars)return e.vars.shape.borderRadius;return"number"===typeof e.shape.borderRadius?"".concat(e.shape.borderRadius,"px"):e.shape.borderRadius}(e),f=null!==(r=null===(l=e.vars)||void 0===l||null===(l=l.font)||void 0===l?void 0:l.body2)&&void 0!==r?r:wK(e.typography.body2),y=null!==(a=null===(i=e.vars)||void 0===i||null===(i=i.font)||void 0===i?void 0:i.caption)&&void 0!==a?a:wK(e.typography.caption),v=null!==(g=null===(s=e.vars)||void 0===s||null===(s=s.font)||void 0===s?void 0:s.body1)&&void 0!==g?g:wK(e.typography.body1),Z=Ru.keys;return{[Z.spacingUnit]:e.vars&&null!==(c=e.vars.spacing)&&void 0!==c?c:e.spacing(1),[Z.colors.border.base]:d,[Z.colors.background.base]:u,[Z.colors.background.overlay]:m,[Z.colors.background.backdrop]:A,[Z.colors.foreground.base]:(e.vars||e).palette.text.primary,[Z.colors.foreground.muted]:(e.vars||e).palette.text.secondary,[Z.colors.foreground.accent]:(e.vars||e).palette.primary.dark,[Z.colors.foreground.disabled]:(e.vars||e).palette.text.disabled,[Z.colors.foreground.error]:(e.vars||e).palette.error.dark,[Z.colors.interactive.hover]:(e.vars||e).palette.action.hover,[Z.colors.interactive.hoverOpacity]:(e.vars||e).palette.action.hoverOpacity,[Z.colors.interactive.focus]:BK((e.vars||e).palette.primary.main),[Z.colors.interactive.focusOpacity]:(e.vars||e).palette.action.focusOpacity,[Z.colors.interactive.disabled]:BK((e.vars||e).palette.action.disabled),[Z.colors.interactive.disabledOpacity]:(e.vars||e).palette.action.disabledOpacity,[Z.colors.interactive.selected]:h,[Z.colors.interactive.selectedOpacity]:(e.vars||e).palette.action.selectedOpacity,[Z.header.background.base]:C,[Z.cell.background.pinned]:p,[Z.radius.base]:b,[Z.typography.fontFamily.base]:e.typography.fontFamily,[Z.typography.fontWeight.light]:e.typography.fontWeightLight,[Z.typography.fontWeight.regular]:e.typography.fontWeightRegular,[Z.typography.fontWeight.medium]:e.typography.fontWeightMedium,[Z.typography.fontWeight.bold]:e.typography.fontWeightBold,[Z.typography.font.body]:f,[Z.typography.font.small]:y,[Z.typography.font.large]:v,[Z.transitions.easing.easeIn]:e.transitions.easing.easeIn,[Z.transitions.easing.easeOut]:e.transitions.easing.easeOut,[Z.transitions.easing.easeInOut]:e.transitions.easing.easeInOut,[Z.transitions.duration.short]:"".concat(e.transitions.duration.shorter,"ms"),[Z.transitions.duration.base]:"".concat(e.transitions.duration.short,"ms"),[Z.transitions.duration.long]:"".concat(e.transitions.duration.standard,"ms"),[Z.shadows.base]:(e.vars||e).shadows[2],[Z.shadows.overlay]:(e.vars||e).shadows[8],[Z.zIndex.panel]:(e.vars||e).zIndex.modal,[Z.zIndex.menu]:(e.vars||e).zIndex.modal}}(e);return{id:t,variables:n}}),[e])},useGridAriaAttributes:()=>{const e=Eu(),t=Qu(),n=Mu(e,NC),o=Mu(e,Rh),r=Mu(e,eh),l=Mu(e,Pp),a=t["aria-label"],i=t["aria-labelledby"];return{role:"grid","aria-label":!a&&!i&&t.label?t.label:a,"aria-labelledby":i,"aria-colcount":n.length,"aria-rowcount":r+1+l+o,"aria-multiselectable":Wf(t)}},useGridRowAriaAttributes:()=>{const e=Eu(),t=Mu(e,eh);return o.useCallback(((n,o)=>{const r={},l=o+t+2;return r["aria-rowindex"]=l,e.current.isRowSelectable(n.id)&&(r["aria-selected"]=e.current.isRowSelected(n.id)),r}),[e,t])},useCellAggregationResult:()=>null}},JK=function(e,t){var n;const o=hK(e),r=XK(o.apiRef,o);return pZ(r,o),(0,ao.jsx)(Xf,{privateApiRef:r,configuration:xK,props:o,children:(0,ao.jsx)(Bf,Sg({className:o.className,style:o.style,sx:o.sx},null===(n=o.slotProps)||void 0===n?void 0:n.root,{ref:t}))})};const NK=o.memo(Rg(JK));JK.propTypes={apiRef:Bg.shape({current:Bg.object}),"aria-label":Bg.string,"aria-labelledby":Bg.string,autoHeight:Bg.bool,autoPageSize:Bg.bool,autosizeOnMount:Bg.bool,autosizeOptions:Bg.shape({columns:Bg.arrayOf(Bg.string),disableColumnVirtualization:Bg.bool,expand:Bg.bool,includeHeaders:Bg.bool,includeOutliers:Bg.bool,outliersFactor:Bg.number}),cellModesModel:Bg.object,checkboxSelection:Bg.bool,classes:Bg.object,className:Bg.string,clipboardCopyCellDelimiter:Bg.string,columnBufferPx:Bg.number,columnGroupHeaderHeight:Bg.number,columnGroupingModel:Bg.arrayOf(Bg.object),columnHeaderHeight:Bg.number,columns:Bg.arrayOf(Bg.object).isRequired,columnVisibilityModel:Bg.object,dataSource:Bg.shape({getRows:Bg.func.isRequired,updateRow:Bg.func}),dataSourceCache:Bg.shape({clear:Bg.func.isRequired,get:Bg.func.isRequired,set:Bg.func.isRequired}),density:Bg.oneOf(["comfortable","compact","standard"]),disableAutosize:Bg.bool,disableColumnFilter:Bg.bool,disableColumnMenu:Bg.bool,disableColumnResize:Bg.bool,disableColumnSelector:Bg.bool,disableColumnSorting:Bg.bool,disableDensitySelector:Bg.bool,disableEval:Bg.bool,disableMultipleRowSelection:Bg.bool,disableRowSelectionOnClick:Bg.bool,disableVirtualization:Bg.bool,editMode:Bg.oneOf(["cell","row"]),estimatedRowCount:Bg.number,experimentalFeatures:Bg.shape({warnIfFocusStateIsNotSynced:Bg.bool}),filterDebounceMs:Bg.number,filterMode:Bg.oneOf(["client","server"]),filterModel:Bg.shape({items:Bg.arrayOf(Bg.shape({field:Bg.string.isRequired,id:Bg.oneOfType([Bg.number,Bg.string]),operator:Bg.string.isRequired,value:Bg.any})).isRequired,logicOperator:Bg.oneOf(["and","or"]),quickFilterExcludeHiddenColumns:Bg.bool,quickFilterLogicOperator:Bg.oneOf(["and","or"]),quickFilterValues:Bg.array}),getCellClassName:Bg.func,getDetailPanelContent:Bg.func,getEstimatedRowHeight:Bg.func,getRowClassName:Bg.func,getRowHeight:Bg.func,getRowId:Bg.func,getRowSpacing:Bg.func,hideFooter:Bg.bool,hideFooterPagination:Bg.bool,hideFooterSelectedRowCount:Bg.bool,ignoreDiacritics:Bg.bool,ignoreValueFormatterDuringExport:Bg.oneOfType([Bg.shape({clipboardExport:Bg.bool,csvExport:Bg.bool}),Bg.bool]),initialState:Bg.object,isCellEditable:Bg.func,isRowSelectable:Bg.func,keepNonExistentRowsSelected:Bg.bool,label:Bg.string,loading:Bg.bool,localeText:Bg.object,logger:Bg.shape({debug:Bg.func.isRequired,error:Bg.func.isRequired,info:Bg.func.isRequired,warn:Bg.func.isRequired}),logLevel:Bg.oneOf(["debug","error","info","warn",!1]),nonce:Bg.string,onCellClick:Bg.func,onCellDoubleClick:Bg.func,onCellEditStart:Bg.func,onCellEditStop:Bg.func,onCellKeyDown:Bg.func,onCellModesModelChange:Bg.func,onClipboardCopy:Bg.func,onColumnHeaderClick:Bg.func,onColumnHeaderContextMenu:Bg.func,onColumnHeaderDoubleClick:Bg.func,onColumnHeaderEnter:Bg.func,onColumnHeaderLeave:Bg.func,onColumnHeaderOut:Bg.func,onColumnHeaderOver:Bg.func,onColumnOrderChange:Bg.func,onColumnResize:Bg.func,onColumnVisibilityModelChange:Bg.func,onColumnWidthChange:Bg.func,onDataSourceError:Bg.func,onDensityChange:Bg.func,onFilterModelChange:Bg.func,onMenuClose:Bg.func,onMenuOpen:Bg.func,onPaginationMetaChange:Bg.func,onPaginationModelChange:Bg.func,onPreferencePanelClose:Bg.func,onPreferencePanelOpen:Bg.func,onProcessRowUpdateError:Bg.func,onResize:Bg.func,onRowClick:Bg.func,onRowCountChange:Bg.func,onRowDoubleClick:Bg.func,onRowEditStart:Bg.func,onRowEditStop:Bg.func,onRowModesModelChange:Bg.func,onRowSelectionModelChange:Bg.func,onSortModelChange:Bg.func,onStateChange:Bg.func,pageSizeOptions:Bg.arrayOf(Bg.oneOfType([Bg.number,Bg.shape({label:Bg.string.isRequired,value:Bg.number.isRequired})]).isRequired),pagination:Bg.oneOf([!0]),paginationMeta:Bg.shape({hasNextPage:Bg.bool}),paginationMode:Bg.oneOf(["client","server"]),paginationModel:Bg.shape({page:Bg.number.isRequired,pageSize:Bg.number.isRequired}),processRowUpdate:Bg.func,resizeThrottleMs:Bg.number,rowBufferPx:Bg.number,rowCount:Bg.number,rowHeight:Bg.number,rowModesModel:Bg.object,rows:Bg.arrayOf(Bg.object),rowSelection:Bg.bool,rowSelectionModel:Bg.shape({ids:Bg.instanceOf(Set).isRequired,type:Bg.oneOf(["exclude","include"]).isRequired}),rowSpacingType:Bg.oneOf(["border","margin"]),rowSpanning:Bg.bool,scrollbarSize:Bg.number,showCellVerticalBorder:Bg.bool,showColumnVerticalBorder:Bg.bool,showToolbar:Bg.bool,slotProps:Bg.object,slots:Bg.object,sortingMode:Bg.oneOf(["client","server"]),sortingOrder:Bg.arrayOf(Bg.oneOf(["asc","desc"])),sortModel:Bg.arrayOf(Bg.shape({field:Bg.string.isRequired,sort:Bg.oneOf(["asc","desc"])})),style:Bg.object,sx:Bg.oneOfType([Bg.arrayOf(Bg.oneOfType([Bg.func,Bg.object,Bg.bool])),Bg.func,Bg.object]),virtualizeColumnsWithAutoRowHeight:Bg.bool};const HK=["className","component"];const FK=vu("MuiBox",["root"]),YK=Iu(),KK=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:l}=e,a=vc("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(xd);return o.forwardRef((function(e,o){const i=hZ(n),g=tV(e),{className:s,component:c="div"}=g,d=Kg(g,HK);return(0,ao.jsx)(a,Xe({as:c,ref:o,className:Vg(s,l?l(r):r),theme:t&&i[t]||i},d))}))}({themeId:Cu,defaultTheme:YK,defaultClassName:FK.root,generateClassName:bu.generate}),MK=KK;const LK=(e,t,n)=>{const o=e.keys[0];if(Array.isArray(t))t.forEach(((t,o)=>{n(((t,n)=>{o<=e.keys.length-1&&(0===o?Object.assign(t,n):t[e.up(e.keys[o])]=n)}),t)}));else if(t&&"object"===typeof t){(Object.keys(t).length>e.keys.length?e.keys:(r=e.keys,l=Object.keys(t),r.filter((e=>l.includes(e))))).forEach((r=>{if(e.keys.includes(r)){const l=t[r];void 0!==l&&n(((t,n)=>{o===r?Object.assign(t,n):t[e.up(r)]=n}),l)}}))}else"number"!==typeof t&&"string"!==typeof t||n(((e,t)=>{Object.assign(e,t)}),t);var r,l};function EK(e){return"--Grid-".concat(e,"Spacing")}function zK(e){return"--Grid-parent-".concat(e,"Spacing")}const jK="--Grid-columns",DK="--Grid-parent-columns",TK=e=>{let{theme:t,ownerState:n}=e;const o={};return LK(t.breakpoints,n.size,((e,t)=>{let n={};"grow"===t&&(n={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(n={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"===typeof t&&(n={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(t," / var(").concat(DK,") - (var(").concat(DK,") - ").concat(t,") * (var(").concat(zK("column"),") / var(").concat(DK,")))")}),e(o,n)})),o},PK=e=>{let{theme:t,ownerState:n}=e;const o={};return LK(t.breakpoints,n.offset,((e,t)=>{let n={};"auto"===t&&(n={marginLeft:"auto"}),"number"===typeof t&&(n={marginLeft:0===t?"0px":"calc(100% * ".concat(t," / var(").concat(DK,") + var(").concat(zK("column"),") * ").concat(t," / var(").concat(DK,"))")}),e(o,n)})),o},UK=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const o={[jK]:12};return LK(t.breakpoints,n.columns,((e,t)=>{const n=null!==t&&void 0!==t?t:12;e(o,{[jK]:n,"> *":{[DK]:n}})})),o},QK=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const o={};return LK(t.breakpoints,n.rowSpacing,((e,n)=>{var r;const l="string"===typeof n?n:null===(r=t.spacing)||void 0===r?void 0:r.call(t,n);e(o,{[EK("row")]:l,"> *":{[zK("row")]:l}})})),o},OK=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const o={};return LK(t.breakpoints,n.columnSpacing,((e,n)=>{var r;const l="string"===typeof n?n:null===(r=t.spacing)||void 0===r?void 0:r.call(t,n);e(o,{[EK("column")]:l,"> *":{[zK("column")]:l}})})),o},qK=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const o={};return LK(t.breakpoints,n.direction,((e,t)=>{e(o,{flexDirection:t})})),o},_K=e=>{let{ownerState:t}=e;return Xe({minWidth:0,boxSizing:"border-box"},t.container&&Xe(Xe({display:"flex",flexWrap:"wrap"},t.wrap&&"wrap"!==t.wrap&&{flexWrap:t.wrap}),{},{gap:"var(".concat(EK("row"),") var(").concat(EK("column"),")")}))},$K=e=>{const t=[];return Object.entries(e).forEach((e=>{let[n,o]=e;!1!==o&&void 0!==o&&t.push("grid-".concat(n,"-").concat(String(o)))})),t},eM=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function n(e){return void 0!==e&&("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e&&e>0)}if(n(e))return["spacing-".concat(t,"-").concat(String(e))];if("object"===typeof e&&!Array.isArray(e)){const t=[];return Object.entries(e).forEach((e=>{let[o,r]=e;n(r)&&t.push("spacing-".concat(o,"-").concat(String(r)))})),t}return[]},tM=e=>void 0===e?[]:"object"===typeof e?Object.entries(e).map((e=>{let[t,n]=e;return"direction-".concat(t,"-").concat(n)})):["direction-xs-".concat(String(e))];const nM=["className","children","columns","container","component","direction","wrap","size","offset","spacing","rowSpacing","columnSpacing","unstable_level"],oM=Hd(),rM=ep("div",{name:"MuiGrid",slot:"Root"});function lM(e){return function(e){let{props:t,name:n,defaultTheme:o,themeId:r}=e,l=hZ(o);return r&&(l=l[r]||l),fZ({theme:l,name:n,props:t})}({props:e,name:"MuiGrid",defaultTheme:oM})}const aM=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=rM,useThemeProps:n=lM,useTheme:r=hZ,componentName:l="MuiGrid"}=e;function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const o={};return null===e||(Array.isArray(e)?e.forEach(((e,r)=>{null!==e&&n(e)&&t.keys[r]&&(o[t.keys[r]]=e)})):"object"===typeof e?Object.keys(e).forEach((t=>{const r=e[t];null!==r&&void 0!==r&&n(r)&&(o[t]=r)})):o[t.keys[0]]=e),o}const i=t(UK,OK,QK,TK,qK,_K,PK),g=o.forwardRef((function(e,t){var g,s,c,d,I,u;const C=r(),p=tV(n(e));!function(e,t){const n=[];void 0!==e.item&&(delete e.item,n.push("item")),void 0!==e.zeroMinWidth&&(delete e.zeroMinWidth,n.push("zeroMinWidth")),t.keys.forEach((t=>{void 0!==e[t]&&(n.push(t),delete e[t])}))}(p,C.breakpoints);const{className:A,children:m,columns:h=12,container:b=!1,component:f="div",direction:y="row",wrap:v="wrap",size:Z={},offset:G={},spacing:S=0,rowSpacing:B=S,columnSpacing:w=S,unstable_level:R=0}=p,W=Kg(p,nM),k=a(Z,C.breakpoints,(e=>!1!==e)),V=a(G,C.breakpoints),X=null!==(g=e.columns)&&void 0!==g?g:R?void 0:h,x=null!==(s=e.spacing)&&void 0!==s?s:R?void 0:S,J=null!==(c=null!==(d=e.rowSpacing)&&void 0!==d?d:e.spacing)&&void 0!==c?c:R?void 0:B,N=null!==(I=null!==(u=e.columnSpacing)&&void 0!==u?u:e.spacing)&&void 0!==I?I:R?void 0:w,H=Xe(Xe({},p),{},{level:R,columns:X,container:b,direction:y,wrap:v,spacing:x,rowSpacing:J,columnSpacing:N,size:k,offset:V}),F=((e,t)=>{const{container:n,direction:o,spacing:r,wrap:a,size:i}=e;return Ng({root:["root",n&&"container","wrap"!==a&&"wrap-xs-".concat(String(a)),...tM(o),...$K(i),...n?eM(r,t.breakpoints.keys[0]):[]]},(e=>yu(l,e)),{})})(H,C);return(0,ao.jsx)(i,Xe(Xe({ref:t,as:f,ownerState:H,className:Vg(F.root,A)},W),{},{children:o.Children.map(m,(e=>{var t,n;return o.isValidElement(e)&&cx(e,["Grid"])&&b&&e.props.container?o.cloneElement(e,{unstable_level:null!==(t=null===(n=e.props)||void 0===n?void 0:n.unstable_level)&&void 0!==t?t:R+1}):e}))}))}));return g.muiName="Grid",g}({createStyledComponent:mu("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>jw({props:e,name:"MuiGrid"}),useTheme:bZ});const iM=aM,gM=[{field:"id",headerName:"Transaction ID",flex:1},{field:"customer_name",headerName:"Customer Name",flex:1},{field:"total_amount",headerName:"Total Amount",flex:1},{field:"status",headerName:"Status",flex:1},{field:"action",headerName:"Action",flex:1,renderCell:e=>(0,ao.jsx)(zN,{variant:"contained",color:"primary",size:"small",onClick:()=>function(e){const t="Dear ".concat(e.customer_name,",\n\nThis is a reminder to complete the payment for the following transaction:\n\nTransaction ID: ").concat(e.id,"\nTotal Amount: ").concat(e.total_amount,"\nStatus: ").concat(e.status,"\n\nCompany Name: Bonnesante Medicals\nBank Name: MONIEPOINT\nAccount Name: BONNESANTE MEDICALS\nAccount Number: 8259518195\n\nBank Name: Access Bank\nAccount Name: BONNESANTE MEDICALS\nAccount Number: 1379643548\n\nThank you.");alert(t)}(e.row),children:"Send Reminder"}),sortable:!1,filterable:!1}];const sM=()=>{var e,t;const[n,r]=(0,o.useState)(null),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)(""),[s,c]=(0,o.useState)(!1),[d,I]=(0,o.useState)(null);return(0,ao.jsxs)(MK,{className:"sales-summary-container",sx:{maxWidth:1200,mx:"auto",mt:4},children:[(0,ao.jsx)(rX,{variant:"h4",gutterBottom:!0,children:"Sales Summary"}),(0,ao.jsx)("form",{className:"summary-form",onSubmit:e=>{e.preventDefault(),(async()=>{if(l&&i){c(!0),I(null);try{const e=await fetch("".concat(lo,"/reports/sales?start_date=").concat(l,"&end_date=").concat(i));if(!e.ok)throw new Error("Failed to fetch sales summary");const t=await e.json();r(t)}catch(jr){I(jr.message),r(null)}c(!1)}})()},children:(0,ao.jsxs)(iM,{container:!0,spacing:2,alignItems:"center",children:[(0,ao.jsx)(iM,{item:!0,xs:12,sm:5,children:(0,ao.jsx)(CN,{label:"Start Date",type:"date",value:l,onChange:e=>a(e.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,required:!0})}),(0,ao.jsx)(iM,{item:!0,xs:12,sm:5,children:(0,ao.jsx)(CN,{label:"End Date",type:"date",value:i,onChange:e=>g(e.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,required:!0})}),(0,ao.jsx)(iM,{item:!0,xs:12,sm:2,children:(0,ao.jsx)(zN,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:s,children:s?"Loading...":"Get Summary"})})]})}),d&&(0,ao.jsx)(rX,{color:"error",sx:{mt:2},children:d}),n&&(0,ao.jsxs)(ao.Fragment,{children:[(0,ao.jsxs)(MK,{sx:{mt:4,mb:2},children:[(0,ao.jsxs)(rX,{variant:"h6",children:["Summary for ",n.start_date," to ",n.end_date]}),(0,ao.jsxs)(rX,{children:["Total Sales: ",(0,ao.jsxs)("b",{children:["\u20a6",null===(e=n.total_sales)||void 0===e?void 0:e.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),(0,ao.jsxs)(rX,{children:["Total VAT: ",(0,ao.jsxs)("b",{children:["\u20a6",null===(t=n.total_vat)||void 0===t?void 0:t.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),(0,ao.jsx)(NK,{rows:n.transactions.map(((e,t)=>Xe(Xe({},e),{},{id:e.id||t}))),columns:gM,pageSize:10,rowsPerPageOptions:[10,20,50],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{background:"#fff",borderRadius:2,boxShadow:2}})]})]})},cM=[{field:"name",headerName:"Customer Name",flex:1},{field:"totalTransactions",headerName:"Total Transactions",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1},{field:"feedback",headerName:"Feedback",flex:2}],dM=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/customer-performance"));if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const n=await e.json();t(Array.isArray(n)?n.map((e=>{return Xe(Xe({},e),{},{feedback:(t=e.totalAmount,t>1e4?"Thank you for being a top customer! We appreciate your loyalty.":t>5e3?"We value your patronage! Keep shopping with us.":"Thank you for your business! We look forward to serving you again."),id:e.id});var t})):[])}catch(sE){t([])}})()}),[]),(0,ao.jsxs)(MK,{className:"customer-performance-container",sx:{height:600,width:"100%"},children:[(0,ao.jsx)(rX,{variant:"h4",gutterBottom:!0,children:"Customer Performance"}),(0,ao.jsx)(NK,{rows:e,columns:cM,pageSize:10,rowsPerPageOptions:[10,20,50],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{background:"#fff",borderRadius:2,boxShadow:2}})]})},IM=()=>{const e=te();return(0,ao.jsxs)("div",{className:"sales-inventory-container",children:[(0,ao.jsx)("h1",{children:"Sales Inventory"}),(0,ao.jsxs)("div",{className:"sales-inventory-buttons",children:[(0,ao.jsx)("button",{onClick:()=>e("/product-stock-intake"),children:"Product Stock Intake"}),(0,ao.jsx)("button",{onClick:()=>{console.log("Navigating to /product-stock-level"),e("/product-stock-level")},children:"Product Stock Level"}),(0,ao.jsx)("button",{onClick:()=>e("/generate-invoice"),children:"Generate Invoice"}),(0,ao.jsx)("button",{onClick:()=>e("/sales-summary"),children:"Sales Summary"}),(0,ao.jsx)("button",{onClick:()=>e("/customer-performance"),children:"Customer Performance"})]})]})},uM=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/database-table")),n=await e.json();t(n)}catch(sE){console.error("Error fetching data:",sE)}})()}),[]),(0,ao.jsxs)("div",{className:"database-table-container",children:[(0,ao.jsx)("h1",{children:"Database Table"}),(0,ao.jsxs)("table",{className:"database-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"ID"}),(0,ao.jsx)("th",{children:"Name"}),(0,ao.jsx)("th",{children:"Details"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.id}),(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.details})]},e.id)))})]})]})},CM=()=>{const e=te();return(0,ao.jsxs)("div",{className:"production-inventory-container",children:[(0,ao.jsx)("h1",{children:"Production Inventory"}),(0,ao.jsxs)("div",{className:"button-group",children:[(0,ao.jsx)("button",{onClick:()=>e("/raw-material-stock-intake"),children:"Raw Material Stock Intake"}),(0,ao.jsx)("button",{onClick:()=>e("/raw-material-stock-level"),children:"Raw Material Stock Level"}),(0,ao.jsx)("button",{onClick:()=>e("/register-production-requirement"),children:"Production Requirement"}),(0,ao.jsx)("button",{onClick:()=>e("/production-console"),children:"Production Console"}),(0,ao.jsx)("button",{onClick:()=>e("/production-output"),children:"Production Output"}),(0,ao.jsx)("button",{onClick:()=>e("/production-analysis"),children:"Production Analysis"})]})]})},pM="https://astrobsm-oracle-backend.onrender.com/api/v1",AM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)([]),[i,g]=(0,o.useState)([]),[s,c]=(0,o.useState)({rawMaterialId:"",quantity:"",supplier:"",expiryDate:"",dateOfIntake:"",intakeStaff:""}),[d,I]=(0,o.useState)(""),[u,C]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(pM,"/inventory/raw-materials")),n=await fetch("".concat(pM,"/suppliers")),o=await fetch("".concat(pM,"/staff")),l=await fetch("".concat(pM,"/inventory/products"));if(!e.ok||!n.ok||!o.ok||!l.ok)throw new Error("Failed to fetch data");t(await e.json()),r(await n.json()),a(await o.json()),g(await l.json())}catch(sE){console.error("Error fetching data:",sE)}})()}),[]);const p=e=>{const{name:t,value:n}=e.target;c(Xe(Xe({},s),{},{[t]:n}))};return(0,ao.jsxs)("div",{className:"raw-material-stock-intake-container",children:[(0,ao.jsx)("h1",{children:"Raw Material Stock Intake"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0),I("");try{const e=await fetch("".concat(pM,"/raw-material-stock-intake"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let n;try{n=await e.json()}catch(t){n={}}if(e.ok)I("Raw material stock intake recorded successfully!"),c({rawMaterialId:"",quantity:"",supplier:"",expiryDate:"",dateOfIntake:"",intakeStaff:""});else{let e="Failed to record raw material stock intake.";n.detail&&("string"===typeof n.detail?e=n.detail:Array.isArray(n.detail)?e=n.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof n.detail&&(e=JSON.stringify(n.detail))),I(e)}}catch(sE){I("An error occurred. Please try again.")}finally{C(!1)}},children:[(0,ao.jsxs)("label",{children:["Raw Material ID:",(0,ao.jsxs)("select",{name:"rawMaterialId",value:s.rawMaterialId,onChange:p,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Raw Material"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Quantity:",(0,ao.jsx)("input",{type:"number",name:"quantity",value:s.quantity,onChange:p,required:!0})]}),(0,ao.jsxs)("label",{children:["Supplier:",(0,ao.jsxs)("select",{name:"supplier",value:s.supplier,onChange:p,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Supplier"}),n.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Expiry Date:",(0,ao.jsx)("input",{type:"date",name:"expiryDate",value:s.expiryDate,onChange:p,required:!0})]}),(0,ao.jsxs)("label",{children:["Date of Intake:",(0,ao.jsx)("input",{type:"date",name:"dateOfIntake",value:s.dateOfIntake,onChange:p,required:!0})]}),(0,ao.jsxs)("label",{children:["Intake Staff:",(0,ao.jsxs)("select",{name:"intakeStaff",value:s.intakeStaff,onChange:p,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Staff"}),l.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsx)("button",{type:"submit",disabled:u,children:u?"Submitting...":"Submit"})]}),d&&(0,ao.jsx)("div",{className:d.includes("success")?"success":"error",style:{marginTop:"1rem"},children:d})]})},mM=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/raw-material-stock-level"));if(!e.ok)throw new Error("Failed to fetch raw material stock levels");const n=await e.json();t(n)}catch(sE){console.error("Error fetching raw material stock levels:",sE)}})()}),[]),(0,ao.jsxs)("div",{className:"raw-material-stock-level-container",children:[(0,ao.jsx)("h1",{children:"Raw Material Stock Level"}),(0,ao.jsxs)("table",{className:"raw-material-stock-level-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Raw Material"}),(0,ao.jsx)("th",{children:"Quantity"}),(0,ao.jsx)("th",{children:"Reorder Point"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.quantity}),(0,ao.jsx)("td",{children:e.reorderPoint})]},e.id)))})]})]})},hM="https://astrobsm-oracle-backend.onrender.com/api/v1",bM=e=>{let{onEdit:t}=e;const[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)([]),[i,g]=(0,o.useState)([]),[s,c]=(0,o.useState)(!0),[d,I]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{c(!0);try{let e=await fetch("".concat(hM,"/production-requirements"));405!==e.status&&404!==e.status||(e=await fetch("".concat(hM,"/production-requirements/")));const[t,n]=await Promise.all([fetch("".concat(hM,"/inventory/products")),fetch("".concat(hM,"/inventory/raw-materials"))]);if(!e.ok)throw new Error("Failed to fetch requirements: "+e.status);if(!t.ok)throw new Error("Failed to fetch products: "+t.status);if(!n.ok)throw new Error("Failed to fetch raw materials: "+n.status);r(await e.json()),a(await t.json()),g(await n.json())}catch(jr){I("Could not load production requirements. "+jr)}finally{c(!1)}})()}),[]);const u=e=>{const t=l.find((t=>String(t.id)===String(e)));return t?t.name:e},C=e=>{const t=i.find((t=>String(t.id)===String(e)));return t?t.name:e};return s?(0,ao.jsx)("div",{children:"Loading..."}):d?(0,ao.jsx)("div",{className:"error",children:d}):(0,ao.jsxs)("div",{className:"production-requirements-list",children:[(0,ao.jsx)("h2",{children:"Production Requirements List"}),(0,ao.jsxs)("table",{children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"ID"}),(0,ao.jsx)("th",{children:"Product"}),(0,ao.jsx)("th",{children:"Raw Materials"}),(0,ao.jsx)("th",{children:"Actions"})]})}),(0,ao.jsx)("tbody",{children:n.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.id}),(0,ao.jsx)("td",{children:u(e.productId)}),(0,ao.jsx)("td",{children:e.requirements.map(((e,t)=>(0,ao.jsxs)("div",{children:[C(e.rawMaterialId)," (Qty: ",e.quantity,")"]},t)))}),(0,ao.jsxs)("td",{children:[(0,ao.jsx)("button",{onClick:()=>t(e),children:"Edit"}),(0,ao.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this production requirement?"))try{if(!(await fetch("".concat(hM,"/production-requirements/").concat(e),{method:"DELETE"})).ok)throw new Error("Delete failed");r(n.filter((t=>t.id!==e)))}catch(jr){I("Delete failed.")}})(e.id),children:"Delete"})]})]},e.id)))})]})]})},fM="https://astrobsm-oracle-backend.onrender.com/api/v1",yM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)([]),[s,c]=(0,o.useState)(""),[d,I]=(0,o.useState)(!1),[u,C]=(0,o.useState)(!1),[p,A]=(0,o.useState)(null);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(fM,"/inventory/products")),n=await fetch("".concat(fM,"/inventory/raw-materials"));if(!e.ok||!n.ok)throw new Error("Failed to fetch data");t(await e.json()),r(await n.json())}catch(sE){console.error("Error fetching data:",sE)}})()}),[]);const m=(e,t,n)=>{const o=[...i];o[e][t]=n,g(o)};return(0,ao.jsxs)("div",{className:"register-production-requirement-container",children:[(0,ao.jsx)("h1",{children:"Register Production Requirement"}),u?(0,ao.jsx)(bM,{onEdit:e=>{A(e),C(!1),a(e.productId),g(e.requirements)}}):(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),I(!0),c("");try{const e=i.map((e=>({rawMaterialId:Number(e.rawMaterialId),quantity:Number(e.quantity)}))),n={productId:Number(l),requirements:e};let o,r=await fetch("".concat(fM,"/production-requirements"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});405===r.status&&(r=await fetch("".concat(fM,"/production-requirements/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));try{o=await r.json()}catch(t){o={}}if(r.ok)c("Production requirements registered successfully!"),a(""),g([]);else{let e="Failed to register production requirements. Please try again.";o.detail&&("string"===typeof o.detail?e=o.detail:Array.isArray(o.detail)?e=o.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof o.detail&&(e=JSON.stringify(o.detail))),c(e)}}catch(sE){c("An error occurred. Please try again.")}finally{I(!1)}},children:[(0,ao.jsxs)("label",{children:["Product:",(0,ao.jsxs)("select",{value:l,onChange:e=>a(e.target.value),required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select a product"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("div",{className:"requirements-list",children:[i.map(((e,t)=>(0,ao.jsxs)("div",{className:"requirement-item",children:[(0,ao.jsxs)("select",{value:e.rawMaterialId,onChange:e=>m(t,"rawMaterialId",e.target.value),required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select Raw Material"}),n.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,ao.jsx)("input",{type:"number",value:e.quantity,onChange:e=>m(t,"quantity",e.target.value),placeholder:"Quantity per unit",required:!0})]},t))),(0,ao.jsx)("button",{type:"button",onClick:()=>{g([...i,{rawMaterialId:"",quantity:""}])},children:"Add Requirement"})]}),(0,ao.jsx)("button",{type:"submit",disabled:d,children:d?"Submitting...":"Submit"})]}),s&&(0,ao.jsx)("div",{className:s.includes("success")?"success":"error",style:{marginTop:"1rem"},children:s}),(0,ao.jsx)("button",{onClick:()=>C(!u),children:u?"Back to Form":"View Production Requirements"})]})},vM="https://astrobsm-oracle-backend.onrender.com/api/v1",ZM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)(0),[i,g]=(0,o.useState)([]);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(vM,"/products"));if(!e.ok)throw new Error("Failed to fetch products");t(await e.json())}catch(sE){console.error("Error fetching products:",sE)}})()}),[]);const s=async()=>{if(n&&l)try{const e=await fetch("".concat(vM,"/production-console/calculate-materials"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:Number(n),quantity:Number(l)})});if(!e.ok)throw new Error("Failed to calculate materials");const t=await e.json();g(t.materials||[])}catch(sE){g([]),console.error("Error calculating materials:",sE)}};(0,o.useEffect)((()=>{n&&l>0?s():g([])}),[n,l]);return(0,ao.jsxs)("div",{className:"production-console-container",children:[(0,ao.jsx)("h1",{children:"Production Console"}),(0,ao.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s()},children:[(0,ao.jsxs)("label",{children:["Product:",(0,ao.jsxs)("select",{value:n,onChange:e=>r(e.target.value),required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select a product"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Quantity to Produce:",(0,ao.jsx)("input",{type:"number",value:l,onChange:e=>a(e.target.value),required:!0})]}),(0,ao.jsx)("button",{type:"submit",children:"Calculate Materials"})]}),i.length>0&&(0,ao.jsxs)("div",{className:"required-materials",children:[(0,ao.jsx)("h2",{children:"Required Materials"}),(0,ao.jsxs)("table",{children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Raw Material"}),(0,ao.jsx)("th",{children:"Quantity Needed"})]})}),(0,ao.jsx)("tbody",{children:i.map(((e,t)=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.raw_material_name}),(0,ao.jsx)("td",{children:e.quantity_needed})]},t)))})]}),(0,ao.jsx)("button",{onClick:async()=>{try{const e=await fetch("".concat(vM,"/production-console/approve-production"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:Number(n),quantity:Number(l)})});if(!e.ok)throw new Error("Failed to approve production");const t=await e.json();alert(t.message||"Production approved and stock updated!"),g([])}catch(sE){alert("Failed to approve production. Please try again.")}},children:"Approve and Deduct Stock"})]})]})},GM="https://astrobsm-oracle-backend.onrender.com/api/v1",SM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)(0),[s,c]=(0,o.useState)(0),[d,I]=(0,o.useState)(0),[u,C]=(0,o.useState)([]),[p,A]=(0,o.useState)(""),[m,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(GM,"/products")),n=await fetch("".concat(GM,"/staff"));if(!e.ok||!n.ok)throw new Error("Failed to fetch data");t(await e.json()),r(await n.json())}catch(sE){console.error("Error fetching data:",sE)}})()}),[]);const b=()=>{const e=i+s;I(e>0?(i/e*100).toFixed(2):0)};return(0,ao.jsxs)("div",{className:"production-output-container",children:[(0,ao.jsx)("h1",{children:"Production Output"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),A("");try{const e=await fetch("".concat(GM,"/production-output"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:l,goodProducts:i,damagedProducts:s,efficiency:d,participatingStaff:u})});let n;try{n=await e.json()}catch(t){n={}}if(e.ok)A("Production output recorded successfully!"),a(""),g(0),c(0),I(0),C([]);else{let e="Failed to record production output.";n.detail&&("string"===typeof n.detail?e=n.detail:Array.isArray(n.detail)?e=n.detail.map((e=>e.msg||JSON.stringify(e))).join("; "):"object"===typeof n.detail&&(e=JSON.stringify(n.detail))),A(e)}}catch(sE){A("An error occurred. Please try again.")}finally{h(!1)}},children:[(0,ao.jsxs)("label",{children:["Product:",(0,ao.jsxs)("select",{value:l,onChange:e=>a(e.target.value),required:!0,children:[(0,ao.jsx)("option",{value:"",children:"Select a product"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Good Products:",(0,ao.jsx)("input",{type:"number",value:i,onChange:e=>g(e.target.value),onBlur:b,required:!0})]}),(0,ao.jsxs)("label",{children:["Damaged Products:",(0,ao.jsx)("input",{type:"number",value:s,onChange:e=>c(e.target.value),onBlur:b,required:!0})]}),(0,ao.jsxs)("label",{children:["Efficiency: ",d,"%"]}),(0,ao.jsxs)("label",{children:["Participating Staff:",(0,ao.jsx)("select",{multiple:!0,value:u,onChange:e=>C([...e.target.selectedOptions].map((e=>e.value))),children:n.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,ao.jsx)("button",{type:"submit",disabled:m,children:m?"Submitting...":"Submit"})]}),p&&(0,ao.jsx)("div",{className:p.includes("success")?"success":"error",style:{marginTop:"1rem"},children:p})]})},BM=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/production-analysis"));if(!e.ok)throw new Error("Failed to fetch production data");t(await e.json())}catch(sE){console.error("Error fetching production data:",sE)}})()}),[]),(0,ao.jsxs)("div",{className:"production-analysis-container",children:[(0,ao.jsx)("h1",{children:"Production Analysis"}),(0,ao.jsxs)("table",{children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Date"}),(0,ao.jsx)("th",{children:"Product"}),(0,ao.jsx)("th",{children:"Good Products"}),(0,ao.jsx)("th",{children:"Damaged Products"}),(0,ao.jsx)("th",{children:"Efficiency (%)"})]})}),(0,ao.jsx)("tbody",{children:e.map(((e,t)=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.date}),(0,ao.jsx)("td",{children:e.productName}),(0,ao.jsx)("td",{children:e.goodProducts}),(0,ao.jsx)("td",{children:e.damagedProducts}),(0,ao.jsx)("td",{children:e.efficiency})]},t)))})]})]})};function wM(){const e=Math.floor(1e3+9e3*Math.random());return"ASTRO".concat(e)}const RM=()=>{const[e,t]=(0,o.useState)({deviceName:"",serialNumber:"",quantity:0,functions:[],dateOfIntake:"",cost:0,staffId:"",usefulLife:0,depreciationRate:0}),[n,r]=(0,o.useState)([]),[l,a]=(0,o.useState)([]);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/staff")),t=await e.json();console.log("Fetched staff:",t),r(Array.isArray(t)?t:[])}catch(sE){console.error("Error fetching staff:",sE),r([])}})(),(async()=>{try{const e=await fetch("".concat(lo,"/products")),t=await e.json();console.log("Fetched products:",t),a(Array.isArray(t)?t:[])}catch(sE){console.error("Error fetching products:",sE),a([])}})()}),[]),(0,o.useEffect)((()=>{e.deviceName&&t((e=>Xe(Xe({},e),{},{serialNumber:wM()})))}),[e.deviceName]);const i=n=>{const{name:o,value:r}=n.target;t(Xe(Xe({},e),{},{[o]:r}))};return(0,ao.jsxs)("div",{className:"device-intake-container",children:[(0,ao.jsx)("h1",{children:"Device Intake"}),(0,ao.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("".concat(lo,"/devices"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.deviceName,serial_number:e.serialNumber})});if(!t.ok)throw new Error("Failed to submit device");const n=await t.json();alert(n.message||"Device intake recorded successfully!")}catch(sE){alert("An error occurred. Please try again.")}},className:"device-intake-form",children:[(0,ao.jsxs)("label",{children:["Device Name:",(0,ao.jsx)("input",{type:"text",name:"deviceName",value:e.deviceName,onChange:i,required:!0})]}),(0,ao.jsxs)("label",{children:["Device ID (Auto-generated):",(0,ao.jsx)("input",{type:"text",name:"serialNumber",value:e.serialNumber,readOnly:!0})]}),(0,ao.jsxs)("label",{children:["Quantity:",(0,ao.jsx)("input",{type:"number",name:"quantity",value:e.quantity,onChange:i,required:!0})]}),(0,ao.jsxs)("label",{children:["Functions:",(0,ao.jsx)("select",{name:"functions",value:e.functions,onChange:i,multiple:!0,children:l.map((e=>(0,ao.jsx)("option",{value:e.name,children:e.name},e.id)))})]}),(0,ao.jsxs)("label",{children:["Date of Intake:",(0,ao.jsx)("input",{type:"date",name:"dateOfIntake",value:e.dateOfIntake,onChange:i,required:!0})]}),(0,ao.jsxs)("label",{children:["Cost of Machine:",(0,ao.jsx)("input",{type:"number",name:"cost",value:e.cost,onChange:i,required:!0})]}),(0,ao.jsxs)("label",{children:["Select Staff:",(0,ao.jsx)("select",{name:"staffId",value:e.staffId,onChange:i,required:!0,children:n.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,ao.jsxs)("label",{children:["Useful Life (years):",(0,ao.jsx)("input",{type:"number",name:"usefulLife",value:e.usefulLife,onChange:i,required:!0})]}),(0,ao.jsxs)("label",{children:["Depreciation Rate (%):",(0,ao.jsx)("input",{type:"number",name:"depreciationRate",value:e.depreciationRate,onChange:i,required:!0})]}),(0,ao.jsx)("button",{type:"submit",children:"Submit"})]})]})};function WM(e){return yu("MuiCard",e)}vu("MuiCard",["root"]);const kM=["className","raised"],VM=mu(iR,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),XM=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiCard"}),{className:o,raised:r=!1}=n,l=Kg(n,kM),a=Xe(Xe({},n),{},{raised:r}),i=(e=>{const{classes:t}=e;return Ng({root:["root"]},WM,t)})(a);return(0,ao.jsx)(VM,Xe({className:Vg(i.root,o),elevation:r?8:void 0,ref:t,ownerState:a},l))})),xM=XM;function JM(e){return yu("MuiCardContent",e)}vu("MuiCardContent",["root"]);const NM=["className","component"],HM=mu("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),FM=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiCardContent"}),{className:o,component:r="div"}=n,l=Kg(n,NM),a=Xe(Xe({},n),{},{component:r}),i=(e=>{const{classes:t}=e;return Ng({root:["root"]},JM,t)})(a);return(0,ao.jsx)(HM,Xe({as:r,className:Vg(i.root,o),ownerState:a,ref:t},l))})),YM=FM,KM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/devices"));if(!e.ok)throw new Error("Failed to fetch devices");const n=await e.json();t(Array.isArray(n)?n:[])}catch(l){a("Error fetching devices")}finally{r(!1)}})()}),[]),n?(0,ao.jsx)("div",{children:"Loading devices..."}):l?(0,ao.jsx)("div",{className:"error",children:l}):(0,ao.jsxs)("div",{className:"device-list-container",children:[(0,ao.jsx)("h1",{children:"Device List"}),(0,ao.jsx)(iM,{container:!0,spacing:2,children:e.map((e=>(0,ao.jsx)(iM,{item:!0,xs:12,sm:6,md:4,children:(0,ao.jsx)(xM,{className:"device-card",variant:"outlined",children:(0,ao.jsxs)(YM,{children:[(0,ao.jsx)(rX,{variant:"h6",children:e.name}),(0,ao.jsxs)(rX,{variant:"body2",children:["ID: ",e.id]}),(0,ao.jsxs)(rX,{variant:"body2",children:["Serial: ",e.serial_number]}),(0,ao.jsxs)(rX,{variant:"body2",children:["Model: ",e.model||"N/A"]}),(0,ao.jsxs)(rX,{variant:"body2",children:["Manufacturer: ",e.manufacturer||"N/A"]}),(0,ao.jsxs)(rX,{variant:"body2",children:["Status: ",e.status||"N/A"]}),(0,ao.jsxs)(rX,{variant:"body2",children:["Location: ",e.location||"N/A"]}),(0,ao.jsxs)(rX,{variant:"body2",children:["Notes: ",e.notes||"N/A"]}),(0,ao.jsx)(zN,{variant:"contained",color:"primary",style:{marginTop:8},children:"View Details"})]})})},e.id)))})]})},MM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)({deviceId:"",date:"",technicianName:"",findings:"",nextMaintenanceDate:""});(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/devices")),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){console.error("Error fetching devices:",sE)}})()}),[]);const l=e=>{const{name:t,value:o}=e.target;r(Xe(Xe({},n),{},{[t]:o}))};return(0,ao.jsxs)("div",{className:"maintenance-log-container",children:[(0,ao.jsx)("h1",{children:"Device Maintenance Log"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("".concat(lo,"/device-maintenance/maintenance-logs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:n.deviceId,maintenance_date:n.date,performed_by:n.technicianName,description:n.findings,remarks:""})});if(!e.ok)throw new Error("Failed to submit maintenance log");const t=await e.json();alert(t.message||"Maintenance log recorded successfully!")}catch(sE){alert("An error occurred. Please try again.")}},className:"maintenance-log-form",children:[(0,ao.jsxs)("label",{children:["Select Device:",(0,ao.jsxs)("select",{name:"deviceId",value:n.deviceId,onChange:l,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"-- Select a Device --"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name||e.serial_number},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Date:",(0,ao.jsx)("input",{type:"date",name:"date",value:n.date,onChange:l,required:!0})]}),(0,ao.jsxs)("label",{children:["Technician Name:",(0,ao.jsx)("input",{type:"text",name:"technicianName",value:n.technicianName,onChange:l,required:!0})]}),(0,ao.jsxs)("label",{children:["Findings:",(0,ao.jsx)("textarea",{name:"findings",value:n.findings,onChange:l,required:!0})]}),(0,ao.jsxs)("label",{children:["Next Maintenance Date:",(0,ao.jsx)("input",{type:"date",name:"nextMaintenanceDate",value:n.nextMaintenanceDate,onChange:l,required:!0})]}),(0,ao.jsx)("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})},LM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)({deviceId:"",date:"",faultSeverity:"",actionRequired:""});(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/devices")),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){console.error("Error fetching devices:",sE)}})()}),[]);const l=e=>{const{name:t,value:o}=e.target;r(Xe(Xe({},n),{},{[t]:o}))};return(0,ao.jsxs)("div",{className:"fault-reporting-container",children:[(0,ao.jsx)("h1",{children:"Device Fault Reporting"}),(0,ao.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("".concat(lo,"/fault-reports"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();alert(t.message||"Fault reported successfully!")}catch(sE){alert("An error occurred. Please try again.")}},className:"fault-reporting-form",children:[(0,ao.jsxs)("label",{children:["Select Device:",(0,ao.jsxs)("select",{name:"deviceId",value:n.deviceId,onChange:l,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"-- Select a Device --"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.deviceName},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Date:",(0,ao.jsx)("input",{type:"date",name:"date",value:n.date,onChange:l,required:!0})]}),(0,ao.jsxs)("label",{children:["Nature of Fault:",(0,ao.jsxs)("select",{name:"faultSeverity",value:n.faultSeverity,onChange:l,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"-- Select Severity --"}),(0,ao.jsx)("option",{value:"Mild",children:"Mild"}),(0,ao.jsx)("option",{value:"Moderate",children:"Moderate"}),(0,ao.jsx)("option",{value:"Severe",children:"Severe"}),(0,ao.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,ao.jsxs)("label",{children:["Action Required:",(0,ao.jsx)("textarea",{name:"actionRequired",value:n.actionRequired,onChange:l,required:!0})]}),(0,ao.jsx)("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})},EM=()=>{const[e,t]=(0,o.useState)([]);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/devices")),n=await e.json();t(n)}catch(sE){console.error("Error fetching devices:",sE)}})()}),[]);const n=(e,t)=>{const n=new Date(t),o=(new Date-n)/31536e6;return Math.max(0,e-o).toFixed(2)};return(0,ao.jsxs)("div",{className:"device-list-container",children:[(0,ao.jsx)("h1",{children:"Device List"}),(0,ao.jsx)("ul",{className:"device-list",children:e.map((e=>(0,ao.jsxs)("li",{className:"device-item",children:[(0,ao.jsx)("h2",{children:e.deviceName}),(0,ao.jsxs)("p",{children:["Serial Number: ",e.serialNumber]}),(0,ao.jsxs)("p",{children:["Quantity: ",e.quantity]}),(0,ao.jsxs)("p",{children:["Residual Useful Life: ",n(e.usefulLife,e.dateOfIntake)," years"]})]},e.id)))})]})},zM=()=>{const e=te();return(0,ao.jsxs)("div",{className:"staff-management-container",children:[(0,ao.jsx)("h1",{children:"Staff Management"}),(0,ao.jsxs)("div",{className:"button-group",children:[(0,ao.jsx)("button",{className:"awesome-button",onClick:()=>e("/staff-list"),children:"Staff List"}),(0,ao.jsx)("button",{className:"awesome-button",onClick:()=>e("/salary-calculation"),children:"Salary Calculation"}),(0,ao.jsx)("button",{className:"awesome-button",onClick:()=>e("/staff-appraisal"),children:"Staff Appraisal"})]})]})},jM=[{field:"name",headerName:"Name",flex:1},{field:"staff_id",headerName:"Staff ID",flex:1},{field:"date_of_birth",headerName:"Date of Birth",flex:1},{field:"age",headerName:"Age",flex:.5},{field:"gender",headerName:"Gender",flex:.7},{field:"marital_status",headerName:"Marital Status",flex:1},{field:"phone_number",headerName:"Phone",flex:1},{field:"email",headerName:"Email",flex:1},{field:"next_of_kin_name",headerName:"Next of Kin",flex:1},{field:"next_of_kin_phone",headerName:"Next of Kin Phone",flex:1},{field:"bank_name",headerName:"Bank",flex:1},{field:"account_number",headerName:"Account Number",flex:1},{field:"address",headerName:"Address",flex:1},{field:"hourly_rate",headerName:"Hourly Rate",flex:1},{field:"role",headerName:"Role",flex:1},{field:"department",headerName:"Department",flex:1},{field:"appointment_type",headerName:"Appointment Type",flex:1}],DM=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/staff/")),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){console.error("Error fetching staff:",sE)}})()}),[]),(0,ao.jsxs)(MK,{className:"staff-list-container",sx:{height:600,width:"100%"},children:[(0,ao.jsx)("h1",{children:"Staff List"}),(0,ao.jsx)(NK,{rows:e.map(((e,t)=>Xe({id:e.id||t},e))),columns:jM,pageSize:10,rowsPerPageOptions:[10,20,50],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{background:"#fff",borderRadius:2,boxShadow:2}})]})},TM=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)({staffId:"",salaryRate:"",duration:"",hoursWorked:0,totalSalary:0});(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:8000/api/v1/staff"),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){console.error("Error fetching staff:",sE)}})()}),[]);const l=e=>{const{name:t,value:o}=e.target;r(Xe(Xe({},n),{},{[t]:o}))};return(0,ao.jsxs)("div",{className:"salary-calculation-container",children:[(0,ao.jsx)("h1",{children:"Salary Calculation"}),(0,ao.jsxs)("form",{className:"salary-calculation-form",children:[(0,ao.jsxs)("label",{children:["Select Staff:",(0,ao.jsxs)("select",{name:"staffId",value:n.staffId,onChange:l,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"-- Select a Staff --"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Salary Rate (per hour):",(0,ao.jsx)("input",{type:"number",name:"salaryRate",value:n.salaryRate,onChange:l,required:!0})]}),(0,ao.jsxs)("label",{children:["Duration:",(0,ao.jsx)("input",{type:"text",name:"duration",value:n.duration,onChange:l,required:!0})]}),(0,ao.jsx)("button",{type:"button",onClick:async()=>{try{const e=await fetch("http://localhost:8000/api/v1/hours-worked/".concat(n.staffId,"?duration=").concat(n.duration)),t=await e.json();r(Xe(Xe({},n),{},{hoursWorked:t.hoursWorked}))}catch(sE){console.error("Error fetching hours worked:",sE)}},className:"fetch-button",children:"Fetch Hours Worked"}),(0,ao.jsxs)("p",{children:["Hours Worked: ",n.hoursWorked]}),(0,ao.jsx)("button",{type:"button",onClick:()=>{const e=n.hoursWorked*parseFloat(n.salaryRate);r(Xe(Xe({},n),{},{totalSalary:e}))},className:"calculate-button",children:"Calculate Salary"}),(0,ao.jsxs)("p",{children:["Total Salary: ",n.totalSalary]}),(0,ao.jsx)("button",{type:"button",onClick:()=>{var t;const o=new jl;o.text("Salary Calculation",20,20),o.autoTable({head:[["Staff Name","Hours Worked","Salary Rate","Total Salary"]],body:[[(null===(t=e.find((e=>e.id===n.staffId)))||void 0===t?void 0:t.name)||"",n.hoursWorked,n.salaryRate,n.totalSalary]]}),o.save("salary_calculation.pdf")},className:"export-button",children:"Export to PDF"})]})]})};function PM(e){return yu("MuiAlert",e)}const UM=vu("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),QM=hW((0,ao.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),OM=hW((0,ao.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),qM=hW((0,ao.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),_M=hW((0,ao.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),$M=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],eL=mu(iR,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(qw(n.color||n.severity))]]}})(Ow((e=>{let{theme:t}=e;const n="light"===t.palette.mode?rI:aI,o="light"===t.palette.mode?aI:rI;return Xe(Xe({},t.typography.body2),{},{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(sR(["light"])).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(r,"Color")]:n(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(r,"StandardBg")]:o(t.palette[r].light,.9),["& .".concat(UM.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(r,"IconColor")]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter(sR(["light"])).map((e=>{let[o]=e;return{props:{colorSeverity:o,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:n(t.palette[o].light,.6),border:"1px solid ".concat((t.vars||t).palette[o].light),["& .".concat(UM.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}})),...Object.entries(t.palette).filter(sR(["dark"])).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:Xe({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(n,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(n,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})}))),tL=mu("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),nL=mu("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),oL=mu("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),rL={success:(0,ao.jsx)(QM,{fontSize:"inherit"}),warning:(0,ao.jsx)(OM,{fontSize:"inherit"}),error:(0,ao.jsx)(qM,{fontSize:"inherit"}),info:(0,ao.jsx)(_M,{fontSize:"inherit"})},lL=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiAlert"}),{action:o,children:r,className:l,closeText:a="Close",color:i,components:g={},componentsProps:s={},icon:c,iconMapping:d=rL,onClose:I,role:u="alert",severity:C="success",slotProps:p={},slots:A={},variant:m="standard"}=n,h=Kg(n,$M),b=Xe(Xe({},n),{},{color:i,severity:C,variant:m,colorSeverity:i||C}),f=(e=>{const{variant:t,color:n,severity:o,classes:r}=e;return Ng({root:["root","color".concat(qw(n||o)),"".concat(t).concat(qw(n||o)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]},PM,r)})(b),y={slots:Xe({closeButton:g.CloseButton,closeIcon:g.CloseIcon},A),slotProps:Xe(Xe({},s),p)},[v,Z]=SW("root",{ref:t,shouldForwardComponentProp:!0,className:Vg(f.root,l),elementType:eL,externalForwardedProps:Xe(Xe({},y),h),ownerState:b,additionalProps:{role:u,elevation:0}}),[G,S]=SW("icon",{className:f.icon,elementType:tL,externalForwardedProps:y,ownerState:b}),[B,w]=SW("message",{className:f.message,elementType:nL,externalForwardedProps:y,ownerState:b}),[R,W]=SW("action",{className:f.action,elementType:oL,externalForwardedProps:y,ownerState:b}),[k,V]=SW("closeButton",{elementType:IW,externalForwardedProps:y,ownerState:b}),[X,x]=SW("closeIcon",{elementType:YW,externalForwardedProps:y,ownerState:b});return(0,ao.jsxs)(v,Xe(Xe({},Z),{},{children:[!1!==c?(0,ao.jsx)(G,Xe(Xe({},S),{},{children:c||d[C]||rL[C]})):null,(0,ao.jsx)(B,Xe(Xe({},w),{},{children:r})),null!=o?(0,ao.jsx)(R,Xe(Xe({},W),{},{children:o})):null,null==o&&I?(0,ao.jsx)(R,Xe(Xe({},W),{},{children:(0,ao.jsx)(k,Xe(Xe({size:"small","aria-label":a,title:a,color:"inherit",onClick:I},V),{},{children:(0,ao.jsx)(X,Xe({fontSize:"small"},x))}))})):null]}))})),aL=lL;function iL(e){return yu("MuiTable",e)}vu("MuiTable",["root","stickyHeader"]);const gL=["className","component","padding","size","stickyHeader"],sL=mu("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(Ow((e=>{let{theme:t}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Xe(Xe({},t.typography.body2),{},{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"}),variants:[{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{borderCollapse:"separate"}}]}}))),cL="table",dL=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTable"}),{className:r,component:l=cL,padding:a="normal",size:i="medium",stickyHeader:g=!1}=n,s=Kg(n,gL),c=Xe(Xe({},n),{},{component:l,padding:a,size:i,stickyHeader:g}),d=(e=>{const{classes:t,stickyHeader:n}=e;return Ng({root:["root",n&&"stickyHeader"]},iL,t)})(c),I=o.useMemo((()=>({padding:a,size:i,stickyHeader:g})),[a,i,g]);return(0,ao.jsx)(sH.Provider,{value:I,children:(0,ao.jsx)(sL,Xe({as:l,role:l===cL?null:"table",ref:t,className:Vg(d.root,r),ownerState:c},s))})})),IL=dL;function uL(e){return yu("MuiTableBody",e)}vu("MuiTableBody",["root"]);const CL=["className","component"],pL=mu("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),AL={variant:"body"},mL="tbody",hL=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTableBody"}),{className:o,component:r=mL}=n,l=Kg(n,CL),a=Xe(Xe({},n),{},{component:r}),i=(e=>{const{classes:t}=e;return Ng({root:["root"]},uL,t)})(a);return(0,ao.jsx)(cH.Provider,{value:AL,children:(0,ao.jsx)(pL,Xe({className:Vg(i.root,o),as:r,ref:t,role:r===mL?null:"rowgroup",ownerState:a},l))})})),bL=hL;function fL(e){return yu("MuiTableContainer",e)}vu("MuiTableContainer",["root"]);const yL=["className","component"],vL=mu("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),ZL=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTableContainer"}),{className:o,component:r="div"}=n,l=Kg(n,yL),a=Xe(Xe({},n),{},{component:r}),i=(e=>{const{classes:t}=e;return Ng({root:["root"]},fL,t)})(a);return(0,ao.jsx)(vL,Xe({ref:t,as:r,className:Vg(i.root,o),ownerState:a},l))})),GL=ZL;function SL(e){return yu("MuiTableHead",e)}vu("MuiTableHead",["root"]);const BL=["className","component"],wL=mu("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),RL={variant:"head"},WL="thead",kL=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTableHead"}),{className:o,component:r=WL}=n,l=Kg(n,BL),a=Xe(Xe({},n),{},{component:r}),i=(e=>{const{classes:t}=e;return Ng({root:["root"]},SL,t)})(a);return(0,ao.jsx)(cH.Provider,{value:RL,children:(0,ao.jsx)(wL,Xe({as:r,className:Vg(i.root,o),ref:t,role:r===WL?null:"rowgroup",ownerState:a},l))})})),VL=kL;function XL(e){return yu("MuiTableRow",e)}const xL=vu("MuiTableRow",["root","selected","hover","head","footer"]),JL=["className","component","hover","selected"],NL=mu("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(Ow((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(xL.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(xL.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):nI(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):nI(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}}))),HL="tr",FL=o.forwardRef((function(e,t){const n=jw({props:e,name:"MuiTableRow"}),{className:r,component:l=HL,hover:a=!1,selected:i=!1}=n,g=Kg(n,JL),s=o.useContext(cH),c=Xe(Xe({},n),{},{component:l,hover:a,selected:i,head:s&&"head"===s.variant,footer:s&&"footer"===s.variant}),d=(e=>{const{classes:t,selected:n,hover:o,head:r,footer:l}=e;return Ng({root:["root",n&&"selected",o&&"hover",r&&"head",l&&"footer"]},XL,t)})(c);return(0,ao.jsx)(NL,Xe({as:l,ref:t,className:Vg(d.root,r),role:l===HL?null:"row",ownerState:c},g))})),YL=FL,KL=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)([]),[i,g]=(0,o.useState)(""),[s,c]=(0,o.useState)("");(0,o.useEffect)((()=>{fetch("".concat(lo,"/staff/")).then((e=>e.json())).then((e=>t(Array.isArray(e)?e:[])))}),[]);return(0,ao.jsxs)(MK,{sx:{maxWidth:800,mx:"auto",mt:4},children:[(0,ao.jsx)(rX,{variant:"h4",gutterBottom:!0,children:"Staff Appraisal"}),(0,ao.jsxs)(Ax,{fullWidth:!0,sx:{mb:2},children:[(0,ao.jsx)(sx,{children:"Select Staff"}),(0,ao.jsx)(gN,{value:n,label:"Select Staff",onChange:e=>r(e.target.value),children:e.map((e=>(0,ao.jsx)(VX,{value:e.id,children:e.name},e.id)))})]}),(0,ao.jsx)(zN,{variant:"contained",color:"primary",onClick:async()=>{if(g(""),c(""),n)try{const e=await fetch("".concat(lo,"/appraisal/appraisals/").concat(n)),t=await e.json();e.ok?(a(Array.isArray(t)?t:[]),c("Appraisal data fetched successfully.")):g(t.detail||"Error fetching appraisals.")}catch(gE){g("Network error.")}else g("Please select a staff member.")},sx:{mb:2},children:"Fetch Appraisal Data"}),(0,ao.jsx)(zN,{variant:"outlined",color:"secondary",onClick:()=>{const e=new jl;e.text("Staff Appraisal Report",20,20),e.autoTable({head:[["Date","Score","Remarks","Appraiser"]],body:l.map((e=>[e.date,e.score,e.remarks||"",e.appraiser||""]))}),e.save("staff_appraisal.pdf")},sx:{mb:2,ml:2},disabled:0===l.length,children:"Export as PDF"}),s&&(0,ao.jsx)(aL,{severity:"success",sx:{mb:2},children:s}),i&&(0,ao.jsx)(aL,{severity:"error",sx:{mb:2},children:i}),(0,ao.jsx)(rX,{variant:"h6",sx:{mt:4,mb:2},children:"Appraisal Records"}),(0,ao.jsx)(GL,{component:iR,children:(0,ao.jsxs)(IL,{size:"small",children:[(0,ao.jsx)(VL,{children:(0,ao.jsxs)(YL,{children:[(0,ao.jsx)(AH,{children:"Date"}),(0,ao.jsx)(AH,{children:"Score"}),(0,ao.jsx)(AH,{children:"Remarks"}),(0,ao.jsx)(AH,{children:"Appraiser"})]})}),(0,ao.jsx)(bL,{children:l.map((e=>(0,ao.jsxs)(YL,{children:[(0,ao.jsx)(AH,{children:e.date}),(0,ao.jsx)(AH,{children:e.score}),(0,ao.jsx)(AH,{children:e.remarks}),(0,ao.jsx)(AH,{children:e.appraiser})]},e.id)))})]})})]})},ML=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)({staffId:"",duration:"",hourlyRate:"",hoursWorked:0,totalSalary:0});(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/staff")),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){console.error("Error fetching staff:",sE)}})()}),[]);const l=e=>{const{name:t,value:o}=e.target;r(Xe(Xe({},n),{},{[t]:o}))};return(0,ao.jsxs)("div",{className:"salary-console-container",children:[(0,ao.jsx)("h1",{children:"Salary Console"}),(0,ao.jsxs)("form",{className:"salary-console-form",children:[(0,ao.jsxs)("label",{children:["Select Staff:",(0,ao.jsxs)("select",{name:"staffId",value:n.staffId,onChange:l,required:!0,children:[(0,ao.jsx)("option",{value:"",children:"-- Select a Staff --"}),e.map((e=>(0,ao.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,ao.jsxs)("label",{children:["Duration:",(0,ao.jsx)("input",{type:"text",name:"duration",value:n.duration,onChange:l,required:!0})]}),(0,ao.jsxs)("label",{children:["Hourly Rate (\u20a6):",(0,ao.jsx)("input",{type:"number",name:"hourlyRate",value:n.hourlyRate,onChange:l,required:!0})]}),(0,ao.jsx)("button",{type:"button",onClick:async()=>{try{const e=await fetch("".concat(lo,"/hours-worked/").concat(n.staffId,"?duration=").concat(n.duration)),t=await e.json();r(Xe(Xe({},n),{},{hoursWorked:t.hoursWorked}))}catch(sE){console.error("Error fetching hours worked:",sE)}},className:"fetch-button",children:"Fetch Hours Worked"}),(0,ao.jsxs)("p",{children:["Hours Worked: ",n.hoursWorked]}),(0,ao.jsx)("button",{type:"button",onClick:()=>{const e=n.hoursWorked*parseFloat(n.hourlyRate);r(Xe(Xe({},n),{},{totalSalary:e}))},className:"calculate-button",children:"Calculate Salary"}),(0,ao.jsxs)("p",{children:["Total Salary: \u20a6",n.totalSalary]}),(0,ao.jsx)("button",{type:"button",onClick:()=>{var t;const o=new jl;o.text("Payslip",20,20),o.autoTable({head:[["Field","Value"]],body:[["Staff Name",(null===(t=e.find((e=>e.id===n.staffId)))||void 0===t?void 0:t.name)||""],["Duration",n.duration],["Hourly Rate (\u20a6)",n.hourlyRate],["Hours Worked",n.hoursWorked],["Total Salary (\u20a6)",n.totalSalary]]}),o.save("payslip.pdf")},className:"generate-button",children:"Generate Payslip"})]})]})},LL=()=>{const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/salary-records")),n=await e.json();t(Array.isArray(n)?n:[])}catch(sE){console.error("Error fetching salary records:",sE)}})()}),[]),(0,ao.jsxs)("div",{className:"salary-records-container",children:[(0,ao.jsx)("h1",{children:"Salary Records"}),(0,ao.jsxs)("table",{className:"salary-records-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Staff ID"}),(0,ao.jsx)("th",{children:"Name"}),(0,ao.jsx)("th",{children:"Month"}),(0,ao.jsx)("th",{children:"Hours Worked"}),(0,ao.jsx)("th",{children:"Hourly Rate"}),(0,ao.jsx)("th",{children:"Total Salary"})]})}),(0,ao.jsx)("tbody",{children:e.map(((e,t)=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.staffId}),(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.month}),(0,ao.jsx)("td",{children:e.hoursWorked}),(0,ao.jsx)("td",{children:e.hourlyRate}),(0,ao.jsx)("td",{children:e.totalSalary})]},t)))})]})]})},EL=[{field:"id",headerName:"Payslip ID",flex:.7},{field:"employee_id",headerName:"Staff ID",flex:1},{field:"salary",headerName:"Salary",flex:1},{field:"bonus",headerName:"Bonus",flex:1},{field:"deductions",headerName:"Deductions",flex:1},{field:"net_pay",headerName:"Net Pay",flex:1},{field:"period",headerName:"Period",flex:1}],zL=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/payroll"));if(!e.ok)throw new Error("Failed to fetch payslips");const n=await e.json();t(Array.isArray(n)?n.map(((e,t)=>Xe(Xe({},e),{},{id:e.id||t}))):[])}catch(jr){r(jr.message)}})()}),[]),n?(0,ao.jsxs)("div",{className:"error",children:["Error: ",n]}):(0,ao.jsxs)(MK,{className:"salary-report-container",sx:{height:600,width:"100%"},children:[(0,ao.jsx)(rX,{variant:"h4",gutterBottom:!0,children:"Salary Report (Payslips)"}),(0,ao.jsx)(NK,{rows:e,columns:EL,pageSize:10,rowsPerPageOptions:[10,20,50],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{background:"#fff",borderRadius:2,boxShadow:2}})]})},jL=()=>{const e=te();return(0,ao.jsxs)("div",{className:"reports-analysis-container",children:[(0,ao.jsx)("h1",{children:"Reports & Analysis"}),(0,ao.jsxs)("div",{className:"reports-buttons",children:[(0,ao.jsx)("button",{onClick:()=>{console.log("Navigating to Customers Performance"),e("/customers-performance")},className:"reports-button",children:"Customers Performance"}),(0,ao.jsx)("button",{onClick:()=>{console.log("Navigating to Staff Performance"),e("/staff-performance")},className:"reports-button",children:"Staff Performance"})]})]})},DL=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{(async()=>{try{console.log("Fetching customers performance data...");const e=await fetch("".concat(lo,"/customer-performance/"));if(console.log("Response status:",e.status),!e.ok)throw new Error("Failed to fetch customers performance");const n=await e.json();console.log("Fetched data:",n),t(n)}catch(jr){console.error("Error fetching customers performance:",jr),r(jr.message)}})()}),[]),n?(0,ao.jsxs)("div",{className:"error",children:["Error: ",n]}):(0,ao.jsxs)("div",{className:"customers-performance-container",children:[(0,ao.jsx)("h1",{children:"Customers Performance"}),(0,ao.jsxs)("table",{className:"customers-performance-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Customer Name"}),(0,ao.jsx)("th",{children:"Transactions"}),(0,ao.jsx)("th",{children:"Percentage Contribution"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.transactions}),(0,ao.jsxs)("td",{children:[e.percentage_contribution,"%"]})]},e.id)))})]})]})},TL=[{field:"name",headerName:"Staff Name",flex:1},{field:"attendance_records",headerName:"Attendance Records",flex:1},{field:"production_participation",headerName:"Production Participation",flex:1}],PL=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/staff-performance"));if(!e.ok)throw new Error("Failed to fetch staff performance");const n=await e.json();t(Array.isArray(n)?n.map((e=>Xe(Xe({},e),{},{id:e.id}))):[])}catch(jr){r(jr.message)}})()}),[]),n?(0,ao.jsxs)("div",{className:"error",children:["Error: ",n]}):(0,ao.jsxs)(MK,{className:"staff-performance-container",sx:{height:600,width:"100%"},children:[(0,ao.jsx)(rX,{variant:"h4",gutterBottom:!0,children:"Staff Performance"}),(0,ao.jsx)(NK,{rows:e,columns:TL,pageSize:10,rowsPerPageOptions:[10,20,50],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{background:"#fff",borderRadius:2,boxShadow:2}})]})},UL=()=>{const[e,t]=(0,o.useState)({appName:"",theme:""}),[n,r]=(0,o.useState)(""),[l,a]=(0,o.useState)(null),[i,g]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:8000/api/v1/settings"),n=await e.json();t(n)}catch(sE){console.error("Error fetching settings:",sE)}})()}),[]);return(0,ao.jsxs)("div",{className:"settings-container",children:[(0,ao.jsx)("h1",{children:"Settings"}),(0,ao.jsxs)("div",{className:"settings-buttons",children:[(0,ao.jsx)("button",{onClick:()=>alert("Change Background Image"),children:"Change Background Image"}),(0,ao.jsx)("button",{onClick:()=>alert("Select Fonts"),children:"Select Fonts"}),(0,ao.jsx)("button",{onClick:()=>alert("Themes"),children:"Themes"}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{htmlFor:"page-select",children:"Select Page:"}),(0,ao.jsxs)("select",{id:"page-select",value:n,onChange:e=>{r(e.target.value)},children:[(0,ao.jsx)("option",{value:"",children:"--Select a Page--"}),[{path:"/dashboard",name:"Dashboard"},{path:"/registration",name:"Registration"},{path:"/inventory",name:"Inventory"},{path:"/payroll",name:"Payroll"},{path:"/attendance",name:"Attendance"},{path:"/factory-inventory",name:"Factory Inventory"},{path:"/login",name:"Login"},{path:"/stock-intake",name:"Stock Intake"},{path:"/stock-level",name:"Stock Level"},{path:"/grant-access",name:"Grant Access"},{path:"/timed-attendance",name:"Timed Attendance"},{path:"/attendance-record",name:"Attendance Record"},{path:"/attendance-analysis",name:"Attendance Analysis"},{path:"/product-stock-intake",name:"Product Stock Intake"},{path:"/product-stock-level",name:"Product Stock Level"},{path:"/generate-invoice",name:"Generate Invoice"},{path:"/sales-summary",name:"Sales Summary"},{path:"/customer-performance",name:"Customer Performance"},{path:"/sales-inventory",name:"Sales Inventory"},{path:"/database-table",name:"Database Table"},{path:"/register-customer",name:"Register Customer"}].map((e=>(0,ao.jsx)("option",{value:e.path,children:e.name},e.path)))]})]}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{htmlFor:"image-upload",children:"Upload Background Image:"}),(0,ao.jsx)("input",{type:"file",id:"image-upload",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=()=>{a(e.result),alert("Background image for ".concat(n," updated successfully!"))},e.readAsDataURL(t)}},disabled:!n})]}),(0,ao.jsxs)("div",{children:[(0,ao.jsx)("label",{htmlFor:"font-select",children:"Select Font:"}),(0,ao.jsxs)("select",{id:"font-select",value:i,onChange:e=>{const t=e.target.value;g(t),document.body.style.fontFamily=t,alert("Font changed to ".concat(t," successfully!"))},children:[(0,ao.jsx)("option",{value:"",children:"--Select a Font--"}),(0,ao.jsx)("option",{value:"Arial, sans-serif",children:"Arial"}),(0,ao.jsx)("option",{value:"'Courier New', monospace",children:"Courier New"}),(0,ao.jsx)("option",{value:"'Georgia', serif",children:"Georgia"}),(0,ao.jsx)("option",{value:"'Times New Roman', serif",children:"Times New Roman"}),(0,ao.jsx)("option",{value:"'Verdana', sans-serif",children:"Verdana"})]})]})]})]})},QL=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)("");(0,o.useEffect)((()=>{ro.get("/api/users/pending").then((e=>t(e.data))).catch((e=>r("Failed to fetch users.")))}),[]);return(0,ao.jsxs)("div",{className:"approve-user-container",children:[(0,ao.jsx)("h1",{children:"Approve Users"}),n&&(0,ao.jsx)("p",{className:"error-message",children:n}),(0,ao.jsx)("ul",{children:e.map((n=>(0,ao.jsxs)("li",{className:"user-item",children:[(0,ao.jsxs)("span",{children:[n.username," (",n.role,")"]}),(0,ao.jsx)("button",{onClick:()=>{return o=n.id,void ro.post("/api/approve-user/".concat(o)).then((()=>{t(e.filter((e=>e.id!==o)))})).catch((()=>r("Failed to approve user.")));var o},className:"approve-button",children:"Approve"})]},n.id)))})]})},OL=()=>(0,ao.jsxs)("div",{className:"admin-dashboard-container",children:[(0,ao.jsxs)("header",{className:"admin-dashboard-header",children:[(0,ao.jsx)("h1",{children:"Admin Dashboard"}),(0,ao.jsx)("nav",{children:(0,ao.jsxs)("ul",{className:"admin-dashboard-nav",children:[(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/admin/users",children:"Manage Users"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/admin/customers",children:"Customers"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/admin/suppliers",children:"Suppliers"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/admin/inventory",children:"Inventory"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/admin/reports",children:"Reports"})}),(0,ao.jsx)("li",{children:(0,ao.jsx)(we,{to:"/admin/settings",children:"Settings"})})]})})]}),(0,ao.jsx)("main",{className:"admin-dashboard-main",children:(0,ao.jsxs)("section",{className:"admin-dashboard-welcome",children:[(0,ao.jsx)("h2",{children:"Welcome, Admin!"}),(0,ao.jsx)("p",{children:"Select a section from the navigation above to manage the system."})]})})]}),qL=e=>{let{title:t,children:n}=e;return(0,ao.jsxs)("section",{className:"admin-section",children:[(0,ao.jsx)("h2",{children:t}),(0,ao.jsx)("div",{className:"admin-section-content",children:n})]})},_L=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/customers"));if(!e.ok)throw new Error("Failed to fetch customers");const n=await e.json();t(n)}catch(jr){a(jr.message)}finally{r(!1)}})()}),[]),(0,ao.jsx)(qL,{title:"Customers",children:(0,ao.jsxs)("div",{className:"admin-customers-list",children:[n&&(0,ao.jsx)("p",{children:"Loading..."}),l&&(0,ao.jsx)("p",{className:"error",children:l}),!n&&!l&&0===e.length&&(0,ao.jsx)("p",{children:"No customers found."}),!n&&!l&&e.length>0&&(0,ao.jsxs)("table",{className:"admin-customers-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Name"}),(0,ao.jsx)("th",{children:"Customer ID"}),(0,ao.jsx)("th",{children:"Phone"}),(0,ao.jsx)("th",{children:"Address"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.customer_id}),(0,ao.jsx)("td",{children:e.phone_number}),(0,ao.jsx)("td",{children:e.address})]},e.id)))})]})]})})},$L=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/suppliers"));if(!e.ok)throw new Error("Failed to fetch suppliers");const n=await e.json();t(n)}catch(jr){a(jr.message)}finally{r(!1)}})()}),[]),(0,ao.jsx)(qL,{title:"Suppliers",children:(0,ao.jsxs)("div",{className:"admin-suppliers-list",children:[n&&(0,ao.jsx)("p",{children:"Loading..."}),l&&(0,ao.jsx)("p",{className:"error",children:l}),!n&&!l&&0===e.length&&(0,ao.jsx)("p",{children:"No suppliers found."}),!n&&!l&&e.length>0&&(0,ao.jsxs)("table",{className:"admin-suppliers-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Name"}),(0,ao.jsx)("th",{children:"Supplier ID"}),(0,ao.jsx)("th",{children:"Phone"}),(0,ao.jsx)("th",{children:"Address"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.supplier_id}),(0,ao.jsx)("td",{children:e.phone_number}),(0,ao.jsx)("td",{children:e.address})]},e.id)))})]})]})})},eE=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/staff"));if(!e.ok)throw new Error("Failed to fetch users");const n=await e.json();t(n)}catch(jr){a(jr.message)}finally{r(!1)}})()}),[]),(0,ao.jsx)(qL,{title:"Users",children:(0,ao.jsxs)("div",{className:"admin-users-list",children:[n&&(0,ao.jsx)("p",{children:"Loading..."}),l&&(0,ao.jsx)("p",{className:"error",children:l}),!n&&!l&&0===e.length&&(0,ao.jsx)("p",{children:"No users found."}),!n&&!l&&e.length>0&&(0,ao.jsxs)("table",{className:"admin-users-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Name"}),(0,ao.jsx)("th",{children:"Username"}),(0,ao.jsx)("th",{children:"Role"}),(0,ao.jsx)("th",{children:"Status"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.name||e.full_name||"-"}),(0,ao.jsx)("td",{children:e.username}),(0,ao.jsx)("td",{children:e.role}),(0,ao.jsx)("td",{children:e.status||"-"})]},e.id)))})]})]})})},tE=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/inventory/stock-level"));if(!e.ok)throw new Error("Failed to fetch inventory");const n=await e.json();t(n)}catch(jr){a(jr.message)}finally{r(!1)}})()}),[]),(0,ao.jsx)(qL,{title:"Inventory",children:(0,ao.jsxs)("div",{className:"admin-inventory-list",children:[n&&(0,ao.jsx)("p",{children:"Loading..."}),l&&(0,ao.jsx)("p",{className:"error",children:l}),!n&&!l&&0===e.length&&(0,ao.jsx)("p",{children:"No inventory records found."}),!n&&!l&&e.length>0&&(0,ao.jsxs)("table",{className:"admin-inventory-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Product"}),(0,ao.jsx)("th",{children:"SKU"}),(0,ao.jsx)("th",{children:"Stock Level"}),(0,ao.jsx)("th",{children:"Unit"})]})}),(0,ao.jsx)("tbody",{children:e.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.product_name||e.name}),(0,ao.jsx)("td",{children:e.sku||"-"}),(0,ao.jsx)("td",{children:e.stock_level}),(0,ao.jsx)("td",{children:e.unit||"-"})]},e.id||e.sku)))})]})]})})},nE=[{key:"sales",label:"Sales Report"},{key:"production",label:"Production Report"},{key:"staff-performance",label:"Staff Performance"},{key:"salary-report",label:"Salary Report"}],oE=()=>{const[e,t]=(0,o.useState)(nE[0].key),[n,r]=(0,o.useState)(null),[l,a]=(0,o.useState)(!1),[i,g]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{a(!0),g(""),r(null);let t="".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/reports/").concat(e);"sales"!==e&&"production"!==e||(t+="?start_date=2024-01-01&end_date=2024-12-31");try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch report");const n=await e.json();r(n)}catch(jr){g(jr.message)}finally{a(!1)}})()}),[e]);return(0,ao.jsx)(qL,{title:"Reports",children:(0,ao.jsxs)("div",{className:"admin-reports-list",children:[(0,ao.jsx)("div",{style:{marginBottom:"1rem"},children:nE.map((n=>(0,ao.jsx)("button",{className:e===n.key?"reports-button selected":"reports-button",onClick:()=>t(n.key),style:{marginRight:"10px",padding:"8px 18px",borderRadius:"6px",border:"none",background:e===n.key?"#8e44ad":"#e5e7eb",color:e===n.key?"#fff":"#333",fontWeight:"bold",cursor:"pointer"},children:n.label},n.key)))}),l&&(0,ao.jsx)("p",{children:"Loading..."}),i&&(0,ao.jsx)("p",{className:"error",children:i}),!l&&!i&&(n?"salary-report"===e?(0,ao.jsxs)("table",{className:"admin-reports-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Total Salary"}),(0,ao.jsx)("th",{children:"Total Bonus"}),(0,ao.jsx)("th",{children:"Total Deductions"}),(0,ao.jsx)("th",{children:"Net Salary"})]})}),(0,ao.jsx)("tbody",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:n.total_salary}),(0,ao.jsx)("td",{children:n.total_bonus}),(0,ao.jsx)("td",{children:n.total_deductions}),(0,ao.jsx)("td",{children:n.total_net_salary})]})})]}):"staff-performance"===e&&n.staff?(0,ao.jsxs)("table",{className:"admin-reports-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Staff Name"}),(0,ao.jsx)("th",{children:"Attendance Records"}),(0,ao.jsx)("th",{children:"Production Participation"})]})}),(0,ao.jsx)("tbody",{children:n.staff.map((e=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:e.name}),(0,ao.jsx)("td",{children:e.attendance_records}),(0,ao.jsx)("td",{children:e.production_participation})]},e.id)))})]}):(0,ao.jsx)("pre",{style:{background:"#f5f7fa",padding:"1rem",borderRadius:"8px",overflowX:"auto"},children:JSON.stringify(n,null,2)}):null)]})})},rE=()=>{const[e,t]=(0,o.useState)(null),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://astrobsm-oracle-backend.onrender.com/api/v1","/settings"));if(!e.ok)throw new Error("Failed to fetch settings");const n=await e.json();t(n)}catch(jr){a(jr.message)}finally{r(!1)}})()}),[]),(0,ao.jsx)(qL,{title:"Settings",children:(0,ao.jsxs)("div",{className:"admin-settings-container",children:[n&&(0,ao.jsx)("p",{children:"Loading..."}),l&&(0,ao.jsx)("p",{className:"error",children:l}),!n&&!l&&e&&(0,ao.jsx)("div",{className:"admin-settings-list",children:Object.entries(e).map((e=>{let[t,n]=e;return(0,ao.jsxs)("div",{className:"admin-settings-item",children:[(0,ao.jsx)("span",{className:"admin-settings-key",children:t}),(0,ao.jsx)("span",{className:"admin-settings-value",children:String(n)})]},t)}))}),!n&&!l&&!e&&(0,ao.jsx)("p",{children:"No settings found."})]})})},lE=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)(""),s=(0,o.useRef)(null);(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(lo,"/auth/pending-users"));if(!e.ok)throw new Error("Failed to fetch pending users");const n=await e.json();t(n)}catch(jr){a(jr.message)}finally{r(!1)}})()}),[]);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";s.current&&(s.current.textContent=e,s.current.className="success"===t?"success":"error",s.current.style.display="block",setTimeout((()=>{s.current&&(s.current.style.display="none")}),3e3))};return(0,ao.jsxs)("div",{className:"admin-approvals-container",children:[(0,ao.jsx)("h2",{children:"Pending User Approvals"}),(0,ao.jsx)("div",{ref:s,style:{display:"none",marginBottom:"16px",padding:"10px",borderRadius:"4px",fontWeight:"bold"}}),n&&(0,ao.jsx)("p",{children:"Loading..."}),l&&(0,ao.jsx)("p",{className:"error",children:l}),i&&(0,ao.jsx)("p",{className:"success",children:i}),!n&&0===e.length&&(0,ao.jsx)("p",{children:"No pending users."}),!n&&e.length>0&&(0,ao.jsxs)("table",{className:"approvals-table",children:[(0,ao.jsx)("thead",{children:(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("th",{children:"Full Name"}),(0,ao.jsx)("th",{children:"Email"}),(0,ao.jsx)("th",{children:"Phone"}),(0,ao.jsx)("th",{children:"Role"}),(0,ao.jsx)("th",{children:"Status"}),(0,ao.jsx)("th",{children:"Action"})]})}),(0,ao.jsx)("tbody",{children:e.map((n=>(0,ao.jsxs)("tr",{children:[(0,ao.jsx)("td",{children:n.full_name||"-"}),(0,ao.jsx)("td",{children:n.username||n.email||"-"}),(0,ao.jsx)("td",{children:n.phone||"-"}),(0,ao.jsx)("td",{children:n.role}),(0,ao.jsx)("td",{children:n.status}),(0,ao.jsx)("td",{children:(0,ao.jsx)("button",{onClick:()=>(async n=>{a(""),g("");try{if(!(await fetch("".concat(lo,"/auth/approve-user/").concat(n),{method:"POST"})).ok)throw new Error("Failed to approve user");g("User approved successfully!"),c("User approved successfully!","success"),t(e.filter((e=>e.id!==n)))}catch(jr){a(jr.message),c(jr.message,"error")}})(n.id),children:"Approve"})})]},n.id)))})]})]})},aE=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)({device_id:"",date:"",fault_nature:"",action_required:""}),[l,a]=(0,o.useState)(""),[i,g]=(0,o.useState)("");(0,o.useEffect)((()=>{fetch("".concat(lo,"/devices/")).then((e=>e.json())).then((e=>t(Array.isArray(e)?e:[])))}),[]);const s=e=>{r(Xe(Xe({},n),{},{[e.target.name]:e.target.value}))};return(0,ao.jsxs)(MK,{sx:{maxWidth:600,mx:"auto",mt:4},children:[(0,ao.jsx)(rX,{variant:"h4",gutterBottom:!0,children:"Device Fault Reporting"}),(0,ao.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a(""),g(""),n.device_id&&n.date&&n.fault_nature&&n.action_required)try{const e=await fetch("".concat(lo,"/device-fault-reporting/device-fault-reports"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:n.device_id,date:n.date,fault_nature:n.fault_nature,action_required:n.action_required})}),t=await e.json();e.ok?(a("Device fault report submitted successfully."),r({device_id:"",date:"",fault_nature:"",action_required:""})):g(t.detail||"Error submitting fault report.")}catch(e){g("Network error.")}else g("All fields are required.")},children:[(0,ao.jsxs)(Ax,{fullWidth:!0,sx:{mb:2},children:[(0,ao.jsx)(sx,{children:"Select Device"}),(0,ao.jsx)(gN,{name:"device_id",value:n.device_id,label:"Select Device",onChange:s,required:!0,children:e.map((e=>(0,ao.jsx)(VX,{value:e.id,children:e.deviceName||e.name||e.id},e.id)))})]}),(0,ao.jsx)(CN,{label:"Date",name:"date",type:"date",value:n.date,onChange:s,fullWidth:!0,sx:{mb:2},InputLabelProps:{shrink:!0},required:!0}),(0,ao.jsx)(CN,{label:"Nature of Fault",name:"fault_nature",value:n.fault_nature,onChange:s,fullWidth:!0,sx:{mb:2},required:!0}),(0,ao.jsx)(CN,{label:"Action Required",name:"action_required",value:n.action_required,onChange:s,fullWidth:!0,sx:{mb:2},required:!0}),(0,ao.jsx)(zN,{variant:"contained",color:"primary",type:"submit",children:"Submit Fault Report"})]}),l&&(0,ao.jsx)(aL,{severity:"success",sx:{mt:2},children:l}),i&&(0,ao.jsx)(aL,{severity:"error",sx:{mt:2},children:i})]})},iE=()=>{const[e,t]=(0,o.useState)(!1),[n,r]=(0,o.useState)(!0),l=te();return(0,o.useEffect)((()=>{localStorage.getItem("token")?t(!0):(t(!1),l("/login")),r(!1)}),[l]),e||n?(console.log("Rendering Routes with current location:",window.location.pathname),(0,ao.jsxs)("div",{className:"app-container",children:[(0,ao.jsx)(go,{}),(0,ao.jsx)("div",{className:"page-container",id:"main-content",children:(0,ao.jsxs)(he,{children:[(0,ao.jsx)(Ae,{path:"/",element:(0,ao.jsx)(nr,{})}),(0,ao.jsx)(Ae,{path:"/dashboard",element:(0,ao.jsx)(OL,{})}),(0,ao.jsx)(Ae,{path:"/registration",element:(0,ao.jsx)(qo,{})}),(0,ao.jsx)(Ae,{path:"/inventory",element:(0,ao.jsx)(_o,{})}),(0,ao.jsx)(Ae,{path:"/payroll",element:(0,ao.jsx)($o,{})}),(0,ao.jsx)(Ae,{path:"/attendance",element:(0,ao.jsx)(er,{})}),(0,ao.jsx)(Ae,{path:"/factory-inventory",element:(0,ao.jsx)(tr,{})}),(0,ao.jsx)(Ae,{path:"/login",element:(0,ao.jsx)(nr,{})}),(0,ao.jsx)(Ae,{path:"/stock-intake",element:(0,ao.jsx)(or,{})}),(0,ao.jsx)(Ae,{path:"/stock-level",element:(0,ao.jsx)(rr,{})}),(0,ao.jsx)(Ae,{path:"/grant-access",element:(0,ao.jsx)(lr,{})}),(0,ao.jsx)(Ae,{path:"/timed-attendance",element:(0,ao.jsx)(gr,{})}),(0,ao.jsx)(Ae,{path:"/attendance-record",element:(0,ao.jsx)(sr,{})}),(0,ao.jsx)(Ae,{path:"/attendance-analysis",element:(0,ao.jsx)(cr,{})}),(0,ao.jsx)(Ae,{path:"/product-stock-intake",element:(0,ao.jsx)(Ir,{})}),(0,ao.jsx)(Ae,{path:"/product-stock-level",element:(0,ao.jsx)(ur,{})}),(0,ao.jsx)(Ae,{path:"/generate-invoice",element:(0,ao.jsx)(Gg,{})}),(0,ao.jsx)(Ae,{path:"/sales-summary",element:(0,ao.jsx)(sM,{})}),(0,ao.jsx)(Ae,{path:"/customer-performance",element:(0,ao.jsx)(dM,{})}),(0,ao.jsx)(Ae,{path:"/sales-inventory",element:(0,ao.jsx)(IM,{})}),(0,ao.jsx)(Ae,{path:"/database-table",element:(0,ao.jsx)(uM,{})}),(0,ao.jsx)(Ae,{path:"/register-customer",element:(0,ao.jsx)(qo,{})}),(0,ao.jsx)(Ae,{path:"/production-inventory",element:(0,ao.jsx)(CM,{})}),(0,ao.jsx)(Ae,{path:"/raw-material-stock-intake",element:(0,ao.jsx)(AM,{})}),(0,ao.jsx)(Ae,{path:"/raw-material-stock-level",element:(0,ao.jsx)(mM,{})}),(0,ao.jsx)(Ae,{path:"/register-production-requirement",element:(0,ao.jsx)(yM,{})}),(0,ao.jsx)(Ae,{path:"/production-console",element:(0,ao.jsx)(ZM,{})}),(0,ao.jsx)(Ae,{path:"/production-output",element:(0,ao.jsx)(SM,{})}),(0,ao.jsx)(Ae,{path:"/production-analysis",element:(0,ao.jsx)(BM,{})}),(0,ao.jsx)(Ae,{path:"/factory-inventory/device-intake",element:(0,ao.jsx)(RM,{})}),(0,ao.jsx)(Ae,{path:"/factory-inventory/device-list",element:(0,ao.jsx)(KM,{})}),(0,ao.jsx)(Ae,{path:"/factory-inventory/device-maintenance-log",element:(0,ao.jsx)(MM,{})}),(0,ao.jsx)(Ae,{path:"/factory-inventory/device-fault-reporting",element:(0,ao.jsx)(LM,{})}),(0,ao.jsx)(Ae,{path:"/device-list",element:(0,ao.jsx)(EM,{})}),(0,ao.jsx)(Ae,{path:"/device-maintenance-log",element:(0,ao.jsx)(MM,{})}),(0,ao.jsx)(Ae,{path:"/device-fault-reporting",element:(0,ao.jsx)(LM,{})}),(0,ao.jsx)(Ae,{path:"/staff-management",element:(0,ao.jsx)(zM,{})}),(0,ao.jsx)(Ae,{path:"/staff-list",element:(0,ao.jsx)(DM,{})}),(0,ao.jsx)(Ae,{path:"/salary-calculation",element:(0,ao.jsx)(TM,{})}),(0,ao.jsx)(Ae,{path:"/staff-appraisal",element:(0,ao.jsx)(KL,{})}),(0,ao.jsx)(Ae,{path:"/salary-console",element:(0,ao.jsx)(ML,{})}),(0,ao.jsx)(Ae,{path:"/salary-records",element:(0,ao.jsx)(LL,{})}),(0,ao.jsx)(Ae,{path:"/salary-report",element:(0,ao.jsx)(zL,{})}),(0,ao.jsx)(Ae,{path:"/reports-analysis",element:(0,ao.jsx)(jL,{})}),(0,ao.jsx)(Ae,{path:"/customers-performance",element:(0,ao.jsx)(DL,{})}),(0,ao.jsx)(Ae,{path:"/staff-performance",element:(0,ao.jsx)(PL,{})}),(0,ao.jsx)(Ae,{path:"/settings",element:(0,ao.jsx)(UL,{})}),(0,ao.jsx)(Ae,{path:"/approve-users",element:(0,ao.jsx)(QL,{})}),(0,ao.jsx)(Ae,{path:"/admin/customers",element:(0,ao.jsx)(_L,{})}),(0,ao.jsx)(Ae,{path:"/admin/suppliers",element:(0,ao.jsx)($L,{})}),(0,ao.jsx)(Ae,{path:"/admin/users",element:(0,ao.jsx)(eE,{})}),(0,ao.jsx)(Ae,{path:"/admin/inventory",element:(0,ao.jsx)(tE,{})}),(0,ao.jsx)(Ae,{path:"/admin/reports",element:(0,ao.jsx)(oE,{})}),(0,ao.jsx)(Ae,{path:"/admin/settings",element:(0,ao.jsx)(rE,{})}),(0,ao.jsx)(Ae,{path:"/admin/user-approvals",element:(0,ao.jsx)(lE,{})}),(0,ao.jsx)(Ae,{path:"/admin-dashboard",element:(0,ao.jsx)(OL,{})}),(0,ao.jsx)(Ae,{path:"/device-fault-report",element:(0,ao.jsx)(aE,{})}),(0,ao.jsx)(Ae,{path:"*",element:(0,ao.jsxs)("div",{children:["Route not found: ",window.location.pathname]})})]})})]})):(0,ao.jsx)(io,{})};l.createRoot(document.getElementById("root")).render((0,ao.jsx)(o.StrictMode,{children:(0,ao.jsx)(Ge,{children:(0,ao.jsx)(iE,{})})})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("Service Worker registered with scope:",e.scope)})).catch((e=>{console.error("Service Worker registration failed:",e)}))}))})()})();
//# sourceMappingURL=main.c56ea14a.js.map